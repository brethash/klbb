var h=Object.defineProperty;var c=(n,t,r)=>t in n?h(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r;var s=(n,t,r)=>(c(n,typeof t!="symbol"?t+"":t,r),r);import{P as i}from"./vendor.c2cc9365.js";const d=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(e){if(e.ep)return;e.ep=!0;const o=r(e);fetch(e.href,o)}};d();var u={type:i.AUTO,parent:"game",backgroundColor:"#33A5E7",physics:{default:"arcade",arcade:{gravity:{y:500}}},scale:{width:800,height:600,mode:i.Scale.FIT,autoCenter:i.Scale.CENTER_BOTH}};class p extends i.Physics.Arcade.Sprite{constructor(t){super(t.scene,t.startX,t.startY,t.spriteId);s(this,"body");s(this,"_hitPoints");s(this,"_jumpSound");s(this,"_physics");this.initSprite(),this.initPhysics(t.physics),t.jumpSound&&(this.jumpSound=t.jumpSound),t.hitPoints&&(this.hitPoints=t.hitPoints),this.scene.add.existing(this)}initSprite(){this.setScale(1)}initPhysics(t){this.scene.physics.world.enable(this),t.velocityX&&t.velocityY?this.body.setVelocity(t.velocityX,t.velocityY):t.velocityX?this.body.setVelocityX(t.velocityX):t.velocityY&&this.body.setVelocityY(t.velocityY),t.bounceX&&t.bounceY?this.body.setBounce(t.bounceX,t.bounceY):t.bounceX?this.body.setBounceX(t.bounceX):t.bounceY&&this.body.setBounceY(t.bounceY),this.body.setCollideWorldBounds(t.colliderWorldBounds)}get hitPoints(){return this._hitPoints}set hitPoints(t){this._hitPoints=t}get jumpSound(){return this._jumpSound}set jumpSound(t){this._jumpSound=t}set physics(t){this._physics=t,this.initPhysics(this.physics)}get physics(){return this._physics}}class y{constructor(t){s(this,"_bounceX",0);s(this,"_bounceY",0);s(this,"_velocityX",0);s(this,"_velocityY",0);s(this,"_colliderWorldBounds",!1);t.bounceX&&(this.bounceX=t.bounceX),t.bounceY&&(this.bounceY=t.bounceY),t.velocityX&&(this.velocityX=t.velocityX),t.velocityY&&(this.velocityY=t.velocityY),t.colliderWorldBounds&&(this.colliderWorldBounds=t.colliderWorldBounds)}get colliderWorldBounds(){return this._colliderWorldBounds}set colliderWorldBounds(t){this._colliderWorldBounds=t}get bounceY(){return this._bounceY}set bounceY(t){this._bounceY=t}get bounceX(){return this._bounceX}set bounceX(t){this._bounceX=t}get velocityY(){return this._velocityY}set velocityY(t){this._velocityY=t}get velocityX(){return this._velocityX}set velocityX(t){this._velocityX=t}}class f extends i.Scene{constructor(){super("GameScene");s(this,"player");s(this,"stars");s(this,"rockets");s(this,"bombs");s(this,"ground");s(this,"platforms");s(this,"cursors");s(this,"score",0);s(this,"gameOver");s(this,"scoreText");s(this,"hitPointsText");s(this,"music")}preload(){this.load.spritesheet("dude","./assets/characters/dude.png",{frameWidth:32,frameHeight:48}),this.load.spritesheet("potatohat","./assets/characters/potatohat-3.png",{frameWidth:32,frameHeight:54}),this.load.spritesheet("vgchk","./assets/characters/vgchk.png",{frameWidth:32,frameHeight:24}),this.load.image("sky","./assets/sky.png"),this.load.image("appleWorld","./assets/scenes/main/appleWorld.png"),this.load.image("ground","./assets/platform.png"),this.load.image("star","./assets/star.png"),this.load.image("bomb","./assets/bomb.png"),this.load.image("fire","./assets/fire.png"),this.load.image("rockets","./assets/rocket.png"),this.load.audio("goatSong",["./assets/audio/goatminjr.ogg"]),this.load.audio("jumpSound",["./assets/audio/hero_jump.wav"])}create(){this.add.image(400,300,"appleWorld"),this.platforms=this.physics.add.staticGroup(),this.ground=this.platforms.create(400,568,"ground").setScale(2).refreshBody(),this.platforms.create(600,400,"ground"),this.platforms.create(50,250,"ground"),this.platforms.create(750,220,"ground"),this.hitPoints=3;const t={scene:this,spriteId:"potatohat",startX:100,startY:450,jumpSound:"jumpSound",physics:new y({bounceX:.2,colliderWorldBounds:!0}),hitPoints:3};this.player=new p(t),this.anims.create({key:"left",frames:this.anims.generateFrameNumbers("potatohat",{start:0,end:3}),frameRate:10,repeat:-1}),this.anims.create({key:"turn",frames:[{key:"potatohat",frame:4}],frameRate:20}),this.anims.create({key:"right",frames:this.anims.generateFrameNumbers("potatohat",{start:5,end:8}),frameRate:10,repeat:-1}),this.cursors=this.input.keyboard.createCursorKeys(),this.rockets=this.physics.add.group({key:"rockets",repeat:11,setXY:{x:12,y:0,stepX:70}}),this.rockets.children.iterate(function(r){r.setBounceY(i.Math.FloatBetween(.4,.8))}),this.makeStars(),this.bombs=this.physics.add.group(),this.scoreText=this.add.text(16,16,"score: 0",{fontSize:"32px",color:"#000"}),this.hitPointsText=this.add.text(16,40,"hit points: "+this.player.hitPoints,{fontSize:"32px",color:"#000"}),this.physics.add.collider(this.player,this.platforms),this.physics.add.collider(this.rockets,this.platforms),this.physics.add.collider(this.bombs,this.platforms),this.physics.add.overlap(this.player,this.rockets,this.collectRocket,null,this),this.physics.add.collider(this.player,this.bombs,this.hitBomb,null,this),this.music=this.sound.add("goatSong",{volume:.5,loop:!0}),this.sound.locked?this.sound.once(i.Sound.Events.UNLOCKED,()=>{this.music.play()}):this.music.play()}update(){if(this.gameOver){this.add.text(300,300,"Try Again?!",{color:"#0f0",backgroundColor:"#fc035a",fontSize:"38px"}).setPadding({x:20,y:10}).setInteractive().on("pointerdown",()=>{this.music.stop(),this.scene.restart(),this.gameOver=!1});return}this.cursors.left.isDown?(this.player.setVelocityX(-160),this.player.anims.play("left",!0)):this.cursors.right.isDown?(this.player.setVelocityX(160),this.player.anims.play("right",!0)):(this.player.setVelocityX(0),this.player.anims.play("turn")),this.cursors.up.isDown&&this.player.body.touching.down&&(this.sound.play(this.player.jumpSound,{volume:.9,loop:!1}),this.player.setVelocityY(-430),this.makeStars())}makeStars(){this.stars=this.physics.add.group({key:"star",repeat:11,setXY:{x:this.player.x<400?i.Math.Between(400,800):i.Math.Between(0,400),y:0,stepX:35}}),this.stars.children.iterate(function(t){t.setBounceY(i.Math.FloatBetween(.8,1)),t.allowGravity=!1,t.setVelocity(i.Math.Between(-200,200),20)}),this.physics.add.collider(this.stars,this.ground)}collectRocket(t,r){if(r.disableBody(!0,!0),this.score+=10,this.scoreText.setText("Score: "+this.score),this.rockets.countActive(!0)===0){this.rockets.children.iterate(function(o){o.enableBody(!0,o.x,0,!0,!0)});var a=this.player.x<400?i.Math.Between(400,800):i.Math.Between(0,400),e=this.bombs.create(a,16,"bomb");e.setBounce(1),e.setCollideWorldBounds(!0),e.setVelocity(i.Math.Between(-200,200),20),e.allowGravity=!1}}hitBomb(t,r){var a=this.add.particles("fire"),e=a.createEmitter({speed:100,scale:{start:1,end:0},blendMode:"ADD"});e.startFollow(r),this.physics.pause(),this.player.setTint(16711680),this.player.anims.play("turn"),this.player.hitPoints--,this.player.hitPoints==0?(this.gameOver=!0,this.hitPointsText.setText("hit points: 0")):(this.physics.resume(),this.hitPointsText.setText("hit points: "+this.player.hitPoints),this.player.setTint())}}new i.Game(Object.assign(u,{scene:[f]}));
