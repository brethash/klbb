var sf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function nf(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}var wa={exports:{}};(function(x,i){(function(c,t){x.exports=t()})(sf,function(){return function(e){var c={};function t(s){if(c[s])return c[s].exports;var u=c[s]={i:s,l:!1,exports:{}};return e[s].call(u.exports,u,u.exports,t),u.l=!0,u.exports}return t.m=e,t.c=c,t.d=function(s,u,n){t.o(s,u)||Object.defineProperty(s,u,{enumerable:!0,get:n})},t.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},t.t=function(s,u){if(u&1&&(s=t(s)),u&8||u&4&&typeof s=="object"&&s&&s.__esModule)return s;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:s}),u&2&&typeof s!="string")for(var h in s)t.d(n,h,function(o){return s[o]}.bind(null,h));return n},t.n=function(s){var u=s&&s.__esModule?function(){return s.default}:function(){return s};return t.d(u,"a",u),u},t.o=function(s,u){return Object.prototype.hasOwnProperty.call(s,u)},t.p="",t(t.s=1528)}([function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}function s(r,a,d){var l=d?r[a]:Object.getOwnPropertyDescriptor(r,a);return!d&&l.value&&typeof l.value=="object"&&(l=l.value),l&&t(l)?(typeof l.enumerable=="undefined"&&(l.enumerable=!0),typeof l.configurable=="undefined"&&(l.configurable=!0),l):!1}function u(r,a){var d=Object.getOwnPropertyDescriptor(r,a);return d?(d.value&&typeof d.value=="object"&&(d=d.value),d.configurable===!1):!1}function n(r,a,d,l){for(var f in a)if(!!a.hasOwnProperty(f)){var v=s(a,f,d);if(v!==!1){var g=l||r;if(u(g.prototype,f)){if(o.ignoreFinals)continue;throw new Error("cannot override final property '"+f+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(r.prototype,f,v)}else r.prototype[f]=a[f]}}function h(r,a){if(!!a){Array.isArray(a)||(a=[a]);for(var d=0;d<a.length;d++)n(r,a[d].prototype||a[d])}}function o(r){r||(r={});var a,d;if(r.initialize){if(typeof r.initialize!="function")throw new Error("initialize must be a function");a=r.initialize,delete r.initialize}else if(r.Extends){var l=r.Extends;a=function(){l.apply(this,arguments)}}else a=function(){};r.Extends?(a.prototype=Object.create(r.Extends.prototype),a.prototype.constructor=a,d=r.Extends,delete r.Extends):a.prototype.constructor=a;var f=null;return r.Mixins&&(f=r.Mixins,delete r.Mixins),h(a,f),n(a,r,!0,d),a}o.extend=n,o.mixin=h,o.ignoreFinals=!1,e.exports=o},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h=typeof s;return!s||h==="number"||h==="string"?n:s.hasOwnProperty(u)&&s[u]!==void 0?s[u]:n};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(124),n=new s({initialize:function(o,r){this.x=0,this.y=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0):(r===void 0&&(r=o),this.x=o||0,this.y=r||0)},clone:function(){return new n(this.x,this.y)},copy:function(h){return this.x=h.x||0,this.y=h.y||0,this},setFromObject:function(h){return this.x=h.x||0,this.y=h.y||0,this},set:function(h,o){return o===void 0&&(o=h),this.x=h,this.y=o,this},setTo:function(h,o){return this.set(h,o)},setToPolar:function(h,o){return o==null&&(o=1),this.x=Math.cos(h)*o,this.y=Math.sin(h)*o,this},equals:function(h){return this.x===h.x&&this.y===h.y},fuzzyEquals:function(h,o){return u(this.x,h.x,o)&&u(this.y,h.y,o)},angle:function(){var h=Math.atan2(this.y,this.x);return h<0&&(h+=2*Math.PI),h},setAngle:function(h){return this.setToPolar(h,this.length())},add:function(h){return this.x+=h.x,this.y+=h.y,this},subtract:function(h){return this.x-=h.x,this.y-=h.y,this},multiply:function(h){return this.x*=h.x,this.y*=h.y,this},scale:function(h){return isFinite(h)?(this.x*=h,this.y*=h):(this.x=0,this.y=0),this},divide:function(h){return this.x/=h.x,this.y/=h.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(h){var o=h.x-this.x,r=h.y-this.y;return Math.sqrt(o*o+r*r)},distanceSq:function(h){var o=h.x-this.x,r=h.y-this.y;return o*o+r*r},length:function(){var h=this.x,o=this.y;return Math.sqrt(h*h+o*o)},setLength:function(h){return this.normalize().scale(h)},lengthSq:function(){var h=this.x,o=this.y;return h*h+o*o},normalize:function(){var h=this.x,o=this.y,r=h*h+o*o;return r>0&&(r=1/Math.sqrt(r),this.x=h*r,this.y=o*r),this},normalizeRightHand:function(){var h=this.x;return this.x=this.y*-1,this.y=h,this},normalizeLeftHand:function(){var h=this.x;return this.x=this.y,this.y=h*-1,this},dot:function(h){return this.x*h.x+this.y*h.y},cross:function(h){return this.x*h.y-this.y*h.x},lerp:function(h,o){o===void 0&&(o=0);var r=this.x,a=this.y;return this.x=r+o*(h.x-r),this.y=a+o*(h.y-a),this},transformMat3:function(h){var o=this.x,r=this.y,a=h.val;return this.x=a[0]*o+a[3]*r+a[6],this.y=a[1]*o+a[4]*r+a[7],this},transformMat4:function(h){var o=this.x,r=this.y,a=h.val;return this.x=a[0]*o+a[4]*r+a[12],this.y=a[1]*o+a[5]*r+a[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(h){var o=this.length();return o&&o>h&&this.scale(h/o),this},reflect:function(h){return h=h.clone().normalize(),this.subtract(h.scale(2*this.dot(h)))},mirror:function(h){return this.reflect(h).negate()},rotate:function(h){var o=Math.cos(h),r=Math.sin(h);return this.set(o*this.x-r*this.y,r*this.x+o*this.y)}});n.ZERO=new n,n.RIGHT=new n(1,0),n.LEFT=new n(-1,0),n.UP=new n(0,-1),n.DOWN=new n(0,1),n.ONE=new n(1,1),e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(56),n=new s({initialize:function(o,r){o===void 0&&(o=0),r===void 0&&(r=o),this.type=u.POINT,this.x=o,this.y=r},setTo:function(h,o){return h===void 0&&(h=0),o===void 0&&(o=h),this.x=h,this.y=o,this}});e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(24),n=t(20),h=new s({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},existing:function(o){return(o.renderCanvas||o.renderWebGL)&&this.displayList.add(o),o.preUpdate&&this.updateList.add(o),o},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});h.register=function(o,r){h.prototype.hasOwnProperty(o)||(h.prototype[o]=r)},h.remove=function(o){h.prototype.hasOwnProperty(o)&&delete h.prototype[o]},u.register("GameObjectFactory",h,"add"),e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(!s||typeof s=="number")return n;if(s.hasOwnProperty(u))return s[u];if(u.indexOf(".")!==-1){for(var h=u.split("."),o=s,r=n,a=0;a<h.length;a++)if(o.hasOwnProperty(h[a]))r=o[h[a]],o=o[h[a]];else{r=n;break}return r}else return n};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){if(typeof s!="object"||s.nodeType||s===s.window)return!1;try{if(s.constructor&&!{}.hasOwnProperty.call(s.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={},s={install:function(u){for(var n in t)u[n]=t[n]},register:function(u,n){t[u]=n},destroy:function(){t={}}};e.exports=s},function(e,c,t){var s=Object.prototype.hasOwnProperty,u="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(u=!1));function h(d,l,f){this.fn=d,this.context=l,this.once=f||!1}function o(d,l,f,v,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new h(f,v||d,g),m=u?u+l:l;return d._events[m]?d._events[m].fn?d._events[m]=[d._events[m],p]:d._events[m].push(p):(d._events[m]=p,d._eventsCount++),d}function r(d,l){--d._eventsCount==0?d._events=new n:delete d._events[l]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],f,v;if(this._eventsCount===0)return l;for(v in f=this._events)s.call(f,v)&&l.push(u?v.slice(1):v);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(f)):l},a.prototype.listeners=function(l){var f=u?u+l:l,v=this._events[f];if(!v)return[];if(v.fn)return[v.fn];for(var g=0,p=v.length,m=new Array(p);g<p;g++)m[g]=v[g].fn;return m},a.prototype.listenerCount=function(l){var f=u?u+l:l,v=this._events[f];return v?v.fn?1:v.length:0},a.prototype.emit=function(l,f,v,g,p,m){var y=u?u+l:l;if(!this._events[y])return!1;var T=this._events[y],C=arguments.length,S,E;if(T.fn){switch(T.once&&this.removeListener(l,T.fn,void 0,!0),C){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,f),!0;case 3:return T.fn.call(T.context,f,v),!0;case 4:return T.fn.call(T.context,f,v,g),!0;case 5:return T.fn.call(T.context,f,v,g,p),!0;case 6:return T.fn.call(T.context,f,v,g,p,m),!0}for(E=1,S=new Array(C-1);E<C;E++)S[E-1]=arguments[E];T.fn.apply(T.context,S)}else{var P=T.length,M;for(E=0;E<P;E++)switch(T[E].once&&this.removeListener(l,T[E].fn,void 0,!0),C){case 1:T[E].fn.call(T[E].context);break;case 2:T[E].fn.call(T[E].context,f);break;case 3:T[E].fn.call(T[E].context,f,v);break;case 4:T[E].fn.call(T[E].context,f,v,g);break;default:if(!S)for(M=1,S=new Array(C-1);M<C;M++)S[M-1]=arguments[M];T[E].fn.apply(T[E].context,S)}}return!0},a.prototype.on=function(l,f,v){return o(this,l,f,v,!1)},a.prototype.once=function(l,f,v){return o(this,l,f,v,!0)},a.prototype.removeListener=function(l,f,v,g){var p=u?u+l:l;if(!this._events[p])return this;if(!f)return r(this,p),this;var m=this._events[p];if(m.fn)m.fn===f&&(!g||m.once)&&(!v||m.context===v)&&r(this,p);else{for(var y=0,T=[],C=m.length;y<C;y++)(m[y].fn!==f||g&&!m[y].once||v&&m[y].context!==v)&&T.push(m[y]);T.length?this._events[p]=T.length===1?T[0]:T:r(this,p)}return this},a.prototype.removeAllListeners=function(l){var f;return l?(f=u?u+l:l,this._events[f]&&r(this,f)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=u,a.EventEmitter=a,e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(57),n=t(171),h=t(306),o=t(56),r=t(47),a=t(174),d=new s({initialize:function(f,v,g,p){f===void 0&&(f=0),v===void 0&&(v=0),g===void 0&&(g=0),p===void 0&&(p=0),this.type=o.RECTANGLE,this.x=f,this.y=v,this.width=g,this.height=p},contains:function(l,f){return u(this,l,f)},getPoint:function(l,f){return n(this,l,f)},getPoints:function(l,f,v){return h(this,l,f,v)},getRandomPoint:function(l){return a(this,l)},setTo:function(l,f,v,g){return this.x=l,this.y=f,this.width=v,this.height=g,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(l,f){return f===void 0&&(f=l),this.x=l,this.y=f,this},setSize:function(l,f){return f===void 0&&(f=l),this.width=l,this.height=f,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(l){return l===void 0&&(l=new r),l.setTo(this.x,this.y,this.right,this.y),l},getLineB:function(l){return l===void 0&&(l=new r),l.setTo(this.right,this.y,this.right,this.bottom),l},getLineC:function(l){return l===void 0&&(l=new r),l.setTo(this.right,this.bottom,this.x,this.bottom),l},getLineD:function(l){return l===void 0&&(l=new r),l.setTo(this.x,this.bottom,this.x,this.y),l},left:{get:function(){return this.x},set:function(l){l>=this.right?this.width=0:this.width=this.right-l,this.x=l}},right:{get:function(){return this.x+this.width},set:function(l){l<=this.x?this.width=0:this.width=l-this.x}},top:{get:function(){return this.y},set:function(l){l>=this.bottom?this.height=0:this.height=this.bottom-l,this.y=l}},bottom:{get:function(){return this.y+this.height},set:function(l){l<=this.y?this.height=0:this.height=l-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(l){this.x=l-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(l){this.y=l-this.height/2}}});e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Alpha:t(607),AlphaSingle:t(303),BlendMode:t(304),ComputedSize:t(608),Crop:t(609),Depth:t(305),Flip:t(610),GetBounds:t(611),Mask:t(309),Origin:t(632),PathFollower:t(633),Pipeline:t(167),ScrollFactor:t(312),Size:t(634),Texture:t(635),TextureCrop:t(636),Tint:t(637),ToJSON:t(176),Transform:t(313),TransformMatrix:t(25),Visible:t(314)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(s){for(var u="",n=0;n<s;++n)n>0&&(u+=`
else `),n<s-1&&(u+="if(test == "+n+".0){}");return u}e.exports={getTintFromFloats:function(s,u,n,h){var o=(s*255|0)&255,r=(u*255|0)&255,a=(n*255|0)&255,d=(h*255|0)&255;return(d<<24|o<<16|r<<8|a)>>>0},getTintAppendFloatAlpha:function(s,u){var n=(u*255|0)&255;return(n<<24|s)>>>0},getTintAppendFloatAlphaAndSwap:function(s,u){var n=(s>>16|0)&255,h=(s>>8|0)&255,o=(s|0)&255,r=(u*255|0)&255;return(r<<24|o<<16|h<<8|n)>>>0},getFloatsFromUintRGB:function(s){var u=(s>>16|0)&255,n=(s>>8|0)&255,h=(s|0)&255;return[u/255,n/255,h/255]},checkShaderMax:function(s,u){(!u||u===-1)&&(u=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS));for(var n=s.createShader(s.FRAGMENT_SHADER),h=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var o=h.replace(/%forloop%/gi,t(u));if(s.shaderSource(n,o),s.compileShader(n),!s.getShaderParameter(n,s.COMPILE_STATUS))u=u/2|0;else break}return u},parseFragmentShaderMaxTextures:function(s,u){if(!s)return"";for(var n="",h=0;h<u;h++)h>0&&(n+=`
	else `),h<u-1&&(n+="if (outTexId < "+h+".5)"),n+=`
	{`,n+=`
		texture = texture2D(uMainSampler[`+h+"], outTexCoord);",n+=`
	}`;return s=s.replace(/%count%/gi,u.toString()),s.replace(/%forloop%/gi,n)}}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(193),u=t(6),n=function(h,o,r){var a=u(h,o,null);if(a===null)return r;if(Array.isArray(a))return s.RND.pick(a);if(typeof a=="object"){if(a.hasOwnProperty("randInt"))return s.RND.integerInRange(a.randInt[0],a.randInt[1]);if(a.hasOwnProperty("randFloat"))return s.RND.realInRange(a.randFloat[0],a.randFloat[1])}else if(typeof a=="function")return a(o);return a};e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(176),n=t(101),h=t(9),o=t(75),r=t(20),a=new s({Extends:h,initialize:function(l,f){h.call(this),this.scene=l,this.displayList=null,this.type=f,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(o.ADDED_TO_SCENE,this.addedToScene,this),this.on(o.REMOVED_FROM_SCENE,this.removedFromScene,this),l.sys.queueDepthSort()},setActive:function(d){return this.active=d,this},setName:function(d){return this.name=d,this},setState:function(d){return this.state=d,this},setDataEnabled:function(){return this.data||(this.data=new n(this)),this},setData:function(d,l){return this.data||(this.data=new n(this)),this.data.set(d,l),this},incData:function(d,l){return this.data||(this.data=new n(this)),this.data.inc(d,l),this},toggleData:function(d){return this.data||(this.data=new n(this)),this.data.toggle(d),this},getData:function(d){return this.data||(this.data=new n(this)),this.data.get(d)},setInteractive:function(d,l,f){return this.scene.sys.input.enable(this,d,l,f),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return u(this)},willRender:function(d){return!(a.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&d.id)},getIndexList:function(){for(var d=this,l=this.parentContainer,f=[];l&&(f.unshift(l.getIndex(d)),d=l,l.parentContainer);)l=l.parentContainer;return this.displayList?f.unshift(this.displayList.getIndex(d)):f.unshift(this.scene.sys.displayList.getIndex(d)),f},addToDisplayList:function(d){return d===void 0&&(d=this.scene.sys.displayList),this.displayList&&this.displayList!==d&&this.removeFromDisplayList(),d.exists(this)||(this.displayList=d,d.add(this,!0),d.queueDepthSort(),this.emit(o.ADDED_TO_SCENE,this,this.scene),d.events.emit(r.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var d=this.displayList||this.scene.sys.displayList;return d.exists(this)&&(d.remove(this,!0),d.queueDepthSort(),this.displayList=null,this.emit(o.REMOVED_FROM_SCENE,this,this.scene),d.events.emit(r.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(d){!this.scene||this.ignoreDestroy||(d===void 0&&(d=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(o.DESTROY,this,d),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});a.RENDER_MASK=15,e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(24),n=t(20),h=new s({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});h.register=function(o,r){h.prototype.hasOwnProperty(o)||(h.prototype[o]=r)},h.remove=function(o){h.prototype.hasOwnProperty(o)&&delete h.prototype[o]},u.register("GameObjectCreator",h,"make"),e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(7),u=function(){var n,h,o,r,a,d,l=arguments[0]||{},f=1,v=arguments.length,g=!1;for(typeof l=="boolean"&&(g=l,l=arguments[1]||{},f=2),v===f&&(l=this,--f);f<v;f++)if((n=arguments[f])!=null)for(h in n)o=l[h],r=n[h],l!==r&&(g&&r&&(s(r)||(a=Array.isArray(r)))?(a?(a=!1,d=o&&Array.isArray(o)?o:[]):d=o&&s(o)?o:{},l[h]=u(g,d,r)):r!==void 0&&(l[h]=r));return l};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return Math.max(u,Math.min(n,s))};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25),u=new s,n=new s,h=new s,o={camera:u,sprite:n,calc:h},r=function(a,d,l){var f=u,v=n,g=h;return v.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),f.copyFrom(d.matrix),l?(f.multiplyWithOffset(l,-d.scrollX*a.scrollFactorX,-d.scrollY*a.scrollFactorY),v.e=a.x,v.f=a.y):(v.e-=d.scrollX*a.scrollFactorX,v.f-=d.scrollY*a.scrollFactorY),f.multiply(v,g),o};e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADDED_TO_SCENE:t(656),BOOT:t(657),CREATE:t(658),DESTROY:t(659),PAUSE:t(660),POST_UPDATE:t(661),PRE_RENDER:t(662),PRE_UPDATE:t(663),READY:t(664),REMOVED_FROM_SCENE:t(665),RENDER:t(666),RESUME:t(667),SHUTDOWN:t(668),SLEEP:t(669),START:t(670),TRANSITION_COMPLETE:t(671),TRANSITION_INIT:t(672),TRANSITION_OUT:t(673),TRANSITION_START:t(674),TRANSITION_WAKE:t(675),UPDATE:t(676),WAKE:t(677)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BLUR:t(612),BOOT:t(613),CONTEXT_LOST:t(614),CONTEXT_RESTORED:t(615),DESTROY:t(616),FOCUS:t(617),HIDDEN:t(618),PAUSE:t(619),POST_RENDER:t(620),POST_STEP:t(621),PRE_RENDER:t(622),PRE_STEP:t(623),READY:t(624),RESUME:t(625),STEP:t(626),VISIBLE:t(627)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(95),h=t(2),o=t(155),r=t(240),a=t(517),d=t(156),l=new s({initialize:function(v,g){this.loader=v,this.cache=h(g,"cache",!1),this.type=h(g,"type",!1),this.key=h(g,"key",!1);var p=this.key;if(v.prefix&&v.prefix!==""&&(this.key=v.prefix+p),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var m=h(g,"url");m===void 0?m=v.path+p+"."+h(g,"extension",""):typeof m=="string"&&!m.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(m=v.path+m),this.url=m,this.src="",this.xhrSettings=d(h(g,"responseType",void 0)),h(g,"xhrSettings",!1)&&(this.xhrSettings=r(this.xhrSettings,h(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?u.FILE_POPULATED:u.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=h(g,"config",{}),this.multiFile,this.linkFile},setLink:function(f){this.linkFile=f,f.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===u.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=u.FILE_LOADING,this.src=o(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=a(this,this.loader.xhr))},onLoad:function(f,v){var g=f.responseURL&&(f.responseURL.indexOf("file://")===0||f.responseURL.indexOf("capacitor://")===0),p=g&&v.target.status===0,m=!(v.target&&v.target.status!==200)||p;f.readyState===4&&f.status>=400&&f.status<=599&&(m=!1),this.state=u.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,m)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(f){f.lengthComputable&&(this.bytesLoaded=f.loaded,this.bytesTotal=f.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=u.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=u.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=u.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(f){f===void 0&&(f=this.data);var v=this.key,g=this.type;this.loader.emit(n.FILE_COMPLETE,v,g,f),this.loader.emit(n.FILE_KEY_COMPLETE+g+"-"+v,v,g,f),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});l.createObjectURL=function(f,v,g){if(typeof URL=="function")f.src=URL.createObjectURL(v);else{var p=new FileReader;p.onload=function(){f.removeAttribute("crossOrigin"),f.src="data:"+(v.type||g)+";base64,"+p.result.split(",")[1]},p.onerror=f.onerror,p.readAsDataURL(v)}},l.revokeObjectURL=function(f){typeof URL=="function"&&URL.revokeObjectURL(f.src)},e.exports=l},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={},s={},u={};u.register=function(n,h,o,r){r===void 0&&(r=!1),t[n]={plugin:h,mapping:o,custom:r}},u.registerCustom=function(n,h,o,r){s[n]={plugin:h,mapping:o,data:r}},u.hasCore=function(n){return t.hasOwnProperty(n)},u.hasCustom=function(n){return s.hasOwnProperty(n)},u.getCore=function(n){return t[n]},u.getCustom=function(n){return s[n]},u.getCustomClass=function(n){return s.hasOwnProperty(n)?s[n].plugin:null},u.remove=function(n){t.hasOwnProperty(n)&&delete t[n]},u.removeCustom=function(n){s.hasOwnProperty(n)&&delete s[n]},u.destroyCorePlugins=function(){for(var n in t)t.hasOwnProperty(n)&&delete t[n]},u.destroyCustomPlugins=function(){for(var n in s)s.hasOwnProperty(n)&&delete s[n]},e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(14),n=t(3),h=new s({initialize:function(r,a,d,l,f,v){r===void 0&&(r=1),a===void 0&&(a=0),d===void 0&&(d=0),l===void 0&&(l=1),f===void 0&&(f=0),v===void 0&&(v=0),this.matrix=new Float32Array([r,a,d,l,f,v,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(o){this.matrix[0]=o}},b:{get:function(){return this.matrix[1]},set:function(o){this.matrix[1]=o}},c:{get:function(){return this.matrix[2]},set:function(o){this.matrix[2]=o}},d:{get:function(){return this.matrix[3]},set:function(o){this.matrix[3]=o}},e:{get:function(){return this.matrix[4]},set:function(o){this.matrix[4]=o}},f:{get:function(){return this.matrix[5]},set:function(o){this.matrix[5]=o}},tx:{get:function(){return this.matrix[4]},set:function(o){this.matrix[4]=o}},ty:{get:function(){return this.matrix[5]},set:function(o){this.matrix[5]=o}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var o=this.matrix,r=o[0],a=o[1],d=o[2],l=o[3];return r||a?a>0?Math.acos(r/this.scaleX):-Math.acos(r/this.scaleX):d||l?u.TAU-(l>0?Math.acos(-d/this.scaleY):-Math.acos(d/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var o=this.matrix;return o[0]=1,o[1]=0,o[2]=0,o[3]=1,o[4]=0,o[5]=0,this},translate:function(o,r){var a=this.matrix;return a[4]=a[0]*o+a[2]*r+a[4],a[5]=a[1]*o+a[3]*r+a[5],this},scale:function(o,r){var a=this.matrix;return a[0]*=o,a[1]*=o,a[2]*=r,a[3]*=r,this},rotate:function(o){var r=Math.sin(o),a=Math.cos(o),d=this.matrix,l=d[0],f=d[1],v=d[2],g=d[3];return d[0]=l*a+v*r,d[1]=f*a+g*r,d[2]=l*-r+v*a,d[3]=f*-r+g*a,this},multiply:function(o,r){var a=this.matrix,d=o.matrix,l=a[0],f=a[1],v=a[2],g=a[3],p=a[4],m=a[5],y=d[0],T=d[1],C=d[2],S=d[3],E=d[4],P=d[5],M=r===void 0?this:r;return M.a=y*l+T*v,M.b=y*f+T*g,M.c=C*l+S*v,M.d=C*f+S*g,M.e=E*l+P*v+p,M.f=E*f+P*g+m,M},multiplyWithOffset:function(o,r,a){var d=this.matrix,l=o.matrix,f=d[0],v=d[1],g=d[2],p=d[3],m=d[4],y=d[5],T=r*f+a*g+m,C=r*v+a*p+y,S=l[0],E=l[1],P=l[2],M=l[3],A=l[4],R=l[5];return d[0]=S*f+E*g,d[1]=S*v+E*p,d[2]=P*f+M*g,d[3]=P*v+M*p,d[4]=A*f+R*g+T,d[5]=A*v+R*p+C,this},transform:function(o,r,a,d,l,f){var v=this.matrix,g=v[0],p=v[1],m=v[2],y=v[3],T=v[4],C=v[5];return v[0]=o*g+r*m,v[1]=o*p+r*y,v[2]=a*g+d*m,v[3]=a*p+d*y,v[4]=l*g+f*m+T,v[5]=l*p+f*y+C,this},transformPoint:function(o,r,a){a===void 0&&(a={x:0,y:0});var d=this.matrix,l=d[0],f=d[1],v=d[2],g=d[3],p=d[4],m=d[5];return a.x=o*l+r*v+p,a.y=o*f+r*g+m,a},invert:function(){var o=this.matrix,r=o[0],a=o[1],d=o[2],l=o[3],f=o[4],v=o[5],g=r*l-a*d;return o[0]=l/g,o[1]=-a/g,o[2]=-d/g,o[3]=r/g,o[4]=(d*v-l*f)/g,o[5]=-(r*v-a*f)/g,this},copyFrom:function(o){var r=this.matrix;return r[0]=o.a,r[1]=o.b,r[2]=o.c,r[3]=o.d,r[4]=o.e,r[5]=o.f,this},copyFromArray:function(o){var r=this.matrix;return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],this},copyToContext:function(o){var r=this.matrix;return o.transform(r[0],r[1],r[2],r[3],r[4],r[5]),o},setToContext:function(o){var r=this.matrix;return o.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]),o},copyToArray:function(o){var r=this.matrix;return o===void 0?o=[r[0],r[1],r[2],r[3],r[4],r[5]]:(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5]),o},setTransform:function(o,r,a,d,l,f){var v=this.matrix;return v[0]=o,v[1]=r,v[2]=a,v[3]=d,v[4]=l,v[5]=f,this},decomposeMatrix:function(){var o=this.decomposedMatrix,r=this.matrix,a=r[0],d=r[1],l=r[2],f=r[3],v=a*f-d*l;if(o.translateX=r[4],o.translateY=r[5],a||d){var g=Math.sqrt(a*a+d*d);o.rotation=d>0?Math.acos(a/g):-Math.acos(a/g),o.scaleX=g,o.scaleY=v/g}else if(l||f){var p=Math.sqrt(l*l+f*f);o.rotation=Math.PI*.5-(f>0?Math.acos(-l/p):-Math.acos(l/p)),o.scaleX=v/p,o.scaleY=p}else o.rotation=0,o.scaleX=0,o.scaleY=0;return o},applyITRS:function(o,r,a,d,l){var f=this.matrix,v=Math.sin(a),g=Math.cos(a);return f[4]=o,f[5]=r,f[0]=g*d,f[1]=v*d,f[2]=-v*l,f[3]=g*l,this},applyInverse:function(o,r,a){a===void 0&&(a=new n);var d=this.matrix,l=d[0],f=d[1],v=d[2],g=d[3],p=d[4],m=d[5],y=1/(l*g+v*-f);return a.x=g*y*o+-v*y*r+(m*v-p*g)*y,a.y=l*y*r+-f*y*o+(-m*l+p*f)*y,a},getX:function(o,r){return o*this.a+r*this.c+this.e},getY:function(o,r){return o*this.b+r*this.d+this.f},getXRound:function(o,r,a){var d=this.getX(o,r);return a&&(d=Math.round(d)),d},getYRound:function(o,r,a){var d=this.getY(o,r);return a&&(d=Math.round(d)),d},getCSSMatrix:function(){var o=this.matrix;return"matrix("+o[0]+","+o[1]+","+o[2]+","+o[3]+","+o[4]+","+o[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=function(n,h,o,r,a,d){n===void 0&&(n=0),h===void 0&&(h=0),o===void 0&&(o=d.width),r===void 0&&(r=d.height),a||(a={});var l=s(a,"isNotEmpty",!1),f=s(a,"isColliding",!1),v=s(a,"hasInterestingFace",!1);n<0&&(o+=n,n=0),h<0&&(r+=h,h=0),n+o>d.width&&(o=Math.max(d.width-n,0)),h+r>d.height&&(r=Math.max(d.height-h,0));for(var g=[],p=h;p<h+r;p++)for(var m=n;m<n+o;m++){var y=d.data[p][m];if(y!==null){if(l&&y.index===-1||f&&!y.collides||v&&!y.hasInterestingFace)continue;g.push(y)}}return g};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h,o,r){h===void 0&&(h=0),o===void 0&&(o=0),r===void 0&&(r=1);var a,d=0,l=s.length;if(r===1)for(a=o;a<l;a++)s[a][u]=n+d*h,d++;else for(a=o;a>=0;a--)s[a][u]=n+d*h,d++;return s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(13),n=function(h,o,r){o.x=u(r,"x",0),o.y=u(r,"y",0),o.depth=u(r,"depth",0),o.flipX=u(r,"flipX",!1),o.flipY=u(r,"flipY",!1);var a=u(r,"scale",null);typeof a=="number"?o.setScale(a):a!==null&&(o.scaleX=u(a,"x",1),o.scaleY=u(a,"y",1));var d=u(r,"scrollFactor",null);typeof d=="number"?o.setScrollFactor(d):d!==null&&(o.scrollFactorX=u(d,"x",1),o.scrollFactorY=u(d,"y",1)),o.rotation=u(r,"rotation",0);var l=u(r,"angle",null);l!==null&&(o.angle=l),o.alpha=u(r,"alpha",1);var f=u(r,"origin",null);if(typeof f=="number")o.setOrigin(f);else if(f!==null){var v=u(f,"x",.5),g=u(f,"y",.5);o.setOrigin(v,g)}o.blendMode=u(r,"blendMode",s.NORMAL),o.visible=u(r,"visible",!0);var p=u(r,"add",!0);return p&&h.sys.displayList.add(o),o.preUpdate&&h.sys.updateList.add(o),o};e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=function(n,h,o,r,a){var d=r.alpha*o.alpha;if(d<=0)return!1;var l=s(o,r,a).calc;return h.globalCompositeOperation=n.blendModes[o.blendMode],h.globalAlpha=d,h.save(),l.setToContext(h),h.imageSmoothingEnabled=!(!n.antialias||o.frame&&o.frame.source.scaleMode),!0};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(33),u=t(192),n=[],h=!1,o=function(){var r=function(y,T,C,S,E){T===void 0&&(T=1),C===void 0&&(C=1),S===void 0&&(S=s.CANVAS),E===void 0&&(E=!1);var P,M=l(S);return M===null?(M={parent:y,canvas:document.createElement("canvas"),type:S},S===s.CANVAS&&n.push(M),P=M.canvas):(M.parent=y,P=M.canvas),E&&(M.parent=P),P.width=T,P.height=C,h&&S===s.CANVAS&&u.disable(P.getContext("2d")),P},a=function(y,T,C){return r(y,T,C,s.CANVAS)},d=function(y,T,C){return r(y,T,C,s.WEBGL)},l=function(y){if(y===void 0&&(y=s.CANVAS),y===s.WEBGL)return null;for(var T=0;T<n.length;T++){var C=n[T];if(!C.parent&&C.type===y)return C}return null},f=function(y){var T=y instanceof HTMLCanvasElement;n.forEach(function(C){(T&&C.canvas===y||!T&&C.parent===y)&&(C.parent=null,C.canvas.width=1,C.canvas.height=1)})},v=function(){var y=0;return n.forEach(function(T){T.parent&&y++}),y},g=function(){return n.length-v()},p=function(){h=!0},m=function(){h=!1};return{create2D:a,create:r,createWebGL:d,disableSmoothing:p,enableSmoothing:m,first:l,free:g,pool:n,remove:f,total:v}};e.exports=o()},function(e,c){var t={};e.exports=t,function(){t._nextId=0,t._seed=0,t._nowStartTime=+new Date,t.extend=function(u,n){var h,o;typeof n=="boolean"?(h=2,o=n):(h=1,o=!0);for(var r=h;r<arguments.length;r++){var a=arguments[r];if(a)for(var d in a)o&&a[d]&&a[d].constructor===Object&&(!u[d]||u[d].constructor===Object)?(u[d]=u[d]||{},t.extend(u[d],o,a[d])):u[d]=a[d]}return u},t.clone=function(u,n){return t.extend({},n,u)},t.keys=function(u){if(Object.keys)return Object.keys(u);var n=[];for(var h in u)n.push(h);return n},t.values=function(u){var n=[];if(Object.keys){for(var h=Object.keys(u),o=0;o<h.length;o++)n.push(u[h[o]]);return n}for(var r in u)n.push(u[r]);return n},t.get=function(u,n,h,o){n=n.split(".").slice(h,o);for(var r=0;r<n.length;r+=1)u=u[n[r]];return u},t.set=function(u,n,h,o,r){var a=n.split(".").slice(o,r);return t.get(u,n,0,-1)[a[a.length-1]]=h,h},t.shuffle=function(u){for(var n=u.length-1;n>0;n--){var h=Math.floor(t.random()*(n+1)),o=u[n];u[n]=u[h],u[h]=o}return u},t.choose=function(u){return u[Math.floor(t.random()*u.length)]},t.isElement=function(u){return typeof HTMLElement!="undefined"?u instanceof HTMLElement:!!(u&&u.nodeType&&u.nodeName)},t.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"},t.isFunction=function(u){return typeof u=="function"},t.isPlainObject=function(u){return typeof u=="object"&&u.constructor===Object},t.isString=function(u){return Object.prototype.toString.call(u)==="[object String]"},t.clamp=function(u,n,h){return u<n?n:u>h?h:u},t.sign=function(u){return u<0?-1:1},t.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-t._nowStartTime},t.random=function(u,n){return u=typeof u!="undefined"?u:0,n=typeof n!="undefined"?n:1,u+s()*(n-u)};var s=function(){return t._seed=(t._seed*9301+49297)%233280,t._seed/233280};t.colorToNumber=function(u){return u=u.replace("#",""),u.length==3&&(u=u.charAt(0)+u.charAt(0)+u.charAt(1)+u.charAt(1)+u.charAt(2)+u.charAt(2)),parseInt(u,16)},t.logLevel=1,t.log=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.info=function(){console&&t.logLevel>0&&t.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.warn=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.nextId=function(){return t._nextId++},t.indexOf=function(u,n){if(u.indexOf)return u.indexOf(n);for(var h=0;h<u.length;h++)if(u[h]===n)return h;return-1},t.map=function(u,n){if(u.map)return u.map(n);for(var h=[],o=0;o<u.length;o+=1)h.push(n(u[o]));return h},t.topologicalSort=function(u){var n=[],h=[],o=[];for(var r in u)!h[r]&&!o[r]&&t._topologicalSort(r,h,o,u,n);return n},t._topologicalSort=function(u,n,h,o,r){var a=o[u]||[];h[u]=!0;for(var d=0;d<a.length;d+=1){var l=a[d];h[l]||n[l]||t._topologicalSort(l,n,h,o,r)}h[u]=!1,n[u]=!0,r.push(u)},t.chain=function(){for(var u=[],n=0;n<arguments.length;n+=1){var h=arguments[n];h._chained?u.push.apply(u,h._chained):u.push(h)}var o=function(){for(var r,a=new Array(arguments.length),d=0,l=arguments.length;d<l;d++)a[d]=arguments[d];for(d=0;d<u.length;d+=1){var f=u[d].apply(r,a);typeof f!="undefined"&&(r=f)}return r};return o._chained=u,o},t.chainPathBefore=function(u,n,h){return t.set(u,n,t.chain(h,t.get(u,n)))},t.chainPathAfter=function(u,n,h){return t.set(u,n,t.chain(t.get(u,n),h))}}()},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={VERSION:"3.55.2",BlendModes:t(35),ScaleModes:t(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};e.exports=s},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),h=t(47),o=new s({Extends:n,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Transform,u.Visible],initialize:function(a,d,l){d===void 0&&(d="Shape"),n.call(this,a,d),this.geom=l,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new h,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(r,a){return a===void 0&&(a=1),r===void 0?this.isFilled=!1:(this.fillColor=r,this.fillAlpha=a,this.isFilled=!0),this},setStrokeStyle:function(r,a,d){return d===void 0&&(d=1),r===void 0?this.isStroked=!1:(this.lineWidth=r,this.strokeColor=a,this.strokeAlpha=d,this.isStroked=!0),this},setClosePath:function(r){return this.closePath=r,this},setSize:function(r,a){return this.width=r,this.height=a,this},setDisplaySize:function(r,a){return this.displayWidth=r,this.displayHeight=a,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(r){this.scaleX=r/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(r){this.scaleY=r/this.height}}});e.exports=o},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=function(n){return n*s.DEG_TO_RAD};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DESTROY:t(743),FADE_IN_COMPLETE:t(744),FADE_IN_START:t(745),FADE_OUT_COMPLETE:t(746),FADE_OUT_START:t(747),FLASH_COMPLETE:t(748),FLASH_START:t(749),FOLLOW_UPDATE:t(750),PAN_COMPLETE:t(751),PAN_START:t(752),POST_RENDER:t(753),PRE_RENDER:t(754),ROTATE_COMPLETE:t(755),ROTATE_START:t(756),SHAKE_COMPLETE:t(757),SHAKE_START:t(758),ZOOM_COMPLETE:t(759),ZOOM_START:t(760)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(103),n=t(328),h=t(188),o=t(329),r=new s({initialize:function(d,l,f,v){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(d,l,f,v)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(a,d,l,f,v){return f===void 0&&(f=255),v===void 0&&(v=!0),this._locked=!0,this.red=a,this.green=d,this.blue=l,this.alpha=f,this._locked=!1,this.update(v)},setGLTo:function(a,d,l,f){return f===void 0&&(f=1),this._locked=!0,this.redGL=a,this.greenGL=d,this.blueGL=l,this.alphaGL=f,this._locked=!1,this.update(!0)},setFromRGB:function(a){return this._locked=!0,this.red=a.r,this.green=a.g,this.blue=a.b,a.hasOwnProperty("a")&&(this.alpha=a.a),this._locked=!1,this.update(!0)},setFromHSV:function(a,d,l){return h(a,d,l,this)},update:function(a){if(a===void 0&&(a=!1),this._locked)return this;var d=this.r,l=this.g,f=this.b,v=this.a;return this._color=u(d,l,f),this._color32=n(d,l,f,v),this._rgba="rgba("+d+","+l+","+f+","+v/255+")",a&&o(d,l,f,this),this},updateHSV:function(){var a=this.r,d=this.g,l=this.b;return o(a,d,l,this),this},clone:function(){return new r(this.r,this.g,this.b,this.a)},gray:function(a){return this.setTo(a,a,a)},random:function(a,d){a===void 0&&(a=0),d===void 0&&(d=255);var l=Math.floor(a+Math.random()*(d-a)),f=Math.floor(a+Math.random()*(d-a)),v=Math.floor(a+Math.random()*(d-a));return this.setTo(l,f,v)},randomGray:function(a,d){a===void 0&&(a=0),d===void 0&&(d=255);var l=Math.floor(a+Math.random()*(d-a));return this.setTo(l,l,l)},saturate:function(a){return this.s+=a/100,this},desaturate:function(a){return this.s-=a/100,this},lighten:function(a){return this.v+=a/100,this},darken:function(a){return this.v-=a/100,this},brighten:function(a){var d=this.r,l=this.g,f=this.b;return d=Math.max(0,Math.min(255,d-Math.round(255*-(a/100)))),l=Math.max(0,Math.min(255,l-Math.round(255*-(a/100)))),f=Math.max(0,Math.min(255,f-Math.round(255*-(a/100)))),this.setTo(d,l,f)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(a){this.gl[0]=Math.min(Math.abs(a),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(a){this.gl[1]=Math.min(Math.abs(a),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(a){this.gl[2]=Math.min(Math.abs(a),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(a){this.gl[3]=Math.min(Math.abs(a),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(a){a=Math.floor(Math.abs(a)),this.r=Math.min(a,255),this.gl[0]=a/255,this.update(!0)}},green:{get:function(){return this.g},set:function(a){a=Math.floor(Math.abs(a)),this.g=Math.min(a,255),this.gl[1]=a/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(a){a=Math.floor(Math.abs(a)),this.b=Math.min(a,255),this.gl[2]=a/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(a){a=Math.floor(Math.abs(a)),this.a=Math.min(a,255),this.gl[3]=a/255,this.update()}},h:{get:function(){return this._h},set:function(a){this._h=a,h(a,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(a){this._s=a,h(this._h,a,this._v,this)}},v:{get:function(){return this._v},set:function(a){this._v=a,h(this._h,this._s,a,this)}}});e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(h,o,r){this.x=0,this.y=0,this.z=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0):(this.x=h||0,this.y=o||0,this.z=r||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this},max:function(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this},clone:function(){return new u(this.x,this.y,this.z)},addVectors:function(n,h){return this.x=n.x+h.x,this.y=n.y+h.y,this.z=n.z+h.z,this},crossVectors:function(n,h){var o=n.x,r=n.y,a=n.z,d=h.x,l=h.y,f=h.z;return this.x=r*f-a*l,this.y=a*d-o*f,this.z=o*l-r*d,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this},set:function(n,h,o){return typeof n=="object"?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0):(this.x=n||0,this.y=h||0,this.z=o||0),this},setFromMatrixPosition:function(n){return this.fromArray(n.val,12)},setFromMatrixColumn:function(n,h){return this.fromArray(n.val,h*4)},fromArray:function(n,h){return h===void 0&&(h=0),this.x=n[h],this.y=n[h+1],this.z=n[h+2],this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this},addScalar:function(n){return this.x+=n,this.y+=n,this.z+=n,this},addScale:function(n,h){return this.x+=n.x*h,this.y+=n.y*h,this.z+=n.z*h||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this},scale:function(n){return isFinite(n)?(this.x*=n,this.y*=n,this.z*=n):(this.x=0,this.y=0,this.z=0),this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(n){var h=n.x-this.x,o=n.y-this.y,r=n.z-this.z||0;return Math.sqrt(h*h+o*o+r*r)},distanceSq:function(n){var h=n.x-this.x,o=n.y-this.y,r=n.z-this.z||0;return h*h+o*o+r*r},length:function(){var n=this.x,h=this.y,o=this.z;return Math.sqrt(n*n+h*h+o*o)},lengthSq:function(){var n=this.x,h=this.y,o=this.z;return n*n+h*h+o*o},normalize:function(){var n=this.x,h=this.y,o=this.z,r=n*n+h*h+o*o;return r>0&&(r=1/Math.sqrt(r),this.x=n*r,this.y=h*r,this.z=o*r),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z},cross:function(n){var h=this.x,o=this.y,r=this.z,a=n.x,d=n.y,l=n.z;return this.x=o*l-r*d,this.y=r*a-h*l,this.z=h*d-o*a,this},lerp:function(n,h){h===void 0&&(h=0);var o=this.x,r=this.y,a=this.z;return this.x=o+h*(n.x-o),this.y=r+h*(n.y-r),this.z=a+h*(n.z-a),this},applyMatrix3:function(n){var h=this.x,o=this.y,r=this.z,a=n.val;return this.x=a[0]*h+a[3]*o+a[6]*r,this.y=a[1]*h+a[4]*o+a[7]*r,this.z=a[2]*h+a[5]*o+a[8]*r,this},applyMatrix4:function(n){var h=this.x,o=this.y,r=this.z,a=n.val,d=1/(a[3]*h+a[7]*o+a[11]*r+a[15]);return this.x=(a[0]*h+a[4]*o+a[8]*r+a[12])*d,this.y=(a[1]*h+a[5]*o+a[9]*r+a[13])*d,this.z=(a[2]*h+a[6]*o+a[10]*r+a[14])*d,this},transformMat3:function(n){var h=this.x,o=this.y,r=this.z,a=n.val;return this.x=h*a[0]+o*a[3]+r*a[6],this.y=h*a[1]+o*a[4]+r*a[7],this.z=h*a[2]+o*a[5]+r*a[8],this},transformMat4:function(n){var h=this.x,o=this.y,r=this.z,a=n.val;return this.x=a[0]*h+a[4]*o+a[8]*r+a[12],this.y=a[1]*h+a[5]*o+a[9]*r+a[13],this.z=a[2]*h+a[6]*o+a[10]*r+a[14],this},transformCoordinates:function(n){var h=this.x,o=this.y,r=this.z,a=n.val,d=h*a[0]+o*a[4]+r*a[8]+a[12],l=h*a[1]+o*a[5]+r*a[9]+a[13],f=h*a[2]+o*a[6]+r*a[10]+a[14],v=h*a[3]+o*a[7]+r*a[11]+a[15];return this.x=d/v,this.y=l/v,this.z=f/v,this},transformQuat:function(n){var h=this.x,o=this.y,r=this.z,a=n.x,d=n.y,l=n.z,f=n.w,v=f*h+d*r-l*o,g=f*o+l*h-a*r,p=f*r+a*o-d*h,m=-a*h-d*o-l*r;return this.x=v*f+m*-a+g*-l-p*-d,this.y=g*f+m*-d+p*-a-v*-l,this.z=p*f+m*-l+v*-d-g*-a,this},project:function(n){var h=this.x,o=this.y,r=this.z,a=n.val,d=a[0],l=a[1],f=a[2],v=a[3],g=a[4],p=a[5],m=a[6],y=a[7],T=a[8],C=a[9],S=a[10],E=a[11],P=a[12],M=a[13],A=a[14],R=a[15],O=1/(h*v+o*y+r*E+R);return this.x=(h*d+o*g+r*T+P)*O,this.y=(h*l+o*p+r*C+M)*O,this.z=(h*f+o*m+r*S+A)*O,this},projectViewMatrix:function(n,h){return this.applyMatrix4(n).applyMatrix4(h)},unprojectViewMatrix:function(n,h){return this.applyMatrix4(n).applyMatrix4(h)},unproject:function(n,h){var o=n.x,r=n.y,a=n.z,d=n.w,l=this.x-o,f=d-this.y-1-r,v=this.z;return this.x=2*l/a-1,this.y=2*f/d-1,this.z=2*v-1,this.project(h)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});u.ZERO=new u,u.RIGHT=new u(1,0,0),u.LEFT=new u(-1,0,0),u.UP=new u(0,-1,0),u.DOWN=new u(0,1,0),u.FORWARD=new u(0,0,1),u.BACK=new u(0,0,-1),u.ONE=new u(1,1,1),e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(e,c,t){var s={};e.exports=s;var u=t(64),n=t(83),h=t(165),o=t(32),r=t(84),a=t(271);(function(){s._inertiaScale=4,s._nextCollidingGroupId=1,s._nextNonCollidingGroupId=-1,s._nextCategory=1,s.create=function(l){var f={id:o.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!l.hasOwnProperty("position")&&l.hasOwnProperty("vertices")?l.position=u.centre(l.vertices):l.hasOwnProperty("vertices")||(f.vertices=u.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var v=o.extend(f,l);return d(v,l),v.setOnCollideWith=function(g,p){return p?this.onCollideWith[g.id]=p:delete this.onCollideWith[g.id],this},v},s.nextGroup=function(l){return l?s._nextNonCollidingGroupId--:s._nextCollidingGroupId++},s.nextCategory=function(){return s._nextCategory=s._nextCategory<<1,s._nextCategory};var d=function(l,f){f=f||{},s.set(l,{bounds:l.bounds||r.create(l.vertices),positionPrev:l.positionPrev||n.clone(l.position),anglePrev:l.anglePrev||l.angle,vertices:l.vertices,parts:l.parts||[l],isStatic:l.isStatic,isSleeping:l.isSleeping,parent:l.parent||l});var v=l.bounds;if(u.rotate(l.vertices,l.angle,l.position),a.rotate(l.axes,l.angle),r.update(v,l.vertices,l.velocity),s.set(l,{axes:f.axes||l.axes,area:f.area||l.area,mass:f.mass||l.mass,inertia:f.inertia||l.inertia}),l.parts.length===1){var g=l.centerOfMass,p=l.centerOffset,m=v.max.x-v.min.x,y=v.max.y-v.min.y;g.x=-(v.min.x-l.position.x)/m,g.y=-(v.min.y-l.position.y)/y,p.x=m*g.x,p.y=y*g.y}};s.set=function(l,f,v){var g;typeof f=="string"&&(g=f,f={},f[g]=v);for(g in f)if(!!Object.prototype.hasOwnProperty.call(f,g))switch(v=f[g],g){case"isStatic":s.setStatic(l,v);break;case"isSleeping":h.set(l,v);break;case"mass":s.setMass(l,v);break;case"density":s.setDensity(l,v);break;case"inertia":s.setInertia(l,v);break;case"vertices":s.setVertices(l,v);break;case"position":s.setPosition(l,v);break;case"angle":s.setAngle(l,v);break;case"velocity":s.setVelocity(l,v);break;case"angularVelocity":s.setAngularVelocity(l,v);break;case"parts":s.setParts(l,v);break;case"centre":s.setCentre(l,v);break;default:l[g]=v}},s.setStatic=function(l,f){for(var v=0;v<l.parts.length;v++){var g=l.parts[v];g.isStatic=f,f?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},s.setMass=function(l,f){var v=l.inertia/(l.mass/6);l.inertia=v*(f/6),l.inverseInertia=1/l.inertia,l.mass=f,l.inverseMass=1/l.mass,l.density=l.mass/l.area},s.setDensity=function(l,f){s.setMass(l,f*l.area),l.density=f},s.setInertia=function(l,f){l.inertia=f,l.inverseInertia=1/l.inertia},s.setVertices=function(l,f){f[0].body===l?l.vertices=f:l.vertices=u.create(f,l),l.axes=a.fromVertices(l.vertices),l.area=u.area(l.vertices),s.setMass(l,l.density*l.area);var v=u.centre(l.vertices);u.translate(l.vertices,v,-1),s.setInertia(l,s._inertiaScale*u.inertia(l.vertices,l.mass)),u.translate(l.vertices,l.position),r.update(l.bounds,l.vertices,l.velocity)},s.setParts=function(l,f,v){var g;for(f=f.slice(0),l.parts.length=0,l.parts.push(l),l.parent=l,g=0;g<f.length;g++){var p=f[g];p!==l&&(p.parent=l,l.parts.push(p))}if(l.parts.length!==1){if(v=typeof v!="undefined"?v:!0,v){var m=[];for(g=0;g<f.length;g++)m=m.concat(f[g].vertices);u.clockwiseSort(m);var y=u.hull(m),T=u.centre(y);s.setVertices(l,y),u.translate(l.vertices,T)}var C=s._totalProperties(l),S=C.centre.x,E=C.centre.y,P=l.bounds,M=l.centerOfMass,A=l.centerOffset;r.update(P,l.vertices,l.velocity),M.x=-(P.min.x-S)/(P.max.x-P.min.x),M.y=-(P.min.y-E)/(P.max.y-P.min.y),A.x=S,A.y=E,l.area=C.area,l.parent=l,l.position.x=S,l.position.y=E,l.positionPrev.x=S,l.positionPrev.y=E,s.setMass(l,C.mass),s.setInertia(l,C.inertia),s.setPosition(l,C.centre)}},s.setCentre=function(l,f,v){v?(l.positionPrev.x+=f.x,l.positionPrev.y+=f.y,l.position.x+=f.x,l.position.y+=f.y):(l.positionPrev.x=f.x-(l.position.x-l.positionPrev.x),l.positionPrev.y=f.y-(l.position.y-l.positionPrev.y),l.position.x=f.x,l.position.y=f.y)},s.setPosition=function(l,f){var v=n.sub(f,l.position);l.positionPrev.x+=v.x,l.positionPrev.y+=v.y;for(var g=0;g<l.parts.length;g++){var p=l.parts[g];p.position.x+=v.x,p.position.y+=v.y,u.translate(p.vertices,v),r.update(p.bounds,p.vertices,l.velocity)}},s.setAngle=function(l,f){var v=f-l.angle;l.anglePrev+=v;for(var g=0;g<l.parts.length;g++){var p=l.parts[g];p.angle+=v,u.rotate(p.vertices,v,l.position),a.rotate(p.axes,v),r.update(p.bounds,p.vertices,l.velocity),g>0&&n.rotateAbout(p.position,v,l.position,p.position)}},s.setVelocity=function(l,f){l.positionPrev.x=l.position.x-f.x,l.positionPrev.y=l.position.y-f.y,l.velocity.x=f.x,l.velocity.y=f.y,l.speed=n.magnitude(l.velocity)},s.setAngularVelocity=function(l,f){l.anglePrev=l.angle-f,l.angularVelocity=f,l.angularSpeed=Math.abs(l.angularVelocity)},s.translate=function(l,f){s.setPosition(l,n.add(l.position,f))},s.rotate=function(l,f,v){if(!v)s.setAngle(l,l.angle+f);else{var g=Math.cos(f),p=Math.sin(f),m=l.position.x-v.x,y=l.position.y-v.y;s.setPosition(l,{x:v.x+(m*g-y*p),y:v.y+(m*p+y*g)}),s.setAngle(l,l.angle+f)}},s.scale=function(l,f,v,g){var p=0,m=0;g=g||l.position;for(var y=0;y<l.parts.length;y++){var T=l.parts[y];T.scale.x=f,T.scale.y=v,u.scale(T.vertices,f,v,g),T.axes=a.fromVertices(T.vertices),T.area=u.area(T.vertices),s.setMass(T,l.density*T.area),u.translate(T.vertices,{x:-T.position.x,y:-T.position.y}),s.setInertia(T,s._inertiaScale*u.inertia(T.vertices,T.mass)),u.translate(T.vertices,{x:T.position.x,y:T.position.y}),y>0&&(p+=T.area,m+=T.inertia),T.position.x=g.x+(T.position.x-g.x)*f,T.position.y=g.y+(T.position.y-g.y)*v,r.update(T.bounds,T.vertices,l.velocity)}l.parts.length>1&&(l.area=p,l.isStatic||(s.setMass(l,l.density*p),s.setInertia(l,m))),l.circleRadius&&(f===v?l.circleRadius*=f:l.circleRadius=null)},s.update=function(l,f,v,g){var p=Math.pow(f*v*l.timeScale,2),m=1-l.frictionAir*v*l.timeScale,y=l.position.x-l.positionPrev.x,T=l.position.y-l.positionPrev.y;l.velocity.x=y*m*g+l.force.x/l.mass*p,l.velocity.y=T*m*g+l.force.y/l.mass*p,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.position.x+=l.velocity.x,l.position.y+=l.velocity.y,l.angularVelocity=(l.angle-l.anglePrev)*m*g+l.torque/l.inertia*p,l.anglePrev=l.angle,l.angle+=l.angularVelocity,l.speed=n.magnitude(l.velocity),l.angularSpeed=Math.abs(l.angularVelocity);for(var C=0;C<l.parts.length;C++){var S=l.parts[C];u.translate(S.vertices,l.velocity),C>0&&(S.position.x+=l.velocity.x,S.position.y+=l.velocity.y),l.angularVelocity!==0&&(u.rotate(S.vertices,l.angularVelocity,l.position),a.rotate(S.axes,l.angularVelocity),C>0&&n.rotateAbout(S.position,l.angularVelocity,l.position,S.position)),r.update(S.bounds,S.vertices,l.velocity)}},s.applyForce=function(l,f,v){l.force.x+=v.x,l.force.y+=v.y;var g={x:f.x-l.position.x,y:f.y-l.position.y};l.torque+=g.x*v.y-g.y*v.x},s._totalProperties=function(l){for(var f={mass:0,area:0,inertia:0,centre:{x:0,y:0}},v=l.parts.length===1?0:1;v<l.parts.length;v++){var g=l.parts[v],p=g.mass!==1/0?g.mass:1;f.mass+=p,f.area+=g.area,f.inertia+=g.inertia,f.centre=n.add(f.centre,n.mult(g.position,p))}return f.centre=n.div(f.centre,f.mass),f}})()},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.y+s.height-s.height*s.originY};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x-s.width*s.originX};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x+s.width-s.width*s.originX};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.y-s.height*s.originY};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h,o,r){h===void 0&&(h=0),o===void 0&&(o=0),r===void 0&&(r=1);var a,d=0,l=s.length;if(r===1)for(a=o;a<l;a++)s[a][u]+=n+d*h,d++;else for(a=o;a>=0;a--)s[a][u]+=n+d*h,d++;return s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(307),n=t(172),h=t(56),o=t(173),r=t(3),a=new s({initialize:function(l,f,v,g){l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=0),g===void 0&&(g=0),this.type=h.LINE,this.x1=l,this.y1=f,this.x2=v,this.y2=g},getPoint:function(d,l){return u(this,d,l)},getPoints:function(d,l,f){return n(this,d,l,f)},getRandomPoint:function(d){return o(this,d)},setTo:function(d,l,f,v){return d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=0),this.x1=d,this.y1=l,this.x2=f,this.y2=v,this},getPointA:function(d){return d===void 0&&(d=new r),d.set(this.x1,this.y1),d},getPointB:function(d){return d===void 0&&(d=new r),d.set(this.x2,this.y2),d},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(d){this.x1<=this.x2?this.x1=d:this.x2=d}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(d){this.x1>this.x2?this.x1=d:this.x2=d}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(d){this.y1<=this.y2?this.y1=d:this.y2=d}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(d){this.y1>this.y2?this.y1=d:this.y2=d}}});e.exports=a},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){var o=n||u.fillColor,r=h||u.fillAlpha,a=(o&16711680)>>>16,d=(o&65280)>>>8,l=o&255;s.fillStyle="rgba("+a+","+d+","+l+","+r+")"};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(h,o,r,a){var d=[];a.forEach(function(f){f&&d.push(f)}),this.loader=h,this.type=o,this.key=r,this.multiKeyIndex=h.multiKeyIndex++,this.files=d,this.complete=!1,this.pending=d.length,this.failed=0,this.config={},this.baseURL=h.baseURL,this.path=h.path,this.prefix=h.prefix;for(var l=0;l<d.length;l++)d[l].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(n){return this.files.push(n),n.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(n){var h=this.files.indexOf(n);h!==-1&&this.pending--},onFileFailed:function(n){var h=this.files.indexOf(n);h!==-1&&this.failed++}});e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){var o=s-n,r=u-h;return Math.sqrt(o*o+r*r)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BOOT:t(922),DESTROY:t(923),DRAG_END:t(924),DRAG_ENTER:t(925),DRAG:t(926),DRAG_LEAVE:t(927),DRAG_OVER:t(928),DRAG_START:t(929),DROP:t(930),GAME_OUT:t(931),GAME_OVER:t(932),GAMEOBJECT_DOWN:t(933),GAMEOBJECT_DRAG_END:t(934),GAMEOBJECT_DRAG_ENTER:t(935),GAMEOBJECT_DRAG:t(936),GAMEOBJECT_DRAG_LEAVE:t(937),GAMEOBJECT_DRAG_OVER:t(938),GAMEOBJECT_DRAG_START:t(939),GAMEOBJECT_DROP:t(940),GAMEOBJECT_MOVE:t(941),GAMEOBJECT_OUT:t(942),GAMEOBJECT_OVER:t(943),GAMEOBJECT_POINTER_DOWN:t(944),GAMEOBJECT_POINTER_MOVE:t(945),GAMEOBJECT_POINTER_OUT:t(946),GAMEOBJECT_POINTER_OVER:t(947),GAMEOBJECT_POINTER_UP:t(948),GAMEOBJECT_POINTER_WHEEL:t(949),GAMEOBJECT_UP:t(950),GAMEOBJECT_WHEEL:t(951),MANAGER_BOOT:t(952),MANAGER_PROCESS:t(953),MANAGER_UPDATE:t(954),POINTER_DOWN:t(955),POINTER_DOWN_OUTSIDE:t(956),POINTER_MOVE:t(957),POINTER_OUT:t(958),POINTER_OVER:t(959),POINTER_UP:t(960),POINTER_UP_OUTSIDE:t(961),POINTER_WHEEL:t(962),POINTERLOCK_CHANGE:t(963),PRE_UPDATE:t(964),SHUTDOWN:t(965),START:t(966),UPDATE:t(967)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.y=u+s.height*s.originY,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x=u+s.width*s.originX,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x=u-s.width+s.width*s.originX,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.y=u-s.height+s.height*s.originY,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.width<=0||s.height<=0?!1:s.x<=u&&s.x+s.width>=u&&s.y<=n&&s.y+s.height>=n};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(175),n=t(9),h=t(374),o=t(2),r=t(69),a=t(91),d=t(141),l=t(12),f=t(375),v=new s({Extends:n,initialize:function(p){n.call(this);var m=p.game,y=m.renderer,T=y.gl;this.name=o(p,"name","WebGLPipeline"),this.game=m,this.renderer=y,this.manager,this.gl=T,this.view=m.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=o(p,"topology",T.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=o(p,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=p,this.glReset=!1},boot:function(){var g,p=this.gl,m=this.config,y=this.renderer;this.isPostFX||(this.projectionMatrix=new r().identity());var T=this.renderTargets,C=o(m,"renderTarget",!1);typeof C=="boolean"&&C&&(C=1);var S=y.width,E=y.height;if(typeof C=="number")for(g=0;g<C;g++)T.push(new d(y,S,E,1,0,!0));else if(Array.isArray(C))for(g=0;g<C.length;g++){var P=o(C[g],"scale",1),M=o(C[g],"minFilter",0),A=o(C[g],"autoClear",1);T.push(new d(y,S,E,P,M,A))}T.length&&(this.currentRenderTarget=T[0]),this.setShadersFromConfig(m);var R=this.shaders,O=0;for(g=0;g<R.length;g++)R[g].vertexSize>O&&(O=R[g].vertexSize);var F=o(m,"batchSize",y.config.batchSize);this.vertexCapacity=F*6;var I=new ArrayBuffer(this.vertexCapacity*O);this.vertexData=I,this.bytes=new Uint8Array(I),this.vertexViewF32=new Float32Array(I),this.vertexViewU32=new Uint32Array(I);var G=o(m,"vertices",null);for(G?(this.vertexViewF32.set(G),this.vertexBuffer=y.createVertexBuffer(I,p.STATIC_DRAW)):this.vertexBuffer=y.createVertexBuffer(I.byteLength,p.DYNAMIC_DRAW),this.setVertexBuffer(),g=R.length-1;g>=0;g--)R[g].rebind();this.hasBooted=!0,y.on(a.RESIZE,this.resize,this),y.on(a.PRE_RENDER,this.onPreRender,this),y.on(a.RENDER,this.onRender,this),y.on(a.POST_RENDER,this.onPostRender,this),this.emit(h.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(g,p){var m=this.renderer;if(g!==this.currentShader||m.currentProgram!==this.currentShader.program){this.flush(),m.resetTextures();var y=this.setVertexBuffer();y&&!p&&(p=!0),g.bind(p,!1),this.currentShader=g}return this},getShaderByName:function(g){for(var p=this.shaders,m=0;m<p.length;m++)if(p[m].name===g)return p[m]},setShadersFromConfig:function(g){var p,m=this.shaders,y=this.renderer;for(p=0;p<m.length;p++)m[p].destroy();var T="vertShader",C="fragShader",S="attributes",E=o(g,T,null),P=l.parseFragmentShaderMaxTextures(o(g,C,null),y.maxTextures),M=o(g,S,null),A=o(g,"shaders",[]),R=A.length;if(R===0)E&&P&&(this.shaders=[new f(this,"default",E,P,u(M))]);else{var O=[];for(p=0;p<R;p++){var F=A[p],I=o(F,"name","default"),G=o(F,T,E),z=l.parseFragmentShaderMaxTextures(o(F,C,P),y.maxTextures),U=o(F,S,M);G&&z&&O.push(new f(this,I,G,z,u(U)))}this.shaders=O}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(g,p){return p===void 0&&(p=g.frame),this.currentUnit=this.renderer.setTextureSource(p.source),this.currentUnit},shouldFlush:function(g){return g===void 0&&(g=0),this.vertexCount+g>this.vertexCapacity},resize:function(g,p){(g!==this.width||p!==this.height)&&this.flush(),this.width=g,this.height=p;for(var m=this.renderTargets,y=0;y<m.length;y++)m[y].resize(g,p);return this.setProjectionMatrix(g,p),this.emit(h.RESIZE,g,p,this),this.onResize(g,p),this},setProjectionMatrix:function(g,p){var m=this.projectionMatrix;if(!m)return this;this.projectionWidth=g,this.projectionHeight=p,m.ortho(0,g,p,0,-1e3,1e3);for(var y=this.shaders,T="uProjectionMatrix",C=0;C<y.length;C++){var S=y[C];S.hasUniform(T)&&(S.resetUniform(T),S.setMatrix4fv(T,!1,m.val,S))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var g=this.renderer.projectionWidth,p=this.renderer.projectionHeight;(this.projectionWidth!==g||this.projectionHeight!==p)&&this.setProjectionMatrix(g,p)}},bind:function(g){if(g===void 0&&(g=this.currentShader),this.glReset)return this.rebind(g);var p=this.setVertexBuffer();return g.bind(p),this.currentShader=g,this.emit(h.BIND,this,g),this.onActive(g),this},rebind:function(g){this.setVertexBuffer();for(var p=this.shaders,m=p.length-1;m>=0;m--){var y=p[m].rebind();(!g||y===g)&&(this.currentShader=y)}return this.emit(h.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var g=this.gl,p=this.vertexBuffer;return g.getParameter(g.ARRAY_BUFFER_BINDING)!==p?(g.bindBuffer(g.ARRAY_BUFFER,p),!0):!1},preBatch:function(g){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(g),this},postBatch:function(g){return this.onDraw(this.currentRenderTarget),this.onPostBatch(g),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(g){if(g===void 0&&(g=!1),this.vertexCount>0){this.emit(h.BEFORE_FLUSH,this,g),this.onBeforeFlush(g);var p=this.gl,m=this.vertexCount,y=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),m===this.vertexCapacity?p.bufferData(p.ARRAY_BUFFER,this.vertexData,p.DYNAMIC_DRAW):p.bufferSubData(p.ARRAY_BUFFER,0,this.bytes.subarray(0,m*y)),p.drawArrays(this.topology,0,m)),this.vertexCount=0,this.emit(h.AFTER_FLUSH,this,g),this.onAfterFlush(g)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(g,p,m,y,T,C,S){var E=this.vertexViewF32,P=this.vertexViewU32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++M]=g,E[++M]=p,E[++M]=m,E[++M]=y,E[++M]=T,E[++M]=C,P[++M]=S,this.vertexCount++},batchQuad:function(g,p,m,y,T,C,S,E,P,M,A,R,O,F,I,G,z,U,X,b){b===void 0&&(b=this.currentUnit);var B=!1;return this.shouldFlush(6)&&(this.flush(),B=!0,b=this.setTexture2D(X)),this.batchVert(p,m,M,A,b,U,F),this.batchVert(y,T,M,O,b,U,G),this.batchVert(C,S,R,O,b,U,z),this.batchVert(p,m,M,A,b,U,F),this.batchVert(C,S,R,O,b,U,z),this.batchVert(E,P,R,A,b,U,I),this.onBatch(g),B},batchTri:function(g,p,m,y,T,C,S,E,P,M,A,R,O,F,I,G,z){z===void 0&&(z=this.currentUnit);var U=!1;return this.shouldFlush(3)&&(this.flush(),U=!0,z=this.setTexture2D(G)),this.batchVert(p,m,E,P,z,I,R),this.batchVert(y,T,E,A,z,I,O),this.batchVert(C,S,M,A,z,I,F),this.onBatch(g),U},drawFillRect:function(g,p,m,y,T,C,S,E){S===void 0&&(S=this.renderer.whiteTexture.glTexture),E===void 0&&(E=!0),g=Math.floor(g),p=Math.floor(p);var P=Math.floor(g+m),M=Math.floor(p+y),A=this.setTexture2D(S),R=l.getTintAppendFloatAlphaAndSwap(T,C),O=0,F=0,I=1,G=1;E&&(F=1,G=0),this.batchQuad(null,g,p,g,M,P,M,P,p,O,F,I,G,R,R,R,R,0,S,A)},setTexture2D:function(g){return g===void 0&&(g=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(g),this.currentUnit},bindTexture:function(g,p){p===void 0&&(p=0);var m=this.gl;return m.activeTexture(m.TEXTURE0+p),m.bindTexture(m.TEXTURE_2D,g),this},bindRenderTarget:function(g,p){return this.bindTexture(g.texture,p)},setTime:function(g){return this.set1f(g,this.game.loop.getDuration()),this},set1f:function(g,p,m){return m===void 0&&(m=this.currentShader),m.set1f(g,p),this},set2f:function(g,p,m,y){return y===void 0&&(y=this.currentShader),y.set2f(g,p,m),this},set3f:function(g,p,m,y,T){return T===void 0&&(T=this.currentShader),T.set3f(g,p,m,y),this},set4f:function(g,p,m,y,T,C){return C===void 0&&(C=this.currentShader),C.set4f(g,p,m,y,T),this},set1fv:function(g,p,m){return m===void 0&&(m=this.currentShader),m.set1fv(g,p),this},set2fv:function(g,p,m){return m===void 0&&(m=this.currentShader),m.set2fv(g,p),this},set3fv:function(g,p,m){return m===void 0&&(m=this.currentShader),m.set3fv(g,p),this},set4fv:function(g,p,m){return m===void 0&&(m=this.currentShader),m.set4fv(g,p),this},set1iv:function(g,p,m){return m===void 0&&(m=this.currentShader),m.set1iv(g,p),this},set2iv:function(g,p,m){return m===void 0&&(m=this.currentShader),m.set2iv(g,p),this},set3iv:function(g,p,m){return m===void 0&&(m=this.currentShader),m.set3iv(g,p),this},set4iv:function(g,p,m){return m===void 0&&(m=this.currentShader),m.set4iv(g,p),this},set1i:function(g,p,m){return m===void 0&&(m=this.currentShader),m.set1i(g,p),this},set2i:function(g,p,m,y){return y===void 0&&(y=this.currentShader),y.set2i(g,p,m),this},set3i:function(g,p,m,y,T){return T===void 0&&(T=this.currentShader),T.set3i(g,p,m,y),this},set4i:function(g,p,m,y,T,C){return C===void 0&&(C=this.currentShader),C.set4i(g,p,m,y,T),this},setMatrix2fv:function(g,p,m,y){return y===void 0&&(y=this.currentShader),y.setMatrix2fv(g,p,m),this},setMatrix3fv:function(g,p,m,y){return y===void 0&&(y=this.currentShader),y.setMatrix3fv(g,p,m),this},setMatrix4fv:function(g,p,m,y){return y===void 0&&(y=this.currentShader),y.setMatrix4fv(g,p,m),this},destroy:function(){this.emit(h.DESTROY,this);var g,p=this.shaders;for(g=0;g<p.length;g++)p[g].destroy();var m=this.renderTargets;for(g=0;g<m.length;g++)m[g].destroy();this.gl.deleteBuffer(this.vertexBuffer);var y=this.renderer;return y.off(a.RESIZE,this.resize,this),y.off(a.PRE_RENDER,this.onPreRender,this),y.off(a.RENDER,this.onRender,this),y.off(a.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});e.exports=v},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function s(L,D,w){w=w||2;var N=D&&D.length,V=N?D[0]*w:L.length,Y=u(L,0,V,w,!0),W=[];if(!Y||Y.next===Y.prev)return W;var H,$,K,Z,J,k,Q;if(N&&(Y=l(L,D,Y,w)),L.length>80*w){H=K=L[0],$=Z=L[1];for(var q=w;q<V;q+=w)J=L[q],k=L[q+1],J<H&&(H=J),k<$&&($=k),J>K&&(K=J),k>Z&&(Z=k);Q=Math.max(K-H,Z-$),Q=Q!==0?1/Q:0}return h(Y,W,w,H,$,Q),W}function u(L,D,w,N,V){var Y,W;if(V===B(L,D,w,N)>0)for(Y=D;Y<w;Y+=N)W=U(Y,L[Y],L[Y+1],W);else for(Y=w-N;Y>=D;Y-=N)W=U(Y,L[Y],L[Y+1],W);return W&&M(W,W.next)&&(X(W),W=W.next),W}function n(L,D){if(!L)return L;D||(D=L);var w=L,N;do if(N=!1,!w.steiner&&(M(w,w.next)||P(w.prev,w,w.next)===0)){if(X(w),w=D=w.prev,w===w.next)break;N=!0}else w=w.next;while(N||w!==D);return D}function h(L,D,w,N,V,Y,W){if(!!L){!W&&Y&&m(L,N,V,Y);for(var H=L,$,K;L.prev!==L.next;){if($=L.prev,K=L.next,Y?r(L,N,V,Y):o(L)){D.push($.i/w),D.push(L.i/w),D.push(K.i/w),X(L),L=K.next,H=K.next;continue}if(L=K,L===H){W?W===1?(L=a(n(L),D,w),h(L,D,w,N,V,Y,2)):W===2&&d(L,D,w,N,V,Y):h(n(L),D,w,N,V,Y,1);break}}}}function o(L){var D=L.prev,w=L,N=L.next;if(P(D,w,N)>=0)return!1;for(var V=L.next.next;V!==L.prev;){if(S(D.x,D.y,w.x,w.y,N.x,N.y,V.x,V.y)&&P(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function r(L,D,w,N){var V=L.prev,Y=L,W=L.next;if(P(V,Y,W)>=0)return!1;for(var H=V.x<Y.x?V.x<W.x?V.x:W.x:Y.x<W.x?Y.x:W.x,$=V.y<Y.y?V.y<W.y?V.y:W.y:Y.y<W.y?Y.y:W.y,K=V.x>Y.x?V.x>W.x?V.x:W.x:Y.x>W.x?Y.x:W.x,Z=V.y>Y.y?V.y>W.y?V.y:W.y:Y.y>W.y?Y.y:W.y,J=T(H,$,D,w,N),k=T(K,Z,D,w,N),Q=L.prevZ,q=L.nextZ;Q&&Q.z>=J&&q&&q.z<=k;){if(Q!==L.prev&&Q!==L.next&&S(V.x,V.y,Y.x,Y.y,W.x,W.y,Q.x,Q.y)&&P(Q.prev,Q,Q.next)>=0||(Q=Q.prevZ,q!==L.prev&&q!==L.next&&S(V.x,V.y,Y.x,Y.y,W.x,W.y,q.x,q.y)&&P(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;Q&&Q.z>=J;){if(Q!==L.prev&&Q!==L.next&&S(V.x,V.y,Y.x,Y.y,W.x,W.y,Q.x,Q.y)&&P(Q.prev,Q,Q.next)>=0)return!1;Q=Q.prevZ}for(;q&&q.z<=k;){if(q!==L.prev&&q!==L.next&&S(V.x,V.y,Y.x,Y.y,W.x,W.y,q.x,q.y)&&P(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function a(L,D,w){var N=L;do{var V=N.prev,Y=N.next.next;!M(V,Y)&&A(V,N,N.next,Y)&&I(V,Y)&&I(Y,V)&&(D.push(V.i/w),D.push(N.i/w),D.push(Y.i/w),X(N),X(N.next),N=L=Y),N=N.next}while(N!==L);return n(N)}function d(L,D,w,N,V,Y){var W=L;do{for(var H=W.next.next;H!==W.prev;){if(W.i!==H.i&&E(W,H)){var $=z(W,H);W=n(W,W.next),$=n($,$.next),h(W,D,w,N,V,Y),h($,D,w,N,V,Y);return}H=H.next}W=W.next}while(W!==L)}function l(L,D,w,N){var V=[],Y,W,H,$,K;for(Y=0,W=D.length;Y<W;Y++)H=D[Y]*N,$=Y<W-1?D[Y+1]*N:L.length,K=u(L,H,$,N,!1),K===K.next&&(K.steiner=!0),V.push(C(K));for(V.sort(f),Y=0;Y<V.length;Y++)v(V[Y],w),w=n(w,w.next);return w}function f(L,D){return L.x-D.x}function v(L,D){if(D=g(L,D),D){var w=z(D,L);n(D,D.next),n(w,w.next)}}function g(L,D){var w=D,N=L.x,V=L.y,Y=-1/0,W;do{if(V<=w.y&&V>=w.next.y&&w.next.y!==w.y){var H=w.x+(V-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(H<=N&&H>Y){if(Y=H,H===N){if(V===w.y)return w;if(V===w.next.y)return w.next}W=w.x<w.next.x?w:w.next}}w=w.next}while(w!==D);if(!W)return null;if(N===Y)return W;var $=W,K=W.x,Z=W.y,J=1/0,k;w=W;do N>=w.x&&w.x>=K&&N!==w.x&&S(V<Z?N:Y,V,K,Z,V<Z?Y:N,V,w.x,w.y)&&(k=Math.abs(V-w.y)/(N-w.x),I(w,L)&&(k<J||k===J&&(w.x>W.x||w.x===W.x&&p(W,w)))&&(W=w,J=k)),w=w.next;while(w!==$);return W}function p(L,D){return P(L.prev,L,D.prev)<0&&P(D.next,L,L.next)<0}function m(L,D,w,N){var V=L;do V.z===null&&(V.z=T(V.x,V.y,D,w,N)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==L);V.prevZ.nextZ=null,V.prevZ=null,y(V)}function y(L){var D,w,N,V,Y,W,H,$,K=1;do{for(w=L,L=null,Y=null,W=0;w;){for(W++,N=w,H=0,D=0;D<K&&(H++,N=N.nextZ,!!N);D++);for($=K;H>0||$>0&&N;)H!==0&&($===0||!N||w.z<=N.z)?(V=w,w=w.nextZ,H--):(V=N,N=N.nextZ,$--),Y?Y.nextZ=V:L=V,V.prevZ=Y,Y=V;w=N}Y.nextZ=null,K*=2}while(W>1);return L}function T(L,D,w,N,V){return L=32767*(L-w)*V,D=32767*(D-N)*V,L=(L|L<<8)&16711935,L=(L|L<<4)&252645135,L=(L|L<<2)&858993459,L=(L|L<<1)&1431655765,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,L|D<<1}function C(L){var D=L,w=L;do(D.x<w.x||D.x===w.x&&D.y<w.y)&&(w=D),D=D.next;while(D!==L);return w}function S(L,D,w,N,V,Y,W,H){return(V-W)*(D-H)-(L-W)*(Y-H)>=0&&(L-W)*(N-H)-(w-W)*(D-H)>=0&&(w-W)*(Y-H)-(V-W)*(N-H)>=0}function E(L,D){return L.next.i!==D.i&&L.prev.i!==D.i&&!F(L,D)&&(I(L,D)&&I(D,L)&&G(L,D)&&(P(L.prev,L,D.prev)||P(L,D.prev,D))||M(L,D)&&P(L.prev,L,L.next)>0&&P(D.prev,D,D.next)>0)}function P(L,D,w){return(D.y-L.y)*(w.x-D.x)-(D.x-L.x)*(w.y-D.y)}function M(L,D){return L.x===D.x&&L.y===D.y}function A(L,D,w,N){var V=O(P(L,D,w)),Y=O(P(L,D,N)),W=O(P(w,N,L)),H=O(P(w,N,D));return!!(V!==Y&&W!==H||V===0&&R(L,w,D)||Y===0&&R(L,N,D)||W===0&&R(w,L,N)||H===0&&R(w,D,N))}function R(L,D,w){return D.x<=Math.max(L.x,w.x)&&D.x>=Math.min(L.x,w.x)&&D.y<=Math.max(L.y,w.y)&&D.y>=Math.min(L.y,w.y)}function O(L){return L>0?1:L<0?-1:0}function F(L,D){var w=L;do{if(w.i!==L.i&&w.next.i!==L.i&&w.i!==D.i&&w.next.i!==D.i&&A(w,w.next,L,D))return!0;w=w.next}while(w!==L);return!1}function I(L,D){return P(L.prev,L,L.next)<0?P(L,D,L.next)>=0&&P(L,L.prev,D)>=0:P(L,D,L.prev)<0||P(L,L.next,D)<0}function G(L,D){var w=L,N=!1,V=(L.x+D.x)/2,Y=(L.y+D.y)/2;do w.y>Y!=w.next.y>Y&&w.next.y!==w.y&&V<(w.next.x-w.x)*(Y-w.y)/(w.next.y-w.y)+w.x&&(N=!N),w=w.next;while(w!==L);return N}function z(L,D){var w=new b(L.i,L.x,L.y),N=new b(D.i,D.x,D.y),V=L.next,Y=D.prev;return L.next=D,D.prev=L,w.next=V,V.prev=w,N.next=w,w.prev=N,Y.next=N,N.prev=Y,N}function U(L,D,w,N){var V=new b(L,D,w);return N?(V.next=N.next,V.prev=N,N.next.prev=V,N.next=V):(V.prev=V,V.next=V),V}function X(L){L.next.prev=L.prev,L.prev.next=L.next,L.prevZ&&(L.prevZ.nextZ=L.nextZ),L.nextZ&&(L.nextZ.prevZ=L.prevZ)}function b(L,D,w){this.i=L,this.x=D,this.y=w,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}s.deviation=function(L,D,w,N){var V=D&&D.length,Y=V?D[0]*w:L.length,W=Math.abs(B(L,0,Y,w));if(V)for(var H=0,$=D.length;H<$;H++){var K=D[H]*w,Z=H<$-1?D[H+1]*w:L.length;W-=Math.abs(B(L,K,Z,w))}var J=0;for(H=0;H<N.length;H+=3){var k=N[H]*w,Q=N[H+1]*w,q=N[H+2]*w;J+=Math.abs((L[k]-L[q])*(L[Q+1]-L[k+1])-(L[k]-L[Q])*(L[q+1]-L[k+1]))}return W===0&&J===0?0:Math.abs((J-W)/W)};function B(L,D,w,N){for(var V=0,Y=D,W=w-N;Y<w;Y+=N)V+=(L[W]-L[Y])*(L[Y+1]+L[W+1]),W=Y;return V}s.flatten=function(L){for(var D=L[0][0].length,w={vertices:[],holes:[],dimensions:D},N=0,V=0;V<L.length;V++){for(var Y=0;Y<L[V].length;Y++)for(var W=0;W<D;W++)w.vertices.push(L[V][Y][W]);V>0&&(N+=L[V-1].length,w.holes.push(N))}return w},e.exports=s},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){var o=n||u.strokeColor,r=h||u.strokeAlpha,a=(o&16711680)>>>16,d=(o&65280)>>>8,l=o&255;s.strokeStyle="rgba("+a+","+d+","+l+","+r+")",s.lineWidth=u.lineWidth};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(2),r=t(6),a=t(7),d=new s({Extends:n,initialize:function(f,v,g,p,m){var y="json";if(a(v)){var T=v;v=o(T,"key"),g=o(T,"url"),p=o(T,"xhrSettings"),y=o(T,"extension",y),m=o(T,"dataKey",m)}var C={type:"json",cache:f.cacheManager.json,extension:y,responseType:"text",key:v,url:g,xhrSettings:p,config:m};n.call(this,f,C),a(g)&&(m?this.data=r(g,m):this.data=g,this.state=u.FILE_POPULATED)},onProcess:function(){if(this.state!==u.FILE_POPULATED){this.state=u.FILE_PROCESSING;try{var l=JSON.parse(this.xhrLoader.responseText)}catch(v){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),v}var f=this.config;typeof f=="string"?this.data=r(l,f,l):this.data=l}this.onProcessComplete()}});h.register("json",function(l,f,v,g){if(Array.isArray(l))for(var p=0;p<l.length;p++)this.addFile(new d(this,l[p]));else this.addFile(new d(this,l,f,g,v));return this}),e.exports=d},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(158),u=t(26),n=function(h,o,r,a,d){for(var l=null,f=null,v=null,g=null,p=u(h,o,r,a,null,d),m=0;m<p.length;m++){var y=p[m];y&&(y.collides?(l=s(y.x,y.y-1,!0,d),f=s(y.x,y.y+1,!0,d),v=s(y.x-1,y.y,!0,d),g=s(y.x+1,y.y,!0,d),y.faceTop=!(l&&l.collides),y.faceBottom=!(f&&f.collides),y.faceLeft=!(v&&v.collides),y.faceRight=!(g&&g.collides)):y.resetFaces())}};e.exports=n},function(e,c,t){var s={};e.exports=s;var u=t(83),n=t(32);(function(){s.create=function(h,o){for(var r=[],a=0;a<h.length;a++){var d=h[a],l={x:d.x,y:d.y,index:a,body:o,isInternal:!1,contact:null,offset:null};l.contact={vertex:l,normalImpulse:0,tangentImpulse:0},r.push(l)}return r},s.fromPath=function(h,o){var r=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,a=[];return h.replace(r,function(d,l,f){a.push({x:parseFloat(l),y:parseFloat(f)})}),s.create(a,o)},s.centre=function(h){for(var o=s.area(h,!0),r={x:0,y:0},a,d,l,f=0;f<h.length;f++)l=(f+1)%h.length,a=u.cross(h[f],h[l]),d=u.mult(u.add(h[f],h[l]),a),r=u.add(r,d);return u.div(r,6*o)},s.mean=function(h){for(var o={x:0,y:0},r=0;r<h.length;r++)o.x+=h[r].x,o.y+=h[r].y;return u.div(o,h.length)},s.area=function(h,o){for(var r=0,a=h.length-1,d=0;d<h.length;d++)r+=(h[a].x-h[d].x)*(h[a].y+h[d].y),a=d;return o?r/2:Math.abs(r)/2},s.inertia=function(h,o){for(var r=0,a=0,d=h,l,f,v=0;v<d.length;v++)f=(v+1)%d.length,l=Math.abs(u.cross(d[f],d[v])),r+=l*(u.dot(d[f],d[f])+u.dot(d[f],d[v])+u.dot(d[v],d[v])),a+=l;return o/6*(r/a)},s.translate=function(h,o,r){var a;if(r)for(a=0;a<h.length;a++)h[a].x+=o.x*r,h[a].y+=o.y*r;else for(a=0;a<h.length;a++)h[a].x+=o.x,h[a].y+=o.y;return h},s.rotate=function(h,o,r){if(o!==0){for(var a=Math.cos(o),d=Math.sin(o),l=0;l<h.length;l++){var f=h[l],v=f.x-r.x,g=f.y-r.y;f.x=r.x+(v*a-g*d),f.y=r.y+(v*d+g*a)}return h}},s.contains=function(h,o){for(var r=0;r<h.length;r++){var a=h[r],d=h[(r+1)%h.length];if((o.x-a.x)*(d.y-a.y)+(o.y-a.y)*(a.x-d.x)>0)return!1}return!0},s.scale=function(h,o,r,a){if(o===1&&r===1)return h;a=a||s.centre(h);for(var d,l,f=0;f<h.length;f++)d=h[f],l=u.sub(d,a),h[f].x=a.x+l.x*o,h[f].y=a.y+l.y*r;return h},s.chamfer=function(h,o,r,a,d){typeof o=="number"?o=[o]:o=o||[8],r=typeof r!="undefined"?r:-1,a=a||2,d=d||14;for(var l=[],f=0;f<h.length;f++){var v=h[f-1>=0?f-1:h.length-1],g=h[f],p=h[(f+1)%h.length],m=o[f<o.length?f:o.length-1];if(m===0){l.push(g);continue}var y=u.normalise({x:g.y-v.y,y:v.x-g.x}),T=u.normalise({x:p.y-g.y,y:g.x-p.x}),C=Math.sqrt(2*Math.pow(m,2)),S=u.mult(n.clone(y),m),E=u.normalise(u.mult(u.add(y,T),.5)),P=u.sub(g,u.mult(E,C)),M=r;r===-1&&(M=Math.pow(m,.32)*1.75),M=n.clamp(M,a,d),M%2==1&&(M+=1);for(var A=Math.acos(u.dot(y,T)),R=A/M,O=0;O<M;O++)l.push(u.add(u.rotate(S,R*O),P))}return l},s.clockwiseSort=function(h){var o=s.mean(h);return h.sort(function(r,a){return u.angle(o,r)-u.angle(o,a)}),h},s.isConvex=function(h){var o=0,r=h.length,a,d,l,f;if(r<3)return null;for(a=0;a<r;a++)if(d=(a+1)%r,l=(a+2)%r,f=(h[d].x-h[a].x)*(h[l].y-h[d].y),f-=(h[d].y-h[a].y)*(h[l].x-h[d].x),f<0?o|=1:f>0&&(o|=2),o===3)return!1;return o!==0?!0:null},s.hull=function(h){var o=[],r=[],a,d;for(h=h.slice(0),h.sort(function(l,f){var v=l.x-f.x;return v!==0?v:l.y-f.y}),d=0;d<h.length;d+=1){for(a=h[d];r.length>=2&&u.cross3(r[r.length-2],r[r.length-1],a)<=0;)r.pop();r.push(a)}for(d=h.length-1;d>=0;d-=1){for(a=h[d];o.length>=2&&u.cross3(o[o.length-2],o[o.length-1],a)<=0;)o.pop();o.push(a)}return o.pop(),r.pop(),o.concat(r)}})()},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(66),n=t(300),h=t(301),o=t(56),r=t(170),a=new s({initialize:function(l,f,v){l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=0),this.type=o.CIRCLE,this.x=l,this.y=f,this._radius=v,this._diameter=v*2},contains:function(d,l){return u(this,d,l)},getPoint:function(d,l){return n(this,d,l)},getPoints:function(d,l,f){return h(this,d,l,f)},getRandomPoint:function(d){return r(this,d)},setTo:function(d,l,f){return this.x=d,this.y=l,this._radius=f,this._diameter=f*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(d,l){return l===void 0&&(l=d),this.x=d,this.y=l,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this._diameter=d*2}},diameter:{get:function(){return this._diameter},set:function(d){this._diameter=d,this._radius=d*.5}},left:{get:function(){return this.x-this._radius},set:function(d){this.x=d+this._radius}},right:{get:function(){return this.x+this._radius},set:function(d){this.x=d-this._radius}},top:{get:function(){return this.y-this._radius},set:function(d){this.y=d+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(d){this.y=d-this._radius}}});e.exports=a},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(s.radius>0&&u>=s.left&&u<=s.right&&n>=s.top&&n<=s.bottom){var h=(s.x-u)*(s.x-u),o=(s.y-n)*(s.y-n);return h+o<=s.radius*s.radius}else return!1};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.sqrt((s.x2-s.x1)*(s.x2-s.x1)+(s.y2-s.y1)*(s.y2-s.y1))};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h=n-u;return u+((s-u)%h+h)%h};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(39),n=1e-6,h=new s({initialize:function(v){this.val=new Float32Array(16),v?this.copy(v):this.identity()},clone:function(){return new h(this)},set:function(f){return this.copy(f)},setValues:function(f,v,g,p,m,y,T,C,S,E,P,M,A,R,O,F){var I=this.val;return I[0]=f,I[1]=v,I[2]=g,I[3]=p,I[4]=m,I[5]=y,I[6]=T,I[7]=C,I[8]=S,I[9]=E,I[10]=P,I[11]=M,I[12]=A,I[13]=R,I[14]=O,I[15]=F,this},copy:function(f){var v=f.val;return this.setValues(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])},fromArray:function(f){return this.setValues(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(f,v,g){var p=o.fromQuat(g),m=p.val,y=v.x,T=v.y,C=v.z;return this.setValues(m[0]*y,m[1]*y,m[2]*y,0,m[4]*T,m[5]*T,m[6]*T,0,m[8]*C,m[9]*C,m[10]*C,0,f.x,f.y,f.z,1)},xyz:function(f,v,g){this.identity();var p=this.val;return p[12]=f,p[13]=v,p[14]=g,this},scaling:function(f,v,g){this.zero();var p=this.val;return p[0]=f,p[5]=v,p[10]=g,p[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var f=this.val,v=f[1],g=f[2],p=f[3],m=f[6],y=f[7],T=f[11];return f[1]=f[4],f[2]=f[8],f[3]=f[12],f[4]=v,f[6]=f[9],f[7]=f[13],f[8]=g,f[9]=m,f[11]=f[14],f[12]=p,f[13]=y,f[14]=T,this},getInverse:function(f){return this.copy(f),this.invert()},invert:function(){var f=this.val,v=f[0],g=f[1],p=f[2],m=f[3],y=f[4],T=f[5],C=f[6],S=f[7],E=f[8],P=f[9],M=f[10],A=f[11],R=f[12],O=f[13],F=f[14],I=f[15],G=v*T-g*y,z=v*C-p*y,U=v*S-m*y,X=g*C-p*T,b=g*S-m*T,B=p*S-m*C,L=E*O-P*R,D=E*F-M*R,w=E*I-A*R,N=P*F-M*O,V=P*I-A*O,Y=M*I-A*F,W=G*Y-z*V+U*N+X*w-b*D+B*L;return W?(W=1/W,this.setValues((T*Y-C*V+S*N)*W,(p*V-g*Y-m*N)*W,(O*B-F*b+I*X)*W,(M*b-P*B-A*X)*W,(C*w-y*Y-S*D)*W,(v*Y-p*w+m*D)*W,(F*U-R*B-I*z)*W,(E*B-M*U+A*z)*W,(y*V-T*w+S*L)*W,(g*w-v*V-m*L)*W,(R*b-O*U+I*G)*W,(P*U-E*b-A*G)*W,(T*D-y*N-C*L)*W,(v*N-g*D+p*L)*W,(O*z-R*X-F*G)*W,(E*X-P*z+M*G)*W)):this},adjoint:function(){var f=this.val,v=f[0],g=f[1],p=f[2],m=f[3],y=f[4],T=f[5],C=f[6],S=f[7],E=f[8],P=f[9],M=f[10],A=f[11],R=f[12],O=f[13],F=f[14],I=f[15];return this.setValues(T*(M*I-A*F)-P*(C*I-S*F)+O*(C*A-S*M),-(g*(M*I-A*F)-P*(p*I-m*F)+O*(p*A-m*M)),g*(C*I-S*F)-T*(p*I-m*F)+O*(p*S-m*C),-(g*(C*A-S*M)-T*(p*A-m*M)+P*(p*S-m*C)),-(y*(M*I-A*F)-E*(C*I-S*F)+R*(C*A-S*M)),v*(M*I-A*F)-E*(p*I-m*F)+R*(p*A-m*M),-(v*(C*I-S*F)-y*(p*I-m*F)+R*(p*S-m*C)),v*(C*A-S*M)-y*(p*A-m*M)+E*(p*S-m*C),y*(P*I-A*O)-E*(T*I-S*O)+R*(T*A-S*P),-(v*(P*I-A*O)-E*(g*I-m*O)+R*(g*A-m*P)),v*(T*I-S*O)-y*(g*I-m*O)+R*(g*S-m*T),-(v*(T*A-S*P)-y*(g*A-m*P)+E*(g*S-m*T)),-(y*(P*F-M*O)-E*(T*F-C*O)+R*(T*M-C*P)),v*(P*F-M*O)-E*(g*F-p*O)+R*(g*M-p*P),-(v*(T*F-C*O)-y*(g*F-p*O)+R*(g*C-p*T)),v*(T*M-C*P)-y*(g*M-p*P)+E*(g*C-p*T))},determinant:function(){var f=this.val,v=f[0],g=f[1],p=f[2],m=f[3],y=f[4],T=f[5],C=f[6],S=f[7],E=f[8],P=f[9],M=f[10],A=f[11],R=f[12],O=f[13],F=f[14],I=f[15],G=v*T-g*y,z=v*C-p*y,U=v*S-m*y,X=g*C-p*T,b=g*S-m*T,B=p*S-m*C,L=E*O-P*R,D=E*F-M*R,w=E*I-A*R,N=P*F-M*O,V=P*I-A*O,Y=M*I-A*F;return G*Y-z*V+U*N+X*w-b*D+B*L},multiply:function(f){var v=this.val,g=v[0],p=v[1],m=v[2],y=v[3],T=v[4],C=v[5],S=v[6],E=v[7],P=v[8],M=v[9],A=v[10],R=v[11],O=v[12],F=v[13],I=v[14],G=v[15],z=f.val,U=z[0],X=z[1],b=z[2],B=z[3];return v[0]=U*g+X*T+b*P+B*O,v[1]=U*p+X*C+b*M+B*F,v[2]=U*m+X*S+b*A+B*I,v[3]=U*y+X*E+b*R+B*G,U=z[4],X=z[5],b=z[6],B=z[7],v[4]=U*g+X*T+b*P+B*O,v[5]=U*p+X*C+b*M+B*F,v[6]=U*m+X*S+b*A+B*I,v[7]=U*y+X*E+b*R+B*G,U=z[8],X=z[9],b=z[10],B=z[11],v[8]=U*g+X*T+b*P+B*O,v[9]=U*p+X*C+b*M+B*F,v[10]=U*m+X*S+b*A+B*I,v[11]=U*y+X*E+b*R+B*G,U=z[12],X=z[13],b=z[14],B=z[15],v[12]=U*g+X*T+b*P+B*O,v[13]=U*p+X*C+b*M+B*F,v[14]=U*m+X*S+b*A+B*I,v[15]=U*y+X*E+b*R+B*G,this},multiplyLocal:function(f){var v=this.val,g=f.val;return this.setValues(v[0]*g[0]+v[1]*g[4]+v[2]*g[8]+v[3]*g[12],v[0]*g[1]+v[1]*g[5]+v[2]*g[9]+v[3]*g[13],v[0]*g[2]+v[1]*g[6]+v[2]*g[10]+v[3]*g[14],v[0]*g[3]+v[1]*g[7]+v[2]*g[11]+v[3]*g[15],v[4]*g[0]+v[5]*g[4]+v[6]*g[8]+v[7]*g[12],v[4]*g[1]+v[5]*g[5]+v[6]*g[9]+v[7]*g[13],v[4]*g[2]+v[5]*g[6]+v[6]*g[10]+v[7]*g[14],v[4]*g[3]+v[5]*g[7]+v[6]*g[11]+v[7]*g[15],v[8]*g[0]+v[9]*g[4]+v[10]*g[8]+v[11]*g[12],v[8]*g[1]+v[9]*g[5]+v[10]*g[9]+v[11]*g[13],v[8]*g[2]+v[9]*g[6]+v[10]*g[10]+v[11]*g[14],v[8]*g[3]+v[9]*g[7]+v[10]*g[11]+v[11]*g[15],v[12]*g[0]+v[13]*g[4]+v[14]*g[8]+v[15]*g[12],v[12]*g[1]+v[13]*g[5]+v[14]*g[9]+v[15]*g[13],v[12]*g[2]+v[13]*g[6]+v[14]*g[10]+v[15]*g[14],v[12]*g[3]+v[13]*g[7]+v[14]*g[11]+v[15]*g[15])},premultiply:function(f){return this.multiplyMatrices(f,this)},multiplyMatrices:function(f,v){var g=f.val,p=v.val,m=g[0],y=g[4],T=g[8],C=g[12],S=g[1],E=g[5],P=g[9],M=g[13],A=g[2],R=g[6],O=g[10],F=g[14],I=g[3],G=g[7],z=g[11],U=g[15],X=p[0],b=p[4],B=p[8],L=p[12],D=p[1],w=p[5],N=p[9],V=p[13],Y=p[2],W=p[6],H=p[10],$=p[14],K=p[3],Z=p[7],J=p[11],k=p[15];return this.setValues(m*X+y*D+T*Y+C*K,S*X+E*D+P*Y+M*K,A*X+R*D+O*Y+F*K,I*X+G*D+z*Y+U*K,m*b+y*w+T*W+C*Z,S*b+E*w+P*W+M*Z,A*b+R*w+O*W+F*Z,I*b+G*w+z*W+U*Z,m*B+y*N+T*H+C*J,S*B+E*N+P*H+M*J,A*B+R*N+O*H+F*J,I*B+G*N+z*H+U*J,m*L+y*V+T*$+C*k,S*L+E*V+P*$+M*k,A*L+R*V+O*$+F*k,I*L+G*V+z*$+U*k)},translate:function(f){return this.translateXYZ(f.x,f.y,f.z)},translateXYZ:function(f,v,g){var p=this.val;return p[12]=p[0]*f+p[4]*v+p[8]*g+p[12],p[13]=p[1]*f+p[5]*v+p[9]*g+p[13],p[14]=p[2]*f+p[6]*v+p[10]*g+p[14],p[15]=p[3]*f+p[7]*v+p[11]*g+p[15],this},scale:function(f){return this.scaleXYZ(f.x,f.y,f.z)},scaleXYZ:function(f,v,g){var p=this.val;return p[0]=p[0]*f,p[1]=p[1]*f,p[2]=p[2]*f,p[3]=p[3]*f,p[4]=p[4]*v,p[5]=p[5]*v,p[6]=p[6]*v,p[7]=p[7]*v,p[8]=p[8]*g,p[9]=p[9]*g,p[10]=p[10]*g,p[11]=p[11]*g,this},makeRotationAxis:function(f,v){var g=Math.cos(v),p=Math.sin(v),m=1-g,y=f.x,T=f.y,C=f.z,S=m*y,E=m*T;return this.setValues(S*y+g,S*T-p*C,S*C+p*T,0,S*T+p*C,E*T+g,E*C-p*y,0,S*C-p*T,E*C+p*y,m*C*C+g,0,0,0,0,1)},rotate:function(f,v){var g=this.val,p=v.x,m=v.y,y=v.z,T=Math.sqrt(p*p+m*m+y*y);if(Math.abs(T)<n)return this;T=1/T,p*=T,m*=T,y*=T;var C=Math.sin(f),S=Math.cos(f),E=1-S,P=g[0],M=g[1],A=g[2],R=g[3],O=g[4],F=g[5],I=g[6],G=g[7],z=g[8],U=g[9],X=g[10],b=g[11],B=g[12],L=g[13],D=g[14],w=g[15],N=p*p*E+S,V=m*p*E+y*C,Y=y*p*E-m*C,W=p*m*E-y*C,H=m*m*E+S,$=y*m*E+p*C,K=p*y*E+m*C,Z=m*y*E-p*C,J=y*y*E+S;return this.setValues(P*N+O*V+z*Y,M*N+F*V+U*Y,A*N+I*V+X*Y,R*N+G*V+b*Y,P*W+O*H+z*$,M*W+F*H+U*$,A*W+I*H+X*$,R*W+G*H+b*$,P*K+O*Z+z*J,M*K+F*Z+U*J,A*K+I*Z+X*J,R*K+G*Z+b*J,B,L,D,w)},rotateX:function(f){var v=this.val,g=Math.sin(f),p=Math.cos(f),m=v[4],y=v[5],T=v[6],C=v[7],S=v[8],E=v[9],P=v[10],M=v[11];return v[4]=m*p+S*g,v[5]=y*p+E*g,v[6]=T*p+P*g,v[7]=C*p+M*g,v[8]=S*p-m*g,v[9]=E*p-y*g,v[10]=P*p-T*g,v[11]=M*p-C*g,this},rotateY:function(f){var v=this.val,g=Math.sin(f),p=Math.cos(f),m=v[0],y=v[1],T=v[2],C=v[3],S=v[8],E=v[9],P=v[10],M=v[11];return v[0]=m*p-S*g,v[1]=y*p-E*g,v[2]=T*p-P*g,v[3]=C*p-M*g,v[8]=m*g+S*p,v[9]=y*g+E*p,v[10]=T*g+P*p,v[11]=C*g+M*p,this},rotateZ:function(f){var v=this.val,g=Math.sin(f),p=Math.cos(f),m=v[0],y=v[1],T=v[2],C=v[3],S=v[4],E=v[5],P=v[6],M=v[7];return v[0]=m*p+S*g,v[1]=y*p+E*g,v[2]=T*p+P*g,v[3]=C*p+M*g,v[4]=S*p-m*g,v[5]=E*p-y*g,v[6]=P*p-T*g,v[7]=M*p-C*g,this},fromRotationTranslation:function(f,v){var g=f.x,p=f.y,m=f.z,y=f.w,T=g+g,C=p+p,S=m+m,E=g*T,P=g*C,M=g*S,A=p*C,R=p*S,O=m*S,F=y*T,I=y*C,G=y*S;return this.setValues(1-(A+O),P+G,M-I,0,P-G,1-(E+O),R+F,0,M+I,R-F,1-(E+A),0,v.x,v.y,v.z,1)},fromQuat:function(f){var v=f.x,g=f.y,p=f.z,m=f.w,y=v+v,T=g+g,C=p+p,S=v*y,E=v*T,P=v*C,M=g*T,A=g*C,R=p*C,O=m*y,F=m*T,I=m*C;return this.setValues(1-(M+R),E+I,P-F,0,E-I,1-(S+R),A+O,0,P+F,A-O,1-(S+M),0,0,0,0,1)},frustum:function(f,v,g,p,m,y){var T=1/(v-f),C=1/(p-g),S=1/(m-y);return this.setValues(m*2*T,0,0,0,0,m*2*C,0,0,(v+f)*T,(p+g)*C,(y+m)*S,-1,0,0,y*m*2*S,0)},perspective:function(f,v,g,p){var m=1/Math.tan(f/2),y=1/(g-p);return this.setValues(m/v,0,0,0,0,m,0,0,0,0,(p+g)*y,-1,0,0,2*p*g*y,0)},perspectiveLH:function(f,v,g,p){return this.setValues(2*g/f,0,0,0,0,2*g/v,0,0,0,0,-p/(g-p),1,0,0,g*p/(g-p),0)},ortho:function(f,v,g,p,m,y){var T=f-v,C=g-p,S=m-y;return T=T===0?T:1/T,C=C===0?C:1/C,S=S===0?S:1/S,this.setValues(-2*T,0,0,0,0,-2*C,0,0,0,0,2*S,0,(f+v)*T,(p+g)*C,(y+m)*S,1)},lookAtRH:function(f,v,g){var p=this.val;return l.subVectors(f,v),l.getLengthSquared()===0&&(l.z=1),l.normalize(),a.crossVectors(g,l),a.getLengthSquared()===0&&(Math.abs(g.z)===1?l.x+=1e-4:l.z+=1e-4,l.normalize(),a.crossVectors(g,l)),a.normalize(),d.crossVectors(l,a),p[0]=a.x,p[1]=a.y,p[2]=a.z,p[4]=d.x,p[5]=d.y,p[6]=d.z,p[8]=l.x,p[9]=l.y,p[10]=l.z,this},lookAt:function(f,v,g){var p=f.x,m=f.y,y=f.z,T=g.x,C=g.y,S=g.z,E=v.x,P=v.y,M=v.z;if(Math.abs(p-E)<n&&Math.abs(m-P)<n&&Math.abs(y-M)<n)return this.identity();var A=p-E,R=m-P,O=y-M,F=1/Math.sqrt(A*A+R*R+O*O);A*=F,R*=F,O*=F;var I=C*O-S*R,G=S*A-T*O,z=T*R-C*A;F=Math.sqrt(I*I+G*G+z*z),F?(F=1/F,I*=F,G*=F,z*=F):(I=0,G=0,z=0);var U=R*z-O*G,X=O*I-A*z,b=A*G-R*I;return F=Math.sqrt(U*U+X*X+b*b),F?(F=1/F,U*=F,X*=F,b*=F):(U=0,X=0,b=0),this.setValues(I,U,A,0,G,X,R,0,z,b,O,0,-(I*p+G*m+z*y),-(U*p+X*m+b*y),-(A*p+R*m+O*y),1)},yawPitchRoll:function(f,v,g){this.zero(),o.zero(),r.zero();var p=this.val,m=o.val,y=r.val,T=Math.sin(g),C=Math.cos(g);return p[10]=1,p[15]=1,p[0]=C,p[1]=T,p[4]=-T,p[5]=C,T=Math.sin(v),C=Math.cos(v),m[0]=1,m[15]=1,m[5]=C,m[10]=C,m[9]=-T,m[6]=T,T=Math.sin(f),C=Math.cos(f),y[5]=1,y[15]=1,y[0]=C,y[2]=-T,y[8]=T,y[10]=C,this.multiplyLocal(o),this.multiplyLocal(r),this},setWorldMatrix:function(f,v,g,p,m){return this.yawPitchRoll(f.y,f.x,f.z),o.scaling(g.x,g.y,g.z),r.xyz(v.x,v.y,v.z),this.multiplyLocal(o),this.multiplyLocal(r),p&&this.multiplyLocal(p),m&&this.multiplyLocal(m),this},multiplyToMat4:function(f,v){var g=this.val,p=f.val,m=g[0],y=g[1],T=g[2],C=g[3],S=g[4],E=g[5],P=g[6],M=g[7],A=g[8],R=g[9],O=g[10],F=g[11],I=g[12],G=g[13],z=g[14],U=g[15],X=p[0],b=p[1],B=p[2],L=p[3],D=p[4],w=p[5],N=p[6],V=p[7],Y=p[8],W=p[9],H=p[10],$=p[11],K=p[12],Z=p[13],J=p[14],k=p[15];return v.setValues(X*m+b*S+B*A+L*I,b*y+b*E+B*R+L*G,B*T+b*P+B*O+L*z,L*C+b*M+B*F+L*U,D*m+w*S+N*A+V*I,D*y+w*E+N*R+V*G,D*T+w*P+N*O+V*z,D*C+w*M+N*F+V*U,Y*m+W*S+H*A+$*I,Y*y+W*E+H*R+$*G,Y*T+W*P+H*O+$*z,Y*C+W*M+H*F+$*U,K*m+Z*S+J*A+k*I,K*y+Z*E+J*R+k*G,K*T+Z*P+J*O+k*z,K*C+Z*M+J*F+k*U)},fromRotationXYTranslation:function(f,v,g){var p=v.x,m=v.y,y=v.z,T=Math.sin(f.x),C=Math.cos(f.x),S=Math.sin(f.y),E=Math.cos(f.y),P=p,M=m,A=y,R=-T,O=0-R*S,F=0-C*S,I=R*E,G=C*E;return g||(P=E*p+S*y,M=O*p+C*m+I*y,A=F*p+T*m+G*y),this.setValues(E,O,F,0,0,C,T,0,S,I,G,0,P,M,A,1)},getMaxScaleOnAxis:function(){var f=this.val,v=f[0]*f[0]+f[1]*f[1]+f[2]*f[2],g=f[4]*f[4]+f[5]*f[5]+f[6]*f[6],p=f[8]*f[8]+f[9]*f[9]+f[10]*f[10];return Math.sqrt(Math.max(v,g,p))}}),o=new h,r=new h,a=new u,d=new u,l=new u;e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={COMPLETE:t(987),DECODED:t(988),DECODED_ALL:t(989),DESTROY:t(990),DETUNE:t(991),GLOBAL_DETUNE:t(992),GLOBAL_MUTE:t(993),GLOBAL_RATE:t(994),GLOBAL_VOLUME:t(995),LOOP:t(996),LOOPED:t(997),MUTE:t(998),PAN:t(999),PAUSE_ALL:t(1e3),PAUSE:t(1001),PLAY:t(1002),RATE:t(1003),RESUME_ALL:t(1004),RESUME:t(1005),SEEK:t(1006),STOP_ALL:t(1007),STOP:t(1008),UNLOCKED:t(1009),VOLUME:t(1010)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(2),r=t(7),a=new s({Extends:n,initialize:function d(l,f,v,g,p){var m="png",y;if(r(f)){var T=f;f=o(T,"key"),v=o(T,"url"),y=o(T,"normalMap"),g=o(T,"xhrSettings"),m=o(T,"extension",m),p=o(T,"frameConfig")}Array.isArray(v)&&(y=v[1],v=v[0]);var C={type:"image",cache:l.textureManager,extension:m,responseType:"blob",key:f,url:v,xhrSettings:g,config:p};if(n.call(this,l,C),y){var S=new d(l,this.key,y,g,p);S.type="normalMap",this.setLink(S),l.addFile(S)}},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var d=this;this.data.onload=function(){n.revokeObjectURL(d.data),d.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(d.data),d.onProcessError()},n.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var d,l=this.linkFile;l&&l.state===u.FILE_COMPLETE?(this.type==="image"?d=this.cache.addImage(this.key,this.data,l.data):d=this.cache.addImage(l.key,l.data,this.data),this.pendingDestroy(d),l.pendingDestroy(d)):l||(d=this.cache.addImage(this.key,this.data),this.pendingDestroy(d))}});h.register("image",function(d,l,f){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new a(this,d[v]));else this.addFile(new a(this,d,l,f));return this}),e.exports=a},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u?s.setCollision(!0,!0,!0,!0,!1):s.resetCollision(!1)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(164),u=t(0),n=t(11),h=t(15),o=t(1065),r=new u({Extends:h,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,o],initialize:function(d,l,f,v,g){h.call(this,d,"Sprite"),this._crop=this.resetCropObject(),this.anims=new s(this),this.setTexture(v,g),this.setPosition(l,f),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(a,d){this.anims.update(a,d)},play:function(a,d){return this.anims.play(a,d)},playReverse:function(a,d){return this.anims.playReverse(a,d)},playAfterDelay:function(a,d){return this.anims.playAfterDelay(a,d)},playAfterRepeat:function(a,d){return this.anims.playAfterRepeat(a,d)},chain:function(a){return this.anims.chain(a)},stop:function(){return this.anims.stop()},stopAfterDelay:function(a){return this.anims.stopAfterDelay(a)},stopAfterRepeat:function(a){return this.anims.stopAfterRepeat(a)},stopOnFrame:function(a){return this.anims.stopOnFrame(a)},toJSON:function(){return n.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});e.exports=r},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){if(!(u>=s.length)){for(var n=s.length-1,h=s[u],o=u;o<n;o++)s[o]=s[o+1];return s.length=n,h}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADDED_TO_SCENE:t(643),DESTROY:t(644),REMOVED_FROM_SCENE:t(645),VIDEO_COMPLETE:t(646),VIDEO_CREATED:t(647),VIDEO_ERROR:t(648),VIDEO_LOOP:t(649),VIDEO_PLAY:t(650),VIDEO_SEEKED:t(651),VIDEO_SEEKING:t(652),VIDEO_STOP:t(653),VIDEO_TIMEOUT:t(654),VIDEO_UNLOCKED:t(655)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){return n===void 0&&(n=0),u===0?s:(s-=n,s=u*Math.floor(s/u),h?(n+s)/u:n+s)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u={};for(var n in s)Array.isArray(s[n])?u[n]=s[n].slice(0):u[n]=s[n];return u};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){var o=s.length;if(u<0||u>o||u>=n||n>o||u+n>o){if(h)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(h,o){return String(h).localeCompare(o)}function s(h,o){var r=h.length;if(r<=1)return h;for(var a=new Array(r),d=1;d<r;d*=2){u(h,o,d,a);var l=h;h=a,a=l}return h}function u(h,o,r,a){var d=h.length,l=0,f=r*2,v,g,p,m,y;for(v=0;v<d;v+=f)for(g=v+r,p=g+r,g>d&&(g=d),p>d&&(p=d),m=v,y=g;;)if(m<g&&y<p)o(h[m],h[y])<=0?a[l++]=h[m++]:a[l++]=h[y++];else if(m<g)a[l++]=h[m++];else if(y<p)a[l++]=h[y++];else break}var n=function(h,o){o===void 0&&(o=t);var r=s(h,o);return r!==h&&u(r,null,h.length,h),h};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(134),u=t(205),n=function(h,o){var r=s.Power0;if(typeof h=="string")if(s.hasOwnProperty(h))r=s[h];else{var a="";h.indexOf(".")&&(a=h.substr(h.indexOf(".")+1),a.toLowerCase()==="in"?a="easeIn":a.toLowerCase()==="out"?a="easeOut":a.toLowerCase()==="inout"&&(a="easeInOut")),h=u(h.substr(0,h.indexOf(".")+1)+a),s.hasOwnProperty(h)&&(r=s[h])}else typeof h=="function"?r=h:Array.isArray(h)&&h.length===4;if(!o)return r;var d=o.slice(0);return d.unshift(0),function(l){return d[0]=l,r.apply(this,d)}};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,h,o,r,a){var d=n.strokeTint,l=s.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*o);d.TL=l,d.TR=l,d.BL=l,d.BR=l;var f=h.pathData,v=f.length-1,g=h.lineWidth,p=g/2,m=f[0]-r,y=f[1]-a;h.closePath||(v-=2);for(var T=2;T<v;T+=2){var C=f[T]-r,S=f[T+1]-a;n.batchLine(m,y,C,S,p,p,g,T-2,h.closePath?T===v-1:!1),m=C,y=S}};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(115),n=t(476),h=t(477),o=t(56),r=t(47),a=t(181),d=new s({initialize:function(f,v,g,p,m,y){f===void 0&&(f=0),v===void 0&&(v=0),g===void 0&&(g=0),p===void 0&&(p=0),m===void 0&&(m=0),y===void 0&&(y=0),this.type=o.TRIANGLE,this.x1=f,this.y1=v,this.x2=g,this.y2=p,this.x3=m,this.y3=y},contains:function(l,f){return u(this,l,f)},getPoint:function(l,f){return n(this,l,f)},getPoints:function(l,f,v){return h(this,l,f,v)},getRandomPoint:function(l){return a(this,l)},setTo:function(l,f,v,g,p,m){return l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=0),g===void 0&&(g=0),p===void 0&&(p=0),m===void 0&&(m=0),this.x1=l,this.y1=f,this.x2=v,this.y2=g,this.x3=p,this.y3=m,this},getLineA:function(l){return l===void 0&&(l=new r),l.setTo(this.x1,this.y1,this.x2,this.y2),l},getLineB:function(l){return l===void 0&&(l=new r),l.setTo(this.x2,this.y2,this.x3,this.y3),l},getLineC:function(l){return l===void 0&&(l=new r),l.setTo(this.x3,this.y3,this.x1,this.y1),l},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(l){var f=0;this.x1<=this.x2&&this.x1<=this.x3?f=this.x1-l:this.x2<=this.x1&&this.x2<=this.x3?f=this.x2-l:f=this.x3-l,this.x1-=f,this.x2-=f,this.x3-=f}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(l){var f=0;this.x1>=this.x2&&this.x1>=this.x3?f=this.x1-l:this.x2>=this.x1&&this.x2>=this.x3?f=this.x2-l:f=this.x3-l,this.x1-=f,this.x2-=f,this.x3-=f}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(l){var f=0;this.y1<=this.y2&&this.y1<=this.y3?f=this.y1-l:this.y2<=this.y1&&this.y2<=this.y3?f=this.y2-l:f=this.y3-l,this.y1-=f,this.y2-=f,this.y3-=f}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(l){var f=0;this.y1>=this.y2&&this.y1>=this.y3?f=this.y1-l:this.y2>=this.y1&&this.y2>=this.y3?f=this.y2-l:f=this.y3-l,this.y1-=f,this.y2-=f,this.y3-=f}}});e.exports=d},function(e,c){var t={};e.exports=t,function(){t.create=function(s,u){return{x:s||0,y:u||0}},t.clone=function(s){return{x:s.x,y:s.y}},t.magnitude=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},t.magnitudeSquared=function(s){return s.x*s.x+s.y*s.y},t.rotate=function(s,u,n){var h=Math.cos(u),o=Math.sin(u);n||(n={});var r=s.x*h-s.y*o;return n.y=s.x*o+s.y*h,n.x=r,n},t.rotateAbout=function(s,u,n,h){var o=Math.cos(u),r=Math.sin(u);h||(h={});var a=n.x+((s.x-n.x)*o-(s.y-n.y)*r);return h.y=n.y+((s.x-n.x)*r+(s.y-n.y)*o),h.x=a,h},t.normalise=function(s){var u=t.magnitude(s);return u===0?{x:0,y:0}:{x:s.x/u,y:s.y/u}},t.dot=function(s,u){return s.x*u.x+s.y*u.y},t.cross=function(s,u){return s.x*u.y-s.y*u.x},t.cross3=function(s,u,n){return(u.x-s.x)*(n.y-s.y)-(u.y-s.y)*(n.x-s.x)},t.add=function(s,u,n){return n||(n={}),n.x=s.x+u.x,n.y=s.y+u.y,n},t.sub=function(s,u,n){return n||(n={}),n.x=s.x-u.x,n.y=s.y-u.y,n},t.mult=function(s,u){return{x:s.x*u,y:s.y*u}},t.div=function(s,u){return{x:s.x/u,y:s.y/u}},t.perp=function(s,u){return u=u===!0?-1:1,{x:u*-s.y,y:u*s.x}},t.neg=function(s){return{x:-s.x,y:-s.y}},t.angle=function(s,u){return Math.atan2(u.y-s.y,u.x-s.x)},t._temp=[t.create(),t.create(),t.create(),t.create(),t.create(),t.create()]}()},function(e,c){var t={};e.exports=t,function(){t.create=function(s){var u={min:{x:0,y:0},max:{x:0,y:0}};return s&&t.update(u,s),u},t.update=function(s,u,n){s.min.x=1/0,s.max.x=-1/0,s.min.y=1/0,s.max.y=-1/0;for(var h=0;h<u.length;h++){var o=u[h];o.x>s.max.x&&(s.max.x=o.x),o.x<s.min.x&&(s.min.x=o.x),o.y>s.max.y&&(s.max.y=o.y),o.y<s.min.y&&(s.min.y=o.y)}n&&(n.x>0?s.max.x+=n.x:s.min.x+=n.x,n.y>0?s.max.y+=n.y:s.min.y+=n.y)},t.contains=function(s,u){return u.x>=s.min.x&&u.x<=s.max.x&&u.y>=s.min.y&&u.y<=s.max.y},t.overlaps=function(s,u){return s.min.x<=u.max.x&&s.max.x>=u.min.x&&s.max.y>=u.min.y&&s.min.y<=u.max.y},t.translate=function(s,u){s.min.x+=u.x,s.max.x+=u.x,s.min.y+=u.y,s.max.y+=u.y},t.shift=function(s,u){var n=s.max.x-s.min.x,h=s.max.y-s.min.y;s.min.x=u.x,s.max.x=u.x+n,s.min.y=u.y,s.max.y=u.y+h}}()},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(0),n=t(11),h=t(502),o=new u({Mixins:[n.Alpha,n.Flip,n.Visible],initialize:function(a,d,l,f,v,g,p,m){this.layer=a,this.index=d,this.x=l,this.y=f,this.width=v,this.height=g,this.right,this.bottom,this.baseWidth=p!==void 0?p:v,this.baseHeight=m!==void 0?m:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(r,a){return!(r<this.pixelX||a<this.pixelY||r>this.right||a>this.bottom)},copy:function(r){return this.index=r.index,this.alpha=r.alpha,this.properties=r.properties,this.visible=r.visible,this.setFlip(r.flipX,r.flipY),this.tint=r.tint,this.rotation=r.rotation,this.collideUp=r.collideUp,this.collideDown=r.collideDown,this.collideLeft=r.collideLeft,this.collideRight=r.collideRight,this.collisionCallback=r.collisionCallback,this.collisionCallbackContext=r.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(r){var a=this.tilemapLayer;return a?a.tileToWorldX(this.x,r):this.x*this.baseWidth},getRight:function(r){var a=this.tilemapLayer;return a?this.getLeft(r)+this.width*a.scaleX:this.getLeft(r)+this.width},getTop:function(r){var a=this.tilemapLayer;return a?a.tileToWorldY(this.y,r)-(this.height-this.baseHeight)*a.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(r){var a=this.tilemapLayer;return a?this.getTop(r)+this.height*a.scaleY:this.getTop(r)+this.height},getBounds:function(r,a){return a===void 0&&(a=new h),a.x=this.getLeft(),a.y=this.getTop(),a.width=this.getRight()-a.x,a.height=this.getBottom()-a.y,a},getCenterX:function(r){return(this.getLeft(r)+this.getRight(r))/2},getCenterY:function(r){return(this.getTop(r)+this.getBottom(r))/2},intersects:function(r,a,d,l){return!(d<=this.pixelX||l<=this.pixelY||r>=this.right||a>=this.bottom)},isInteresting:function(r,a){return r&&a?this.canCollide||this.hasInterestingFace:r?this.collides:a?this.hasInterestingFace:!1},resetCollision:function(r){if(r===void 0&&(r=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,r){var a=this.tilemapLayer;a&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(r,a,d,l,f){if(a===void 0&&(a=r),d===void 0&&(d=r),l===void 0&&(l=r),f===void 0&&(f=!0),this.collideLeft=r,this.collideRight=a,this.collideUp=d,this.collideDown=l,this.faceLeft=r,this.faceRight=a,this.faceTop=d,this.faceBottom=l,f){var v=this.tilemapLayer;v&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(r,a){return r===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=r,this.collisionCallbackContext=a),this},setSize:function(r,a,d,l){return r!==void 0&&(this.width=r),a!==void 0&&(this.height=a),d!==void 0&&(this.baseWidth=d),l!==void 0&&(this.baseHeight=l),this.updatePixelXY(),this},updatePixelXY:function(){var r=this.layer.orientation;if(r===s.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(r===s.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(r===s.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(r===s.HEXAGONAL){var a=this.layer.hexSideLength,d=(this.baseHeight-a)/2+a;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*d}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var r=this.layer.tilemapLayer;if(r){var a=r.gidMap[this.index];if(a)return a}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var r=this.tilemapLayer;return r?r.tilemap:null}}});e.exports=o},function(e,c,t){var s={};e.exports=s;var u=t(64),n=t(32),h=t(41),o=t(84),r=t(83),a=t(1393);(function(){s.rectangle=function(d,l,f,v,g){g=g||{};var p={label:"Rectangle Body",position:{x:d,y:l},vertices:u.fromPath("L 0 0 L "+f+" 0 L "+f+" "+v+" L 0 "+v)};if(g.chamfer){var m=g.chamfer;p.vertices=u.chamfer(p.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete g.chamfer}return h.create(n.extend({},p,g))},s.trapezoid=function(d,l,f,v,g,p){p=p||{},g*=.5;var m=(1-g*2)*f,y=f*g,T=y+m,C=T+y,S;g<.5?S="L 0 0 L "+y+" "+-v+" L "+T+" "+-v+" L "+C+" 0":S="L 0 0 L "+T+" "+-v+" L "+C+" 0";var E={label:"Trapezoid Body",position:{x:d,y:l},vertices:u.fromPath(S)};if(p.chamfer){var P=p.chamfer;E.vertices=u.chamfer(E.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete p.chamfer}return h.create(n.extend({},E,p))},s.circle=function(d,l,f,v,g){v=v||{};var p={label:"Circle Body",circleRadius:f};g=g||25;var m=Math.ceil(Math.max(10,Math.min(g,f)));return m%2==1&&(m+=1),s.polygon(d,l,m,f,n.extend({},p,v))},s.polygon=function(d,l,f,v,g){if(g=g||{},f<3)return s.circle(d,l,v,g);for(var p=2*Math.PI/f,m="",y=p*.5,T=0;T<f;T+=1){var C=y+T*p,S=Math.cos(C)*v,E=Math.sin(C)*v;m+="L "+S.toFixed(3)+" "+E.toFixed(3)+" "}var P={label:"Polygon Body",position:{x:d,y:l},vertices:u.fromPath(m)};if(g.chamfer){var M=g.chamfer;P.vertices=u.chamfer(P.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete g.chamfer}return h.create(n.extend({},P,g))},s.fromVertices=function(d,l,f,v,g,p,m){var y,T,C,S,E,P;for(v=v||{},T=[],g=typeof g!="undefined"?g:!1,p=typeof p!="undefined"?p:.01,m=typeof m!="undefined"?m:10,a||n.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),n.isArray(f[0])||(f=[f]),P=0;P<f.length;P+=1)if(S=f[P],C=u.isConvex(S),C||!a)C?S=u.clockwiseSort(S):S=u.hull(S),T.push({position:{x:d,y:l},vertices:S});else{var M=S.map(function(F){return[F.x,F.y]});a.makeCCW(M),p!==!1&&a.removeCollinearPoints(M,p);var A=a.quickDecomp(M);for(E=0;E<A.length;E++){var R=A[E],O=R.map(function(F){return{x:F[0],y:F[1]}});m>0&&u.area(O)<m||T.push({position:u.centre(O),vertices:O})}}for(E=0;E<T.length;E++)T[E]=h.create(n.extend(T[E],v));return g&&s.flagCoincidentParts(T,5),T.length>1?(y=h.create(n.extend({parts:T.slice(0)},v)),h.setPosition(y,{x:d,y:l}),y):T[0]},s.flagCoincidentParts=function(d,l){l===void 0&&(l=5);for(var f=0;f<d.length;f++)for(var v=d[f],g=f+1;g<d.length;g++){var p=d[g];if(o.overlaps(v.bounds,p.bounds))for(var m=v.vertices,y=p.vertices,T=0;T<v.vertices.length;T++)for(var C=0;C<p.vertices.length;C++){var S=r.magnitudeSquared(r.sub(m[(T+1)%m.length],y[C])),E=r.magnitudeSquared(r.sub(m[T],y[(C+1)%y.length]));S<l&&E<l&&(m[T].isInternal=!0,y[C].isInternal=!0)}}return d}})()},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x-s.width*s.originX+s.width*.5};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.width*s.originX;return s.x=u+n-s.width*.5,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.y-s.height*s.originY+s.height*.5};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.height*s.originY;return s.y=u+n-s.height*.5,s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={POST_RENDER:t(628),PRE_RENDER:t(629),RENDER:t(630),RESIZE:t(631)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74),u=function(n,h,o,r){r===void 0&&(r=n);var a;if(!Array.isArray(h))return a=n.indexOf(h),a!==-1?(s(n,a),o&&o.call(r,h),h):null;for(var d=h.length-1,l=[];d>=0;){var f=h[d];a=n.indexOf(f),a!==-1&&(s(n,a),l.push(f),o&&o.call(r,f)),d--}return l};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(199),n=t(10),h=t(3),o=new s({initialize:function(a){this.type=a,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new h,this._tmpVec2B=new h},draw:function(r,a){return a===void 0&&(a=32),r.strokePoints(this.getPoints(a))},getBounds:function(r,a){r||(r=new n),a===void 0&&(a=16);var d=this.getLength();a>d&&(a=d/2);var l=Math.max(1,Math.round(d/a));return u(this.getSpacedPoints(l),r)},getDistancePoints:function(r){var a=this.getLength(),d=Math.max(1,a/r);return this.getSpacedPoints(d)},getEndPoint:function(r){return r===void 0&&(r=new h),this.getPointAt(1,r)},getLength:function(){var r=this.getLengths();return r[r.length-1]},getLengths:function(r){if(r===void 0&&(r=this.arcLengthDivisions),this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var a=[],d,l=this.getPoint(0,this._tmpVec2A),f=0;a.push(0);for(var v=1;v<=r;v++)d=this.getPoint(v/r,this._tmpVec2B),f+=d.distance(l),a.push(f),l.copy(d);return this.cacheArcLengths=a,a},getPointAt:function(r,a){var d=this.getUtoTmapping(r);return this.getPoint(d,a)},getPoints:function(r,a,d){d===void 0&&(d=[]),r||(a?r=this.getLength()/a:r=this.defaultDivisions);for(var l=0;l<=r;l++)d.push(this.getPoint(l/r));return d},getRandomPoint:function(r){return r===void 0&&(r=new h),this.getPoint(Math.random(),r)},getSpacedPoints:function(r,a,d){d===void 0&&(d=[]),r||(a?r=this.getLength()/a:r=this.defaultDivisions);for(var l=0;l<=r;l++){var f=this.getUtoTmapping(l/r,null,r);d.push(this.getPoint(f))}return d},getStartPoint:function(r){return r===void 0&&(r=new h),this.getPointAt(0,r)},getTangent:function(r,a){a===void 0&&(a=new h);var d=1e-4,l=r-d,f=r+d;return l<0&&(l=0),f>1&&(f=1),this.getPoint(l,this._tmpVec2A),this.getPoint(f,a),a.subtract(this._tmpVec2A).normalize()},getTangentAt:function(r,a){var d=this.getUtoTmapping(r);return this.getTangent(d,a)},getTFromDistance:function(r,a){return r<=0?0:this.getUtoTmapping(0,r,a)},getUtoTmapping:function(r,a,d){var l=this.getLengths(d),f=0,v=l.length,g;a?g=Math.min(a,l[v-1]):g=r*l[v-1];for(var p=0,m=v-1,y;p<=m;)if(f=Math.floor(p+(m-p)/2),y=l[f]-g,y<0)p=f+1;else if(y>0)m=f-1;else{m=f;break}if(f=m,l[f]===g)return f/(v-1);var T=l[f],C=l[f+1],S=C-T,E=(g-T)/S;return(f+E)/(v-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:t(968),COMPLETE:t(969),FILE_COMPLETE:t(970),FILE_KEY_COMPLETE:t(971),FILE_LOAD_ERROR:t(972),FILE_LOAD:t(973),FILE_PROGRESS:t(974),POST_PROCESS:t(975),PROGRESS:t(976),START:t(977)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h,o){o===void 0&&(o=new s);var r=n.x1,a=n.y1,d=n.x2,l=n.y2,f=h.x1,v=h.y1,g=h.x2,p=h.y2,m=(g-f)*(a-v)-(p-v)*(r-f),y=(d-r)*(a-v)-(l-a)*(r-f),T=(p-v)*(d-r)-(g-f)*(l-a);if(T===0)return!1;var C=m/T,S=y/T;return C>=0&&C<=1&&S>=0&&S<=1?(o.x=r+C*(d-r),o.y=a+C*(l-a),!0):!1};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.atan2(s.y2-s.y1,s.x2-s.x1)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=function(n,h,o){return n=s(n,0,1),(o-h)*n+h};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s&&s.hasOwnProperty(u)?s[u]:n};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(315),n=new s({initialize:function(o,r){this.parent=o,this.events=r,r||(this.events=o.events?o.events:o),this.list={},this.values={},this._frozen=!1,!o.hasOwnProperty("sys")&&this.events&&this.events.once(u.DESTROY,this.destroy,this)},get:function(h){var o=this.list;if(Array.isArray(h)){for(var r=[],a=0;a<h.length;a++)r.push(o[h[a]]);return r}else return o[h]},getAll:function(){var h={};for(var o in this.list)this.list.hasOwnProperty(o)&&(h[o]=this.list[o]);return h},query:function(h){var o={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(h)&&(o[r]=this.list[r]);return o},set:function(h,o){if(this._frozen)return this;if(typeof h=="string")return this.setValue(h,o);for(var r in h)this.setValue(r,h[r]);return this},inc:function(h,o){if(this._frozen)return this;o===void 0&&(o=1);var r=this.get(h);return r===void 0&&(r=0),this.set(h,r+o),this},toggle:function(h){return this._frozen?this:(this.set(h,!this.get(h)),this)},setValue:function(h,o){if(this._frozen)return this;if(this.has(h))this.values[h]=o;else{var r=this,a=this.list,d=this.events,l=this.parent;Object.defineProperty(this.values,h,{enumerable:!0,configurable:!0,get:function(){return a[h]},set:function(f){if(!r._frozen){var v=a[h];a[h]=f,d.emit(u.CHANGE_DATA,l,h,f,v),d.emit(u.CHANGE_DATA_KEY+h,l,f,v)}}}),a[h]=o,d.emit(u.SET_DATA,l,h,o)}return this},each:function(h,o){for(var r=[this.parent,null,void 0],a=1;a<arguments.length;a++)r.push(arguments[a]);for(var d in this.list)r[1]=d,r[2]=this.list[d],h.apply(o,r);return this},merge:function(h,o){o===void 0&&(o=!0);for(var r in h)h.hasOwnProperty(r)&&(o||!o&&!this.has(r))&&this.setValue(r,h[r]);return this},remove:function(h){if(this._frozen)return this;if(Array.isArray(h))for(var o=0;o<h.length;o++)this.removeValue(h[o]);else return this.removeValue(h);return this},removeValue:function(h){if(this.has(h)){var o=this.list[h];delete this.list[h],delete this.values[h],this.events.emit(u.REMOVE_DATA,this.parent,h,o)}return this},pop:function(h){var o=void 0;return!this._frozen&&this.has(h)&&(o=this.list[h],delete this.list[h],delete this.values[h],this.events.emit(u.REMOVE_DATA,this.parent,h,o)),o},has:function(h){return this.list.hasOwnProperty(h)},setFreeze:function(h){return this._frozen=h,this},reset:function(){for(var h in this.list)delete this.list[h],delete this.values[h];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(u.CHANGE_DATA),this.events.off(u.SET_DATA),this.events.off(u.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(h){this._frozen=!!h}},count:{get:function(){var h=0;for(var o in this.list)this.list[o]!==void 0&&h++;return h}}});e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(h){if(this.entries={},this.size=0,Array.isArray(h))for(var o=0;o<h.length;o++)this.set(h[o][0],h[o][1])},set:function(n,h){return this.has(n)||this.size++,this.entries[n]=h,this},get:function(n){if(this.has(n))return this.entries[n]},getArray:function(){var n=[],h=this.entries;for(var o in h)n.push(h[o]);return n},has:function(n){return this.entries.hasOwnProperty(n)},delete:function(n){return this.has(n)&&(delete this.entries[n],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(n){delete this.entries[n]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var n=[],h=this.entries;for(var o in h)n.push(h[o]);return n},dump:function(){var n=this.entries;console.group("Map");for(var h in n)console.log(h,n[h]);console.groupEnd()},each:function(n){var h=this.entries;for(var o in h)if(n(o,h[o])===!1)break;return this},contains:function(n){var h=this.entries;for(var o in h)if(h[o]===n)return!0;return!1},merge:function(n,h){h===void 0&&(h=!1);var o=this.entries,r=n.entries;for(var a in r)o.hasOwnProperty(a)&&h?o[a]=r[a]:this.set(a,r[a]);return this}});e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s<<16|u<<8|n};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ENTER_FULLSCREEN:t(800),FULLSCREEN_FAILED:t(801),FULLSCREEN_UNSUPPORTED:t(802),LEAVE_FULLSCREEN:t(803),ORIENTATION_CHANGE:t(804),RESIZE:t(805)}},function(e,c,t){(function(s){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function n(){if(typeof importScripts=="function")return u;var h=navigator.userAgent;/Windows/.test(h)?u.windows=!0:/Mac OS/.test(h)&&!/like Mac OS/.test(h)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(u.iOS=!0,u.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),u.iOSVersion=parseInt(RegExp.$1,10)):u.macOS=!0:/Android/.test(h)?u.android=!0:/Linux/.test(h)?u.linux=!0:/iP[ao]d|iPhone/i.test(h)?(u.iOS=!0,navigator.appVersion.match(/OS (\d+)/),u.iOSVersion=parseInt(RegExp.$1,10),u.iPhone=h.toLowerCase().indexOf("iphone")!==-1,u.iPad=h.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(h)||/\bKF[A-Z][A-Z]+/.test(h)||/Silk.*Mobile Safari/.test(h)?u.kindle=!0:/CrOS/.test(h)&&(u.chromeOS=!0),(/Windows Phone/i.test(h)||/IEMobile/i.test(h))&&(u.android=!1,u.iOS=!1,u.macOS=!1,u.windows=!0,u.windowsPhone=!0);var o=/Silk/.test(h);return(u.windows||u.macOS||u.linux&&!o||u.chromeOS)&&(u.desktop=!0),(u.windowsPhone||/Windows NT/i.test(h)&&/Touch/i.test(h))&&(u.desktop=!1),navigator.standalone&&(u.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(u.cordova=!0),window.ejecta!==void 0&&(u.ejecta=!0)),typeof s!="undefined"&&s.versions&&s.versions.node&&(u.node=!0),u.node&&typeof s.versions=="object"&&(u.nodeWebkit=!!s.versions["node-webkit"],u.electron=!!s.versions.electron),/Crosswalk/.test(h)&&(u.crosswalk=!0),u.pixelRatio=window.devicePixelRatio||1,u}e.exports=n()}).call(this,t(807))},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:t(861),ERROR:t(862),LOAD:t(863),READY:t(864),REMOVE:t(865)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(59),n=t(2),h=t(878),o=t(879),r=t(25),a=t(12),d=t(107),l=t(58),f=new s({Extends:l,initialize:function(g){var p=g.game.renderer,m=n(g,"fragShader",h);g.fragShader=a.parseFragmentShaderMaxTextures(m,p.maxTextures),g.vertShader=n(g,"vertShader",o),g.attributes=n(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:d.UNSIGNED_BYTE,normalized:!0}]),l.call(this,g),this._tempMatrix1=new r,this._tempMatrix2=new r,this._tempMatrix3=new r,this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){l.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(v,g,p){this.manager.set(this,v);var m=this._tempMatrix1,y=this._tempMatrix2,T=this._tempMatrix3,C=v.frame,S=C.glTexture,E=C.u0,P=C.v0,M=C.u1,A=C.v1,R=C.x,O=C.y,F=C.cutWidth,I=C.cutHeight,G=C.customPivot,z=v.displayOriginX,U=v.displayOriginY,X=-z+R,b=-U+O;if(v.isCropped){var B=v._crop;(B.flipX!==v.flipX||B.flipY!==v.flipY)&&C.updateCropUVs(B,v.flipX,v.flipY),E=B.u0,P=B.v0,M=B.u1,A=B.v1,F=B.width,I=B.height,R=B.x,O=B.y,X=-z+R,b=-U+O}var L=1,D=1;v.flipX&&(G||(X+=-C.realWidth+z*2),L=-1),(v.flipY||C.source.isGLTexture&&!S.flipY)&&(G||(b+=-C.realHeight+U*2),D=-1),y.applyITRS(v.x,v.y,v.rotation,v.scaleX*L,v.scaleY*D),m.copyFrom(g.matrix),p?(m.multiplyWithOffset(p,-g.scrollX*v.scrollFactorX,-g.scrollY*v.scrollFactorY),y.e=v.x,y.f=v.y):(y.e-=g.scrollX*v.scrollFactorX,y.f-=g.scrollY*v.scrollFactorY),m.multiply(y,T);var w=X+F,N=b+I,V=g.roundPixels,Y=T.getXRound(X,b,V),W=T.getYRound(X,b,V),H=T.getXRound(X,N,V),$=T.getYRound(X,N,V),K=T.getXRound(w,N,V),Z=T.getYRound(w,N,V),J=T.getXRound(w,b,V),k=T.getYRound(w,b,V),Q=a.getTintAppendFloatAlpha,q=g.alpha,at=Q(v.tintTopLeft,q*v._alphaTL),it=Q(v.tintTopRight,q*v._alphaTR),_=Q(v.tintBottomLeft,q*v._alphaBL),j=Q(v.tintBottomRight,q*v._alphaBR);this.shouldFlush(6)&&this.flush();var ot=this.setGameObject(v,C);this.manager.preBatch(v),this.batchQuad(v,Y,W,H,$,K,Z,J,k,E,P,M,A,at,it,_,j,v.tintFill,S,ot),this.manager.postBatch(v)},batchTexture:function(v,g,p,m,y,T,C,S,E,P,M,A,R,O,F,I,G,z,U,X,b,B,L,D,w,N,V,Y,W,H,$,K){this.manager.set(this,v);var Z=this._tempMatrix1,J=this._tempMatrix2,k=this._tempMatrix3,Q=z/p+V,q=U/m+Y,at=(z+X)/p+V,it=(U+b)/m+Y,_=C,j=S,ot=-I,tt=-G;if(v.isCropped){var rt=v._crop,Nt=rt.width,zt=rt.height;_=Nt,j=zt,C=Nt,S=zt,z=rt.x,U=rt.y;var vt=z,ut=U;A&&(vt=X-rt.x-Nt),R&&(ut=b-rt.y-zt),Q=vt/p+V,q=ut/m+Y,at=(vt+Nt)/p+V,it=(ut+zt)/m+Y,ot=-I+z,tt=-G+U}R=R^(!$&&g.isRenderTexture?1:0),A&&(_*=-1,ot+=C),R&&(j*=-1,tt+=S);var St=ot+_,Tt=tt+j;J.applyITRS(y,T,M,E,P),Z.copyFrom(W.matrix),H?(Z.multiplyWithOffset(H,-W.scrollX*O,-W.scrollY*F),J.e=y,J.f=T):(J.e-=W.scrollX*O,J.f-=W.scrollY*F),Z.multiply(J,k);var mt=W.roundPixels,Vt=k.getXRound(ot,tt,mt),Te=k.getYRound(ot,tt,mt),Ce=k.getXRound(ot,Tt,mt),Se=k.getYRound(ot,Tt,mt),Ee=k.getXRound(St,Tt,mt),Pe=k.getYRound(St,Tt,mt),Me=k.getXRound(St,tt,mt),ef=k.getYRound(St,tt,mt);K===void 0&&(K=this.renderer.setTexture2D(g)),v&&this.manager.preBatch(v),this.batchQuad(v,Vt,Te,Ce,Se,Ee,Pe,Me,ef,Q,q,at,it,B,L,D,w,N,g,K),v&&this.manager.postBatch(v)},batchTextureFrame:function(v,g,p,m,y,T,C){this.manager.set(this);var S=this._tempMatrix1.copyFrom(T),E=this._tempMatrix2,P=g+v.width,M=p+v.height;C?S.multiply(C,E):E=S;var A=E.getX(g,p),R=E.getY(g,p),O=E.getX(g,M),F=E.getY(g,M),I=E.getX(P,M),G=E.getY(P,M),z=E.getX(P,p),U=E.getY(P,p),X=this.renderer.setTextureSource(v.source);m=a.getTintAppendFloatAlpha(m,y),this.batchQuad(null,A,R,O,F,I,G,z,U,v.u0,v.v0,v.u1,v.v1,m,m,m,m,0,v.glTexture,X)},batchFillRect:function(v,g,p,m,y,T){this.renderer.pipelines.set(this);var C=this.calcMatrix;T&&T.multiply(y,C);var S=v+p,E=g+m,P=C.getX(v,g),M=C.getY(v,g),A=C.getX(v,E),R=C.getY(v,E),O=C.getX(S,E),F=C.getY(S,E),I=C.getX(S,g),G=C.getY(S,g),z=this.fillTint;this.batchQuad(null,P,M,A,R,O,F,I,G,0,0,1,1,z.TL,z.TR,z.BL,z.BR,2)},batchFillTriangle:function(v,g,p,m,y,T,C,S){this.renderer.pipelines.set(this);var E=this.calcMatrix;S&&S.multiply(C,E);var P=E.getX(v,g),M=E.getY(v,g),A=E.getX(p,m),R=E.getY(p,m),O=E.getX(y,T),F=E.getY(y,T),I=this.fillTint;this.batchTri(null,P,M,A,R,O,F,0,0,1,1,I.TL,I.TR,I.BL,2)},batchStrokeTriangle:function(v,g,p,m,y,T,C,S,E){var P=this.tempTriangle;P[0].x=v,P[0].y=g,P[0].width=C,P[1].x=p,P[1].y=m,P[1].width=C,P[2].x=y,P[2].y=T,P[2].width=C,P[3].x=v,P[3].y=g,P[3].width=C,this.batchStrokePath(P,C,!1,S,E)},batchFillPath:function(v,g,p){this.renderer.pipelines.set(this);var m=this.calcMatrix;p&&p.multiply(g,m);for(var y=v.length,T=this.polygonCache,C,S,E=this.fillTint.TL,P=this.fillTint.TR,M=this.fillTint.BL,A=0;A<y;++A)S=v[A],T.push(S.x,S.y);C=u(T),y=C.length;for(var R=0;R<y;R+=3){var O=C[R+0]*2,F=C[R+1]*2,I=C[R+2]*2,G=T[O+0],z=T[O+1],U=T[F+0],X=T[F+1],b=T[I+0],B=T[I+1],L=m.getX(G,z),D=m.getY(G,z),w=m.getX(U,X),N=m.getY(U,X),V=m.getX(b,B),Y=m.getY(b,B);this.batchTri(null,L,D,w,N,V,Y,0,0,1,1,E,P,M,2)}T.length=0},batchStrokePath:function(v,g,p,m,y){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var T=v.length-1,C=0;C<T;C++){var S=v[C],E=v[C+1];this.batchLine(S.x,S.y,E.x,E.y,S.width/2,E.width/2,g,C,!p&&C===T-1,m,y)}},batchLine:function(v,g,p,m,y,T,C,S,E,P,M){this.renderer.pipelines.set(this);var A=this.calcMatrix;M&&M.multiply(P,A);var R=p-v,O=m-g,F=Math.sqrt(R*R+O*O),I=y*(m-g)/F,G=y*(v-p)/F,z=T*(m-g)/F,U=T*(v-p)/F,X=p-z,b=m-U,B=v-I,L=g-G,D=p+z,w=m+U,N=v+I,V=g+G,Y=A.getX(X,b),W=A.getY(X,b),H=A.getX(B,L),$=A.getY(B,L),K=A.getX(D,w),Z=A.getY(D,w),J=A.getX(N,V),k=A.getY(N,V),Q=this.strokeTint,q=Q.TL,at=Q.TR,it=Q.BL,_=Q.BR;if(this.batchQuad(null,J,k,H,$,Y,W,K,Z,0,0,1,1,q,at,it,_,2),!(C<=2)){var j=this.prevQuad,ot=this.firstQuad;S>0&&j[4]?this.batchQuad(null,J,k,H,$,j[0],j[1],j[2],j[3],0,0,1,1,q,at,it,_,2):(ot[0]=J,ot[1]=k,ot[2]=H,ot[3]=$,ot[4]=1),E&&ot[4]?this.batchQuad(null,Y,W,K,Z,ot[0],ot[1],ot[2],ot[3],0,0,1,1,q,at,it,_,2):(j[0]=Y,j[1]=W,j[2]=K,j[3]=Z,j[4]=1)}}});e.exports=f},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(18),n=t(17),h=new s({initialize:function(r,a,d,l,f,v,g){this.texture=r,this.name=a,this.source=r.source[d],this.sourceIndex=d,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(v,g,l,f)},setSize:function(o,r,a,d){a===void 0&&(a=0),d===void 0&&(d=0),this.cutX=a,this.cutY=d,this.cutWidth=o,this.cutHeight=r,this.width=o,this.height=r,this.halfWidth=Math.floor(o*.5),this.halfHeight=Math.floor(r*.5),this.centerX=Math.floor(o/2),this.centerY=Math.floor(r/2);var l=this.data,f=l.cut;f.x=a,f.y=d,f.w=o,f.h=r,f.r=a+o,f.b=d+r,l.sourceSize.w=o,l.sourceSize.h=r,l.spriteSourceSize.w=o,l.spriteSourceSize.h=r,l.radius=.5*Math.sqrt(o*o+r*r);var v=l.drawImage;return v.x=a,v.y=d,v.width=o,v.height=r,this.updateUVs()},setTrim:function(o,r,a,d,l,f){var v=this.data,g=v.spriteSourceSize;return v.trim=!0,v.sourceSize.w=o,v.sourceSize.h=r,g.x=a,g.y=d,g.w=l,g.h=f,g.r=a+l,g.b=d+f,this.x=a,this.y=d,this.width=l,this.height=f,this.halfWidth=l*.5,this.halfHeight=f*.5,this.centerX=Math.floor(l/2),this.centerY=Math.floor(f/2),this.updateUVs()},setCropUVs:function(o,r,a,d,l,f,v){var g=this.cutX,p=this.cutY,m=this.cutWidth,y=this.cutHeight,T=this.realWidth,C=this.realHeight;r=u(r,0,T),a=u(a,0,C),d=u(d,0,T-r),l=u(l,0,C-a);var S=g+r,E=p+a,P=d,M=l,A=this.data;if(A.trim){var R=A.spriteSourceSize;d=u(d,0,m-r),l=u(l,0,y-a);var O=r+d,F=a+l,I=!(R.r<r||R.b<a||R.x>O||R.y>F);if(I){var G=Math.max(R.x,r),z=Math.max(R.y,a),U=Math.min(R.r,O)-G,X=Math.min(R.b,F)-z;P=U,M=X,f?S=g+(m-(G-R.x)-U):S=g+(G-R.x),v?E=p+(y-(z-R.y)-X):E=p+(z-R.y),r=G,a=z,d=U,l=X}else S=0,E=0,P=0,M=0}else f&&(S=g+(m-r-d)),v&&(E=p+(y-a-l));var b=this.source.width,B=this.source.height;return o.u0=Math.max(0,S/b),o.v0=Math.max(0,E/B),o.u1=Math.min(1,(S+P)/b),o.v1=Math.min(1,(E+M)/B),o.x=r,o.y=a,o.cx=S,o.cy=E,o.cw=P,o.ch=M,o.width=d,o.height=l,o.flipX=f,o.flipY=v,o},updateCropUVs:function(o,r,a){return this.setCropUVs(o,o.x,o.y,o.width,o.height,r,a)},setUVs:function(o,r,a,d,l,f){var v=this.data.drawImage;return v.width=o,v.height=r,this.u0=a,this.v0=d,this.u1=l,this.v1=f,this},updateUVs:function(){var o=this.cutX,r=this.cutY,a=this.cutWidth,d=this.cutHeight,l=this.data.drawImage;l.width=a,l.height=d;var f=this.source.width,v=this.source.height;return this.u0=o/f,this.v0=r/v,this.u1=(o+a)/f,this.v1=(r+d)/v,this},updateUVsInverted:function(){var o=this.source.width,r=this.source.height;return this.u0=(this.cutX+this.cutHeight)/o,this.v0=this.cutY/r,this.u1=this.cutX/o,this.v1=(this.cutY+this.cutWidth)/r,this},clone:function(){var o=new h(this.texture,this.name,this.sourceIndex);return o.cutX=this.cutX,o.cutY=this.cutY,o.cutWidth=this.cutWidth,o.cutHeight=this.cutHeight,o.x=this.x,o.y=this.y,o.width=this.width,o.height=this.height,o.halfWidth=this.halfWidth,o.halfHeight=this.halfHeight,o.centerX=this.centerX,o.centerY=this.centerY,o.rotated=this.rotated,o.data=n(!0,o.data,this.data),o.updateUVs(),o},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(208),u=t(0),n=t(1),h=t(79),o=new u({initialize:function(a){this.parent=a,this.list=[],this.position=0,this.addCallback=n,this.removeCallback=n,this._sortKey=""},add:function(r,a){return a?s.Add(this.list,r):s.Add(this.list,r,0,this.addCallback,this)},addAt:function(r,a,d){return d?s.AddAt(this.list,r,a):s.AddAt(this.list,r,a,0,this.addCallback,this)},getAt:function(r){return this.list[r]},getIndex:function(r){return this.list.indexOf(r)},sort:function(r,a){return r?(a===void 0&&(a=function(d,l){return d[r]-l[r]}),h(this.list,a),this):this},getByName:function(r){return s.GetFirst(this.list,"name",r)},getRandom:function(r,a){return s.GetRandom(this.list,r,a)},getFirst:function(r,a,d,l){return s.GetFirst(this.list,r,a,d,l)},getAll:function(r,a,d,l){return s.GetAll(this.list,r,a,d,l)},count:function(r,a){return s.CountAllMatching(this.list,r,a)},swap:function(r,a){s.Swap(this.list,r,a)},moveTo:function(r,a){return s.MoveTo(this.list,r,a)},moveAbove:function(r,a){return s.MoveAbove(this.list,r,a)},moveBelow:function(r,a){return s.MoveBelow(this.list,r,a)},remove:function(r,a){return a?s.Remove(this.list,r):s.Remove(this.list,r,this.removeCallback,this)},removeAt:function(r,a){return a?s.RemoveAt(this.list,r):s.RemoveAt(this.list,r,this.removeCallback,this)},removeBetween:function(r,a,d){return d?s.RemoveBetween(this.list,r,a):s.RemoveBetween(this.list,r,a,this.removeCallback,this)},removeAll:function(r){for(var a=this.list.length;a--;)this.remove(this.list[a],r);return this},bringToTop:function(r){return s.BringToTop(this.list,r)},sendToBack:function(r){return s.SendToBack(this.list,r)},moveUp:function(r){return s.MoveUp(this.list,r),r},moveDown:function(r){return s.MoveDown(this.list,r),r},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(r,a){return s.Replace(this.list,r,a)},exists:function(r){return this.list.indexOf(r)>-1},setAll:function(r,a,d,l){return s.SetAll(this.list,r,a,d,l),this},each:function(r,a){for(var d=[null],l=2;l<arguments.length;l++)d.push(arguments[l]);for(l=0;l<this.list.length;l++)d[0]=this.list[l],r.apply(a,d)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(112),n=t(445),h=t(446),o=t(56),r=t(180),a=new s({initialize:function(l,f,v,g){l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=0),g===void 0&&(g=0),this.type=o.ELLIPSE,this.x=l,this.y=f,this.width=v,this.height=g},contains:function(d,l){return u(this,d,l)},getPoint:function(d,l){return n(this,d,l)},getPoints:function(d,l,f){return h(this,d,l,f)},getRandomPoint:function(d){return r(this,d)},setTo:function(d,l,f,v){return this.x=d,this.y=l,this.width=f,this.height=v,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(d,l){return l===void 0&&(l=d),this.x=d,this.y=l,this},setSize:function(d,l){return l===void 0&&(l=d),this.width=d,this.height=l,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(d){this.x=d+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(d){this.x=d-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(d){this.y=d+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(d){this.y=d-this.height/2}}});e.exports=a},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(s.width<=0||s.height<=0)return!1;var h=(u-s.x)/s.width,o=(n-s.y)/s.height;return h*=h,o*=o,h+o<.25};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(275),u=t(0),n=t(75),h=t(9),o=t(207),r=t(2),a=t(6),d=t(7),l=t(437),f=t(149),v=t(73),g=new u({Extends:h,initialize:function(m,y,T){h.call(this),T?y&&!Array.isArray(y)&&(y=[y]):Array.isArray(y)?d(y[0])&&(T=y,y=null):d(y)&&(T=y,y=null),this.scene=m,this.children=new f,this.isParent=!0,this.type="Group",this.classType=r(T,"classType",v),this.name=r(T,"name",""),this.active=r(T,"active",!0),this.maxSize=r(T,"maxSize",-1),this.defaultKey=r(T,"defaultKey",null),this.defaultFrame=r(T,"defaultFrame",null),this.runChildUpdate=r(T,"runChildUpdate",!1),this.createCallback=r(T,"createCallback",null),this.removeCallback=r(T,"removeCallback",null),this.createMultipleCallback=r(T,"createMultipleCallback",null),this.internalCreateCallback=r(T,"internalCreateCallback",null),this.internalRemoveCallback=r(T,"internalRemoveCallback",null),y&&this.addMultiple(y),T&&this.createMultiple(T),this.on(n.ADDED_TO_SCENE,this.addedToScene,this),this.on(n.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(p,m,y,T,C,S){if(p===void 0&&(p=0),m===void 0&&(m=0),y===void 0&&(y=this.defaultKey),T===void 0&&(T=this.defaultFrame),C===void 0&&(C=!0),S===void 0&&(S=!0),this.isFull())return null;var E=new this.classType(this.scene,p,m,y,T);return E.addToDisplayList(this.scene.sys.displayList),E.addToUpdateList(),E.visible=C,E.setActive(S),this.add(E),E},createMultiple:function(p){if(this.isFull())return[];Array.isArray(p)||(p=[p]);var m=[];if(p[0].key)for(var y=0;y<p.length;y++){var T=this.createFromConfig(p[y]);m=m.concat(T)}return m},createFromConfig:function(p){if(this.isFull())return[];this.classType=r(p,"classType",this.classType);var m=r(p,"key",void 0),y=r(p,"frame",null),T=r(p,"visible",!0),C=r(p,"active",!0),S=[];if(m===void 0)return S;Array.isArray(m)||(m=[m]),Array.isArray(y)||(y=[y]);var E=r(p,"repeat",0),P=r(p,"randomKey",!1),M=r(p,"randomFrame",!1),A=r(p,"yoyo",!1),R=r(p,"quantity",!1),O=r(p,"frameQuantity",1),F=r(p,"max",0),I=l(m,y,{max:F,qty:R||O,random:P,randomB:M,repeat:E,yoyo:A});p.createCallback&&(this.createCallback=p.createCallback),p.removeCallback&&(this.removeCallback=p.removeCallback);for(var G=0;G<I.length;G++){var z=this.create(0,0,I[G].a,I[G].b,T,C);if(!z)break;S.push(z)}var U=a(p,"setXY.x",0),X=a(p,"setXY.y",0),b=a(p,"setXY.stepX",0),B=a(p,"setXY.stepY",0);s.SetXY(S,U,X,b,B);var L=a(p,"setRotation.value",0),D=a(p,"setRotation.step",0);s.SetRotation(S,L,D);var w=a(p,"setScale.x",1),N=a(p,"setScale.y",w),V=a(p,"setScale.stepX",0),Y=a(p,"setScale.stepY",0);s.SetScale(S,w,N,V,Y);var W=a(p,"setOrigin.x",.5),H=a(p,"setOrigin.y",W),$=a(p,"setOrigin.stepX",0),K=a(p,"setOrigin.stepY",0);s.SetOrigin(S,W,H,$,K);var Z=a(p,"setAlpha.value",1),J=a(p,"setAlpha.step",0);s.SetAlpha(S,Z,J);var k=a(p,"setDepth.value",0),Q=a(p,"setDepth.step",0);s.SetDepth(S,k,Q);var q=a(p,"setScrollFactor.x",1),at=a(p,"setScrollFactor.y",q),it=a(p,"setScrollFactor.stepX",0),_=a(p,"setScrollFactor.stepY",0);s.SetScrollFactor(S,q,at,it,_);var j=r(p,"hitArea",null),ot=r(p,"hitAreaCallback",null);j&&s.SetHitArea(S,j,ot);var tt=r(p,"gridAlign",!1);return tt&&s.GridAlign(S,tt),this.createMultipleCallback&&this.createMultipleCallback.call(this,S),S},preUpdate:function(p,m){if(!(!this.runChildUpdate||this.children.size===0))for(var y=this.children.entries.slice(),T=0;T<y.length;T++){var C=y[T];C.active&&C.update(p,m)}},add:function(p,m){return m===void 0&&(m=!1),this.isFull()?this:(this.children.set(p),this.internalCreateCallback&&this.internalCreateCallback.call(this,p),this.createCallback&&this.createCallback.call(this,p),m&&(p.addToDisplayList(this.scene.sys.displayList),p.addToUpdateList()),p.on(n.DESTROY,this.remove,this),this)},addMultiple:function(p,m){if(m===void 0&&(m=!1),Array.isArray(p))for(var y=0;y<p.length;y++)this.add(p[y],m);return this},remove:function(p,m,y){return m===void 0&&(m=!1),y===void 0&&(y=!1),this.children.contains(p)?(this.children.delete(p),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,p),this.removeCallback&&this.removeCallback.call(this,p),p.off(n.DESTROY,this.remove,this),y?p.destroy():m&&(p.removeFromDisplayList(),p.removeFromUpdateList()),this):this},clear:function(p,m){p===void 0&&(p=!1),m===void 0&&(m=!1);for(var y=this.children,T=0;T<y.size;T++){var C=y.entries[T];C.off(n.DESTROY,this.remove,this),m?C.destroy():p&&(C.removeFromDisplayList(),C.removeFromUpdateList())}return this.children.clear(),this},contains:function(p){return this.children.contains(p)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(p,m,y,T){return o(this.children.entries,p,m,y,T)},getFirst:function(p,m,y,T,C,S,E){return this.getHandler(!0,1,p,m,y,T,C,S,E)},getFirstNth:function(p,m,y,T,C,S,E,P){return this.getHandler(!0,p,m,y,T,C,S,E,P)},getLast:function(p,m,y,T,C,S,E){return this.getHandler(!1,1,p,m,y,T,C,S,E)},getLastNth:function(p,m,y,T,C,S,E,P){return this.getHandler(!1,p,m,y,T,C,S,E,P)},getHandler:function(p,m,y,T,C,S,E,P,M){y===void 0&&(y=!1),T===void 0&&(T=!1);var A,R,O=0,F=this.children.entries;if(p)for(R=0;R<F.length;R++)if(A=F[R],A.active===y){if(O++,O===m)break}else A=null;else for(R=F.length-1;R>=0;R--)if(A=F[R],A.active===y){if(O++,O===m)break}else A=null;return A?(typeof C=="number"&&(A.x=C),typeof S=="number"&&(A.y=S),A):T?this.create(C,S,E,P,M):null},get:function(p,m,y,T,C){return this.getFirst(!1,!0,p,m,y,T,C)},getFirstAlive:function(p,m,y,T,C,S){return this.getFirst(!0,p,m,y,T,C,S)},getFirstDead:function(p,m,y,T,C,S){return this.getFirst(!1,p,m,y,T,C,S)},playAnimation:function(p,m){return s.PlayAnimation(this.children.entries,p,m),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(p){p===void 0&&(p=!0);for(var m=0,y=0;y<this.children.size;y++)this.children.entries[y].active===p&&m++;return m},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var p=this.getTotalUsed(),m=this.maxSize===-1?999999999999:this.maxSize;return m-p},setActive:function(p){return this.active=p,this},setName:function(p){return this.name=p,this},propertyValueSet:function(p,m,y,T,C){return s.PropertyValueSet(this.children.entries,p,m,y,T,C),this},propertyValueInc:function(p,m,y,T,C){return s.PropertyValueInc(this.children.entries,p,m,y,T,C),this},setX:function(p,m){return s.SetX(this.children.entries,p,m),this},setY:function(p,m){return s.SetY(this.children.entries,p,m),this},setXY:function(p,m,y,T){return s.SetXY(this.children.entries,p,m,y,T),this},incX:function(p,m){return s.IncX(this.children.entries,p,m),this},incY:function(p,m){return s.IncY(this.children.entries,p,m),this},incXY:function(p,m,y,T){return s.IncXY(this.children.entries,p,m,y,T),this},shiftPosition:function(p,m,y){return s.ShiftPosition(this.children.entries,p,m,y),this},angle:function(p,m){return s.Angle(this.children.entries,p,m),this},rotate:function(p,m){return s.Rotate(this.children.entries,p,m),this},rotateAround:function(p,m){return s.RotateAround(this.children.entries,p,m),this},rotateAroundDistance:function(p,m,y){return s.RotateAroundDistance(this.children.entries,p,m,y),this},setAlpha:function(p,m){return s.SetAlpha(this.children.entries,p,m),this},setTint:function(p,m,y,T){return s.SetTint(this.children.entries,p,m,y,T),this},setOrigin:function(p,m,y,T){return s.SetOrigin(this.children.entries,p,m,y,T),this},scaleX:function(p,m){return s.ScaleX(this.children.entries,p,m),this},scaleY:function(p,m){return s.ScaleY(this.children.entries,p,m),this},scaleXY:function(p,m,y,T){return s.ScaleXY(this.children.entries,p,m,y,T),this},setDepth:function(p,m){return s.SetDepth(this.children.entries,p,m),this},setBlendMode:function(p){return s.SetBlendMode(this.children.entries,p),this},setHitArea:function(p,m){return s.SetHitArea(this.children.entries,p,m),this},shuffle:function(){return s.Shuffle(this.children.entries),this},kill:function(p){this.children.contains(p)&&p.setActive(!1)},killAndHide:function(p){this.children.contains(p)&&(p.setActive(!1),p.setVisible(!1))},setVisible:function(p,m,y){return s.SetVisible(this.children.entries,p,m,y),this},toggleVisible:function(){return s.ToggleVisible(this.children.entries),this},destroy:function(p,m){p===void 0&&(p=!1),m===void 0&&(m=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(n.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(m,p),this.scene=void 0,this.children=void 0)}});e.exports=g},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,h,o,r,a,d){for(var l=s.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*r),f=o.pathData,v=o.pathIndexes,g=0;g<v.length;g+=3){var p=v[g]*2,m=v[g+1]*2,y=v[g+2]*2,T=f[p+0]-a,C=f[p+1]-d,S=f[m+0]-a,E=f[m+1]-d,P=f[y+0]-a,M=f[y+1]-d,A=h.getX(T,C),R=h.getY(T,C),O=h.getX(S,E),F=h.getY(S,E),I=h.getX(P,M),G=h.getY(P,M);n.batchTri(o,A,R,O,F,I,G,0,0,1,1,l,l,l,2)}};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h=s.x3-s.x1,o=s.y3-s.y1,r=s.x2-s.x1,a=s.y2-s.y1,d=u-s.x1,l=n-s.y1,f=h*h+o*o,v=h*r+o*a,g=h*d+o*l,p=r*r+a*a,m=r*d+a*l,y=f*p-v*v,T=y===0?0:1/y,C=(p*g-v*m)*T,S=(f*m-v*g)*T;return C>=0&&S>=0&&C+S<1};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(10),n=t(3);function h(r,a,d,l){var f=r-d,v=a-l,g=f*f+v*v;return Math.sqrt(g)}var o=new s({initialize:function(a,d,l){this.vertex1=a,this.vertex2=d,this.vertex3=l,this.bounds=new u,this._inCenter=new n},getInCenter:function(r){r===void 0&&(r=!0);var a=this.vertex1,d=this.vertex2,l=this.vertex3,f,v,g,p,m,y;r?(f=a.x,v=a.y,g=d.x,p=d.y,m=l.x,y=l.y):(f=a.vx,v=a.vy,g=d.vx,p=d.vy,m=l.vx,y=l.vy);var T=h(m,y,g,p),C=h(f,v,m,y),S=h(g,p,f,v),E=T+C+S;return this._inCenter.set((f*T+g*C+m*S)/E,(v*T+p*C+y*S)/E)},contains:function(r,a,d){var l=this.vertex1,f=this.vertex2,v=this.vertex3,g=l.vx,p=l.vy,m=f.vx,y=f.vy,T=v.vx,C=v.vy;if(d){var S=d.a,E=d.b,P=d.c,M=d.d,A=d.e,R=d.f;g=l.vx*S+l.vy*P+A,p=l.vx*E+l.vy*M+R,m=f.vx*S+f.vy*P+A,y=f.vx*E+f.vy*M+R,T=v.vx*S+v.vy*P+A,C=v.vx*E+v.vy*M+R}var O=T-g,F=C-p,I=m-g,G=y-p,z=r-g,U=a-p,X=O*O+F*F,b=O*I+F*G,B=O*z+F*U,L=I*I+G*G,D=I*z+G*U,w=X*L-b*b,N=w===0?0:1/w,V=(L*B-b*D)*N,Y=(X*D-b*B)*N;return V>=0&&Y>=0&&V+Y<1},isCounterClockwise:function(r){var a=this.vertex1,d=this.vertex2,l=this.vertex3,f=(d.vx-a.vx)*(l.vy-a.vy)-(d.vy-a.vy)*(l.vx-a.vx);return r<=0?f>=0:f<0},load:function(r,a,d,l,f){return d=this.vertex1.load(r,a,d,l,f),d=this.vertex2.load(r,a,d,l,f),d=this.vertex3.load(r,a,d,l,f),d},transformCoordinatesLocal:function(r,a,d,l){return this.vertex1.transformCoordinatesLocal(r,a,d,l),this.vertex2.transformCoordinatesLocal(r,a,d,l),this.vertex3.transformCoordinatesLocal(r,a,d,l),this},updateBounds:function(){var r=this.vertex1,a=this.vertex2,d=this.vertex3,l=this.bounds;return l.x=Math.min(r.vx,a.vx,d.vx),l.y=Math.min(r.vy,a.vy,d.vy),l.width=Math.max(r.vx,a.vx,d.vx)-l.x,l.height=Math.max(r.vy,a.vy,d.vy)-l.y,this},isInView:function(r,a,d,l,f,v,g,p,m,y,T){var C=this.vertex1.update(f,v,g,p,m,y,T,l),S=this.vertex2.update(f,v,g,p,m,y,T,l),E=this.vertex3.update(f,v,g,p,m,y,T,l);if(C.ta<=0&&S.ta<=0&&E.ta<=0||a&&!this.isCounterClockwise(d))return!1;var P=this.bounds;P.x=Math.min(C.tx,S.tx,E.tx),P.y=Math.min(C.ty,S.ty,E.ty),P.width=Math.max(C.tx,S.tx,E.tx)-P.x,P.height=Math.max(C.ty,S.ty,E.ty)-P.y;var M=r.x+r.width,A=r.y+r.height;return P.width<=0||P.height<=0||r.width<=0||r.height<=0?!1:!(P.right<r.x||P.bottom<r.y||P.x>M||P.y>A)},translate:function(r,a){a===void 0&&(a=0);var d=this.vertex1,l=this.vertex2,f=this.vertex3;return d.x+=r,d.y+=a,l.x+=r,l.y+=a,f.x+=r,f.y+=a,this},x:{get:function(){return this.getInCenter().x},set:function(r){var a=this.getInCenter();this.translate(r-a.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(r){var a=this.getInCenter();this.translate(0,r-a.y)}},alpha:{get:function(){var r=this.vertex1,a=this.vertex2,d=this.vertex3;return(r.alpha+a.alpha+d.alpha)/3},set:function(r){this.vertex1.alpha=r,this.vertex2.alpha=r,this.vertex3.alpha=r}},depth:{get:function(){var r=this.vertex1,a=this.vertex2,d=this.vertex3;return(r.vz+a.vz+d.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(12),n=t(39),h=new s({Extends:n,initialize:function(r,a,d,l,f,v,g,p,m,y){v===void 0&&(v=16777215),g===void 0&&(g=1),p===void 0&&(p=0),m===void 0&&(m=0),y===void 0&&(y=0),n.call(this,r,a,d),this.vx=0,this.vy=0,this.vz=0,this.nx=p,this.ny=m,this.nz=y,this.u=l,this.v=f,this.color=v,this.alpha=g,this.tx=0,this.ty=0,this.ta=0},setUVs:function(o,r){return this.u=o,this.v=r,this},transformCoordinatesLocal:function(o,r,a,d){var l=this.x,f=this.y,v=this.z,g=o.val,p=l*g[0]+f*g[4]+v*g[8]+g[12],m=l*g[1]+f*g[5]+v*g[9]+g[13],y=l*g[2]+f*g[6]+v*g[10]+g[14],T=l*g[3]+f*g[7]+v*g[11]+g[15];this.vx=p/T*r,this.vy=-(m/T)*a,d<=0?this.vz=y/T:this.vz=-(y/T)},update:function(o,r,a,d,l,f,v,g){var p=this.vx*o+this.vy*a+l,m=this.vx*r+this.vy*d+f;return v&&(p=Math.round(p),m=Math.round(m)),this.tx=p,this.ty=m,this.ta=this.alpha*g,this},load:function(o,r,a,d,l){return o[++a]=this.tx,o[++a]=this.ty,o[++a]=this.u,o[++a]=this.v,o[++a]=d,o[++a]=l,r[++a]=u.getTintAppendFloatAlpha(this.color,this.ta),a}});e.exports=h},function(e,c,t){var s={};e.exports=s;var u=t(166),n=t(32),h=t(84),o=t(41);(function(){s.create=function(r){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},r)},s.setModified=function(r,a,d,l){if(u.trigger(r,"compositeModified",r),r.isModified=a,d&&r.parent&&s.setModified(r.parent,a,d,l),l)for(var f=0;f<r.composites.length;f++){var v=r.composites[f];s.setModified(v,a,d,l)}},s.add=function(r,a){var d=[].concat(a);u.trigger(r,"beforeAdd",{object:a});for(var l=0;l<d.length;l++){var f=d[l];switch(f.type){case"body":if(f.parent!==f){n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}s.addBody(r,f);break;case"constraint":s.addConstraint(r,f);break;case"composite":s.addComposite(r,f);break;case"mouseConstraint":s.addConstraint(r,f.constraint);break}}return u.trigger(r,"afterAdd",{object:a}),r},s.remove=function(r,a,d){var l=[].concat(a);u.trigger(r,"beforeRemove",{object:a});for(var f=0;f<l.length;f++){var v=l[f];switch(v.type){case"body":s.removeBody(r,v,d);break;case"constraint":s.removeConstraint(r,v,d);break;case"composite":s.removeComposite(r,v,d);break;case"mouseConstraint":s.removeConstraint(r,v.constraint);break}}return u.trigger(r,"afterRemove",{object:a}),r},s.addComposite=function(r,a){return r.composites.push(a),a.parent=r,s.setModified(r,!0,!0,!1),r},s.removeComposite=function(r,a,d){var l=r.composites.indexOf(a);if(l!==-1&&(s.removeCompositeAt(r,l),s.setModified(r,!0,!0,!1)),d)for(var f=0;f<r.composites.length;f++)s.removeComposite(r.composites[f],a,!0);return r},s.removeCompositeAt=function(r,a){return r.composites.splice(a,1),s.setModified(r,!0,!0,!1),r},s.addBody=function(r,a){return r.bodies.push(a),s.setModified(r,!0,!0,!1),r},s.removeBody=function(r,a,d){var l=r.bodies.indexOf(a);if(l!==-1&&(s.removeBodyAt(r,l),s.setModified(r,!0,!0,!1)),d)for(var f=0;f<r.composites.length;f++)s.removeBody(r.composites[f],a,!0);return r},s.removeBodyAt=function(r,a){return r.bodies.splice(a,1),s.setModified(r,!0,!0,!1),r},s.addConstraint=function(r,a){return r.constraints.push(a),s.setModified(r,!0,!0,!1),r},s.removeConstraint=function(r,a,d){var l=r.constraints.indexOf(a);if(l!==-1&&s.removeConstraintAt(r,l),d)for(var f=0;f<r.composites.length;f++)s.removeConstraint(r.composites[f],a,!0);return r},s.removeConstraintAt=function(r,a){return r.constraints.splice(a,1),s.setModified(r,!0,!0,!1),r},s.clear=function(r,a,d){if(d)for(var l=0;l<r.composites.length;l++)s.clear(r.composites[l],a,!0);return a?r.bodies=r.bodies.filter(function(f){return f.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,s.setModified(r,!0,!0,!1),r},s.allBodies=function(r){for(var a=[].concat(r.bodies),d=0;d<r.composites.length;d++)a=a.concat(s.allBodies(r.composites[d]));return a},s.allConstraints=function(r){for(var a=[].concat(r.constraints),d=0;d<r.composites.length;d++)a=a.concat(s.allConstraints(r.composites[d]));return a},s.allComposites=function(r){for(var a=[].concat(r.composites),d=0;d<r.composites.length;d++)a=a.concat(s.allComposites(r.composites[d]));return a},s.get=function(r,a,d){var l,f;switch(d){case"body":l=s.allBodies(r);break;case"constraint":l=s.allConstraints(r);break;case"composite":l=s.allComposites(r).concat(r);break}return l?(f=l.filter(function(v){return v.id.toString()===a.toString()}),f.length===0?null:f[0]):null},s.move=function(r,a,d){return s.remove(r,a),s.add(d,a),r},s.rebase=function(r){for(var a=s.allBodies(r).concat(s.allConstraints(r)).concat(s.allComposites(r)),d=0;d<a.length;d++)a[d].id=n.nextId();return s.setModified(r,!0,!0,!1),r},s.translate=function(r,a,d){for(var l=d?s.allBodies(r):r.bodies,f=0;f<l.length;f++)o.translate(l[f],a);return s.setModified(r,!0,!0,!1),r},s.rotate=function(r,a,d,l){for(var f=Math.cos(a),v=Math.sin(a),g=l?s.allBodies(r):r.bodies,p=0;p<g.length;p++){var m=g[p],y=m.position.x-d.x,T=m.position.y-d.y;o.setPosition(m,{x:d.x+(y*f-T*v),y:d.y+(y*v+T*f)}),o.rotate(m,a)}return s.setModified(r,!0,!0,!1),r},s.scale=function(r,a,d,l,f){for(var v=f?s.allBodies(r):r.bodies,g=0;g<v.length;g++){var p=v[g],m=p.position.x-l.x,y=p.position.y-l.y;o.setPosition(p,{x:l.x+m*a,y:l.y+y*d}),o.scale(p,a,d)}return s.setModified(r,!0,!0,!1),r},s.bounds=function(r){for(var a=s.allBodies(r),d=[],l=0;l<a.length;l+=1){var f=a[l];d.push(f.bounds.min,f.bounds.max)}return h.create(d)}})()},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s>=0&&s<n.width&&u>=0&&u<n.height};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(29),n=t(2),h=new s({initialize:function(r){r===void 0&&(r={}),this.name=n(r,"name","layer"),this.x=n(r,"x",0),this.y=n(r,"y",0),this.width=n(r,"width",0),this.height=n(r,"height",0),this.tileWidth=n(r,"tileWidth",0),this.tileHeight=n(r,"tileHeight",0),this.baseTileWidth=n(r,"baseTileWidth",this.tileWidth),this.baseTileHeight=n(r,"baseTileHeight",this.tileHeight),this.orientation=n(r,"orientation",u.ORTHOGONAL),this.widthInPixels=n(r,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=n(r,"heightInPixels",this.height*this.baseTileHeight),this.alpha=n(r,"alpha",1),this.visible=n(r,"visible",!0),this.properties=n(r,"properties",[]),this.indexes=n(r,"indexes",[]),this.collideIndexes=n(r,"collideIndexes",[]),this.callbacks=n(r,"callbacks",[]),this.bodies=n(r,"bodies",[]),this.data=n(r,"data",[]),this.tilemapLayer=n(r,"tilemapLayer",null),this.hexSideLength=n(r,"hexSideLength",0)}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(29),n=t(2),h=new s({initialize:function(r){r===void 0&&(r={}),this.name=n(r,"name","map"),this.width=n(r,"width",0),this.height=n(r,"height",0),this.infinite=n(r,"infinite",!1),this.tileWidth=n(r,"tileWidth",0),this.tileHeight=n(r,"tileHeight",0),this.widthInPixels=n(r,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=n(r,"heightInPixels",this.height*this.tileHeight),this.format=n(r,"format",null),this.orientation=n(r,"orientation",u.ORTHOGONAL),this.renderOrder=n(r,"renderOrder","right-down"),this.version=n(r,"version","1"),this.properties=n(r,"properties",{}),this.layers=n(r,"layers",[]),this.images=n(r,"images",[]),this.objects=n(r,"objects",{}),this.collision=n(r,"collision",{}),this.tilesets=n(r,"tilesets",[]),this.imageCollections=n(r,"imageCollections",[]),this.tiles=n(r,"tiles",[]),this.hexSideLength=n(r,"hexSideLength",0)}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(h,o,r,a,d,l,f,v){(r===void 0||r<=0)&&(r=32),(a===void 0||a<=0)&&(a=32),d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f={}),v===void 0&&(v={}),this.name=h,this.firstgid=o,this.tileWidth=r,this.tileHeight=a,this.tileMargin=d,this.tileSpacing=l,this.tileProperties=f,this.tileData=v,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(n){return this.containsTileIndex(n)?this.tileProperties[n-this.firstgid]:null},getTileData:function(n){return this.containsTileIndex(n)?this.tileData[n-this.firstgid]:null},getTileCollisionGroup:function(n){var h=this.getTileData(n);return h&&h.objectgroup?h.objectgroup:null},containsTileIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},getTileTextureCoordinates:function(n){return this.containsTileIndex(n)?this.texCoordinates[n-this.firstgid]:null},setImage:function(n){return this.image=n,this.glTexture=n.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(n,h){return n!==void 0&&(this.tileWidth=n),h!==void 0&&(this.tileHeight=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(n,h){return n!==void 0&&(this.tileMargin=n),h!==void 0&&(this.tileSpacing=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(n,h){var o=(h-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),r=(n-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(o%1!=0||r%1!=0)&&console.warn("Image tile area not tile size multiple in: "+this.name),o=Math.floor(o),r=Math.floor(r),this.rows=o,this.columns=r,this.total=o*r,this.texCoordinates.length=0;for(var a=this.tileMargin,d=this.tileMargin,l=0;l<this.rows;l++){for(var f=0;f<this.columns;f++)this.texCoordinates.push({x:a,y:d}),a+=this.tileWidth+this.tileSpacing;a=this.tileMargin,d+=this.tileHeight+this.tileSpacing}return this}});e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return n===void 0&&(n=1e-4),Math.abs(s-u)<n};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),h=t(1068),o=new s({Extends:n,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,h],initialize:function(a,d,l,f,v){n.call(this,a,"Image"),this._crop=this.resetCropObject(),this.setTexture(f,v),this.setPosition(d,l),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});e.exports=o},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.hasOwnProperty(u)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77),u=function(n,h){var o=s(n);for(var r in h)o.hasOwnProperty(r)||(o[r]=h[r]);return o};e.exports=u},function(e,c,t){var s={};e.exports=s;var u=t(64),n=t(83),h=t(165),o=t(84),r=t(271),a=t(32);(function(){s._warming=.4,s._torqueDampen=1,s._minLength=1e-6,s.create=function(d){var l=d;l.bodyA&&!l.pointA&&(l.pointA={x:0,y:0}),l.bodyB&&!l.pointB&&(l.pointB={x:0,y:0});var f=l.bodyA?n.add(l.bodyA.position,l.pointA):l.pointA,v=l.bodyB?n.add(l.bodyB.position,l.pointB):l.pointB,g=n.magnitude(n.sub(f,v));l.length=typeof l.length!="undefined"?l.length:g,l.id=l.id||a.nextId(),l.label=l.label||"Constraint",l.type="constraint",l.stiffness=l.stiffness||(l.length>0?1:.7),l.damping=l.damping||0,l.angularStiffness=l.angularStiffness||0,l.angleA=l.bodyA?l.bodyA.angle:l.angleA,l.angleB=l.bodyB?l.bodyB.angle:l.angleB,l.plugin={};var p={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return l.length===0&&l.stiffness>.1?(p.type="pin",p.anchors=!1):l.stiffness<.9&&(p.type="spring"),l.render=a.extend(p,l.render),l},s.preSolveAll=function(d){for(var l=0;l<d.length;l+=1){var f=d[l],v=f.constraintImpulse;f.isStatic||v.x===0&&v.y===0&&v.angle===0||(f.position.x+=v.x,f.position.y+=v.y,f.angle+=v.angle)}},s.solveAll=function(d,l){for(var f=0;f<d.length;f+=1){var v=d[f],g=!v.bodyA||v.bodyA&&v.bodyA.isStatic,p=!v.bodyB||v.bodyB&&v.bodyB.isStatic;(g||p)&&s.solve(d[f],l)}for(f=0;f<d.length;f+=1)v=d[f],g=!v.bodyA||v.bodyA&&v.bodyA.isStatic,p=!v.bodyB||v.bodyB&&v.bodyB.isStatic,!g&&!p&&s.solve(d[f],l)},s.solve=function(d,l){var f=d.bodyA,v=d.bodyB,g=d.pointA,p=d.pointB;if(!(!f&&!v)){f&&!f.isStatic&&(n.rotate(g,f.angle-d.angleA,g),d.angleA=f.angle),v&&!v.isStatic&&(n.rotate(p,v.angle-d.angleB,p),d.angleB=v.angle);var m=g,y=p;if(f&&(m=n.add(f.position,g)),v&&(y=n.add(v.position,p)),!(!m||!y)){var T=n.sub(m,y),C=n.magnitude(T);C<s._minLength&&(C=s._minLength);var S=(C-d.length)/C,E=d.stiffness<1?d.stiffness*l:d.stiffness,P=n.mult(T,S*E),M=(f?f.inverseMass:0)+(v?v.inverseMass:0),A=(f?f.inverseInertia:0)+(v?v.inverseInertia:0),R=M+A,O,F,I,G,z;if(d.damping){var U=n.create();I=n.div(T,C),z=n.sub(v&&n.sub(v.position,v.positionPrev)||U,f&&n.sub(f.position,f.positionPrev)||U),G=n.dot(I,z)}f&&!f.isStatic&&(F=f.inverseMass/M,f.constraintImpulse.x-=P.x*F,f.constraintImpulse.y-=P.y*F,f.position.x-=P.x*F,f.position.y-=P.y*F,d.damping&&(f.positionPrev.x-=d.damping*I.x*G*F,f.positionPrev.y-=d.damping*I.y*G*F),O=n.cross(g,P)/R*s._torqueDampen*f.inverseInertia*(1-d.angularStiffness),f.constraintImpulse.angle-=O,f.angle-=O),v&&!v.isStatic&&(F=v.inverseMass/M,v.constraintImpulse.x+=P.x*F,v.constraintImpulse.y+=P.y*F,v.position.x+=P.x*F,v.position.y+=P.y*F,d.damping&&(v.positionPrev.x+=d.damping*I.x*G*F,v.positionPrev.y+=d.damping*I.y*G*F),O=n.cross(p,P)/R*s._torqueDampen*v.inverseInertia*(1-d.angularStiffness),v.constraintImpulse.angle+=O,v.angle+=O)}}},s.postSolveAll=function(d){for(var l=0;l<d.length;l++){var f=d[l],v=f.constraintImpulse;if(!(f.isStatic||v.x===0&&v.y===0&&v.angle===0)){h.set(f,!1);for(var g=0;g<f.parts.length;g++){var p=f.parts[g];u.translate(p.vertices,v),g>0&&(p.position.x+=v.x,p.position.y+=v.y),v.angle!==0&&(u.rotate(p.vertices,v.angle,f.position),r.rotate(p.axes,v.angle),g>0&&n.rotateAbout(p.position,v.angle,f.position,p.position)),o.update(p.bounds,p.vertices,f.velocity)}v.angle*=s._warming,v.x*=s._warming,v.y*=s._warming}}},s.pointAWorld=function(d){return{x:(d.bodyA?d.bodyA.position.x:0)+d.pointA.x,y:(d.bodyA?d.bodyA.position.y:0)+d.pointA.y}},s.pointBWorld=function(d){return{x:(d.bodyB?d.bodyB.position.x:0)+d.pointB.x,y:(d.bodyB?d.bodyB.position.y:0)+d.pointB.y}}})()},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(65),n=t(66),h=t(0),o=t(11),r=t(15),a=t(10),d=t(57),l=new h({Extends:r,Mixins:[o.Depth,o.GetBounds,o.Origin,o.Transform,o.ScrollFactor,o.Visible],initialize:function(v,g,p,m,y){m===void 0&&(m=1),y===void 0&&(y=m),r.call(this,v,"Zone"),this.setPosition(g,p),this.width=m,this.height=y,this.blendMode=s.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(f){this.scaleX=f/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(f){this.scaleY=f/this.height}},setSize:function(f,v,g){g===void 0&&(g=!0),this.width=f,this.height=v,this.updateDisplayOrigin();var p=this.input;return g&&p&&!p.customHitArea&&(p.hitArea.width=f,p.hitArea.height=v),this},setDisplaySize:function(f,v){return this.displayWidth=f,this.displayHeight=v,this},setCircleDropZone:function(f){return this.setDropZone(new u(0,0,f),n)},setRectangleDropZone:function(f,v){return this.setDropZone(new a(0,0,f,v),d)},setDropZone:function(f,v){return f===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(f,v,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(f,v,g){g.addToRenderList(v)},renderWebGL:function(f,v,g){g.addToRenderList(v)}});e.exports=l},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return 2*(s.width+s.height)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=s.length-1;u>0;u--){var n=Math.floor(Math.random()*(u+1)),h=s[u];s[u]=s[n],s[n]=h}return s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD_ANIMATION:t(724),ANIMATION_COMPLETE:t(725),ANIMATION_COMPLETE_KEY:t(726),ANIMATION_REPEAT:t(727),ANIMATION_RESTART:t(728),ANIMATION_START:t(729),ANIMATION_STOP:t(730),ANIMATION_UPDATE:t(731),PAUSE_ALL:t(732),REMOVE_ANIMATION:t(733),RESUME_ALL:t(734)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(36),h=t(9),o=t(37),r=t(10),a=t(25),d=t(187),l=t(3),f=new s({Extends:h,Mixins:[u.Alpha,u.Visible],initialize:function(g,p,m,y){g===void 0&&(g=0),p===void 0&&(p=0),m===void 0&&(m=0),y===void 0&&(y=0),h.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new r,this.dirty=!0,this._x=g,this._y=p,this._width=m,this._height=y,this._bounds=new r,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new a,this.transparent=!0,this.backgroundColor=d("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new l(m/2,y/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(v){this.renderList.push(v)},setOrigin:function(v,g){return v===void 0&&(v=.5),g===void 0&&(g=v),this.originX=v,this.originY=g,this},getScroll:function(v,g,p){p===void 0&&(p=new l);var m=this.width*.5,y=this.height*.5;return p.x=v-m,p.y=g-y,this.useBounds&&(p.x=this.clampX(p.x),p.y=this.clampY(p.y)),p},centerOnX:function(v){var g=this.width*.5;return this.midPoint.x=v,this.scrollX=v-g,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(v){var g=this.height*.5;return this.midPoint.y=v,this.scrollY=v-g,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(v,g){return this.centerOnX(v),this.centerOnY(g),this},centerToBounds:function(){if(this.useBounds){var v=this._bounds,g=this.width*.5,p=this.height*.5;this.midPoint.set(v.centerX,v.centerY),this.scrollX=v.centerX-g,this.scrollY=v.centerY-p}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(v){if(this.disableCull)return v;var g=this.matrix.matrix,p=g[0],m=g[1],y=g[2],T=g[3],C=p*T-m*y;if(!C)return v;var S=g[4],E=g[5],P=this.scrollX,M=this.scrollY,A=this.width,R=this.height,O=this.y,F=O+R,I=this.x,G=I+A,z=this.culledObjects,U=v.length;C=1/C,z.length=0;for(var X=0;X<U;++X){var b=v[X];if(!b.hasOwnProperty("width")||b.parentContainer){z.push(b);continue}var B=b.width,L=b.height,D=b.x-P*b.scrollFactorX-B*b.originX,w=b.y-M*b.scrollFactorY-L*b.originY,N=D*p+w*y+S,V=D*m+w*T+E,Y=(D+B)*p+(w+L)*y+S,W=(D+B)*m+(w+L)*T+E;Y>I&&N<G&&W>O&&V<F&&z.push(b)}return z},getWorldPoint:function(v,g,p){p===void 0&&(p=new l);var m=this.matrix.matrix,y=m[0],T=m[1],C=m[2],S=m[3],E=m[4],P=m[5],M=y*S-T*C;if(!M)return p.x=v,p.y=g,p;M=1/M;var A=S*M,R=-T*M,O=-C*M,F=y*M,I=(C*P-S*E)*M,G=(T*E-y*P)*M,z=Math.cos(this.rotation),U=Math.sin(this.rotation),X=this.zoomX,b=this.zoomY,B=this.scrollX,L=this.scrollY,D=v+(B*z-L*U)*X,w=g+(B*U+L*z)*b;return p.x=D*A+w*O+I,p.y=D*R+w*F+G,p},ignore:function(v){var g=this.id;Array.isArray(v)||(v=[v]);for(var p=0;p<v.length;p++){var m=v[p];Array.isArray(m)?this.ignore(m):m.isParent?this.ignore(m.getChildren()):m.cameraFilter|=g}return this},preRender:function(){this.renderList.length=0;var v=this.width,g=this.height,p=v*.5,m=g*.5,y=this.zoomX,T=this.zoomY,C=this.matrix,S=v*this.originX,E=g*this.originY,P=this.scrollX,M=this.scrollY;this.useBounds&&(P=this.clampX(P),M=this.clampY(M)),this.roundPixels&&(S=Math.round(S),E=Math.round(E)),this.scrollX=P,this.scrollY=M;var A=P+p,R=M+m;this.midPoint.set(A,R);var O=v/y,F=g/T;this.worldView.setTo(A-O/2,R-F/2,O,F),C.applyITRS(this.x+S,this.y+E,this.rotation,y,T),C.translate(-S,-E)},clampX:function(v){var g=this._bounds,p=this.displayWidth,m=g.x+(p-this.width)/2,y=Math.max(m,m+g.width-p);return v<m?v=m:v>y&&(v=y),v},clampY:function(v){var g=this._bounds,p=this.displayHeight,m=g.y+(p-this.height)/2,y=Math.max(m,m+g.height-p);return v<m?v=m:v>y&&(v=y),v},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(v){return v===void 0&&(v=0),this.rotation=n(v),this},setBackgroundColor:function(v){return v===void 0&&(v="rgba(0,0,0,0)"),this.backgroundColor=d(v),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(v,g,p,m,y){return y===void 0&&(y=!1),this._bounds.setTo(v,g,p,m),this.dirty=!0,this.useBounds=!0,y?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(v){v===void 0&&(v=new r);var g=this._bounds;return v.setTo(g.x,g.y,g.width,g.height),v},setName:function(v){return v===void 0&&(v=""),this.name=v,this},setPosition:function(v,g){return g===void 0&&(g=v),this.x=v,this.y=g,this},setRotation:function(v){return v===void 0&&(v=0),this.rotation=v,this},setRoundPixels:function(v){return this.roundPixels=v,this},setScene:function(v){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=v;var g=v.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(v,g){return g===void 0&&(g=v),this.scrollX=v,this.scrollY=g,this},setSize:function(v,g){return g===void 0&&(g=v),this.width=v,this.height=g,this},setViewport:function(v,g,p,m){return this.x=v,this.y=g,this.width=p,this.height=m,this},setZoom:function(v,g){return v===void 0&&(v=1),g===void 0&&(g=v),v===0&&(v=.001),g===0&&(g=.001),this.zoomX=v,this.zoomY=g,this},setMask:function(v,g){return g===void 0&&(g=!0),this.mask=v,this._maskCamera=g?this.cameraManager.default:this,this},clearMask:function(v){return v===void 0&&(v=!1),v&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var v={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(v.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),v},update:function(){},updateSystem:function(){if(!!this.scaleManager){var v=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,g=this.sceneManager;v&&!this._customViewport?g.customViewports++:!v&&this._customViewport&&g.customViewports--,this.dirty=!0,this._customViewport=v}},destroy:function(){this.emit(o.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(v){this._x=v,this.updateSystem()}},y:{get:function(){return this._y},set:function(v){this._y=v,this.updateSystem()}},width:{get:function(){return this._width},set:function(v){this._width=v,this.updateSystem()}},height:{get:function(){return this._height},set:function(v){this._height=v,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(v){this._scrollX=v,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(v){this._scrollY=v,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(v){this._zoomX=v,this._zoomY=v,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(v){this._zoomX=v,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(v){this._zoomY=v,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(v){this._rotation=v,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});e.exports=f},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(334),u=t(335),n=t(336),h=t(337),o=t(338),r=t(339),a=t(340),d=t(341),l=t(342),f=t(343),v=t(344),g=t(345);e.exports={Power0:a,Power1:d.Out,Power2:h.Out,Power3:l.Out,Power4:f.Out,Linear:a,Quad:d.Out,Cubic:h.Out,Quart:l.Out,Quint:f.Out,Sine:v.Out,Expo:r.Out,Circ:n.Out,Elastic:o.Out,Back:s.Out,Bounce:u.Out,Stepped:g,"Quad.easeIn":d.In,"Cubic.easeIn":h.In,"Quart.easeIn":l.In,"Quint.easeIn":f.In,"Sine.easeIn":v.In,"Expo.easeIn":r.In,"Circ.easeIn":n.In,"Elastic.easeIn":o.In,"Back.easeIn":s.In,"Bounce.easeIn":u.In,"Quad.easeOut":d.Out,"Cubic.easeOut":h.Out,"Quart.easeOut":l.Out,"Quint.easeOut":f.Out,"Sine.easeOut":v.Out,"Expo.easeOut":r.Out,"Circ.easeOut":n.Out,"Elastic.easeOut":o.Out,"Back.easeOut":s.Out,"Bounce.easeOut":u.Out,"Quad.easeInOut":d.InOut,"Cubic.easeInOut":h.InOut,"Quart.easeInOut":l.InOut,"Quint.easeInOut":f.InOut,"Sine.easeInOut":v.InOut,"Expo.easeInOut":r.InOut,"Circ.easeInOut":n.InOut,"Elastic.easeInOut":o.InOut,"Back.easeInOut":s.InOut,"Bounce.easeInOut":u.InOut}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return(u-s)*n+s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(105),u={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function n(){var h=navigator.userAgent;return/Edge\/\d+/.test(h)?u.edge=!0:/Chrome\/(\d+)/.test(h)&&!s.windowsPhone?(u.chrome=!0,u.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(h)?(u.firefox=!0,u.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(h)&&s.iOS?u.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(h)?(u.ie=!0,u.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(h)?u.opera=!0:/Safari/.test(h)&&!s.windowsPhone?u.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(h)&&(u.ie=!0,u.trident=!0,u.tridentVersion=parseInt(RegExp.$1,10),u.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(h)&&(u.silk=!0),u}e.exports=n()},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return Math.random()*(u-s)+s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s>0&&(s&s-1)==0&&u>0&&(u&u-1)==0};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){return n===void 0&&(n=0),u===0?s:(s-=n,s=u*Math.ceil(s/u),h?(n+s)/u:n+s)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(h,o,r,a){this.x=0,this.y=0,this.z=0,this.w=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0,this.w=h.w||0):(this.x=h||0,this.y=o||0,this.z=r||0,this.w=a||0)},clone:function(){return new u(this.x,this.y,this.z,this.w)},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this.w=n.w||0,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z&&this.w===n.w},set:function(n,h,o,r){return typeof n=="object"?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0,this.w=n.w||0):(this.x=n||0,this.y=h||0,this.z=o||0,this.w=r||0),this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this.w+=n.w||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this.w-=n.w||0,this},scale:function(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this},length:function(){var n=this.x,h=this.y,o=this.z,r=this.w;return Math.sqrt(n*n+h*h+o*o+r*r)},lengthSq:function(){var n=this.x,h=this.y,o=this.z,r=this.w;return n*n+h*h+o*o+r*r},normalize:function(){var n=this.x,h=this.y,o=this.z,r=this.w,a=n*n+h*h+o*o+r*r;return a>0&&(a=1/Math.sqrt(a),this.x=n*a,this.y=h*a,this.z=o*a,this.w=r*a),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w},lerp:function(n,h){h===void 0&&(h=0);var o=this.x,r=this.y,a=this.z,d=this.w;return this.x=o+h*(n.x-o),this.y=r+h*(n.y-r),this.z=a+h*(n.z-a),this.w=d+h*(n.w-d),this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this.w*=n.w||1,this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this.w/=n.w||1,this},distance:function(n){var h=n.x-this.x,o=n.y-this.y,r=n.z-this.z||0,a=n.w-this.w||0;return Math.sqrt(h*h+o*o+r*r+a*a)},distanceSq:function(n){var h=n.x-this.x,o=n.y-this.y,r=n.z-this.z||0,a=n.w-this.w||0;return h*h+o*o+r*r+a*a},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(n){var h=this.x,o=this.y,r=this.z,a=this.w,d=n.val;return this.x=d[0]*h+d[4]*o+d[8]*r+d[12]*a,this.y=d[1]*h+d[5]*o+d[9]*r+d[13]*a,this.z=d[2]*h+d[6]*o+d[10]*r+d[14]*a,this.w=d[3]*h+d[7]*o+d[11]*r+d[15]*a,this},transformQuat:function(n){var h=this.x,o=this.y,r=this.z,a=n.x,d=n.y,l=n.z,f=n.w,v=f*h+d*r-l*o,g=f*o+l*h-a*r,p=f*r+a*o-d*h,m=-a*h-d*o-l*r;return this.x=v*f+m*-a+g*-l-p*-d,this.y=g*f+m*-d+p*-a-v*-l,this.z=p*f+m*-l+v*-d-g*-a,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});u.prototype.sub=u.prototype.subtract,u.prototype.mul=u.prototype.multiply,u.prototype.div=u.prototype.divide,u.prototype.dist=u.prototype.distance,u.prototype.distSq=u.prototype.distanceSq,u.prototype.len=u.prototype.length,u.prototype.lenSq=u.prototype.lengthSq,e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(91),n=new s({initialize:function(o,r,a,d,l,f,v){d===void 0&&(d=1),l===void 0&&(l=0),f===void 0&&(f=!0),v===void 0&&(v=!1),this.renderer=o,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=d,this.minFilter=l,this.autoClear=f,this.autoResize=!1,this.resize(r,a),v&&this.setAutoResize(!0)},setAutoResize:function(h){return h&&!this.autoResize?(this.renderer.on(u.RESIZE,this.resize,this),this.autoResize=!0):!h&&this.autoResize&&(this.renderer.off(u.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(h,o){var r=h*this.scale,a=o*this.scale;if(r!==this.width||a!==this.height){var d=this.renderer;d.deleteFramebuffer(this.framebuffer),d.deleteTexture(this.texture),h*=this.scale,o*=this.scale,h=Math.round(h),o=Math.round(o),h<=0&&(h=1),o<=0&&(o=1),this.texture=d.createTextureFromSource(null,h,o,this.minFilter),this.framebuffer=d.createFramebuffer(h,o,this.texture,!1),this.width=h,this.height=o}return this},bind:function(h,o,r){if(h===void 0&&(h=!1),h&&this.renderer.flush(),o&&r&&this.resize(o,r),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),h&&this.adjustViewport(),this.autoClear){var a=this.renderer.gl;a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)}},adjustViewport:function(){var h=this.renderer.gl;h.viewport(0,0,this.width,this.height),h.disable(h.SCISSOR_TEST)},clear:function(){var h=this.renderer,o=h.gl;h.pushFramebuffer(this.framebuffer),o.disable(o.SCISSOR_TEST),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),h.popFramebuffer(),h.resetScissor()},unbind:function(h){h===void 0&&(h=!1);var o=this.renderer;return h&&o.flush(),o.popFramebuffer()},destroy:function(){var h=this.renderer;h.deleteFramebuffer(this.framebuffer),h.deleteTexture(this.texture),h.off(u.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n;if(u)typeof u=="string"?n=document.getElementById(u):typeof u=="object"&&u.nodeType===1&&(n=u);else if(s.parentElement||u===null)return s;return n||(n=document.body),n.appendChild(s),s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(77),n=t(9),h=t(70),o=t(22),r=t(1),a=t(207),d=t(428),l=new s({Extends:n,initialize:function(v){n.call(this),this.game=v,this.jsonCache=v.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,v.events.on(o.BLUR,this.onGameBlur,this),v.events.on(o.FOCUS,this.onGameFocus,this),v.events.on(o.PRE_STEP,this.update,this),v.events.once(o.DESTROY,this.destroy,this)},add:r,addAudioSprite:function(f,v){v===void 0&&(v={});var g=this.add(f,v);g.spritemap=this.jsonCache.get(f).spritemap;for(var p in g.spritemap)if(!!g.spritemap.hasOwnProperty(p)){var m=u(v),y=g.spritemap[p];m.loop=y.hasOwnProperty("loop")?y.loop:!1,g.addMarker({name:p,start:y.start,duration:y.end-y.start,config:m})}return g},get:function(f){return d(this.sounds,"key",f)},getAll:function(f){return a(this.sounds,"key",f)},play:function(f,v){var g=this.add(f);return g.once(h.COMPLETE,g.destroy,g),v?v.name?(g.addMarker(v),g.play(v.name)):g.play(v):g.play()},playAudioSprite:function(f,v,g){var p=this.addAudioSprite(f);return p.once(h.COMPLETE,p.destroy,p),p.play(v,g)},remove:function(f){var v=this.sounds.indexOf(f);return v!==-1?(f.destroy(),this.sounds.splice(v,1),!0):!1},removeAll:function(){this.sounds.forEach(function(f){f.destroy()}),this.sounds.length=0},removeByKey:function(f){for(var v=0,g=this.sounds.length-1;g>=0;g--){var p=this.sounds[g];p.key===f&&(p.destroy(),this.sounds.splice(g,1),v++)}return v},pauseAll:function(){this.forEachActiveSound(function(f){f.pause()}),this.emit(h.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(f){f.resume()}),this.emit(h.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(f){f.stop()}),this.emit(h.STOP_ALL,this)},stopByKey:function(f){var v=0;return this.getAll(f).forEach(function(g){g.stop()&&v++}),v},unlock:r,onBlur:r,onFocus:r,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(f,v){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(h.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(p){p.update(f,v)})},destroy:function(){this.game.events.off(o.BLUR,this.onGameBlur,this),this.game.events.off(o.FOCUS,this.onGameFocus,this),this.game.events.off(o.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(f,v){var g=this;this.sounds.forEach(function(p,m){p&&!p.pendingRemove&&f.call(v||g,p,m,g.sounds)})},setRate:function(f){return this.rate=f,this},rate:{get:function(){return this._rate},set:function(f){this._rate=f,this.forEachActiveSound(function(v){v.calculateRate()}),this.emit(h.GLOBAL_RATE,this,f)}},setDetune:function(f){return this.detune=f,this},detune:{get:function(){return this._detune},set:function(f){this._detune=f,this.forEachActiveSound(function(v){v.calculateRate()}),this.emit(h.GLOBAL_DETUNE,this,f)}}});e.exports=l},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(70),h=t(17),o=t(1),r=new s({Extends:u,initialize:function(d,l,f){u.call(this),this.manager=d,this.key=l,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=h(this.config,f),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(a){return!a||!a.name||typeof a.name!="string"?!1:this.markers[a.name]?(console.error("addMarker "+a.name+" already exists in Sound"),!1):(a=h(!0,{name:"",start:0,duration:this.totalDuration-(a.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},a),this.markers[a.name]=a,!0)},updateMarker:function(a){return!a||!a.name||typeof a.name!="string"?!1:this.markers[a.name]?(this.markers[a.name]=h(!0,this.markers[a.name],a),!0):(console.warn("Audio Marker: "+a.name+" missing in Sound: "+this.key),!1)},removeMarker:function(a){var d=this.markers[a];return d?(this.markers[a]=null,d):null},play:function(a,d){if(a===void 0&&(a=""),typeof a=="object"&&(d=a,a=""),typeof a!="string")return!1;if(!a)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[a])return console.warn("Marker: "+a+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[a],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=h(this.currentConfig,d),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:o,calculateRate:function(){var a=1.0005777895065548,d=this.currentConfig.detune+this.manager.detune,l=Math.pow(a,d);this.totalRate=this.currentConfig.rate*this.manager.rate*l},destroy:function(){this.pendingRemove||(this.emit(n.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(209),u=t(435),n=function(h,o){if(o===void 0&&(o=90),!s(h))return null;if(typeof o!="string"&&(o=(o%360+360)%360),o===90||o===-270||o==="rotateLeft")h=u(h),h.reverse();else if(o===-90||o===270||o==="rotateRight")h.reverse(),h=u(h);else if(Math.abs(o)===180||o==="rotate180"){for(var r=0;r<h.length;r++)h[r].reverse();h.reverse()}return h};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(18),n=t(11),h=t(15),o=t(1043),r=t(1044),a=t(212),d=t(10),l=t(1045),f=new s({Extends:h,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Texture,n.Tint,n.Transform,n.Visible,l],initialize:function(g,p,m,y,T,C,S){T===void 0&&(T=""),S===void 0&&(S=0),h.call(this,g,"BitmapText"),this.font=y;var E=this.scene.sys.cache.bitmapFont.get(y);E||console.warn("Invalid BitmapText key: "+y),this.fontData=E.data,this._text="",this._fontSize=C||this.fontData.size,this._letterSpacing=0,this._align=S,this._bounds=o(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=E.fromAtlas,this.setTexture(E.texture,E.frame),this.setPosition(p,m),this.setOrigin(0,0),this.initPipeline(),this.setText(T)},setLeftAlign:function(){return this._align=f.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=f.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=f.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(v){return this._fontSize=v,this._dirty=!0,this},setLetterSpacing:function(v){return v===void 0&&(v=0),this._letterSpacing=v,this._dirty=!0,this},setText:function(v){return!v&&v!==0&&(v=""),Array.isArray(v)&&(v=v.join(`
`)),v!==this.text&&(this._text=v.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(v,g,p,m){return v===void 0&&(v=0),g===void 0&&(g=0),p===void 0&&(p=0),m===void 0&&(m=.5),this.dropShadowX=v,this.dropShadowY=g,this.dropShadowColor=p,this.dropShadowAlpha=m,this},setCharacterTint:function(v,g,p,m,y,T,C){v===void 0&&(v=0),g===void 0&&(g=1),p===void 0&&(p=!1),m===void 0&&(m=-1),y===void 0&&(y=m,T=m,C=m);var S=this.text.length;g===-1&&(g=S),v<0&&(v=S+v),v=u(v,0,S-1);for(var E=u(v+g,v,S),P=this.charColors,M=v;M<E;M++){var A=P[M];if(m===-1)P[M]=null;else{var R=p?1:0;A?(A.tintEffect=R,A.tintTL=m,A.tintTR=y,A.tintBL=T,A.tintBR=C):P[M]={tintEffect:R,tintTL:m,tintTR:y,tintBL:T,tintBR:C}}}return this},setWordTint:function(v,g,p,m,y,T,C){g===void 0&&(g=1);for(var S=this.getTextBounds(),E=S.words,P=typeof v=="number",M=0,A=0;A<E.length;A++){var R=E[A];if((P&&A===v||!P&&R.word===v)&&(this.setCharacterTint(R.i,R.word.length,p,m,y,T,C),M++,M===g))return this}return this},getTextBounds:function(v){var g=this._bounds;return(this._dirty||v||this.scaleX!==g.scaleX||this.scaleY!==g.scaleY)&&(o(this,v,!0,g),this._dirty=!1),g},getCharacterAt:function(v,g,p){for(var m=this.getLocalPoint(v,g,null,p),y=this.getTextBounds(),T=y.characters,C=new d,S=0;S<T.length;S++){var E=T[S];if(C.setTo(E.x,E.t,E.r-E.x,E.b),C.contains(m.x,m.y))return E}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(v,g,p){if(g===void 0&&(g=this._fontSize),p===void 0&&(p=this._align),v!==this.font){var m=this.scene.sys.cache.bitmapFont.get(v);m&&(this.font=v,this.fontData=m.data,this._fontSize=g,this._align=p,this.fromAtlas=m.fromAtlas===!0,this.setTexture(m.texture,m.frame),o(this,!1,!0,this._bounds))}return this},setMaxWidth:function(v,g){return this._maxWidth=v,this._dirty=!0,g!==void 0&&(this.wordWrapCharCode=g),this},align:{set:function(v){this._align=v,this._dirty=!0},get:function(){return this._align}},text:{set:function(v){this.setText(v)},get:function(){return this._text}},fontSize:{set:function(v){this._fontSize=v,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(v){this._letterSpacing=v,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(v){this._maxWidth=v,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var v=n.ToJSON(this),g={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return v.data=g,v},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});f.ALIGN_LEFT=0,f.ALIGN_CENTER=1,f.ALIGN_RIGHT=2,f.ParseFromAtlas=r,f.ParseXMLBitmapFont=a,e.exports=f},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(h){if(this.entries=[],Array.isArray(h))for(var o=0;o<h.length;o++)this.set(h[o])},set:function(n){return this.entries.indexOf(n)===-1&&this.entries.push(n),this},get:function(n,h){for(var o=0;o<this.entries.length;o++){var r=this.entries[o];if(r[n]===h)return r}},getArray:function(){return this.entries.slice(0)},delete:function(n){var h=this.entries.indexOf(n);return h>-1&&this.entries.splice(h,1),this},dump:function(){console.group("Set");for(var n=0;n<this.entries.length;n++){var h=this.entries[n];console.log(h)}console.groupEnd()},each:function(n,h){var o,r=this.entries.slice(),a=r.length;if(h)for(o=0;o<a&&n.call(h,r[o],o)!==!1;o++);else for(o=0;o<a&&n(r[o],o)!==!1;o++);return this},iterate:function(n,h){var o,r=this.entries.length;if(h)for(o=0;o<r&&n.call(h,this.entries[o],o)!==!1;o++);else for(o=0;o<r&&n(this.entries[o],o)!==!1;o++);return this},iterateLocal:function(n){var h,o=[];for(h=1;h<arguments.length;h++)o.push(arguments[h]);var r=this.entries.length;for(h=0;h<r;h++){var a=this.entries[h];a[n].apply(a,o)}return this},clear:function(){return this.entries.length=0,this},contains:function(n){return this.entries.indexOf(n)>-1},union:function(n){var h=new u;return n.entries.forEach(function(o){h.set(o)}),this.entries.forEach(function(o){h.set(o)}),h},intersect:function(n){var h=new u;return this.entries.forEach(function(o){n.contains(o)&&h.set(o)}),h},difference:function(n){var h=new u;return this.entries.forEach(function(o){n.contains(o)||h.set(o)}),h},size:{get:function(){return this.entries.length},set:function(n){return n<this.entries.length?this.entries.length=n:this.entries.length}}});e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),h=t(189),o=t(92),r=t(1182),a=new s({Extends:n,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Pipeline,u.ScrollFactor,u.Transform,u.Visible,r],initialize:function(l,f,v,g,p,m,y){g===void 0&&(g=16777215),p===void 0&&(p=128),m===void 0&&(m=1),y===void 0&&(y=.1),n.call(this,l,"PointLight"),this.initPipeline(o.POINTLIGHT_PIPELINE),this.setPosition(f,v),this.color=h(g),this.intensity=m,this.attenuation=y,this.width=p*2,this.height=p*2,this._radius=p},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this.width=d*2,this.height=d*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});e.exports=a},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=u.width/2,h=u.height/2,o=Math.abs(s.x-u.x-n),r=Math.abs(s.y-u.y-h),a=n+s.radius,d=h+s.radius;if(o>a||r>d)return!1;if(o<=n||r<=h)return!0;var l=o-n,f=r-h,v=l*l,g=f*f,p=s.radius*s.radius;return v+g<=p};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.width<=0||s.height<=0||u.width<=0||u.height<=0?!1:!(s.right<u.x||s.bottom<u.y||s.x>u.right||s.y>u.bottom)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u={},n={};n.register=function(h,o,r,a,d){u[h]={plugin:o,mapping:r,settingsKey:a,configKey:d}},n.getPlugin=function(h){return u[h]},n.install=function(h){var o=h.scene.sys,r=o.settings.input,a=o.game.config;for(var d in u){var l=u[d].plugin,f=u[d].mapping,v=u[d].settingsKey,g=u[d].configKey;s(r,v,a[g])&&(h[f]=new l(h))}},n.remove=function(h){u.hasOwnProperty(h)&&delete u[h]},e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ANY_KEY_DOWN:t(1323),ANY_KEY_UP:t(1324),COMBO_MATCH:t(1325),DOWN:t(1326),KEY_DOWN:t(1327),KEY_UP:t(1328),UP:t(1329)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.url?s.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?s.url:u+s.url:!1};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h,o,r){return s===void 0&&(s=""),u===void 0&&(u=!0),n===void 0&&(n=""),h===void 0&&(h=""),o===void 0&&(o=0),r===void 0&&(r=!1),{responseType:s,async:u,user:n,password:h,timeout:o,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:r}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(243),n=t(73),h=new s({Extends:n,Mixins:[u.Acceleration,u.Angular,u.Bounce,u.Debug,u.Drag,u.Enable,u.Friction,u.Gravity,u.Immovable,u.Mass,u.Pushable,u.Size,u.Velocity],initialize:function(r,a,d,l,f){n.call(this,r,a,d,l,f),this.body=null}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(119),u=function(n,h,o,r){if(o===void 0&&(o=!1),s(n,h,r)){var a=r.data[h][n]||null;return a?a.index===-1?o?a:null:a:null}else return null};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){var o=s.data,r=s.width,a=s.height,d=s.tilemapLayer,l=Math.max(0,u.left),f=Math.min(r,u.right),v=Math.max(0,u.top),g=Math.min(a,u.bottom),p,m,y;if(n===0)for(m=v;m<g;m++)for(p=l;o[m]&&p<f;p++)y=o[m][p],!(!y||y.index===-1||!y.visible||y.alpha===0)&&h.push(y);else if(n===1)for(m=v;m<g;m++)for(p=f;o[m]&&p>=l;p--)y=o[m][p],!(!y||y.index===-1||!y.visible||y.alpha===0)&&h.push(y);else if(n===2)for(m=g;m>=v;m--)for(p=l;o[m]&&p<f;p++)y=o[m][p],!(!y||y.index===-1||!y.visible||y.alpha===0)&&h.push(y);else if(n===3)for(m=g;m>=v;m--)for(p=f;o[m]&&p>=l;p--)y=o[m][p],!(!y||y.index===-1||!y.visible||y.alpha===0)&&h.push(y);return d.tilesDrawn=h.length,d.tilesTotal=r*a,h};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h=n.collideIndexes.indexOf(s);u&&h===-1?n.collideIndexes.push(s):!u&&h!==-1&&n.collideIndexes.splice(h,1)};e.exports=t},function(e,c,t){/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=function(n,h,o){if(!h)return{i:0,layers:n.layers,name:"",opacity:1,visible:!0,x:0,y:0};var r=h.x+s(h,"startx",0)*n.tilewidth+s(h,"offsetx",0),a=h.y+s(h,"starty",0)*n.tileheight+s(h,"offsety",0);return{i:0,layers:h.layers,name:o.name+h.name+"/",opacity:o.opacity*h.opacity,visible:o.visible&&h.visible,x:o.x+r,y:o.y+a}};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h;if(s.hasOwnProperty(u)){var o=typeof s[u];o==="function"?h=function(r,a,d,l,f,v){return s[u](r,a,d,l,f,v)}:h=function(){return s[u]}}else typeof n=="function"?h=n:h=function(){return n};return h};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(265),u=t(13),n=t(99),h=t(80),o=t(162),r=t(583),a=t(263),d=t(6),l=t(264),f=t(266),v=t(268),g=function(p,m,y){y===void 0&&(y=s);for(var T=y.targets?y.targets:a(m),C=r(m),S=o(m,"delay",y.delay),E=o(m,"duration",y.duration),P=d(m,"easeParams",y.easeParams),M=h(d(m,"ease",y.ease),P),A=o(m,"hold",y.hold),R=o(m,"repeat",y.repeat),O=o(m,"repeatDelay",y.repeatDelay),F=n(m,"yoyo",y.yoyo),I=n(m,"flipX",y.flipX),G=n(m,"flipY",y.flipY),z=[],U=0;U<C.length;U++)for(var X=C[U].key,b=C[U].value,B=0;B<T.length;B++){var L=l(X,b),D=v(T[B],B,X,L.getEnd,L.getStart,L.getActive,h(d(b,"ease",M),d(b,"easeParams",P)),o(b,"delay",S),o(b,"duration",E),n(b,"yoyo",F),o(b,"hold",A),o(b,"repeat",R),o(b,"repeatDelay",O),n(b,"flipX",I),n(b,"flipY",G));z.push(D)}var w=new f(p,z,T);w.offset=u(m,"offset",null),w.completeDelay=u(m,"completeDelay",0),w.loop=Math.round(u(m,"loop",0)),w.loopDelay=Math.round(u(m,"loopDelay",0)),w.paused=n(m,"paused",!1),w.useFrames=n(m,"useFrames",!1);for(var N=d(m,"callbackScope",w),V=[w,null],Y=f.TYPES,W=0;W<Y.length;W++){var H=Y[W],$=d(m,H,!1);if($){var K=d(m,H+"Scope",N),Z=d(m,H+"Params",[]);w.setCallback(H,$,V.concat(Z),K)}}return w};e.exports=g},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(102),n=t(2),h=t(132),o=t(185),r=new s({initialize:function(d){this.parent=d,this.animationManager=d.scene.sys.anims,this.animationManager.on(h.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(a){var d=this.parent;if(a===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,d;Array.isArray(a)||(a=[a]);for(var l=0;l<a.length;l++){var f=a[l];this.nextAnim===null?this.nextAnim=f:this.nextAnimsQueue.push(f)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(a){this.isPlaying&&this.stop();var d=this.animationManager,l=typeof a=="string"?a:n(a,"key",null),f=this.exists(l)?this.get(l):d.get(l);if(!f)console.warn("Missing animation: "+l);else{this.currentAnim=f;var v=f.getTotalFrames(),g=n(a,"frameRate",f.frameRate),p=n(a,"duration",f.duration);f.calculateDuration(this,v,p,g),this.delay=n(a,"delay",f.delay),this.repeat=n(a,"repeat",f.repeat),this.repeatDelay=n(a,"repeatDelay",f.repeatDelay),this.yoyo=n(a,"yoyo",f.yoyo),this.showOnStart=n(a,"showOnStart",f.showOnStart),this.hideOnComplete=n(a,"hideOnComplete",f.hideOnComplete),this.skipMissedFrames=n(a,"skipMissedFrames",f.skipMissedFrames),this.timeScale=n(a,"timeScale",this.timeScale);var m=n(a,"startFrame",0);m>f.getTotalFrames()&&(m=0);var y=f.frames[m];m===0&&!this.forward&&(y=f.getLastFrame()),this.currentFrame=y}return this.parent},pause:function(a){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),a!==void 0&&this.setCurrentFrame(a),this.parent},resume:function(a){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),a!==void 0&&this.setCurrentFrame(a),this.parent},playAfterDelay:function(a,d){if(!this.isPlaying)this.delayCounter=d,this.play(a,!0);else{var l=this.nextAnim,f=this.nextAnimsQueue;l&&f.unshift(l),this.nextAnim=a,this._pendingStop=1,this._pendingStopValue=d}return this.parent},playAfterRepeat:function(a,d){if(d===void 0&&(d=1),!this.isPlaying)this.play(a);else{var l=this.nextAnim,f=this.nextAnimsQueue;l&&f.unshift(l),this.repeatCounter!==-1&&d>this.repeatCounter&&(d=this.repeatCounter),this.nextAnim=a,this._pendingStop=2,this._pendingStopValue=d}return this.parent},play:function(a,d){d===void 0&&(d=!1);var l=this.currentAnim,f=this.parent,v=typeof a=="string"?a:a.key;if(d&&this.isPlaying&&l.key===v)return f;if(l&&this.isPlaying){var g=this.animationManager.getMix(l.key,a);if(g>0)return this.playAfterDelay(a,g)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(a)},playReverse:function(a,d){d===void 0&&(d=!1);var l=typeof a=="string"?a:a.key;return d&&this.isPlaying&&this.currentAnim.key===l?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(a))},startAnimation:function(a){this.load(a);var d=this.currentAnim,l=this.parent;return d&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,d.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),l},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(h.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(h.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(h.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(h.ANIMATION_COMPLETE,h.ANIMATION_COMPLETE_KEY)},emitEvents:function(a,d){var l=this.currentAnim,f=this.currentFrame,v=this.parent,g=f.textureFrame;v.emit(a,l,f,v,g),d&&v.emit(d+l.key,l,f,v,g)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var a=this.currentFrame;if(!a)return 0;var d=a.progress;return this.inReverse&&(d*=-1),d},setProgress:function(a){return this.forward||(a=1-a),this.setCurrentFrame(this.currentAnim.getFrameByProgress(a)),this.parent},setRepeat:function(a){return this.repeatCounter=a===-1?Number.MAX_VALUE:a,this.parent},globalRemove:function(a,d){d===void 0&&(d=this.currentAnim),this.isPlaying&&d.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(a,d){a===void 0&&(a=!1),d===void 0&&(d=!1);var l=this.currentAnim,f=this.parent;return l?(d&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),l.getFirstTick(this),this.emitEvents(h.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!a,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(l.frames[0]),this.parent):f},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var a=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(a)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var a=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(a)}return this.parent},stopAfterDelay:function(a){return this._pendingStop=1,this._pendingStopValue=a,this.parent},stopAfterRepeat:function(a){return a===void 0&&(a=1),this.repeatCounter!==-1&&a>this.repeatCounter&&(a=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=a,this.parent},stopOnFrame:function(a){return this._pendingStop=3,this._pendingStopValue=a,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(a,d){var l=this.currentAnim;if(!(!this.isPlaying||!l||l.paused)){if(this.accumulator+=d*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=d,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?l.nextFrame(this):l.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var f=0;do this.forward?l.nextFrame(this):l.previousFrame(this),f++;while(this.isPlaying&&this.accumulator>this.nextTick&&f<60)}}},setCurrentFrame:function(a){var d=this.parent;return this.currentFrame=a,d.texture=a.frame.texture,d.frame=a.frame,d.isCropped&&d.frame.updateCropUVs(d._crop,d.flipX,d.flipY),a.setAlpha&&(d.alpha=a.alpha),d.setSizeToFrame(),d._originComponent&&(a.frame.customPivot?d.setOrigin(a.frame.pivotX,a.frame.pivotY):d.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(h.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===a&&this.stop()),d},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(a){return this.anims?this.anims.get(a):null},exists:function(a){return this.anims?this.anims.has(a):!1},create:function(a){var d=a.key,l=!1;return d&&(l=this.get(d),l||(l=new o(this,d,a),this.anims||(this.anims=new u),this.anims.set(d,l))),l},generateFrameNames:function(a,d){return this.animationManager.generateFrameNames(a,d)},generateFrameNumbers:function(a,d){return this.animationManager.generateFrameNumbers(a,d)},remove:function(a){var d=this.get(a);return d&&(this.currentAnim===d&&this.stop(),this.anims.delete(a)),d},destroy:function(){this.animationManager.off(h.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});e.exports=r},function(e,c,t){var s={};e.exports=s;var u=t(166);(function(){s._motionWakeThreshold=.18,s._motionSleepThreshold=.08,s._minBias=.9,s.update=function(n,h){for(var o=h*h*h,r=0;r<n.length;r++){var a=n[r],d=a.speed*a.speed+a.angularSpeed*a.angularSpeed;if(a.force.x!==0||a.force.y!==0){s.set(a,!1);continue}var l=Math.min(a.motion,d),f=Math.max(a.motion,d);a.motion=s._minBias*l+(1-s._minBias)*f,a.sleepThreshold>0&&a.motion<s._motionSleepThreshold*o?(a.sleepCounter+=1,a.sleepCounter>=a.sleepThreshold&&s.set(a,!0)):a.sleepCounter>0&&(a.sleepCounter-=1)}},s.afterCollisions=function(n,h){for(var o=h*h*h,r=0;r<n.length;r++){var a=n[r];if(!!a.isActive){var d=a.collision,l=d.bodyA.parent,f=d.bodyB.parent;if(!(l.isSleeping&&f.isSleeping||l.isStatic||f.isStatic)&&(l.isSleeping||f.isSleeping)){var v=l.isSleeping&&!l.isStatic?l:f,g=v===l?f:l;!v.isStatic&&g.motion>s._motionWakeThreshold*o&&s.set(v,!1)}}}},s.set=function(n,h){var o=n.isSleeping;h?(n.isSleeping=!0,n.sleepCounter=n.sleepThreshold,n.positionImpulse.x=0,n.positionImpulse.y=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.speed=0,n.angularSpeed=0,n.motion=0,o||u.trigger(n,"sleepStart")):(n.isSleeping=!1,n.sleepCounter=0,o&&u.trigger(n,"sleepEnd"))}})()},function(e,c,t){var s={};e.exports=s;var u=t(32);(function(){s.on=function(n,h,o){for(var r=h.split(" "),a,d=0;d<r.length;d++)a=r[d],n.events=n.events||{},n.events[a]=n.events[a]||[],n.events[a].push(o);return o},s.off=function(n,h,o){if(!h){n.events={};return}typeof h=="function"&&(o=h,h=u.keys(n.events).join(" "));for(var r=h.split(" "),a=0;a<r.length;a++){var d=n.events[r[a]],l=[];if(o&&d)for(var f=0;f<d.length;f++)d[f]!==o&&l.push(d[f]);n.events[r[a]]=l}},s.trigger=function(n,h,o){var r,a,d,l,f=n.events;if(f&&u.keys(f).length>0){o||(o={}),r=h.split(" ");for(var v=0;v<r.length;v++)if(a=r[v],d=f[a],d){l=u.clone(o,!1),l.name=a,l.source=n;for(var g=0;g<d.length;g++)d[g].apply(n,[l])}}}})()},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(175),u=t(92),n=t(74),h={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(o){o===void 0&&(o=u.MULTI_PIPELINE);var r=this.scene.sys.renderer;if(!r)return!1;var a=r.pipelines;if(this.postPipelines=[],this.pipelineData={},a){var d=a.get(o);if(d)return this.defaultPipeline=d,this.pipeline=d,!0}return!1},setPipeline:function(o,r,a){var d=this.scene.sys.renderer;if(!d)return this;var l=d.pipelines;if(l){var f=l.get(o);f&&(this.pipeline=f),r&&(this.pipelineData=a?s(r):r)}return this},setPostPipeline:function(o,r,a){var d=this.scene.sys.renderer;if(!d)return this;var l=d.pipelines;if(l){Array.isArray(o)||(o=[o]);for(var f=0;f<o.length;f++){var v=l.getPostPipeline(o[f],this);v&&this.postPipelines.push(v)}r&&(this.pipelineData=a?s(r):r)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(o,r){var a=this.pipelineData;return r===void 0?delete a[o]:a[o]=r,this},getPostPipeline:function(o){for(var r=this.postPipelines,a=[],d=0;d<r.length;d++){var l=r[d];(typeof o=="string"&&l.name===o||l instanceof o)&&a.push(l)}return a.length===1?a[0]:a},resetPipeline:function(o,r){return o===void 0&&(o=!1),r===void 0&&(r=!1),this.pipeline=this.defaultPipeline,o&&(this.postPipelines=[],this.hasPostPipeline=!1),r&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(o){o===void 0&&(o=!1);for(var r=this.postPipelines,a=0;a<r.length;a++)r[a].destroy();this.postPipelines=[],this.hasPostPipeline=!1,o&&(this.pipelineData={})},removePostPipeline:function(o){for(var r=this.postPipelines,a=r.length-1;a>=0;a--){var d=r[a];(typeof o=="string"&&d.name===o||typeof o!="string"&&d instanceof o)&&(d.destroy(),n(r,a))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={DEFAULT:0,LINEAR:0,NEAREST:1};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h,o){return o===void 0&&(o=new s),o.x=n.x+n.radius*Math.cos(h),o.y=n.y+n.radius*Math.sin(h),o};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h){h===void 0&&(h=new s);var o=2*Math.PI*Math.random(),r=Math.random()+Math.random(),a=r>1?2-r:r,d=a*Math.cos(o),l=a*Math.sin(o);return h.x=n.x+d*n.radius,h.y=n.y+l*n.radius,h};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(130),u=t(4),n=function(h,o,r){if(r===void 0&&(r=new u),o<=0||o>=1)return r.x=h.x,r.y=h.y,r;var a=s(h)*o;return o>.5?(a-=h.width+h.height,a<=h.width?(r.x=h.right-a,r.y=h.bottom):(r.x=h.x,r.y=h.bottom-(a-h.width))):a<=h.width?(r.x=h.x+a,r.y=h.y):(r.x=h.right,r.y=h.y+(a-h.width)),r};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=t(4),n=function(h,o,r,a){a===void 0&&(a=[]),!o&&r>0&&(o=s(h)/r);for(var d=h.x1,l=h.y1,f=h.x2,v=h.y2,g=0;g<o;g++){var p=g/o,m=d+(f-d)*p,y=l+(v-l)*p;a.push(new u(m,y))}return a};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h){h===void 0&&(h=new s);var o=Math.random();return h.x=n.x1+o*(n.x2-n.x1),h.y=n.y1+o*(n.y2-n.y1),h};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h){return h===void 0&&(h=new s),h.x=n.x+Math.random()*n.width,h.y=n.y+Math.random()*n.height,h};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u,n,h;if(typeof s!="object"||s===null)return s;u=Array.isArray(s)?[]:{};for(h in s)n=s[h],u[h]=t(n);return u};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u={name:s.name,type:s.type,x:s.x,y:s.y,depth:s.depth,scale:{x:s.scaleX,y:s.scaleY},origin:{x:s.originX,y:s.originY},flipX:s.flipX,flipY:s.flipY,rotation:s.rotation,alpha:s.alpha,visible:s.visible,blendMode:s.blendMode,textureKey:"",frameKey:"",data:{}};return s.texture&&(u.textureKey=s.texture.key,u.frameKey=s.frame.name),u};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,h,o,r,a,d,l,f){f===void 0&&(f=new s);var v=Math.sin(a),g=Math.cos(a),p=g*d,m=v*d,y=-v*l,T=g*l,C=1/(p*T+y*-m);return f.x=T*C*n+-y*C*h+(r*y-o*T)*C,f.y=p*C*h+-m*C*n+(-r*p+o*m)*C,f};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=1);for(var n=null,h=0;h<u;h++)n=s.shift(),s.push(n);return n};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=1);for(var n=null,h=0;h<u;h++)n=s.pop(),s.unshift(n);return n};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h){h===void 0&&(h=new s);var o=Math.random()*Math.PI*2,r=Math.sqrt(Math.random());return h.x=n.x+r*Math.cos(o)*n.width/2,h.y=n.y+r*Math.sin(o)*n.height/2,h};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h){h===void 0&&(h=new s);var o=n.x2-n.x1,r=n.y2-n.y1,a=n.x3-n.x1,d=n.y3-n.y1,l=Math.random(),f=Math.random();return l+f>=1&&(l=1-l,f=1-f),h.x=n.x1+(o*l+a*f),h.y=n.y1+(r*l+d*f),h};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h,o){var r=h+Math.atan2(s.y-n,s.x-u);return s.x=u+o*Math.cos(r),s.y=n+o*Math.sin(r),s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s=Math.max(0,Math.min(1,(s-u)/(n-u))),s*s*s*(s*(s*6-15)+10)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s<=u?0:s>=n?1:(s=(s-u)/(n-u),s*s*(3-2*s))};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(132),h=t(318),o=t(319),r=t(6),a=t(320),d=new u({initialize:function(f,v,g){this.manager=f,this.key=v,this.type="frame",this.frames=this.getFrames(f.textureManager,r(g,"frames",[]),r(g,"defaultTextureKey",null),r(g,"sortFrames",!0)),this.frameRate=r(g,"frameRate",null),this.duration=r(g,"duration",null),this.msPerFrame,this.skipMissedFrames=r(g,"skipMissedFrames",!0),this.delay=r(g,"delay",0),this.repeat=r(g,"repeat",0),this.repeatDelay=r(g,"repeatDelay",0),this.yoyo=r(g,"yoyo",!1),this.showOnStart=r(g,"showOnStart",!1),this.hideOnComplete=r(g,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(n.PAUSE_ALL,this.pause,this),this.manager.on(n.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(l,f,v,g){v===null&&g===null?(l.frameRate=24,l.duration=24/f*1e3):v&&g===null?(l.duration=v,l.frameRate=f/(v/1e3)):(l.frameRate=g,l.duration=f/g*1e3),l.msPerFrame=1e3/l.frameRate},addFrame:function(l){return this.addFrameAt(this.frames.length,l)},addFrameAt:function(l,f){var v=this.getFrames(this.manager.textureManager,f);if(v.length>0){if(l===0)this.frames=v.concat(this.frames);else if(l===this.frames.length)this.frames=this.frames.concat(v);else{var g=this.frames.slice(0,l),p=this.frames.slice(l);this.frames=g.concat(v,p)}this.updateFrameSequence()}return this},checkFrame:function(l){return l>=0&&l<this.frames.length},getFirstTick:function(l){l.accumulator=0,l.nextTick=l.msPerFrame+l.currentFrame.duration},getFrameAt:function(l){return this.frames[l]},getFrames:function(l,f,v,g){g===void 0&&(g=!0);var p=[],m,y,T=1,C,S;if(typeof f=="string"){S=f;var E=l.get(S),P=E.getFrameNames();g&&a(P),f=[],P.forEach(function(I){f.push({key:S,frame:I})})}if(!Array.isArray(f)||f.length===0)return p;for(C=0;C<f.length;C++){var M=f[C],A=r(M,"key",v);if(!!A){var R=r(M,"frame",0),O=l.getFrame(A,R);y=new o(A,R,T,O),y.duration=r(M,"duration",0),y.isFirst=!m,m&&(m.nextFrame=y,y.prevFrame=m),p.push(y),m=y,T++}}if(p.length>0){y.isLast=!0,y.nextFrame=p[0],p[0].prevFrame=y;var F=1/(p.length-1);for(C=0;C<p.length;C++)p[C].progress=C*F}return p},getNextTick:function(l){l.accumulator-=l.nextTick,l.nextTick=l.msPerFrame+l.currentFrame.duration},getFrameByProgress:function(l){return l=s(l,0,1),h(l,this.frames,"progress")},nextFrame:function(l){var f=l.currentFrame;f.isLast?l.yoyo?this.handleYoyoFrame(l,!1):l.repeatCounter>0?l.inReverse&&l.forward?l.forward=!1:this.repeatAnimation(l):l.complete():this.updateAndGetNextTick(l,f.nextFrame)},handleYoyoFrame:function(l,f){if(f||(f=!1),l.inReverse===!f&&l.repeatCounter>0){(l.repeatDelay===0||l.pendingRepeat)&&(l.forward=f),this.repeatAnimation(l);return}if(l.inReverse!==f&&l.repeatCounter===0){l.complete();return}l.forward=f;var v=f?l.currentFrame.nextFrame:l.currentFrame.prevFrame;this.updateAndGetNextTick(l,v)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(l){var f=l.currentFrame;f.isFirst?l.yoyo?this.handleYoyoFrame(l,!0):l.repeatCounter>0?l.inReverse&&!l.forward?this.repeatAnimation(l):(l.forward=!0,this.repeatAnimation(l)):l.complete():this.updateAndGetNextTick(l,f.prevFrame)},updateAndGetNextTick:function(l,f){l.setCurrentFrame(f),this.getNextTick(l)},removeFrame:function(l){var f=this.frames.indexOf(l);return f!==-1&&this.removeFrameAt(f),this},removeFrameAt:function(l){return this.frames.splice(l,1),this.updateFrameSequence(),this},repeatAnimation:function(l){if(l._pendingStop===2){if(l._pendingStopValue===0)return l.stop();l._pendingStopValue--}l.repeatDelay>0&&!l.pendingRepeat?(l.pendingRepeat=!0,l.accumulator-=l.nextTick,l.nextTick+=l.repeatDelay):(l.repeatCounter--,l.forward?l.setCurrentFrame(l.currentFrame.nextFrame):l.setCurrentFrame(l.currentFrame.prevFrame),l.isPlaying&&(this.getNextTick(l),l.handleRepeat()))},toJSON:function(){var l={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(f){l.frames.push(f.toJSON())}),l},updateFrameSequence:function(){for(var l=this.frames.length,f=1/(l-1),v,g=0;g<l;g++)v=this.frames[g],v.index=g+1,v.isFirst=!1,v.isLast=!1,v.progress=g*f,g===0?(v.isFirst=!0,l===1?(v.isLast=!0,v.nextFrame=v,v.prevFrame=v):(v.isLast=!1,v.prevFrame=this.frames[l-1],v.nextFrame=this.frames[g+1])):g===l-1&&l>1?(v.isLast=!0,v.prevFrame=this.frames[l-2],v.nextFrame=this.frames[0]):l>1&&(v.prevFrame=this.frames[g-1],v.nextFrame=this.frames[g+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(n.PAUSE_ALL,this.pause,this),this.manager.off(n.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var l=0;l<this.frames.length;l++)this.frames[l].destroy();this.frames=[],this.manager=null}});e.exports=d},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){u===void 0&&(u=0),n===void 0&&(n=" "),h===void 0&&(h=3),s=s.toString();var o=0;if(u+1>=s.length)switch(h){case 1:s=new Array(u+1-s.length).join(n)+s;break;case 3:var r=Math.ceil((o=u-s.length)/2),a=o-r;s=new Array(a+1).join(n)+s+new Array(r+1).join(n);break;default:s=s+new Array(u+1-s.length).join(n);break}return s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(327),u=t(189),n=t(331),h=t(332),o=function(r){var a=typeof r;switch(a){case"string":return r.substr(0,3).toLowerCase()==="rgb"?h(r):s(r);case"number":return u(r);case"object":return n(r)}};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(103);function u(h,o,r,a){var d=(h+o*6)%6,l=Math.min(d,4-d,1);return Math.round(255*(a-a*r*Math.max(0,l)))}var n=function(h,o,r,a){o===void 0&&(o=1),r===void 0&&(r=1);var d=u(5,h,o,r),l=u(3,h,o,r),f=u(1,h,o,r);return a?a.setTo?a.setTo(d,l,f,a.alpha,!1):(a.r=d,a.g=l,a.b=f,a.color=s(d,l,f),a):{r:d,g:l,b:f,color:s(d,l,f)}};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38),u=t(330),n=function(h){var o=u(h);return new s(o.r,o.g,o.b,o.a)};e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x=u-s.width/2,s.y=n-s.height/2,s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(105),u=t(136),n=t(31),h={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function o(){var a=new ArrayBuffer(4),d=new Uint8Array(a),l=new Uint32Array(a);return d[0]=161,d[1]=178,d[2]=195,d[3]=212,l[0]===3569595041?!0:l[0]===2712847316?!1:null}function r(){if(typeof importScripts=="function")return h;h.canvas=!!window.CanvasRenderingContext2D;try{h.localStorage=!!localStorage.getItem}catch{h.localStorage=!1}h.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,h.fileSystem=!!window.requestFileSystem;var a=!1,d=function(){if(window.WebGLRenderingContext)try{var l=n.createWebGL(this),f=l.getContext("webgl")||l.getContext("experimental-webgl"),v=n.create2D(this),g=v.getContext("2d"),p=g.createImageData(1,1);return a=p.data instanceof Uint8ClampedArray,n.remove(l),n.remove(v),!!f}catch{return!1}return!1};return h.webGL=d(),h.worker=!!window.Worker,h.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,h.getUserMedia=h.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,u.firefox&&u.firefoxVersion<21&&(h.getUserMedia=!1),!s.iOS&&(u.ie||u.firefox||u.chrome)&&(h.canvasBitBltShift=!0),(u.safari||u.mobileSafari)&&(h.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(h.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&(h.littleEndian=o()),h.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&h.littleEndian!==null&&a,h}e.exports=r()},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t="",s=function(){var u=function(r){for(var a=["i","webkitI","msI","mozI","oI"],d=0;d<a.length;d++){var l=a[d]+"mageSmoothingEnabled";if(l in r)return l}return null},n=function(r){return t===""&&(t=u(r)),t&&(r[t]=!0),r},h=function(r){return t===""&&(t=u(r)),t&&(r[t]=!1),r},o=function(r){return t!==null?r[t]:null};return{disable:h,enable:n,getPrefix:u,isEnabled:o}};e.exports=s()},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(17),n={Angle:t(812),Distance:t(821),Easing:t(826),Fuzzy:t(827),Interpolation:t(830),Pow2:t(835),Snap:t(837),RandomDataGenerator:t(839),Average:t(840),Bernstein:t(356),Between:t(195),CatmullRom:t(194),CeilTo:t(841),Clamp:t(18),DegToRad:t(36),Difference:t(842),Euler:t(843),Factorial:t(357),FloatBetween:t(137),FloorTo:t(844),FromPercent:t(98),GetSpeed:t(845),IsEven:t(846),IsEvenStrict:t(847),Linear:t(135),MaxAdd:t(848),Median:t(849),MinSub:t(850),Percent:t(851),RadToDeg:t(196),RandomXY:t(852),RandomXYZ:t(853),RandomXYZW:t(854),Rotate:t(362),RotateAround:t(308),RotateAroundDistance:t(182),RotateTo:t(855),RoundAwayFromZero:t(363),RoundTo:t(856),SinCosTableGenerator:t(857),SmootherStep:t(183),SmoothStep:t(184),ToXY:t(858),TransformXY:t(177),Within:t(859),Wrap:t(68),Vector2:t(3),Vector3:t(39),Vector4:t(140),Matrix3:t(364),Matrix4:t(69),Quaternion:t(365),RotateVec3:t(860)};n=u(!1,n,s),e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h,o){var r=(h-u)*.5,a=(o-n)*.5,d=s*s,l=s*d;return(2*n-2*h+r+a)*l+(-3*n+3*h-2*r-a)*d+r*s+n};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return Math.floor(Math.random()*(u-s+1)+s)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=function(n){return n*s.RAD_TO_DEG};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};e.exports=s},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(n){return this._matrix=n,this._dirty=!0,this},reset:function(){var n=this._matrix;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=0,n[6]=1,n[7]=0,n[8]=0,n[9]=0,n[10]=0,n[11]=0,n[12]=1,n[13]=0,n[14]=0,n[15]=0,n[16]=0,n[17]=0,n[18]=1,n[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var n=new Float32Array(this._matrix);n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,this._data=n,this._dirty=!1}return this._data},brightness:function(n,h){n===void 0&&(n=0),h===void 0&&(h=!1);var o=n;return this.multiply([o,0,0,0,0,0,o,0,0,0,0,0,o,0,0,0,0,0,1,0],h)},saturate:function(n,h){n===void 0&&(n=0),h===void 0&&(h=!1);var o=n*2/3+1,r=(o-1)*-.5;return this.multiply([o,r,r,0,0,r,o,r,0,0,r,r,o,0,0,0,0,0,1,0],h)},desaturate:function(n){return n===void 0&&(n=!1),this.saturate(-1,n)},hue:function(n,h){n===void 0&&(n=0),h===void 0&&(h=!1),n=n/180*Math.PI;var o=Math.cos(n),r=Math.sin(n),a=.213,d=.715,l=.072;return this.multiply([a+o*(1-a)+r*-a,d+o*-d+r*-d,l+o*-l+r*(1-l),0,0,a+o*-a+r*.143,d+o*(1-d)+r*.14,l+o*-l+r*-.283,0,0,a+o*-a+r*-(1-a),d+o*-d+r*d,l+o*(1-l)+r*l,0,0,0,0,0,1,0],h)},grayscale:function(n,h){return n===void 0&&(n=1),h===void 0&&(h=!1),this.saturate(-n,h)},blackWhite:function(n){return n===void 0&&(n=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],n)},contrast:function(n,h){n===void 0&&(n=0),h===void 0&&(h=!1);var o=n+1,r=-.5*(o-1);return this.multiply([o,0,0,0,r,0,o,0,0,r,0,0,o,0,r,0,0,0,1,0],h)},negative:function(n){return n===void 0&&(n=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],n)},desaturateLuminance:function(n){return n===void 0&&(n=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],n)},sepia:function(n){return n===void 0&&(n=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],n)},night:function(n,h){return n===void 0&&(n=.1),h===void 0&&(h=!1),this.multiply([n*-2,-n,0,0,0,-n,0,n,0,0,0,n,n*2,0,0,0,0,0,1,0],h)},lsd:function(n){return n===void 0&&(n=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],n)},brown:function(n){return n===void 0&&(n=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],n)},vintagePinhole:function(n){return n===void 0&&(n=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],n)},kodachrome:function(n){return n===void 0&&(n=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],n)},technicolor:function(n){return n===void 0&&(n=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],n)},polaroid:function(n){return n===void 0&&(n=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],n)},shiftToBGR:function(n){return n===void 0&&(n=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],n)},multiply:function(n,h){h||this.reset();for(var o=this._matrix,r=[],a=0;a<20;a++)r[a]=o[a];return o[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],o[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],o[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],o[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],o[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],o[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],o[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],o[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],o[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],o[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],o[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],o[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],o[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],o[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],o[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],o[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],o[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],o[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],o[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],o[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],this._dirty=!0,this}});e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=t(14),n=function(h,o){if(o===void 0&&(o=new s),h.length===0)return o;for(var r=Number.MAX_VALUE,a=Number.MAX_VALUE,d=u.MIN_SAFE_INTEGER,l=u.MIN_SAFE_INTEGER,f,v,g,p=0;p<h.length;p++)f=h[p],Array.isArray(f)?(v=f[0],g=f[1]):(v=f.x,g=f.y),r=Math.min(r,v),a=Math.min(a,g),d=Math.max(d,v),l=Math.max(l,g);return o.x=r,o.y=a,o.width=d-r,o.height=l-a,o};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(1),n=new s({initialize:function(o,r,a){this._rgb=[0,0,0],this.onChangeCallback=u,this.dirty=!1,this.set(o,r,a)},set:function(h,o,r){return h===void 0&&(h=0),o===void 0&&(o=0),r===void 0&&(r=0),this._rgb=[h,o,r],this.onChange(),this},equals:function(h,o,r){var a=this._rgb;return a.r===h&&a.g===o&&a.b===r},onChange:function(){this.dirty=!0;var h=this._rgb;this.onChangeCallback.call(this,h[0],h[1],h[2])},r:{get:function(){return this._rgb[0]},set:function(h){this._rgb[0]=h,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(h){this._rgb[1]=h,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(h){this._rgb[2]=h,this.onChange()}},destroy:function(){this.onChangeCallback=null}});e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={CENTER:t(403),ORIENTATION:t(404),SCALE_MODE:t(405),ZOOM:t(406)};e.exports=s},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){s.parentNode&&s.parentNode.removeChild(s)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(144),n=t(197),h=t(20),o=t(419),r=t(420),a=t(33),d=t(1),l=t(421),f=new s({initialize:function(g,p){this.scene=g,this.game,this.renderer,this.config=p,this.settings=l.create(p),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=d},init:function(v){this.settings.status=u.INIT,this.sceneUpdate=d,this.game=v,this.renderer=v.renderer,this.canvas=v.canvas,this.context=v.context;var g=v.plugins;this.plugins=g,g.addToScene(this,n.Global,[n.CoreScene,r(this),o(this)]),this.events.emit(h.BOOT,this),this.settings.isBooted=!0},step:function(v,g){var p=this.events;p.emit(h.PRE_UPDATE,v,g),p.emit(h.UPDATE,v,g),this.sceneUpdate.call(this.scene,v,g),p.emit(h.POST_UPDATE,v,g)},render:function(v){var g=this.displayList;g.depthSort(),this.events.emit(h.PRE_RENDER,v),this.cameras.render(v,g),this.events.emit(h.RENDER,v)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(v){var g=this.events,p=this.settings;return this.settings.active&&(p.status=u.PAUSED,p.active=!1,g.emit(h.PAUSE,this,v)),this},resume:function(v){var g=this.events,p=this.settings;return this.settings.active||(p.status=u.RUNNING,p.active=!0,g.emit(h.RESUME,this,v)),this},sleep:function(v){var g=this.events,p=this.settings;return p.status=u.SLEEPING,p.active=!1,p.visible=!1,g.emit(h.SLEEP,this,v),this},wake:function(v){var g=this.events,p=this.settings;return p.status=u.RUNNING,p.active=!0,p.visible=!0,g.emit(h.WAKE,this,v),p.isTransition&&g.emit(h.TRANSITION_WAKE,p.transitionFrom,p.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===u.SLEEPING},isActive:function(){return this.settings.status===u.RUNNING},isPaused:function(){return this.settings.status===u.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(v){return this.settings.visible=v,this},setActive:function(v,g){return v?this.resume(g):this.pause(g)},start:function(v){var g=this.events,p=this.settings;v&&(p.data=v),p.status=u.START,p.active=!0,p.visible=!0,g.emit(h.START,this),g.emit(h.READY,this,v)},shutdown:function(v){var g=this.events,p=this.settings;g.off(h.TRANSITION_INIT),g.off(h.TRANSITION_START),g.off(h.TRANSITION_COMPLETE),g.off(h.TRANSITION_OUT),p.status=u.SHUTDOWN,p.active=!1,p.visible=!1,this.renderer===a.WEBGL&&this.renderer.resetTextures(!0),g.emit(h.SHUTDOWN,this,v)},destroy:function(){var v=this.events,g=this.settings;g.status=u.DESTROYED,g.active=!1,g.visible=!1,v.emit(h.DESTROY,this),v.removeAllListeners();for(var p=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],m=0;m<p.length;m++)this[p[m]]=null}});e.exports=f},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s&&s[0].toUpperCase()+s.slice(1)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(33),u=t(0),n=t(109),h=t(424),o="Texture.frame missing: ",r=new u({initialize:function(d,l,f,v,g){Array.isArray(f)||(f=[f]),this.manager=d,this.key=l,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var p=0;p<f.length;p++)this.source.push(new h(this,f[p],v,g))},add:function(a,d,l,f,v,g){if(this.has(a))return null;var p=new n(this,a,d,l,f,v,g);return this.frames[a]=p,this.firstFrame==="__BASE"&&(this.firstFrame=a),this.frameTotal++,p},remove:function(a){if(this.has(a)){var d=this.get(a);return d.destroy(),delete this.frames[a],!0}return!1},has:function(a){return this.frames[a]},get:function(a){a||(a=this.firstFrame);var d=this.frames[a];return d||(console.warn(o+a),d=this.frames[this.firstFrame]),d},getTextureSourceIndex:function(a){for(var d=0;d<this.source.length;d++)if(this.source[d]===a)return d;return-1},getFramesFromTextureSource:function(a,d){d===void 0&&(d=!1);var l=[];for(var f in this.frames)if(!(f==="__BASE"&&!d)){var v=this.frames[f];v.sourceIndex===a&&l.push(v)}return l},getFrameNames:function(a){a===void 0&&(a=!1);var d=Object.keys(this.frames);if(!a){var l=d.indexOf("__BASE");l!==-1&&d.splice(l,1)}return d},getSourceImage:function(a){(a==null||this.frameTotal===1)&&(a="__BASE");var d=this.frames[a];return d?d.source.image:(console.warn(o+a),this.frames.__BASE.source.image)},getDataSourceImage:function(a){(a==null||this.frameTotal===1)&&(a="__BASE");var d=this.frames[a],l;return d?l=d.sourceIndex:(console.warn(o+a),l=this.frames.__BASE.sourceIndex),this.dataSource[l].image},setDataSource:function(a){Array.isArray(a)||(a=[a]);for(var d=0;d<a.length;d++){var l=this.source[d];this.dataSource.push(new h(this,a[d],l.width,l.height))}},setFilter:function(a){var d;for(d=0;d<this.source.length;d++)this.source[d].setFilter(a);for(d=0;d<this.dataSource.length;d++)this.dataSource[d].setFilter(a)},destroy:function(){var a;for(a=0;a<this.source.length;a++)this.source[a].destroy();for(a=0;a<this.dataSource.length;a++)this.dataSource[a].destroy();for(var d in this.frames){var l=this.frames[d];l.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var f=this.manager.game.renderer;f&&f.type===s.WEBGL&&f.resetTextures(!0),this.manager=null}});e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,h,o,r,a){r===void 0&&(r=0),a===void 0&&(a=n.length);var d=[];if(s(n,r,a))for(var l=r;l<a;l++){var f=n[l];(!h||h&&o===void 0&&f.hasOwnProperty(h)||h&&o!==void 0&&f[h]===o)&&d.push(f)}return d};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Matrix:t(1013),Add:t(1021),AddAt:t(1022),BringToTop:t(1023),CountAllMatching:t(1024),Each:t(1025),EachInRange:t(1026),FindClosestInSorted:t(318),GetAll:t(207),GetFirst:t(428),GetRandom:t(210),MoveDown:t(1027),MoveTo:t(1028),MoveUp:t(1029),MoveAbove:t(1030),MoveBelow:t(1031),NumberArray:t(322),NumberArrayStep:t(1032),QuickSelect:t(436),Range:t(437),Remove:t(93),RemoveAt:t(1033),RemoveBetween:t(1034),RemoveRandomElement:t(1035),Replace:t(1036),RotateLeft:t(178),RotateRight:t(179),SafeRange:t(78),SendToBack:t(1037),SetAll:t(1038),Shuffle:t(131),SortByDigits:t(320),SpliceOne:t(74),StableSort:t(79),Swap:t(1039)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){if(!Array.isArray(s)||s.length<2||!Array.isArray(s[0]))return!1;for(var u=s[0].length,n=1;n<s.length;n++)if(s[n].length!==u)return!1;return!0};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){u===void 0&&(u=0),n===void 0&&(n=s.length);var h=u+Math.floor(Math.random()*n);return s[h]===void 0?null:s[h]};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(438),h=new s({Extends:u,initialize:function(){u.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(o){return this._pending.push(o),this._toProcess++,o},remove:function(o){return this._destroy.push(o),this._toProcess++,o},removeAll:function(){for(var o=this._active,r=this._destroy,a=o.length;a--;)r.push(o[a]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var o=this._destroy,r=this._active,a,d;for(a=0;a<o.length;a++){d=o[a];var l=r.indexOf(d);l!==-1&&(r.splice(l,1),this.emit(n.PROCESS_QUEUE_REMOVE,d))}for(o.length=0,o=this._pending,a=0;a<o.length;a++)d=o[a],(!this.checkQueue||this.checkQueue&&r.indexOf(d)===-1)&&(r.push(d),this.emit(n.PROCESS_QUEUE_ADD,d));return o.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(u,n){return parseInt(u.getAttribute(n),10)}var s=function(u,n,h,o,r){h===void 0&&(h=0),o===void 0&&(o=0);var a=n.cutX,d=n.cutY,l=n.source.width,f=n.source.height,v=n.sourceIndex,g={},p=u.getElementsByTagName("info")[0],m=u.getElementsByTagName("common")[0];g.font=p.getAttribute("face"),g.size=t(p,"size"),g.lineHeight=t(m,"lineHeight")+o,g.chars={};var y=u.getElementsByTagName("char"),T=n!==void 0&&n.trimmed;if(T)var C=n.height,S=n.width;for(var E=0;E<y.length;E++){var P=y[E],M=t(P,"id"),A=String.fromCharCode(M),R=t(P,"x"),O=t(P,"y"),F=t(P,"width"),I=t(P,"height");T&&(R<S&&(S=R),O<C&&(C=O)),T&&C!==0&&S!==0&&(R-=n.x,O-=n.y);var G=(a+R)/l,z=(d+O)/f,U=(a+R+F)/l,X=(d+O+I)/f;if(g.chars[M]={x:R,y:O,width:F,height:I,centerX:Math.floor(F/2),centerY:Math.floor(I/2),xOffset:t(P,"xoffset"),yOffset:t(P,"yoffset"),xAdvance:t(P,"xadvance")+h,data:{},kerning:{},u0:G,v0:z,u1:U,v1:X},r&&F!==0&&I!==0){var b=r.add(A,v,R,O,F,I);b&&b.setUVs(F,I,G,z,U,X)}}var B=u.getElementsByTagName("kerning");for(E=0;E<B.length;E++){var L=B[E],D=t(L,"first"),w=t(L,"second"),N=t(L,"amount");g.chars[w].kerning[D]=N}return g};e.exports=s},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1049),u=t(440),n=t(0),h=t(11),o=t(109),r=t(15),a=t(110),d=new n({Extends:r,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.ScrollFactor,h.Size,h.Texture,h.Transform,h.Visible,s],initialize:function(f,v,g,p,m){r.call(this,f,"Blitter"),this.setTexture(p,m),this.setPosition(v,g),this.initPipeline(),this.children=new a,this.renderList=[],this.dirty=!1},create:function(l,f,v,g,p){g===void 0&&(g=!0),p===void 0&&(p=this.children.length),v===void 0?v=this.frame:v instanceof o||(v=this.texture.get(v));var m=new u(this,l,f,v,g);return this.children.addAt(m,p,!1),this.dirty=!0,m},createFromCallback:function(l,f,v,g){for(var p=this.createMultiple(f,v,g),m=0;m<p.length;m++){var y=p[m];l.call(this,y,m)}return p},createMultiple:function(l,f,v){f===void 0&&(f=this.frame.name),v===void 0&&(v=!0),Array.isArray(f)||(f=[f]);var g=[],p=this;return f.forEach(function(m){for(var y=0;y<l;y++)g.push(p.create(0,0,m,v))}),g},childCanRender:function(l){return l.visible&&l.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(208),u=t(35),n=t(0),h=t(11),o=t(75),r=t(15),a=t(10),d=t(1052),l=t(441),f=t(3),v=new n({Extends:r,Mixins:[h.AlphaSingle,h.BlendMode,h.ComputedSize,h.Depth,h.Mask,h.Pipeline,h.Transform,h.Visible,d],initialize:function(p,m,y,T){r.call(this,p,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new h.TransformMatrix,this.tempTransformMatrix=new h.TransformMatrix,this._sortKey="",this._sysEvents=p.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(m,y),this.clearAlpha(),this.setBlendMode(u.SKIP_CHECK),T&&this.add(T)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(g){return g===void 0&&(g=!0),this.exclusive=g,this},getBounds:function(g){if(g===void 0&&(g=new a),g.setTo(this.x,this.y,0,0),this.parentContainer){var p=this.parentContainer.getBoundsTransformMatrix(),m=p.transformPoint(this.x,this.y);g.setTo(m.x,m.y,0,0)}if(this.list.length>0){var y=this.list,T=new a,C=!1;g.setEmpty();for(var S=0;S<y.length;S++){var E=y[S];E.getBounds&&(E.getBounds(T),C?l(T,g,g):(g.setTo(T.x,T.y,T.width,T.height),C=!0))}}return g},addHandler:function(g){g.once(o.DESTROY,this.remove,this),this.exclusive&&(g.parentContainer&&g.parentContainer.remove(g),g.removeFromDisplayList(),g.parentContainer=this)},removeHandler:function(g){g.off(o.DESTROY,this.remove),this.exclusive&&(g.parentContainer=null,g.addToDisplayList())},pointToContainer:function(g,p){p===void 0&&(p=new f),this.parentContainer?this.parentContainer.pointToContainer(g,p):p=new f(g.x,g.y);var m=this.tempTransformMatrix;return m.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),m.invert(),m.transformPoint(g.x,g.y,p),p},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(g){return s.Add(this.list,g,this.maxSize,this.addHandler,this),this},addAt:function(g,p){return s.AddAt(this.list,g,p,this.maxSize,this.addHandler,this),this},getAt:function(g){return this.list[g]},getIndex:function(g){return this.list.indexOf(g)},sort:function(g,p){return g?(p===void 0&&(p=function(m,y){return m[g]-y[g]}),s.StableSort(this.list,p),this):this},getByName:function(g){return s.GetFirst(this.list,"name",g)},getRandom:function(g,p){return s.GetRandom(this.list,g,p)},getFirst:function(g,p,m,y){return s.GetFirst(this.list,g,p,m,y)},getAll:function(g,p,m,y){return s.GetAll(this.list,g,p,m,y)},count:function(g,p,m,y){return s.CountAllMatching(this.list,g,p,m,y)},swap:function(g,p){return s.Swap(this.list,g,p),this},moveTo:function(g,p){return s.MoveTo(this.list,g,p),this},moveAbove:function(g,p){return s.MoveAbove(this.list,g,p),this},moveBelow:function(g,p){return s.MoveBelow(this.list,g,p),this},remove:function(g,p){var m=s.Remove(this.list,g,this.removeHandler,this);if(p&&m){Array.isArray(m)||(m=[m]);for(var y=0;y<m.length;y++)m[y].destroy()}return this},removeAt:function(g,p){var m=s.RemoveAt(this.list,g,this.removeHandler,this);return p&&m&&m.destroy(),this},removeBetween:function(g,p,m){var y=s.RemoveBetween(this.list,g,p,this.removeHandler,this);if(m)for(var T=0;T<y.length;T++)y[T].destroy();return this},removeAll:function(g){var p=s.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(g)for(var m=0;m<p.length;m++)p[m].destroy();return this},bringToTop:function(g){return s.BringToTop(this.list,g),this},sendToBack:function(g){return s.SendToBack(this.list,g),this},moveUp:function(g){return s.MoveUp(this.list,g),this},moveDown:function(g){return s.MoveDown(this.list,g),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(g,p,m){var y=s.Replace(this.list,g,p);return y&&(this.addHandler(p),this.removeHandler(g),m&&g.destroy()),this},exists:function(g){return this.list.indexOf(g)>-1},setAll:function(g,p,m,y){return s.SetAll(this.list,g,p,m,y),this},each:function(g,p){var m=[null],y,T=this.list.slice(),C=T.length;for(y=2;y<arguments.length;y++)m.push(arguments[y]);for(y=0;y<C;y++)m[0]=T[y],g.apply(p,m);return this},iterate:function(g,p){var m=[null],y;for(y=2;y<arguments.length;y++)m.push(arguments[y]);for(y=0;y<this.list.length;y++)m[0]=this.list[y],g.apply(p,m);return this},setScrollFactor:function(g,p,m){return p===void 0&&(p=g),m===void 0&&(m=!1),this.scrollFactorX=g,this.scrollFactorY=p,m&&(s.SetAll(this.list,"scrollFactorX",g),s.SetAll(this.list,"scrollFactorY",p)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});e.exports=v},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(148),u=t(0),n=t(1057),h=new u({Extends:s,Mixins:[n],initialize:function(r,a,d,l,f,v,g){s.call(this,r,a,d,l,f,v,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(o,r){return this.cropWidth=o,this.cropHeight=r,this},setDisplayCallback:function(o){return this.displayCallback=o,this},setScrollX:function(o){return this.scrollX=o,this},setScrollY:function(o){return this.scrollY=o,this}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(133),u=t(0),n=t(217),h=t(303),o=t(304),r=t(305),a=t(309),d=t(167),l=t(312),f=t(313),v=t(314),g=t(111),p=t(15),m=t(2),y=t(6),T=t(14),C=t(1063),S=new u({Extends:p,Mixins:[h,o,r,a,d,f,v,l,C],initialize:function(P,M){var A=y(M,"x",0),R=y(M,"y",0);p.call(this,P,"Graphics"),this.setPosition(A,R),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(M)},setDefaultStyles:function(E){return y(E,"lineStyle",null)&&(this.defaultStrokeWidth=y(E,"lineStyle.width",1),this.defaultStrokeColor=y(E,"lineStyle.color",16777215),this.defaultStrokeAlpha=y(E,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),y(E,"fillStyle",null)&&(this.defaultFillColor=y(E,"fillStyle.color",16777215),this.defaultFillAlpha=y(E,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(E,P,M){return M===void 0&&(M=1),this.commandBuffer.push(n.LINE_STYLE,E,P,M),this._lineWidth=E,this},fillStyle:function(E,P){return P===void 0&&(P=1),this.commandBuffer.push(n.FILL_STYLE,E,P),this},fillGradientStyle:function(E,P,M,A,R,O,F,I){return R===void 0&&(R=1),O===void 0&&(O=R),F===void 0&&(F=R),I===void 0&&(I=R),this.commandBuffer.push(n.GRADIENT_FILL_STYLE,R,O,F,I,E,P,M,A),this},lineGradientStyle:function(E,P,M,A,R,O){return O===void 0&&(O=1),this.commandBuffer.push(n.GRADIENT_LINE_STYLE,E,O,P,M,A,R),this},beginPath:function(){return this.commandBuffer.push(n.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(n.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(n.FILL_PATH),this},fill:function(){return this.commandBuffer.push(n.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(n.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(n.STROKE_PATH),this},fillCircleShape:function(E){return this.fillCircle(E.x,E.y,E.radius)},strokeCircleShape:function(E){return this.strokeCircle(E.x,E.y,E.radius)},fillCircle:function(E,P,M){return this.beginPath(),this.arc(E,P,M,0,T.PI2),this.fillPath(),this},strokeCircle:function(E,P,M){return this.beginPath(),this.arc(E,P,M,0,T.PI2),this.strokePath(),this},fillRectShape:function(E){return this.fillRect(E.x,E.y,E.width,E.height)},strokeRectShape:function(E){return this.strokeRect(E.x,E.y,E.width,E.height)},fillRect:function(E,P,M,A){return this.commandBuffer.push(n.FILL_RECT,E,P,M,A),this},strokeRect:function(E,P,M,A){var R=this._lineWidth/2,O=E-R,F=E+R;return this.beginPath(),this.moveTo(E,P),this.lineTo(E,P+A),this.strokePath(),this.beginPath(),this.moveTo(E+M,P),this.lineTo(E+M,P+A),this.strokePath(),this.beginPath(),this.moveTo(O,P),this.lineTo(F+M,P),this.strokePath(),this.beginPath(),this.moveTo(O,P+A),this.lineTo(F+M,P+A),this.strokePath(),this},fillRoundedRect:function(E,P,M,A,R){R===void 0&&(R=20);var O=R,F=R,I=R,G=R;return typeof R!="number"&&(O=m(R,"tl",20),F=m(R,"tr",20),I=m(R,"bl",20),G=m(R,"br",20)),this.beginPath(),this.moveTo(E+O,P),this.lineTo(E+M-F,P),this.arc(E+M-F,P+F,F,-T.TAU,0),this.lineTo(E+M,P+A-G),this.arc(E+M-G,P+A-G,G,0,T.TAU),this.lineTo(E+I,P+A),this.arc(E+I,P+A-I,I,T.TAU,Math.PI),this.lineTo(E,P+O),this.arc(E+O,P+O,O,-Math.PI,-T.TAU),this.fillPath(),this},strokeRoundedRect:function(E,P,M,A,R){R===void 0&&(R=20);var O=R,F=R,I=R,G=R;return typeof R!="number"&&(O=m(R,"tl",20),F=m(R,"tr",20),I=m(R,"bl",20),G=m(R,"br",20)),this.beginPath(),this.moveTo(E+O,P),this.lineTo(E+M-F,P),this.moveTo(E+M-F,P),this.arc(E+M-F,P+F,F,-T.TAU,0),this.lineTo(E+M,P+A-G),this.moveTo(E+M,P+A-G),this.arc(E+M-G,P+A-G,G,0,T.TAU),this.lineTo(E+I,P+A),this.moveTo(E+I,P+A),this.arc(E+I,P+A-I,I,T.TAU,Math.PI),this.lineTo(E,P+O),this.moveTo(E,P+O),this.arc(E+O,P+O,O,-Math.PI,-T.TAU),this.strokePath(),this},fillPointShape:function(E,P){return this.fillPoint(E.x,E.y,P)},fillPoint:function(E,P,M){return!M||M<1?M=1:(E-=M/2,P-=M/2),this.commandBuffer.push(n.FILL_RECT,E,P,M,M),this},fillTriangleShape:function(E){return this.fillTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},strokeTriangleShape:function(E){return this.strokeTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},fillTriangle:function(E,P,M,A,R,O){return this.commandBuffer.push(n.FILL_TRIANGLE,E,P,M,A,R,O),this},strokeTriangle:function(E,P,M,A,R,O){return this.commandBuffer.push(n.STROKE_TRIANGLE,E,P,M,A,R,O),this},strokeLineShape:function(E){return this.lineBetween(E.x1,E.y1,E.x2,E.y2)},lineBetween:function(E,P,M,A){return this.beginPath(),this.moveTo(E,P),this.lineTo(M,A),this.strokePath(),this},lineTo:function(E,P){return this.commandBuffer.push(n.LINE_TO,E,P),this},moveTo:function(E,P){return this.commandBuffer.push(n.MOVE_TO,E,P),this},strokePoints:function(E,P,M,A){P===void 0&&(P=!1),M===void 0&&(M=!1),A===void 0&&(A=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var R=1;R<A;R++)this.lineTo(E[R].x,E[R].y);return P&&this.lineTo(E[0].x,E[0].y),M&&this.closePath(),this.strokePath(),this},fillPoints:function(E,P,M,A){P===void 0&&(P=!1),M===void 0&&(M=!1),A===void 0&&(A=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var R=1;R<A;R++)this.lineTo(E[R].x,E[R].y);return P&&this.lineTo(E[0].x,E[0].y),M&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(E,P){P===void 0&&(P=32);var M=E.getPoints(P);return this.strokePoints(M,!0)},strokeEllipse:function(E,P,M,A,R){R===void 0&&(R=32);var O=new g(E,P,M,A),F=O.getPoints(R);return this.strokePoints(F,!0)},fillEllipseShape:function(E,P){P===void 0&&(P=32);var M=E.getPoints(P);return this.fillPoints(M,!0)},fillEllipse:function(E,P,M,A,R){R===void 0&&(R=32);var O=new g(E,P,M,A),F=O.getPoints(R);return this.fillPoints(F,!0)},arc:function(E,P,M,A,R,O,F){return O===void 0&&(O=!1),F===void 0&&(F=0),this.commandBuffer.push(n.ARC,E,P,M,A,R,O,F),this},slice:function(E,P,M,A,R,O,F){return O===void 0&&(O=!1),F===void 0&&(F=0),this.commandBuffer.push(n.BEGIN_PATH),this.commandBuffer.push(n.MOVE_TO,E,P),this.commandBuffer.push(n.ARC,E,P,M,A,R,O,F),this.commandBuffer.push(n.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(n.SAVE),this},restore:function(){return this.commandBuffer.push(n.RESTORE),this},translateCanvas:function(E,P){return this.commandBuffer.push(n.TRANSLATE,E,P),this},scaleCanvas:function(E,P){return this.commandBuffer.push(n.SCALE,E,P),this},rotateCanvas:function(E){return this.commandBuffer.push(n.ROTATE,E),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(E,P,M){var A=this.scene.sys,R=A.game.renderer;P===void 0&&(P=A.scale.width),M===void 0&&(M=A.scale.height),S.TargetCamera.setScene(this.scene),S.TargetCamera.setViewport(0,0,P,M),S.TargetCamera.scrollX=this.x,S.TargetCamera.scrollY=this.y;var O,F;if(typeof E=="string")if(A.textures.exists(E)){O=A.textures.get(E);var I=O.getSourceImage();I instanceof HTMLCanvasElement&&(F=I.getContext("2d"))}else O=A.textures.createCanvas(E,P,M),F=O.getSourceImage().getContext("2d");else E instanceof HTMLCanvasElement&&(F=E.getContext("2d"));return F&&(this.renderCanvas(R,this,S.TargetCamera,null,F,!1),O&&O.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});S.TargetCamera=new s,e.exports=S},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h,o){o===void 0&&(o=new s);var r=n.width/2,a=n.height/2;return o.x=n.x+r*Math.cos(h),o.y=n.y+a*Math.sin(h),o};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(0),n=t(11),h=t(176),o=t(101),r=t(9),a=t(75),d=t(110),l=t(1071),f=t(20),v=t(79),g=new u({Extends:d,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.Visible,r,l],initialize:function(m,y){d.call(this,m),r.call(this),this.scene=m,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=m.sys,this.events=m.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(s.SKIP_CHECK),y&&this.add(y),m.sys.queueDepthSort()},setActive:function(p){return this.active=p,this},setName:function(p){return this.name=p,this},setState:function(p){return this.state=p,this},setDataEnabled:function(){return this.data||(this.data=new o(this)),this},setData:function(p,m){return this.data||(this.data=new o(this)),this.data.set(p,m),this},incData:function(p,m){return this.data||(this.data=new o(this)),this.data.inc(p,m),this},toggleData:function(p){return this.data||(this.data=new o(this)),this.data.toggle(p),this},getData:function(p){return this.data||(this.data=new o(this)),this.data.get(p)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return h(this)},willRender:function(p){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&p.id)},getIndexList:function(){for(var p=this,m=this.parentContainer,y=[];m&&(y.unshift(m.getIndex(p)),p=m,m.parentContainer);)m=m.parentContainer;return y.unshift(this.displayList.getIndex(p)),y},addChildCallback:function(p){p.displayList&&p.displayList!==this&&p.removeFromDisplayList(),p.displayList||(this.queueDepthSort(),p.displayList=this,p.emit(a.ADDED_TO_SCENE,p,this.scene),this.events.emit(f.ADDED_TO_SCENE,p,this.scene))},removeChildCallback:function(p){this.queueDepthSort(),p.displayList=null,p.emit(a.REMOVED_FROM_SCENE,p,this.scene),this.events.emit(f.REMOVED_FROM_SCENE,p,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(v(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(p,m){return p._depth-m._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(a.DESTROY,this);for(var p=this.list.length;p--;)this.list[p].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});e.exports=g},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),h=t(450),o=t(110),r=t(452),a=t(1075),d=new s({Extends:n,Mixins:[u.Depth,u.Mask,u.Pipeline,u.Transform,u.Visible,a],initialize:function(f,v,g,p){if(n.call(this,f,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],g!==null&&(typeof g=="object"||Array.isArray(g))&&(p=g,g=null),this.setTexture(v,g),this.initPipeline(),this.emitters=new o(this),this.wells=new o(this),p){Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++)this.createEmitter(p[m])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(l,f){return this.texture=this.scene.sys.textures.get(l),this.setFrame(f)},setFrame:function(l){this.frame=this.texture.get(l);var f=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),v=[];return f.forEach(function(g){v.push(g.name)}),this.frameNames=v,this.defaultFrame=this.frame,this},setEmitterFrames:function(l,f){Array.isArray(l)||(l=[l]);var v=f.frames;v.length=0;for(var g=0;g<l.length;g++){var p=l[g];this.frameNames.indexOf(p)!==-1&&v.push(this.texture.get(p))}return v.length>0?f.defaultFrame=v[0]:f.defaultFrame=this.defaultFrame,this},addEmitter:function(l){return this.emitters.add(l)},createEmitter:function(l){return this.addEmitter(new r(this,l))},removeEmitter:function(l){return this.emitters.remove(l,!0)},addGravityWell:function(l){return this.wells.add(l)},createGravityWell:function(l){return this.addGravityWell(new h(l))},emitParticle:function(l,f,v){for(var g=this.emitters.list,p=0;p<g.length;p++){var m=g[p];m.active&&m.emitParticle(l,f,v)}return this},emitParticleAt:function(l,f,v){return this.emitParticle(v,l,f)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(l,f){f*=this.timeScale;for(var v=this.emitters.list,g=0;g<v.length;g++){var p=v[g];p.active&&p.preUpdate(l,f)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(133),n=t(31),h=t(0),o=t(11),r=t(33),a=t(109),d=t(15),l=t(1),f=t(92),v=t(1079),g=t(141),p=t(12),m=t(222),y=new h({Extends:d,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,v],initialize:function(C,S,E,P,M,A,R){S===void 0&&(S=0),E===void 0&&(E=0),P===void 0&&(P=32),M===void 0&&(M=32),d.call(this,C,"RenderTexture"),this.renderer=C.sys.renderer,this.textureManager=C.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,A===void 0?(this.canvas=n.create2D(this,P,M),this.texture=C.sys.textures.addCanvas(m(),this.canvas),this.frame=this.texture.get()):(this.texture=C.sys.textures.get(A),this.frame=this.texture.get(R),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new u(0,0,P,M),this.renderTarget=null;var O=this.renderer;O?O.type===r.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new g(O,P,M,1,0,!1)):O.type===r.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=l,this.camera.setScene(C),this.setPosition(S,E),A===void 0&&this.setSize(P,M),this.setOrigin(0,0),this.initPipeline(f.SINGLE_PIPELINE)},setSize:function(T,C){return this.resize(T,C)},resize:function(T,C){C===void 0&&(C=T);var S=this.frame;if(T!==this.width||C!==this.height){if(S.name==="__BASE"){this.canvas.width=T,this.canvas.height=C,this.texture.width=T,this.texture.height=C;var E=this.renderTarget;E&&(E.resize(T,C),S.glTexture=E.texture,S.source.isRenderTexture=!0,S.source.isGLTexture=!0,S.source.glTexture=E.texture),this.camera.setSize(T,C),S.source.width=T,S.source.height=C,S.setSize(T,C),this.width=T,this.height=C}}else{var P=this.texture.getSourceImage();S.cutX+T>P.width&&(T=P.width-S.cutX),S.cutY+C>P.height&&(C=P.height-S.cutY),S.setSize(T,C,S.cutX,S.cutY)}this.updateDisplayOrigin();var M=this.input;return M&&!M.customHitArea&&(M.hitArea.width=T,M.hitArea.height=C),this},setGlobalTint:function(T){return this.globalTint=T,this},setGlobalAlpha:function(T){return this.globalAlpha=T,this},saveTexture:function(T){return this.textureManager.renameTexture(this.texture.key,T),this._saved=!0,this.texture},fill:function(T,C,S,E,P,M){var A=this.frame,R=this.camera,O=this.renderer;C===void 0&&(C=1),S===void 0&&(S=0),E===void 0&&(E=0),P===void 0&&(P=A.cutWidth),M===void 0&&(M=A.cutHeight);var F=(T>>16&255)/255,I=(T>>8&255)/255,G=(T&255)/255,z=this.renderTarget;if(R.preRender(),z){z.bind(!0);var U=this.pipeline;U.manager.set(U);var X=z.width,b=z.height,B=O.width,L=O.height,D=B/X,w=L/b;U.drawFillRect(S*D,E*w,P*D,M*w,p.getTintFromFloats(G,I,F,1),C),z.unbind(!0)}else{var N=this.context;O.setContext(N),N.fillStyle="rgba("+F+","+I+","+G+","+C+")",N.fillRect(S+A.cutX,E+A.cutY,P,M),O.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var T=this.renderTarget;if(T)T.clear();else{var C=this.context;C.save(),C.setTransform(1,0,0,1,0,0),C.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),C.restore()}this.dirty=!1}return this},erase:function(T,C,S){return this._eraseMode=!0,this.draw(T,C,S,1,16777215),this._eraseMode=!1,this},draw:function(T,C,S,E,P){return this.beginDraw(),this.batchDraw(T,C,S,E,P),this.endDraw(),this},drawFrame:function(T,C,S,E,P,M){return this.beginDraw(),this.batchDrawFrame(T,C,S,E,P,M),this.endDraw(),this},beginDraw:function(){var T=this.camera,C=this.renderer,S=this.renderTarget;return T.preRender(),S?C.beginCapture(S.width,S.height):C.setContext(this.context),this},batchDraw:function(T,C,S,E,P){return E===void 0&&(E=this.globalAlpha),P===void 0?P=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):P=(P>>16)+(P&65280)+((P&255)<<16),Array.isArray(T)||(T=[T]),this.batchList(T,C,S,E,P),this},batchDrawFrame:function(T,C,S,E,P,M){S===void 0&&(S=0),E===void 0&&(E=0),P===void 0&&(P=this.globalAlpha),M===void 0?M=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):M=(M>>16)+(M&65280)+((M&255)<<16);var A=this.textureManager.getFrame(T,C);return A&&(this.renderTarget?this.pipeline.batchTextureFrame(A,S,E,M,P,this.camera.matrix,null):this.batchTextureFrame(A,S+this.frame.cutX,E+this.frame.cutY,P,M)),this},endDraw:function(T){T===void 0&&(T=this._eraseMode);var C=this.renderer,S=this.renderTarget;if(S){var E=C.endCapture(),P=C.pipelines.setUtility();P.blitFrame(E,S,1,!1,!1,T),C.resetScissor(),C.resetViewport()}else C.setContext();return this.dirty=!0,this},batchList:function(T,C,S,E,P){for(var M=0;M<T.length;M++){var A=T[M];!A||A===this||(A.renderWebGL||A.renderCanvas?this.drawGameObject(A,C,S):A.isParent||A.list?this.batchGroup(A.getChildren(),C,S):typeof A=="string"?this.batchTextureFrameKey(A,null,C,S,E,P):A instanceof a?this.batchTextureFrame(A,C,S,E,P):Array.isArray(A)&&this.batchList(A,C,S,E,P))}},batchGroup:function(T,C,S){C===void 0&&(C=0),S===void 0&&(S=0),C+=this.frame.cutX,S+=this.frame.cutY;for(var E=0;E<T.length;E++){var P=T[E];if(P.willRender(this.camera)){var M=P.x+C,A=P.y+S;this.drawGameObject(P,M,A)}}},batchGameObjectWebGL:function(T,C,S){C===void 0&&(C=T.x),S===void 0&&(S=T.y);var E=T.x,P=T.y;T.setPosition(C+this.frame.cutX,S+this.frame.cutY),T.renderDirect?T.renderDirect(this.renderer,T,this.camera):T.renderWebGL(this.renderer,T,this.camera),T.setPosition(E,P)},batchGameObjectCanvas:function(T,C,S){C===void 0&&(C=T.x),S===void 0&&(S=T.y);var E=T.x,P=T.y;if(this._eraseMode){var M=T.blendMode;T.blendMode=s.ERASE}T.setPosition(C+this.frame.cutX,S+this.frame.cutY),T.renderCanvas(this.renderer,T,this.camera,null),T.setPosition(E,P),this._eraseMode&&(T.blendMode=M)},batchTextureFrameKey:function(T,C,S,E,P,M){var A=this.textureManager.getFrame(T,C);A&&this.batchTextureFrame(A,S,E,P,M)},batchTextureFrame:function(T,C,S,E,P){C===void 0&&(C=0),S===void 0&&(S=0),C+=this.frame.cutX,S+=this.frame.cutY;var M=this.renderTarget;if(M)this.pipeline.batchTextureFrame(T,C,S,P,E,this.camera.matrix,null);else{var A=this.context,R=T.canvasData,O=T.source.image,F=this.camera.matrix;A.save(),A.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",A.globalAlpha=E,F.setToContext(A),A.drawImage(O,R.x,R.y,R.width,R.height,C,S,R.width,R.height),A.restore()}},snapshotArea:function(T,C,S,E,P,M,A){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,P,!1,T,C,S,E,M,A):this.renderer.snapshotCanvas(this.canvas,P,!1,T,C,S,E,M,A),this},snapshot:function(T,C,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,0,0,this.width,this.height,C,S):this.renderer.snapshotCanvas(this.canvas,T,!1,0,0,this.width,this.height,C,S),this},snapshotPixel:function(T,C,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,S,!0,T,C):this.renderer.snapshotCanvas(this.canvas,S,!0,T,C),this},preDestroy:function(){this._saved||(n.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});e.exports=y},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var u=Math.random()*16|0,n=s==="x"?u:u&3|8;return n.toString(16)})};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(164),u=t(0),n=t(11),h=t(15),o=t(92),r=t(1085),a=t(3),d=new u({Extends:h,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Flip,n.Mask,n.Pipeline,n.Size,n.Texture,n.Transform,n.Visible,n.ScrollFactor,r],initialize:function(f,v,g,p,m,y,T,C,S){p===void 0&&(p="__DEFAULT"),y===void 0&&(y=2),T===void 0&&(T=!0),h.call(this,f,"Rope"),this.anims=new s(this),this.points=y,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=p==="__DEFAULT",this.dirty=!1,this.horizontal=T,this._flipX=!1,this._flipY=!1,this._perp=new a,this.debugCallback=null,this.debugGraphic=null,this.setTexture(p,m),this.setPosition(v,g),this.setSizeToFrame(),this.initPipeline(o.ROPE_PIPELINE),Array.isArray(y)&&this.resizeArrays(y.length),this.setPoints(y,C,S),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(l,f){var v=this.anims.currentFrame;this.anims.update(l,f),this.anims.currentFrame!==v&&(this.updateUVs(),this.updateVertices())},play:function(l,f,v){return this.anims.play(l,f,v),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(l,f,v){return l===void 0&&(l=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(l,f,v))},setVertical:function(l,f,v){return l===void 0&&(l=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(l,f,v)):this},setTintFill:function(l){return l===void 0&&(l=!1),this.tintFill=l,this},setAlphas:function(l,f){var v=this.points.length;if(v<1)return this;var g=this.alphas;l===void 0?l=[1]:!Array.isArray(l)&&f===void 0&&(l=[l]);var p,m=0;if(f!==void 0)for(p=0;p<v;p++)m=p*2,g[m]=l,g[m+1]=f;else if(l.length===v)for(p=0;p<v;p++)m=p*2,g[m]=l[p],g[m+1]=l[p];else{var y=l[0];for(p=0;p<v;p++)m=p*2,l.length>m&&(y=l[m]),g[m]=y,l.length>m+1&&(y=l[m+1]),g[m+1]=y}return this},setColors:function(l){var f=this.points.length;if(f<1)return this;var v=this.colors;l===void 0?l=[16777215]:Array.isArray(l)||(l=[l]);var g,p=0;if(l.length===f)for(g=0;g<f;g++)p=g*2,v[p]=l[g],v[p+1]=l[g];else{var m=l[0];for(g=0;g<f;g++)p=g*2,l.length>p&&(m=l[p]),v[p]=m,l.length>p+1&&(m=l[p+1]),v[p+1]=m}return this},setPoints:function(l,f,v){if(l===void 0&&(l=2),typeof l=="number"){var g=l;g<2&&(g=2),l=[];var p,m,y;if(this.horizontal)for(y=-this.frame.halfWidth,m=this.frame.width/(g-1),p=0;p<g;p++)l.push({x:y+p*m,y:0});else for(y=-this.frame.halfHeight,m=this.frame.height/(g-1),p=0;p<g;p++)l.push({x:0,y:y+p*m})}var T=l.length,C=this.points.length;return T<1?(console.warn("Rope: Not enough points given"),this):(T===1&&(l.unshift({x:0,y:0}),T++),C!==T&&this.resizeArrays(T),this.points=l,this.updateUVs(),f!=null&&this.setColors(f),v!=null&&this.setAlphas(v),this)},updateUVs:function(){for(var l=this.uv,f=this.points.length,v=this.frame.u0,g=this.frame.v0,p=this.frame.u1,m=this.frame.v1,y=(p-v)/(f-1),T=(m-g)/(f-1),C=0;C<f;C++){var S=C*4,E,P,M,A;this.horizontal?(this._flipX?(E=p-C*y,M=p-C*y):(E=v+C*y,M=v+C*y),this._flipY?(P=m,A=g):(P=g,A=m)):(this._flipX?(E=v,M=p):(E=p,M=v),this._flipY?(P=m-C*T,A=m-C*T):(P=g+C*T,A=g+C*T)),l[S+0]=E,l[S+1]=P,l[S+2]=M,l[S+3]=A}return this},resizeArrays:function(l){var f=this.colors,v=this.alphas;this.vertices=new Float32Array(l*4),this.uv=new Float32Array(l*4),f=new Uint32Array(l*2),v=new Float32Array(l*2);for(var g=0;g<l*2;g++)f[g]=16777215,v[g]=1;return this.colors=f,this.alphas=v,this.dirty=!0,this},updateVertices:function(){var l=this._perp,f=this.points,v=this.vertices,g=f.length;if(this.dirty=!1,!(g<1)){for(var p,m=f[0],y=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,T=0;T<g;T++){var C=f[T],S=T*4;T<g-1?p=f[T+1]:p=C,l.x=p.y-m.y,l.y=-(p.x-m.x);var E=l.length();l.x/=E,l.y/=E,l.x*=y,l.y*=y,v[S]=C.x+l.x,v[S+1]=C.y+l.y,v[S+2]=C.x-l.x,v[S+3]=C.y-l.y,m=C}return this}},setDebug:function(l,f){return this.debugGraphic=l,!l&&!f?this.debugCallback=null:f?this.debugCallback=f:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(l,f,v){var g=l.debugGraphic,p=v[0],m=v[1],y=v[2],T=v[3];g.lineBetween(p,m,y,T);for(var C=4;C<f;C+=4){var S=v[C+0],E=v[C+1],P=v[C+2],M=v[C+3];g.lineBetween(p,m,S,E),g.lineBetween(y,T,P,M),g.lineBetween(y,T,S,E),g.lineBetween(S,E,P,M),p=S,m=E,y=P,T=M}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(l){return this._flipX=l,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(l){return this._flipY=l,this.updateUVs()}}});e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(142),u=t(31),n=t(0),h=t(11),o=t(22),r=t(15),a=t(458),d=t(6),l=t(202),f=t(1088),v=t(459),g=new n({Extends:r,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Crop,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Tint,h.Transform,h.Visible,f],initialize:function(m,y,T,C,S){y===void 0&&(y=0),T===void 0&&(T=0),r.call(this,m,"Text"),this.renderer=m.sys.renderer,this.setPosition(y,T),this.setOrigin(0,0),this.initPipeline(),this.canvas=u.create(this),this.context=this.canvas.getContext("2d"),this.style=new v(this,S),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=m.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(C),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing),m.sys.game.events.on(o.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",s(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(p){var m=this.style;if(m.wordWrapCallback){var y=m.wordWrapCallback.call(m.wordWrapCallbackScope,p,this);return Array.isArray(y)&&(y=y.join(`
`)),y}else return m.wordWrapWidth?m.wordWrapUseAdvanced?this.advancedWordWrap(p,this.context,this.style.wordWrapWidth):this.basicWordWrap(p,this.context,this.style.wordWrapWidth):p},advancedWordWrap:function(p,m,y){for(var T="",C=p.replace(/ +/gi," ").split(this.splitRegExp),S=C.length,E=0;E<S;E++){var P=C[E],M="";P=P.replace(/^ *|\s*$/gi,"");var A=m.measureText(P).width;if(A<y){T+=P+`
`;continue}for(var R=y,O=P.split(" "),F=0;F<O.length;F++){var I=O[F],G=I+" ",z=m.measureText(G).width;if(z>R){if(F===0){for(var U=G;U.length&&(U=U.slice(0,-1),z=m.measureText(U).width,!(z<=R)););if(!U.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var X=I.substr(U.length);O[F]=X,M+=U}var b=O[F].length?F:F+1,B=O.slice(b).join(" ").replace(/[ \n]*$/gi,"");C[E+1]=B+" "+(C[E+1]||""),S=C.length;break}else M+=G,R-=z}T+=M.replace(/[ \n]*$/gi,"")+`
`}return T=T.replace(/[\s|\n]*$/gi,""),T},basicWordWrap:function(p,m,y){for(var T="",C=p.split(this.splitRegExp),S=C.length-1,E=m.measureText(" ").width,P=0;P<=S;P++){for(var M=y,A=C[P].split(" "),R=A.length-1,O=0;O<=R;O++){var F=A[O],I=m.measureText(F).width,G=I;O<R&&(G+=E),G>M&&O>0&&(T+=`
`,M=y),T+=F,O<R?(T+=" ",M-=G):M-=I}P<S&&(T+=`
`)}return T},getWrappedText:function(p){p===void 0&&(p=this._text),this.style.syncFont(this.canvas,this.context);var m=this.runWordWrap(p);return m.split(this.splitRegExp)},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this._text&&(this._text=p.toString(),this.updateText()),this},setStyle:function(p){return this.style.setStyle(p)},setFont:function(p){return this.style.setFont(p)},setFontFamily:function(p){return this.style.setFontFamily(p)},setFontSize:function(p){return this.style.setFontSize(p)},setFontStyle:function(p){return this.style.setFontStyle(p)},setFixedSize:function(p,m){return this.style.setFixedSize(p,m)},setBackgroundColor:function(p){return this.style.setBackgroundColor(p)},setFill:function(p){return this.style.setFill(p)},setColor:function(p){return this.style.setColor(p)},setStroke:function(p,m){return this.style.setStroke(p,m)},setShadow:function(p,m,y,T,C,S){return this.style.setShadow(p,m,y,T,C,S)},setShadowOffset:function(p,m){return this.style.setShadowOffset(p,m)},setShadowColor:function(p){return this.style.setShadowColor(p)},setShadowBlur:function(p){return this.style.setShadowBlur(p)},setShadowStroke:function(p){return this.style.setShadowStroke(p)},setShadowFill:function(p){return this.style.setShadowFill(p)},setWordWrapWidth:function(p,m){return this.style.setWordWrapWidth(p,m)},setWordWrapCallback:function(p,m){return this.style.setWordWrapCallback(p,m)},setAlign:function(p){return this.style.setAlign(p)},setResolution:function(p){return this.style.setResolution(p)},setLineSpacing:function(p){return this.lineSpacing=p,this.updateText()},setPadding:function(p,m,y,T){if(typeof p=="object"){var C=p,S=d(C,"x",null);S!==null?(p=S,y=S):(p=d(C,"left",0),y=d(C,"right",p));var E=d(C,"y",null);E!==null?(m=E,T=E):(m=d(C,"top",0),T=d(C,"bottom",m))}else p===void 0&&(p=0),m===void 0&&(m=p),y===void 0&&(y=p),T===void 0&&(T=m);return this.padding.left=p,this.padding.top=m,this.padding.right=y,this.padding.bottom=T,this.updateText()},setMaxLines:function(p){return this.style.setMaxLines(p)},updateText:function(){var p=this.canvas,m=this.context,y=this.style,T=y.resolution,C=y.metrics;y.syncFont(p,m);var S=this._text;(y.wordWrapWidth||y.wordWrapCallback)&&(S=this.runWordWrap(this._text));var E=S.split(this.splitRegExp),P=a(this,C,E),M=this.padding,A;y.fixedWidth===0?(this.width=P.width+M.left+M.right,A=P.width):(this.width=y.fixedWidth,A=this.width-M.left-M.right,A<P.width&&(A=P.width)),y.fixedHeight===0?this.height=P.height+M.top+M.bottom:this.height=y.fixedHeight;var R=this.width,O=this.height;this.updateDisplayOrigin(),R*=T,O*=T,R=Math.max(R,1),O=Math.max(O,1),p.width!==R||p.height!==O?(p.width=R,p.height=O,this.frame.setSize(R,O),y.syncFont(p,m)):m.clearRect(0,0,R,O),m.save(),m.scale(T,T),y.backgroundColor&&(m.fillStyle=y.backgroundColor,m.fillRect(0,0,R,O)),y.syncStyle(p,m),m.textBaseline="alphabetic",m.translate(M.left,M.top);for(var F,I,G=0;G<P.lines;G++){if(F=y.strokeThickness/2,I=y.strokeThickness/2+G*P.lineHeight+C.ascent,G>0&&(I+=P.lineSpacing*G),y.rtl)F=R-F;else if(y.align==="right")F+=A-P.lineWidths[G];else if(y.align==="center")F+=(A-P.lineWidths[G])/2;else if(y.align==="justify"){var z=.85;if(P.lineWidths[G]/P.width>=z){var U=P.width-P.lineWidths[G],X=m.measureText(" ").width,b=E[G].trim(),B=b.split(" ");U+=(E[G].length-b.length)*X;for(var L=Math.floor(U/X),D=0;L>0;)B[D]+=" ",D=(D+1)%(B.length-1||1),--L;E[G]=B.join(" ")}}this.autoRound&&(F=Math.round(F),I=Math.round(I)),y.strokeThickness&&(this.style.syncShadow(m,y.shadowStroke),m.strokeText(E[G],F,I)),y.color&&(this.style.syncShadow(m,y.shadowFill),m.fillText(E[G],F,I))}m.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(p,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var w=this.input;return w&&!w.customHitArea&&(w.hitArea.width=this.width,w.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(p){this.setText(p)}},toJSON:function(){var p=h.ToJSON(this),m={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return p.data=m,p},preDestroy:function(){this.style.rtl&&l(this.canvas),u.remove(this.canvas),this.texture.destroy()}});e.exports=g},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=t(0),n=t(11),h=t(22),o=t(15),r=t(361),a=t(192),d=t(1091),l=t(3),f=8,v=new u({Extends:o,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Crop,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Tint,n.Transform,n.Visible,d],initialize:function(p,m,y,T,C,S,E){var P=p.sys.renderer;o.call(this,p,"TileSprite");var M=p.sys.textures.get(S),A=M.get(E);!T||!C?(T=A.width,C=A.height):(T=Math.floor(T),C=Math.floor(C)),this._tilePosition=new l,this._tileScale=new l(1,1),this.dirty=!1,this.renderer=P,this.canvas=s.create(this,T,C),this.context=this.canvas.getContext("2d"),this.displayTexture=M,this.displayFrame=A,this._crop=this.resetCropObject(),this.texture=p.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=r(A.width),this.potHeight=r(A.height),this.fillCanvas=s.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(m,y),this.setSize(T,C),this.setFrame(E),this.setOriginFromFrame(),this.initPipeline(),p.sys.game.events.on(h.CONTEXT_RESTORED,function(R){if(!!R){var O=R.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=R.createTexture2D(0,O.LINEAR,O.LINEAR,O.REPEAT,O.REPEAT,O.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(g,p){return this.displayTexture=this.scene.sys.textures.get(g),this.setFrame(p)},setFrame:function(g){var p=this.displayTexture.get(g);return this.potWidth=r(p.width),this.potHeight=r(p.height),this.canvas.width=0,!p.cutWidth||!p.cutHeight?this.renderFlags&=~f:this.renderFlags|=f,this.displayFrame=p,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(g,p){return g!==void 0&&(this.tilePositionX=g),p!==void 0&&(this.tilePositionY=p),this},setTileScale:function(g,p){return g===void 0&&(g=this.tileScaleX),p===void 0&&(p=g),this.tileScaleX=g,this.tileScaleY=p,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var g=this.displayFrame;if(g.source.isRenderTexture||g.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var p=this.fillContext,m=this.fillCanvas,y=this.potWidth,T=this.potHeight;(!this.renderer||!this.renderer.gl)&&(y=g.cutWidth,T=g.cutHeight),p.clearRect(0,0,y,T),m.width=y,m.height=T,p.drawImage(g.source.image,g.cutX,g.cutY,g.cutWidth,g.cutHeight,0,0,y,T),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(m,this.fillPattern):this.fillPattern=p.createPattern(m,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var g=this.canvas;if((g.width!==this.width||g.height!==this.height)&&(g.width=this.width,g.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var p=this.context;this.scene.sys.game.config.antialias||a.disable(p);var m=this._tileScale.x,y=this._tileScale.y,T=this._tilePosition.x,C=this._tilePosition.y;p.clearRect(0,0,this.width,this.height),p.save(),p.scale(m,y),p.translate(-T,-C),p.fillStyle=this.fillPattern,p.fillRect(T,C,this.width/m,this.height/y),p.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),s.remove(this.canvas),s.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(g){this._tilePosition.x=g,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(g){this._tilePosition.y=g,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(g){this._tileScale.x=g,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(g){this._tileScale.y=g,this.dirty=!0}}});e.exports=v},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(18),n=t(11),h=t(75),o=t(22),r=t(51),a=t(15),d=t(70),l=t(222),f=t(1094),v=t(14),g=new s({Extends:a,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,f],initialize:function(m,y,T,C){a.call(this,m,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=l(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=v.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(y,T),this.initPipeline(),C&&this.changeSource(C,!1);var S=m.sys.game.events;S.on(o.PAUSE,this.globalPause,this),S.on(o.RESUME,this.globalResume,this);var E=m.sys.sound;E&&E.on(d.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(p,m,y){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var T=this.video;if(!T)return console.warn("Video not loaded"),this;p===void 0&&(p=T.loop);var C=this.scene.sys.sound;C&&C.mute&&this.setMute(!0),isNaN(m)||(this._markerIn=m),!isNaN(y)&&y>m&&(this._markerOut=y),T.loop=p;var S=this._callbacks,E=T.play();return E!==void 0?E.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(T.addEventListener("playing",S.play,!0),T.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),T.addEventListener("ended",S.end,!0),T.addEventListener("timeupdate",S.time,!0),T.addEventListener("seeking",S.seeking,!0),T.addEventListener("seeked",S.seeked,!0),this},changeSource:function(p,m,y,T,C){m===void 0&&(m=!0);var S=this.video;S&&this.stop();var E=this.scene.sys.cache.video.get(p);return E?(this.video=E,this._cacheKey=p,this._codePaused=E.paused,this._codeMuted=E.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,E,E.videoWidth,E.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,E.videoWidth,E.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(h.VIDEO_CREATED,this,E.videoWidth,E.videoHeight)):this.updateTexture(),E.currentTime=0,this._lastUpdate=0,m&&this.play(y,T,C)):this.video=null,this},addMarker:function(p,m,y){return!isNaN(m)&&m>=0&&!isNaN(y)&&(this.markers[p]=[m,y]),this},playMarker:function(p,m){var y=this.markers[p];return y&&this.play(m,y[0],y[1]),this},removeMarker:function(p){return delete this.markers[p],this},snapshot:function(p,m){return p===void 0&&(p=this.width),m===void 0&&(m=this.height),this.snapshotArea(0,0,this.width,this.height,p,m)},snapshotArea:function(p,m,y,T,C,S){p===void 0&&(p=0),m===void 0&&(m=0),y===void 0&&(y=this.width),T===void 0&&(T=this.height),C===void 0&&(C=y),S===void 0&&(S=T);var E=this.video,P=this.snapshotTexture;return P?(P.setSize(C,S),E&&P.context.drawImage(E,p,m,y,T,0,0,C,S)):(P=this.scene.sys.textures.createCanvas(l(),C,S),this.snapshotTexture=P,E&&P.context.drawImage(E,p,m,y,T,0,0,C,S)),P.update()},saveSnapshotTexture:function(p){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,p):this.snapshotTexture=this.scene.sys.textures.createCanvas(p,this.width,this.height),this.snapshotTexture},loadURL:function(p,m,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");return T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0),T.src=p,T.load(),this.video=T,this},loadMediaStream:function(p,m,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0);try{T.srcObject=p}catch{T.src=window.URL.createObjectURL(p)}return T.load(),this.video=T,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(h.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(p){this.scene.sys.input.once(r.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(h.VIDEO_ERROR,this,p)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(h.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(p){this.stop(),this.emit(h.VIDEO_ERROR,this,p)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(h.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(h.VIDEO_PLAY,this)},completeHandler:function(){this.emit(h.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(h.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var p=this.video;if(p){var m=p.currentTime;m!==this._lastUpdate&&(this._lastUpdate=m,this.updateTexture(),m>=this._markerOut&&(p.loop?(p.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=m,this.emit(h.VIDEO_LOOP,this)):(this.emit(h.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(h.VIDEO_TIMEOUT,this))},updateTexture:function(){var p=this.video,m=p.videoWidth,y=p.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,p,m,y),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,m,y),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(h.VIDEO_CREATED,this,m,y);else{var T=this.videoTextureSource;T.source!==p&&(T.source=p,T.width=m,T.height=y),T.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(p){var m=this.video;if(m){var y=m.duration;if(y!==1/0&&!isNaN(y)){var T=y*p;this.setCurrentTime(T)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(p){var m=this.video;if(m){if(typeof p=="string"){var y=p[0],T=parseFloat(p.substr(1));y==="+"?p=m.currentTime+T:y==="-"&&(p=m.currentTime-T)}m.currentTime=p,this._lastUpdate=p}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(h.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(h.VIDEO_SEEKED,this);var p=this.video;p&&this.updateTexture()},getProgress:function(){var p=this.video;if(p){var m=p.currentTime,y=p.duration;if(y!==1/0&&!isNaN(y))return m/y}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(p){p===void 0&&(p=!0),this._codeMuted=p;var m=this.video;return m&&(m.muted=this._systemMuted?!0:p),this},isMuted:function(){return this._codeMuted},globalMute:function(p,m){this._systemMuted=m;var y=this.video;y&&(y.muted=this._codeMuted?!0:m)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(p){p===void 0&&(p=!0);var m=this.video;return this._codePaused=p,m&&(p?m.paused||m.pause():p||m.paused&&!this._systemPaused&&m.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(p){return p===void 0&&(p=1),this.video&&(this.video.volume=u(p,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(p){return this.video&&(this.video.playbackRate=p),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(p){return p===void 0&&(p=!0),this.video&&(this.video.loop=p),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(p,m){return m===void 0&&(m=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,p),this._key=p,this.flipY=m,this.videoTextureSource&&this.videoTextureSource.setFlipY(m),this.videoTexture},stop:function(){var p=this.video;if(p){var m=this._callbacks;for(var y in m)p.removeEventListener(y,m[y],!0);p.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(h.VIDEO_STOP,this),this},removeVideoElement:function(){var p=this.video;if(!!p){for(p.parentNode&&p.parentNode.removeChild(p);p.hasChildNodes();)p.removeChild(p.firstChild);p.removeAttribute("autoplay"),p.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var p=this.scene.sys.game.events;p.off(o.PAUSE,this.globalPause,this),p.off(o.RESUME,this.globalResume,this);var m=this.scene.sys.sound;m&&m.off(d.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});e.exports=g},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(228),n=t(470),h=t(56),o=new s({initialize:function(a){this.type=h.POLYGON,this.area=0,this.points=[],a&&this.setTo(a)},contains:function(r,a){return u(this,r,a)},setTo:function(r){if(this.area=0,this.points=[],typeof r=="string"&&(r=r.split(" ")),!Array.isArray(r))return this;for(var a,d=Number.MAX_VALUE,l=0;l<r.length;l++)a={x:0,y:0},typeof r[l]=="number"||typeof r[l]=="string"?(a.x=parseFloat(r[l]),a.y=parseFloat(r[l+1]),l++):Array.isArray(r[l])?(a.x=r[l][0],a.y=r[l][1]):(a.x=r[l].x,a.y=r[l].y),this.points.push(a),a.y<d&&(d=a.y);return this.calculateArea(d),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var r=0,a,d,l=0;l<this.points.length-1;l++)a=this.points[l],d=this.points[l+1],r+=(d.x-a.x)*(a.y+d.y);return a=this.points[0],d=this.points[this.points.length-1],r+=(a.x-d.x)*(d.y+a.y),this.area=-r*.5,this.area},getPoints:function(r,a,d){return n(this,r,a,d)}});e.exports=o},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){for(var h=!1,o=-1,r=s.points.length-1;++o<s.points.length;r=o){var a=s.points[o].x,d=s.points[o].y,l=s.points[r].x,f=s.points[r].y;(d<=n&&n<f||f<=n&&n<d)&&u<(l-a)*(n-d)/(f-d)+a&&(h=!h)}return h};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),h=t(2),o=t(17),r=t(478),a=t(1176),d=t(25),l=new s({Extends:n,Mixins:[u.ComputedSize,u.Depth,u.GetBounds,u.Mask,u.Origin,u.ScrollFactor,u.Transform,u.Visible,a],initialize:function(v,g,p,m,y,T,C,S){p===void 0&&(p=0),m===void 0&&(m=0),y===void 0&&(y=128),T===void 0&&(T=128),n.call(this,v,"Shader"),this.blendMode=-1,this.shader;var E=v.sys.renderer;this.renderer=E,this.gl=E.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=E.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=E.width,this._rendererHeight=E.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(p,m),this.setSize(y,T),this.setOrigin(.5,.5),this.setShader(g,C,S)},willRender:function(f){return this.renderToTexture?!0:!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&f.id)},setRenderToTexture:function(f,v){if(v===void 0&&(v=!1),!this.renderToTexture){var g=this.width,p=this.height,m=this.renderer;this.glTexture=m.createTextureFromSource(null,g,p,0),this.glTexture.flipY=v,this.framebuffer=m.createFramebuffer(g,p,this.glTexture,!1),this._rendererWidth=g,this._rendererHeight=p,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),f&&(this.texture=this.scene.sys.textures.addGLTexture(f,this.glTexture,g,p))}return this.shader&&(m.pipelines.clear(),this.load(),this.flush(),m.pipelines.rebind()),this},setShader:function(f,v,g){if(v===void 0&&(v=[]),typeof f=="string"){var p=this.scene.sys.cache.shader;if(!p.has(f))return console.warn("Shader missing: "+f),this;this.shader=p.get(f)}else this.shader=f;var m=this.gl,y=this.renderer;this.program&&m.deleteProgram(this.program);var T=y.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);m.uniformMatrix4fv(m.getUniformLocation(T,"uViewMatrix"),!1,this.viewMatrix),m.uniformMatrix4fv(m.getUniformLocation(T,"uProjectionMatrix"),!1,this.projectionMatrix),m.uniform2f(m.getUniformLocation(T,"uResolution"),this.width,this.height),this.program=T;var C=new Date,S={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[C.getFullYear(),C.getMonth(),C.getDate(),C.getHours()*60*60+C.getMinutes()*60+C.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=o(!0,{},this.shader.uniforms,S):this.uniforms=S;for(var E=0;E<4;E++)v[E]&&this.setSampler2D("iChannel"+E,v[E],E,g);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(f){return this.pointer=f,this},projOrtho:function(f,v,g,p){var m=-1e3,y=1e3,T=1/(f-v),C=1/(g-p),S=1/(m-y),E=this.projectionMatrix;E[0]=-2*T,E[5]=-2*C,E[10]=2*S,E[12]=(f+v)*T,E[13]=(p+g)*C,E[14]=(y+m)*S;var P=this.program,M=this.gl,A=this.renderer;A.setProgram(P),M.uniformMatrix4fv(M.getUniformLocation(P,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=v,this._rendererHeight=g},initUniforms:function(){var f=this.gl,v=this.renderer.glFuncMap,g=this.program;this._textureCount=0;for(var p in this.uniforms){var m=this.uniforms[p],y=m.type,T=v[y];m.uniformLocation=f.getUniformLocation(g,p),y!=="sampler2D"&&(m.glMatrix=T.matrix,m.glValueLength=T.length,m.glFunc=T.func)}},setSampler2DBuffer:function(f,v,g,p,m,y){m===void 0&&(m=0),y===void 0&&(y={});var T=this.uniforms[f];return T.value=v,y.width=g,y.height=p,T.textureData=y,this._textureCount=m,this.initSampler2D(T),this},setSampler2D:function(f,v,g,p){g===void 0&&(g=0);var m=this.scene.sys.textures;if(m.exists(v)){var y=m.getFrame(v);if(y.glTexture&&y.glTexture.isRenderTexture)return this.setSampler2DBuffer(f,y.glTexture,y.width,y.height,g,p);var T=this.uniforms[f],C=y.source;T.textureKey=v,T.source=C.image,T.value=y.glTexture,C.isGLTexture&&(p||(p={}),p.width=C.width,p.height=C.height),p&&(T.textureData=p),this._textureCount=g,this.initSampler2D(T)}return this},setUniform:function(f,v){return r(this.uniforms,f,v),this},getUniform:function(f){return h(this.uniforms,f,null)},setChannel0:function(f,v){return this.setSampler2D("iChannel0",f,0,v)},setChannel1:function(f,v){return this.setSampler2D("iChannel1",f,1,v)},setChannel2:function(f,v){return this.setSampler2D("iChannel2",f,2,v)},setChannel3:function(f,v){return this.setSampler2D("iChannel3",f,3,v)},initSampler2D:function(f){if(!!f.value){var v=this.gl;v.activeTexture(v.TEXTURE0+this._textureCount),v.bindTexture(v.TEXTURE_2D,f.value);var g=f.textureData;if(g&&!f.value.isRenderTexture){var p=v[h(g,"magFilter","linear").toUpperCase()],m=v[h(g,"minFilter","linear").toUpperCase()],y=v[h(g,"wrapS","repeat").toUpperCase()],T=v[h(g,"wrapT","repeat").toUpperCase()],C=v[h(g,"format","rgba").toUpperCase()];if(g.repeat&&(y=v.REPEAT,T=v.REPEAT),v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,!!g.flipY),g.width){var S=h(g,"width",512),E=h(g,"height",2),P=h(g,"border",0);v.texImage2D(v.TEXTURE_2D,0,C,S,E,P,C,v.UNSIGNED_BYTE,null)}else v.texImage2D(v.TEXTURE_2D,0,C,v.RGBA,v.UNSIGNED_BYTE,f.source);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,p),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,m),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,y),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,T)}this.renderer.setProgram(this.program),v.uniform1i(f.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var f=this.gl,v=this.uniforms,g,p,m,y,T,C=0;for(var S in v)g=v[S],m=g.glFunc,p=g.glValueLength,y=g.uniformLocation,T=g.value,T!==null&&(p===1?g.glMatrix?m.call(f,y,g.transpose,T):m.call(f,y,T):p===2?m.call(f,y,T.x,T.y):p===3?m.call(f,y,T.x,T.y,T.z):p===4?m.call(f,y,T.x,T.y,T.z,T.w):g.type==="sampler2D"&&(f.activeTexture(f.TEXTURE0+C),f.bindTexture(f.TEXTURE_2D,T),f.uniform1i(y,C),C++))},load:function(f){var v=this.gl,g=this.width,p=this.height,m=this.renderer,y=this.program,T=this.viewMatrix;if(!this.renderToTexture){var C=-this._displayOriginX,S=-this._displayOriginY;T[0]=f[0],T[1]=f[1],T[4]=f[2],T[5]=f[3],T[8]=f[4],T[9]=f[5],T[12]=T[0]*C+T[4]*S,T[13]=T[1]*C+T[5]*S}v.useProgram(y),v.uniformMatrix4fv(v.getUniformLocation(y,"uViewMatrix"),!1,T),v.uniform2f(v.getUniformLocation(y,"uResolution"),this.width,this.height);var E=this.uniforms,P=E.resolution;P.value.x=g,P.value.y=p,E.time.value=m.game.loop.getDuration();var M=this.pointer;if(M){var A=E.mouse,R=M.x/g,O=1-M.y/p;A.value.x=R.toFixed(2),A.value.y=O.toFixed(2)}this.syncUniforms()},flush:function(){var f=this.width,v=this.height,g=this.program,p=this.gl,m=this.vertexBuffer,y=this.renderer,T=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(y.setFramebuffer(this.framebuffer),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT)),p.bindBuffer(p.ARRAY_BUFFER,m);var C=p.getAttribLocation(g,"inPosition");C!==-1&&(p.enableVertexAttribArray(C),p.vertexAttribPointer(C,2,p.FLOAT,!1,T,0));var S=this.vertexViewF32;S[3]=v,S[4]=f,S[5]=v,S[8]=f,S[9]=v,S[10]=f;var E=6;p.bufferSubData(p.ARRAY_BUFFER,0,this.bytes.subarray(0,E*T)),p.drawArrays(p.TRIANGLES,0,E),this.renderToTexture&&y.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var f=this.gl;f.deleteProgram(this.program),f.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});e.exports=l},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(36),h=t(116),o=t(15),r=t(479),a=t(480),d=t(19),l=t(69),f=t(1179),v=t(79),g=t(39),p=t(117),m=new s({Extends:o,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.Size,u.Texture,u.Transform,u.Visible,u.ScrollFactor,f],initialize:function(T,C,S,E,P,M,A,R,O,F,I,G){C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E="__WHITE"),o.call(this,T,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new l,this.viewPosition=new g,this.viewMatrix=new l,this.projectionMatrix=new l,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var z=T.sys.renderer;this.setPosition(C,S),this.setTexture(E,P),this.setSize(z.width,z.height),this.initPipeline(),this.setPerspective(z.width,z.height),M&&this.addVertices(M,A,R,O,F,I,G)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(y){return this.viewPosition.addScale(g.LEFT,y),this.dirtyCache[10]=1,this},panY:function(y){return this.viewPosition.y+=g.DOWN.y*y,this.dirtyCache[10]=1,this},panZ:function(y){return this.viewPosition.z+=y,this.dirtyCache[10]=1,this},setPerspective:function(y,T,C,S,E){return C===void 0&&(C=45),S===void 0&&(S=.01),E===void 0&&(E=1e3),this.projectionMatrix.perspective(n(C),y/T,S,E),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(y,T,C,S){return y===void 0&&(y=this.scene.sys.renderer.getAspectRatio()),T===void 0&&(T=1),C===void 0&&(C=-1e3),S===void 0&&(S=1e3),this.projectionMatrix.ortho(-y,y,-T,T,C,S),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(y){y.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(y,T,C,S,E,P,M,A,R){var O=this.scene.sys.cache.obj.get(y);return O&&a(O,this,T,C,S,E,P,M,A,R),this},sortByDepth:function(y,T){return y.depth-T.depth},depthSort:function(){return v(this.faces,this.sortByDepth),this},addVertex:function(y,T,C,S,E,P,M){var A=new p(y,T,C,S,E,P,M);return this.vertices.push(A),A},addFace:function(y,T,C){var S=new h(y,T,C);return this.faces.push(S),this.dirtyCache[9]=-1,S},addVertices:function(y,T,C,S,E,P,M){var A=r(y,T,C,S,E,P,M);return A&&(this.faces=this.faces.concat(A.faces),this.vertices=this.vertices.concat(A.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(y){return this.faces[y]},getFaceAt:function(y,T,C){C===void 0&&(C=this.scene.sys.cameras.main);for(var S=d(this,C).calc,E=this.faces,P=[],M=0;M<E.length;M++){var A=E[M];A.contains(y,T,S)&&P.push(A)}return v(P,this.sortByDepth)},setDebug:function(y,T){return this.debugGraphic=y,!y&&!T?this.debugCallback=null:T?this.debugCallback=T:this.debugCallback=this.renderDebug,this},isDirty:function(){var y=this.modelPosition,T=this.modelRotation,C=this.modelScale,S=this.dirtyCache,E=y.x,P=y.y,M=y.z,A=T.x,R=T.y,O=T.z,F=C.x,I=C.y,G=C.z,z=this.getFaceCount(),U=S[0],X=S[1],b=S[2],B=S[3],L=S[4],D=S[5],w=S[6],N=S[7],V=S[8],Y=S[9];return S[0]=E,S[1]=P,S[2]=M,S[3]=A,S[4]=R,S[5]=O,S[6]=F,S[7]=I,S[8]=G,S[9]=z,U!==E||X!==P||b!==M||B!==A||L!==R||D!==O||w!==F||N!==I||V!==G||Y!==z},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var y=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!y[10]&&!this.isDirty())){var T=this.width,C=this.height,S=this.viewMatrix,E=this.viewPosition;y[10]&&(S.identity(),S.translate(E),S.invert(),y[10]=0);var P=this.transformMatrix;P.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var M=E.z,A=this.faces,R=0;R<A.length;R++)A[R].transformCoordinatesLocal(P,T,C,M);this.depthSort()}},renderDebug:function(y,T){for(var C=y.debugGraphic,S=0;S<T.length;S++){var E=T[S],P=E.vertex1.tx,M=E.vertex1.ty,A=E.vertex2.tx,R=E.vertex2.ty,O=E.vertex3.tx,F=E.vertex3.ty;C.strokeTriangle(P,M,A,R,O,F)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});e.exports=m},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(50),u=function(n,h){return s(n.x,n.y,h.x,h.y)<=n.radius+h.radius};e.exports=u},function(e,c,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(233),n=function(h,o,r){if(r===void 0&&(r=[]),u(h,o)){var a=h.x1,d=h.y1,l=h.x2,f=h.y2,v=o.x,g=o.y,p=o.radius,m=l-a,y=f-d,T=a-v,C=d-g,S=m*m+y*y,E=2*(m*T+y*C),P=T*T+C*C-p*p,M=E*E-4*S*P,A,R;if(M===0){var O=-E/(2*S);A=a+O*m,R=d+O*y,O>=0&&O<=1&&r.push(new s(A,R))}else if(M>0){var F=(-E-Math.sqrt(M))/(2*S);A=a+F*m,R=d+F*y,F>=0&&F<=1&&r.push(new s(A,R));var I=(-E+Math.sqrt(M))/(2*S);A=a+I*m,R=d+I*y,I>=0&&I<=1&&r.push(new s(A,R))}}return r};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66),u=t(4),n=new u,h=function(o,r,a){if(a===void 0&&(a=n),s(r,o.x1,o.y1))return a.x=o.x1,a.y=o.y1,!0;if(s(r,o.x2,o.y2))return a.x=o.x2,a.y=o.y2,!0;var d=o.x2-o.x1,l=o.y2-o.y1,f=r.x-o.x1,v=r.y-o.y1,g=d*d+l*l,p=d,m=l;if(g>0){var y=(f*d+v*l)/g;p*=y,m*=y}a.x=o.x1+p,a.y=o.y1+m;var T=p*p+m*m;return T<=g&&p*d+m*l>=0&&s(r,a.x,a.y)};e.exports=h},function(e,c,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(96),n=t(488),h=function(o,r,a){if(a===void 0&&(a=[]),n(o,r))for(var d=r.getLineA(),l=r.getLineB(),f=r.getLineC(),v=r.getLineD(),g=[new s,new s,new s,new s],p=[u(d,o,g[0]),u(l,o,g[1]),u(f,o,g[2]),u(v,o,g[3])],m=0;m<4;m++)p[m]&&a.push(g[m]);return a};e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){n===void 0&&(n=!1),h===void 0&&(h=[]);for(var o=s.x3-s.x1,r=s.y3-s.y1,a=s.x2-s.x1,d=s.y2-s.y1,l=o*o+r*r,f=o*a+r*d,v=a*a+d*d,g=l*v-f*f,p=g===0?0:1/g,m,y,T,C,S,E,P=s.x1,M=s.y1,A=0;A<u.length&&(T=u[A].x-P,C=u[A].y-M,S=o*T+r*C,E=a*T+d*C,m=(v*S-f*E)*p,y=(l*E-f*S)*p,!(m>=0&&y>=0&&m+y<1&&(h.push({x:u[A].x,y:u[A].y}),n)));A++);return h};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){var o=Math.cos(h),r=Math.sin(h),a=s.x1-u,d=s.y1-n;return s.x1=a*o-d*r+u,s.y1=a*r+d*o+n,a=s.x2-u,d=s.y2-n,s.x2=a*o-d*r+u,s.y2=a*r+d*o+n,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.height===0?NaN:s.width/s.height};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){var o=Math.cos(h),r=Math.sin(h),a=s.x1-u,d=s.y1-n;return s.x1=a*o-d*r+u,s.y1=a*r+d*o+n,a=s.x2-u,d=s.y2-n,s.x2=a*o-d*r+u,s.y2=a*r+d*o+n,a=s.x3-u,d=s.y3-n,s.x3=a*o-d*r+u,s.y3=a*r+d*o+n,s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BUTTON_DOWN:t(1310),BUTTON_UP:t(1311),CONNECTED:t(1312),DISCONNECTED:t(1313),GAMEPAD_BUTTON_DOWN:t(1314),GAMEPAD_BUTTON_UP:t(1315)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17),u=t(156),n=function(h,o){var r=h===void 0?u():s({},h);if(o)for(var a in o)o[a]!==void 0&&(r[a]=o[a]);return r};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(2),r=t(7),a=t(408),d=new s({Extends:n,initialize:function(f,v,g,p){var m="xml";if(r(v)){var y=v;v=o(y,"key"),g=o(y,"url"),p=o(y,"xhrSettings"),m=o(y,"extension",m)}var T={type:"xml",cache:f.cacheManager.xml,extension:m,responseType:"text",key:v,url:g,xhrSettings:p};n.call(this,f,T)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=a(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});h.register("xml",function(l,f,v){if(Array.isArray(l))for(var g=0;g<l.length;g++)this.addFile(new d(this,l[g]));else this.addFile(new d(this,l,f,v));return this}),e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(2),r=t(7),a=new s({Extends:n,initialize:function(l,f,v,g){var p="text",m="txt",y=l.cacheManager.text;if(r(f)){var T=f;f=o(T,"key"),v=o(T,"url"),g=o(T,"xhrSettings"),m=o(T,"extension",m),p=o(T,"type",p),y=o(T,"cache",y)}var C={type:p,cache:y,extension:m,responseType:"text",key:f,url:v,xhrSettings:g};n.call(this,l,C)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("text",function(d,l,f){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new a(this,d[v]));else this.addFile(new a(this,d,l,f));return this}),e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Acceleration:t(1368),Angular:t(1369),Bounce:t(1370),Debug:t(1371),Drag:t(1372),Enable:t(1373),Friction:t(1374),Gravity:t(1375),Immovable:t(1376),Mass:t(1377),OverlapCirc:t(523),OverlapRect:t(244),Pushable:t(1378),Size:t(1379),Velocity:t(1380)}},function(e,c){var t=function(s,u,n,h,o,r,a){r===void 0&&(r=!0),a===void 0&&(a=!1);var d=[],l=[],f=s.treeMinMax;if(f.minX=u,f.minY=n,f.maxX=u+h,f.maxY=n+o,a&&(l=s.staticTree.search(f)),r&&s.useTree)d=s.tree.search(f);else if(r){var v=s.bodies,g={position:{x:u,y:n},left:u,top:n,right:u+h,bottom:n+o,isCircle:!1},p=s.intersects;v.iterate(function(m){p(m,g)&&d.push(m)})}return l.concat(d)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={COLLIDE:t(1381),OVERLAP:t(1382),PAUSE:t(1383),RESUME:t(1384),TILE_COLLIDE:t(1385),TILE_OVERLAP:t(1386),WORLD_BOUNDS:t(1387),WORLD_STEP:t(1388)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(62),u=function(n,h,o,r){var a=0,d=n.deltaAbsX()+h.deltaAbsX()+r;return n._dx===0&&h._dx===0?(n.embedded=!0,h.embedded=!0):n._dx>h._dx?(a=n.right-h.x,a>d&&!o||n.checkCollision.right===!1||h.checkCollision.left===!1?a=0:(n.touching.none=!1,n.touching.right=!0,h.touching.none=!1,h.touching.left=!0,h.physicsType===s.STATIC_BODY&&!o&&(n.blocked.none=!1,n.blocked.right=!0),n.physicsType===s.STATIC_BODY&&!o&&(h.blocked.none=!1,h.blocked.left=!0))):n._dx<h._dx&&(a=n.x-h.width-h.x,-a>d&&!o||n.checkCollision.left===!1||h.checkCollision.right===!1?a=0:(n.touching.none=!1,n.touching.left=!0,h.touching.none=!1,h.touching.right=!0,h.physicsType===s.STATIC_BODY&&!o&&(n.blocked.none=!1,n.blocked.left=!0),n.physicsType===s.STATIC_BODY&&!o&&(h.blocked.none=!1,h.blocked.right=!0))),n.overlapX=a,h.overlapX=a,a};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(62),u=function(n,h,o,r){var a=0,d=n.deltaAbsY()+h.deltaAbsY()+r;return n._dy===0&&h._dy===0?(n.embedded=!0,h.embedded=!0):n._dy>h._dy?(a=n.bottom-h.y,a>d&&!o||n.checkCollision.down===!1||h.checkCollision.up===!1?a=0:(n.touching.none=!1,n.touching.down=!0,h.touching.none=!1,h.touching.up=!0,h.physicsType===s.STATIC_BODY&&!o&&(n.blocked.none=!1,n.blocked.down=!0),n.physicsType===s.STATIC_BODY&&!o&&(h.blocked.none=!1,h.blocked.up=!0))):n._dy<h._dy&&(a=n.y-h.bottom,-a>d&&!o||n.checkCollision.up===!1||h.checkCollision.down===!1?a=0:(n.touching.none=!1,n.touching.up=!0,h.touching.none=!1,h.touching.down=!0,h.physicsType===s.STATIC_BODY&&!o&&(n.blocked.none=!1,n.blocked.up=!0),n.physicsType===s.STATIC_BODY&&!o&&(h.blocked.none=!1,h.blocked.down=!0))),n.overlapY=a,h.overlapY=a,a};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return!(u.right<=s.left||u.bottom<=s.top||u.position.x>=s.right||u.position.y>=s.bottom)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Bounce:t(1495),Collision:t(1496),Force:t(1497),Friction:t(1498),Gravity:t(1499),Mass:t(1500),Sensor:t(1501),SetBody:t(1502),Sleep:t(1503),Static:t(1520),Transform:t(1521),Velocity:t(1522)}},function(e,c){var t={};e.exports=t,function(){t.create=function(s,u){var n=s.bodyA,h=s.bodyB,o={id:t.id(n,h),bodyA:n,bodyB:h,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:n.isSensor||h.isSensor,timeCreated:u,timeUpdated:u,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return t.update(o,s,u),o},t.update=function(s,u,n){if(s.collision=u,u.collided){var h=u.supports,o=s.activeContacts,r=u.parentA,a=u.parentB;s.inverseMass=r.inverseMass+a.inverseMass,s.friction=Math.min(r.friction,a.friction),s.frictionStatic=Math.max(r.frictionStatic,a.frictionStatic),s.restitution=Math.max(r.restitution,a.restitution),s.slop=Math.max(r.slop,a.slop);for(var d=0;d<h.length;d++)o[d]=h[d].contact;var l=h.length;l<o.length&&(o.length=l),s.separation=u.depth,t.setActive(s,!0,n)}else s.isActive===!0&&t.setActive(s,!1,n)},t.setActive=function(s,u,n){u?(s.isActive=!0,s.timeUpdated=n):(s.isActive=!1,s.activeContacts.length=0)},t.id=function(s,u){return s.id<u.id?"A"+s.id+"B"+u.id:"A"+u.id+"B"+s.id}}()},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CalculateFacesAt:t(252),CalculateFacesWithin:t(63),CheckIsoBounds:t(541),Copy:t(1420),CreateFromTiles:t(1421),CullBounds:t(543),CullTiles:t(544),Fill:t(1422),FilterTiles:t(1423),FindByIndex:t(1424),FindTile:t(1425),ForEachTile:t(1426),GetCullTilesFunction:t(1427),GetTileAt:t(158),GetTileAtWorldXY:t(1428),GetTilesWithin:t(26),GetTilesWithinShape:t(1429),GetTilesWithinWorldXY:t(529),GetTileToWorldXFunction:t(1430),GetTileToWorldXYFunction:t(1431),GetTileToWorldYFunction:t(1432),GetWorldToTileXFunction:t(1433),GetWorldToTileXYFunction:t(1434),GetWorldToTileYFunction:t(1435),HasTileAt:t(562),HasTileAtWorldXY:t(1436),HexagonalCullBounds:t(546),HexagonalCullTiles:t(545),HexagonalTileToWorldXY:t(550),HexagonalTileToWorldY:t(554),HexagonalWorldToTileXY:t(556),HexagonalWorldToTileY:t(560),IsInLayerBounds:t(119),IsometricCullTiles:t(547),IsometricTileToWorldXY:t(551),IsometricWorldToTileXY:t(557),PutTileAt:t(257),PutTileAtWorldXY:t(1437),PutTilesAt:t(1438),Randomize:t(1439),RemoveTileAt:t(563),RemoveTileAtWorldXY:t(1440),RenderDebug:t(1441),ReplaceByIndex:t(542),RunCull:t(159),SetCollision:t(1442),SetCollisionBetween:t(1443),SetCollisionByExclusion:t(1444),SetCollisionByProperty:t(1445),SetCollisionFromCollisionGroup:t(1446),SetLayerCollisionIndex:t(160),SetTileCollision:t(72),SetTileIndexCallback:t(1447),SetTileLocationCallback:t(1448),Shuffle:t(1449),StaggeredCullBounds:t(549),StaggeredCullTiles:t(548),StaggeredTileToWorldXY:t(552),StaggeredTileToWorldY:t(555),StaggeredWorldToTileXY:t(558),StaggeredWorldToTileY:t(561),SwapByIndex:t(1450),TileToWorldX:t(253),TileToWorldXY:t(553),TileToWorldY:t(254),WeightedRandomize:t(1451),WorldToTileX:t(255),WorldToTileXY:t(559),WorldToTileY:t(256)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(158),u=function(n,h,o){var r=s(n,h,!0,o),a=s(n,h-1,!0,o),d=s(n,h+1,!0,o),l=s(n-1,h,!0,o),f=s(n+1,h,!0,o),v=r&&r.collides;return v&&(r.faceTop=!0,r.faceBottom=!0,r.faceLeft=!0,r.faceRight=!0),a&&a.collides&&(v&&(r.faceTop=!1),a.faceBottom=!v),d&&d.collides&&(v&&(r.faceBottom=!1),d.faceTop=!v),l&&l.collides&&(v&&(r.faceLeft=!1),l.faceRight=!v),f&&f.collides&&(v&&(r.faceRight=!1),f.faceLeft=!v),r&&!r.collides&&r.resetFaces(),r};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h=n.baseTileWidth,o=n.tilemapLayer,r=0;return o&&(u||(u=o.scene.cameras.main),r=o.x+u.scrollX*(1-o.scrollFactorX),h*=o.scaleX),r+s*h};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h=n.baseTileHeight,o=n.tilemapLayer,r=0;return o&&(u||(u=o.scene.cameras.main),r=o.y+u.scrollY*(1-o.scrollFactorY),h*=o.scaleY),r+s*h};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){u===void 0&&(u=!0);var o=h.baseTileWidth,r=h.tilemapLayer;return r&&(n||(n=r.scene.cameras.main),s=s-(r.x+n.scrollX*(1-r.scrollFactorX)),o*=r.scaleX),u?Math.floor(s/o):s/o};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){u===void 0&&(u=!0);var o=h.baseTileHeight,r=h.tilemapLayer;return r&&(n||(n=r.scene.cameras.main),s=s-(r.y+n.scrollY*(1-r.scrollFactorY)),o*=r.scaleY),u?Math.floor(s/o):s/o};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(85),u=t(119),n=t(252),h=t(72),o=function(r,a,d,l,f){if(l===void 0&&(l=!0),!u(a,d,f))return null;var v=f.data[d][a],g=v&&v.collides;if(r instanceof s)f.data[d][a]===null&&(f.data[d][a]=new s(f,r.index,a,d,f.tileWidth,f.tileHeight)),f.data[d][a].copy(r);else{var p=r;f.data[d][a]===null?f.data[d][a]=new s(f,p,a,d,f.tileWidth,f.tileHeight):f.data[d][a].index=p}var m=f.data[d][a],y=f.collideIndexes.indexOf(m.index)!==-1;return h(m,y),l&&g!==m.collides&&n(a,d,f),m};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=function(n){return n=n.toLowerCase(),n==="isometric"?s.ISOMETRIC:n==="staggered"?s.STAGGERED:n==="hexagonal"?s.HEXAGONAL:s.ORTHOGONAL};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40),u=t(120),n=t(121),h=t(85),o=function(r,a,d,l,f){for(var v=new u({tileWidth:d,tileHeight:l}),g=new n({name:r,tileWidth:d,tileHeight:l,format:s.ARRAY_2D,layers:[v]}),p=[],m=a.length,y=0,T=0;T<a.length;T++){p[T]=[];for(var C=a[T],S=0;S<C.length;S++){var E=parseInt(C[S],10);isNaN(E)||E===-1?p[T][S]=f?null:new h(v,-1,S,T,d,l):p[T][S]=new h(v,E,S,T,d,l)}y===0&&(y=C.length)}return g.width=v.width=y,g.height=v.height=m,g.widthInPixels=v.widthInPixels=y*d,g.heightInPixels=v.heightInPixels=m*l,v.data=p,g};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(571),u=t(261),n=function(r){return{x:r.x,y:r.y}},h=["id","name","type","rotation","properties","visible","x","y","width","height"],o=function(r,a,d){a===void 0&&(a=0),d===void 0&&(d=0);var l=s(r,h);if(l.x+=a,l.y+=d,r.gid){var f=u(r.gid);l.gid=f.gid,l.flippedHorizontal=f.flippedHorizontal,l.flippedVertical=f.flippedVertical,l.flippedAntiDiagonal=f.flippedAntiDiagonal}else r.polyline?l.polyline=r.polyline.map(n):r.polygon?l.polygon=r.polygon.map(n):r.ellipse?l.ellipse=r.ellipse:r.text?l.text=r.text:r.point?l.point=!0:l.rectangle=!0;return l};e.exports=o},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=2147483648,s=1073741824,u=536870912,n=function(h){var o=Boolean(h&t),r=Boolean(h&s),a=Boolean(h&u);h=h&~(t|s|u);var d=0,l=!1;return o&&r&&a?(d=Math.PI/2,l=!0):o&&r&&!a?(d=Math.PI,l=!1):o&&!r&&a?(d=Math.PI/2,l=!1):o&&!r&&!a?(d=0,l=!0):!o&&r&&a?(d=3*Math.PI/2,l=!1):!o&&r&&!a?(d=Math.PI,l=!0):!o&&!r&&a?(d=3*Math.PI/2,l=!0):!o&&!r&&!a&&(d=0,l=!1),{gid:h,flippedHorizontal:o,flippedVertical:r,flippedAntiDiagonal:a,rotation:d,flipped:l}};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40),u=t(121),n=t(564),h=t(580),o=function(r,a,d,l,f,v,g,p){d===void 0&&(d=32),l===void 0&&(l=32),f===void 0&&(f=10),v===void 0&&(v=10),p===void 0&&(p=!1);var m=null;if(Array.isArray(g)){var y=a!==void 0?a:"map";m=n(y,s.ARRAY_2D,g,d,l,p)}else if(a!==void 0){var T=r.cache.tilemap.get(a);T?m=n(a,T.format,T.data,d,l,p):console.warn("No map data found for key "+a)}return m===null&&(m=new u({tileWidth:d,tileHeight:l,width:f,height:v})),new h(r,m)};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u=function(n){var h=s(n,"targets",null);return h===null||(typeof h=="function"&&(h=h.call()),Array.isArray(h)||(h=[h])),h};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(o){return!!o.getActive&&typeof o.getActive=="function"}function s(o){return!!o.getStart&&typeof o.getStart=="function"}function u(o){return!!o.getEnd&&typeof o.getEnd=="function"}function n(o){return s(o)||u(o)||t(o)}var h=function(o,r){var a,d=function(E,P,M){return M},l=function(E,P,M){return M},f=null,v=typeof r;if(v==="number")d=function(){return r};else if(v==="string"){var g=r[0],p=parseFloat(r.substr(2));switch(g){case"+":d=function(E,P,M){return M+p};break;case"-":d=function(E,P,M){return M-p};break;case"*":d=function(E,P,M){return M*p};break;case"/":d=function(E,P,M){return M/p};break;default:d=function(){return parseFloat(r)}}}else if(v==="function")d=r;else if(v==="object")if(n(r))t(r)&&(f=r.getActive),u(r)&&(d=r.getEnd),s(r)&&(l=r.getStart);else if(r.hasOwnProperty("value"))a=h(o,r.value);else{var m=r.hasOwnProperty("to"),y=r.hasOwnProperty("from"),T=r.hasOwnProperty("start");if(m&&(y||T)){if(a=h(o,r.to),T){var C=h(o,r.start);a.getActive=C.getEnd}if(y){var S=h(o,r.from);a.getStart=S.getEnd}}}return a||(a={getActive:f,getEnd:d,getStart:l}),a};e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(267),h=t(16),o=t(5),r=t(100),a=t(14),d=new s({Extends:u,initialize:function(f,v,g){u.call(this),this.parent=f,this.parentIsTimeline=f.hasOwnProperty("isTimeline"),this.data=v,this.totalData=v.length,this.targets=g,this.totalTargets=g.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=r.PENDING_ADD,this._pausedState=r.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(l){return l===void 0&&(l=0),this.data[l].current},setTimeScale:function(l){return this.timeScale=l,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===r.ACTIVE},isPaused:function(){return this.state===r.PAUSED},hasTarget:function(l){return this.targets.indexOf(l)!==-1},updateTo:function(l,f,v){v===void 0&&(v=!1);for(var g=0;g<this.totalData;g++){var p=this.data[g];p.key===l&&(p.end=f,v&&(p.start=p.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===r.ACTIVE?this.seek(0):this.state===r.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===r.PENDING_ADD?this:this.play()},calcDuration:function(){for(var l=0,f=a.MAX_SAFE_INTEGER,v=this.data,g=0;g<this.totalData;g++){var p=v[g];p.t1=p.duration+p.hold,p.yoyo&&(p.t1+=p.duration),p.t2=p.t1+p.repeatDelay,p.totalDuration=p.delay+p.t1,p.repeat===-1?p.totalDuration+=p.t2*999999999999:p.repeat>0&&(p.totalDuration+=p.t2*p.repeat),p.totalDuration>l&&(l=p.totalDuration),p.delay<f&&(f=p.delay)}this.duration=Math.max(l,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=f},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=r.PENDING_ADD,this._pausedState=r.INIT,!1;for(var l=this.data,f=this.totalTargets,v=0;v<this.totalData;v++){var g=l[v],p=g.target,m=g.gen,y=g.key,T=g.index;g.delay=m.delay(p,y,0,T,f,this),g.duration=Math.max(m.duration(p,y,0,T,f,this),.001),g.hold=m.hold(p,y,0,T,f,this),g.repeat=m.repeat(p,y,0,T,f,this),g.repeatDelay=m.repeatDelay(p,y,0,T,f,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=r.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(n.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=r.LOOP_DELAY):(this.state=r.ACTIVE,this.dispatchTweenEvent(n.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=r.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===r.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=r.PAUSED,this)},play:function(l){l===void 0&&(l=!1);var f=this.state;return f===r.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=r.ACTIVE,this):f===r.ACTIVE||f===r.PENDING_ADD&&this._pausedState===r.PENDING_ADD?this:!this.parentIsTimeline&&(f===r.PENDING_REMOVE||f===r.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(l),this.calculatedOffset===0?this.state=r.ACTIVE:(this.countdown=this.calculatedOffset,this.state=r.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(l),this.state=r.ACTIVE,this.makeActive()),this)},resetTweenData:function(l){for(var f=this.data,v=this.totalData,g=this.totalTargets,p=0;p<v;p++){var m=f[p],y=m.target,T=m.key,C=m.index;m.progress=0,m.elapsed=0,m.repeatCounter=m.repeat===-1?999999999999:m.repeat,l?(m.start=m.getStartValue(y,T,m.start,C,g,this),m.end=m.getEndValue(y,T,m.end,C,g,this),m.current=m.start,m.state=r.PLAYING_FORWARD):m.state=r.PENDING_RENDER,m.delay>0&&(m.elapsed=m.delay,m.state=r.DELAY),m.getActiveValue&&(y[T]=m.getActiveValue(m.target,m.key,m.start))}},resume:function(){return this.state===r.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(l,f){f===void 0&&(f=16.6),this.state===r.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var v=this.data,g=this.totalTargets,p=0;p<this.totalData;p++){var m=v[p],y=m.target,T=m.gen,C=m.key,S=m.index;m.progress=0,m.elapsed=0,m.repeatCounter=m.repeat===-1?999999999999:m.repeat,m.delay=T.delay(y,C,0,S,g,this),m.duration=Math.max(T.duration(y,C,0,S,g,this),.001),m.hold=T.hold(y,C,0,S,g,this),m.repeat=T.repeat(y,C,0,S,g,this),m.repeatDelay=T.repeatDelay(y,C,0,S,g,this),m.current=m.start,m.state=r.PLAYING_FORWARD,this.updateTweenData(this,m,0,S,g),m.delay>0&&(m.elapsed=m.delay,m.state=r.DELAY)}this.calcDuration();var E=!1;this.state===r.PAUSED&&(E=!0,this.state=r.ACTIVE),this.isSeeking=!0;do this.update(0,f);while(this.totalProgress<l);return this.isSeeking=!1,E&&(this.state=r.PAUSED),this},setCallback:function(l,f,v,g){return this.callbacks[l]={func:f,scope:g,params:v},this},complete:function(l){return l===void 0&&(l=0),l?(this.state=r.COMPLETE_DELAY,this.countdown=l):(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(l){return this.state===r.ACTIVE&&l!==void 0&&this.seek(l),this.state!==r.REMOVED&&((this.state===r.PAUSED||this.state===r.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(n.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=r.PENDING_REMOVE),this},update:function(l,f){if(this.state===r.PAUSED)return!1;switch(this.useFrames&&(f=1*this.parent.timeScale),f*=this.timeScale,this.elapsed+=f,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=f,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case r.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=f,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(n.TWEEN_START,this.callbacks.onStart)));for(var v=!1,g=0;g<this.totalData;g++){var p=this.data[g];this.updateTweenData(this,p,f)&&(v=!0)}v||this.nextState();break;case r.LOOP_DELAY:this.countdown-=f,this.countdown<=0&&(this.state=r.ACTIVE,this.dispatchTweenEvent(n.TWEEN_LOOP,this.callbacks.onLoop));break;case r.OFFSET_DELAY:this.countdown-=f,this.countdown<=0&&(this.state=r.ACTIVE);break;case r.COMPLETE_DELAY:this.countdown-=f,this.countdown<=0&&(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===r.PENDING_REMOVE},dispatchTweenDataEvent:function(l,f,v){this.isSeeking||(this.emit(l,this,v.key,v.target,v.current,v.previous),f&&(f.params[1]=v.target,f.func.apply(f.scope,f.params)))},dispatchTweenEvent:function(l,f){this.isSeeking||(this.emit(l,this,this.targets),f&&(f.params[1]=this.targets,f.func.apply(f.scope,f.params)))},setStateFromEnd:function(l,f,v){return f.yoyo?(f.elapsed=v,f.progress=v/f.duration,f.flipX&&f.target.toggleFlipX(),f.flipY&&f.target.toggleFlipY(),this.dispatchTweenDataEvent(n.TWEEN_YOYO,l.callbacks.onYoyo,f),f.start=f.getStartValue(f.target,f.key,f.start,f.index,l.totalTargets,l),r.PLAYING_BACKWARD):f.repeatCounter>0?(f.repeatCounter--,f.elapsed=v,f.progress=v/f.duration,f.flipX&&f.target.toggleFlipX(),f.flipY&&f.target.toggleFlipY(),f.start=f.getStartValue(f.target,f.key,f.start,f.index,l.totalTargets,l),f.end=f.getEndValue(f.target,f.key,f.start,f.index,l.totalTargets,l),f.repeatDelay>0?(f.elapsed=f.repeatDelay-v,f.current=f.start,f.target[f.key]=f.current,r.REPEAT_DELAY):(this.dispatchTweenDataEvent(n.TWEEN_REPEAT,l.callbacks.onRepeat,f),r.PLAYING_FORWARD)):r.COMPLETE},setStateFromStart:function(l,f,v){return f.repeatCounter>0?(f.repeatCounter--,f.elapsed=v,f.progress=v/f.duration,f.flipX&&f.target.toggleFlipX(),f.flipY&&f.target.toggleFlipY(),f.end=f.getEndValue(f.target,f.key,f.start,f.index,l.totalTargets,l),f.repeatDelay>0?(f.elapsed=f.repeatDelay-v,f.current=f.start,f.target[f.key]=f.current,r.REPEAT_DELAY):(this.dispatchTweenDataEvent(n.TWEEN_REPEAT,l.callbacks.onRepeat,f),r.PLAYING_FORWARD)):r.COMPLETE},updateTweenData:function(l,f,v){var g=f.target;switch(f.state){case r.PLAYING_FORWARD:case r.PLAYING_BACKWARD:if(!g){f.state=r.COMPLETE;break}var p=f.elapsed,m=f.duration,y=0;p+=v,p>m&&(y=p-m,p=m);var T=f.state===r.PLAYING_FORWARD,C=p/m;if(f.elapsed=p,f.progress=C,f.previous=f.current,C===1)T?(f.current=f.end,g[f.key]=f.end,f.hold>0?(f.elapsed=f.hold-y,f.state=r.HOLD_DELAY):f.state=this.setStateFromEnd(l,f,y)):(f.current=f.start,g[f.key]=f.start,f.state=this.setStateFromStart(l,f,y));else{var S=T?f.ease(C):f.ease(1-C);f.current=f.start+(f.end-f.start)*S,g[f.key]=f.current}this.dispatchTweenDataEvent(n.TWEEN_UPDATE,l.callbacks.onUpdate,f);break;case r.DELAY:f.elapsed-=v,f.elapsed<=0&&(f.elapsed=Math.abs(f.elapsed),f.state=r.PENDING_RENDER);break;case r.REPEAT_DELAY:f.elapsed-=v,f.elapsed<=0&&(f.elapsed=Math.abs(f.elapsed),f.state=r.PLAYING_FORWARD,this.dispatchTweenDataEvent(n.TWEEN_REPEAT,l.callbacks.onRepeat,f));break;case r.HOLD_DELAY:f.elapsed-=v,f.elapsed<=0&&(f.state=this.setStateFromEnd(l,f,Math.abs(f.elapsed)));break;case r.PENDING_RENDER:g?(f.start=f.getStartValue(g,f.key,g[f.key],f.index,l.totalTargets,l),f.end=f.getEndValue(g,f.key,f.start,f.index,l.totalTargets,l),f.current=f.start,g[f.key]=f.start,f.state=r.PLAYING_FORWARD):f.state=r.COMPLETE;break}return f.state!==r.COMPLETE}});d.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],o.register("tween",function(l){return this.scene.sys.tweens.add(l)}),h.register("tween",function(l){return this.scene.sys.tweens.create(l)}),e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={TIMELINE_COMPLETE:t(1466),TIMELINE_LOOP:t(1467),TIMELINE_PAUSE:t(1468),TIMELINE_RESUME:t(1469),TIMELINE_START:t(1470),TIMELINE_UPDATE:t(1471),TWEEN_ACTIVE:t(1472),TWEEN_COMPLETE:t(1473),TWEEN_LOOP:t(1474),TWEEN_REPEAT:t(1475),TWEEN_START:t(1476),TWEEN_STOP:t(1477),TWEEN_UPDATE:t(1478),TWEEN_YOYO:t(1479)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h,o,r,a,d,l,f,v,g,p,m,y){return{target:s,index:u,key:n,getActiveValue:r,getEndValue:h,getStartValue:o,ease:a,duration:0,totalDuration:0,delay:0,yoyo:f,hold:0,repeat:0,repeatDelay:0,flipX:m,flipY:y,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:d,duration:l,hold:v,repeat:g,repeatDelay:p},state:0}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68),u=function(n){return s(n,-Math.PI,Math.PI)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68),u=function(n){return s(n,-180,180)};e.exports=u},function(e,c,t){var s={};e.exports=s;var u=t(83),n=t(32);(function(){s.fromVertices=function(h){for(var o={},r=0;r<h.length;r++){var a=(r+1)%h.length,d=u.normalise({x:h[a].y-h[r].y,y:h[r].x-h[a].x}),l=d.y===0?1/0:d.x/d.y;l=l.toFixed(3).toString(),o[l]=d}return n.values(o)},s.rotate=function(h,o){if(o!==0)for(var r=Math.cos(o),a=Math.sin(o),d=0;d<h.length;d++){var l=h[d],f;f=l.x*r-l.y*a,l.y=l.x*a+l.y*r,l.x=f}}})()},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AFTER_ADD:t(1504),AFTER_REMOVE:t(1505),AFTER_UPDATE:t(1506),BEFORE_ADD:t(1507),BEFORE_REMOVE:t(1508),BEFORE_UPDATE:t(1509),COLLISION_ACTIVE:t(1510),COLLISION_END:t(1511),COLLISION_START:t(1512),DRAG_END:t(1513),DRAG:t(1514),DRAG_START:t(1515),PAUSE:t(1516),RESUME:t(1517),SLEEP_END:t(1518),SLEEP_START:t(1519)}},function(e,c,t){var s={};e.exports=s;var u=t(274),n=t(250),h=t(84);(function(){s.collisions=function(o,r){for(var a=[],d=r.pairs.table,l=r.metrics,f=0;f<o.length;f++){var v=o[f][0],g=o[f][1];if(!((v.isStatic||v.isSleeping)&&(g.isStatic||g.isSleeping))&&!!s.canCollide(v.collisionFilter,g.collisionFilter)&&(l.midphaseTests+=1,h.overlaps(v.bounds,g.bounds)))for(var p=v.parts.length>1?1:0;p<v.parts.length;p++)for(var m=v.parts[p],y=g.parts.length>1?1:0;y<g.parts.length;y++){var T=g.parts[y];if(m===v&&T===g||h.overlaps(m.bounds,T.bounds)){var C=n.id(m,T),S=d[C],E;S&&S.isActive?E=S.collision:E=null;var P=u.collides(m,T,E);l.narrowphaseTests+=1,P.reused&&(l.narrowReuseCount+=1),P.collided&&(a.push(P),l.narrowDetections+=1)}}}return a},s.canCollide=function(o,r){return o.group===r.group&&o.group!==0?o.group>0:(o.mask&r.category)!=0&&(r.mask&o.category)!=0}})()},function(e,c,t){var s={};e.exports=s;var u=t(64),n=t(83);(function(){s.collides=function(h,o,r){var a,d,l,f,v=!1;if(r){var g=h.parent,p=o.parent,m=g.speed*g.speed+g.angularSpeed*g.angularSpeed+p.speed*p.speed+p.angularSpeed*p.angularSpeed;v=r&&r.collided&&m<.2,f=r}else f={collided:!1,bodyA:h,bodyB:o};if(r&&v){var y=f.axisBody,T=y===h?o:h,C=[y.axes[r.axisNumber]];if(l=s._overlapAxes(y.vertices,T.vertices,C),f.reused=!0,l.overlap<=0)return f.collided=!1,f}else{if(a=s._overlapAxes(h.vertices,o.vertices,h.axes),a.overlap<=0||(d=s._overlapAxes(o.vertices,h.vertices,o.axes),d.overlap<=0))return f.collided=!1,f;a.overlap<d.overlap?(l=a,f.axisBody=h):(l=d,f.axisBody=o),f.axisNumber=l.axisNumber}f.bodyA=h.id<o.id?h:o,f.bodyB=h.id<o.id?o:h,f.collided=!0,f.depth=l.overlap,f.parentA=f.bodyA.parent,f.parentB=f.bodyB.parent,h=f.bodyA,o=f.bodyB,n.dot(l.axis,n.sub(o.position,h.position))<0?f.normal={x:l.axis.x,y:l.axis.y}:f.normal={x:-l.axis.x,y:-l.axis.y},f.tangent=n.perp(f.normal),f.penetration=f.penetration||{},f.penetration.x=f.normal.x*f.depth,f.penetration.y=f.normal.y*f.depth;var S=s._findSupports(h,o,f.normal),E=[];if(u.contains(h.vertices,S[0])&&E.push(S[0]),u.contains(h.vertices,S[1])&&E.push(S[1]),E.length<2){var P=s._findSupports(o,h,n.neg(f.normal));u.contains(o.vertices,P[0])&&E.push(P[0]),E.length<2&&u.contains(o.vertices,P[1])&&E.push(P[1])}return E.length<1&&(E=[S[0]]),f.supports=E,f},s._overlapAxes=function(h,o,r){for(var a=n._temp[0],d=n._temp[1],l={overlap:Number.MAX_VALUE},f,v,g=0;g<r.length;g++){if(v=r[g],s._projectToAxis(a,h,v),s._projectToAxis(d,o,v),f=Math.min(a.max-d.min,d.max-a.min),f<=0)return l.overlap=f,l;f<l.overlap&&(l.overlap=f,l.axis=v,l.axisNumber=g)}return l},s._projectToAxis=function(h,o,r){for(var a=n.dot(o[0],r),d=a,l=1;l<o.length;l+=1){var f=n.dot(o[l],r);f>d?d=f:f<a&&(a=f)}h.min=a,h.max=d},s._findSupports=function(h,o,r){for(var a=Number.MAX_VALUE,d=n._temp[0],l=o.vertices,f=h.position,v,g,p,m,y=0;y<l.length;y++)g=l[y],d.x=g.x-f.x,d.y=g.y-f.y,v=-n.dot(r,d),v<a&&(a=v,p=g);var T=p.index-1>=0?p.index-1:l.length-1;g=l[T],d.x=g.x-f.x,d.y=g.y-f.y,a=-n.dot(r,d),m=g;var C=(p.index+1)%l.length;return g=l[C],d.x=g.x-f.x,d.y=g.y-f.y,v=-n.dot(r,d),v<a&&(m=g),[p,m]}})()},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AlignTo:t(601),Angle:t(602),Call:t(603),GetFirst:t(604),GetLast:t(605),GridAlign:t(606),IncAlpha:t(678),IncX:t(679),IncXY:t(680),IncY:t(681),PlaceOnCircle:t(682),PlaceOnEllipse:t(683),PlaceOnLine:t(684),PlaceOnRectangle:t(685),PlaceOnTriangle:t(686),PlayAnimation:t(687),PropertyValueInc:t(46),PropertyValueSet:t(27),RandomCircle:t(688),RandomEllipse:t(689),RandomLine:t(690),RandomRectangle:t(691),RandomTriangle:t(692),Rotate:t(693),RotateAround:t(694),RotateAroundDistance:t(695),ScaleX:t(696),ScaleXY:t(697),ScaleY:t(698),SetAlpha:t(699),SetBlendMode:t(700),SetDepth:t(701),SetHitArea:t(702),SetOrigin:t(703),SetRotation:t(704),SetScale:t(705),SetScaleX:t(706),SetScaleY:t(707),SetScrollFactor:t(708),SetScrollFactorX:t(709),SetScrollFactorY:t(710),SetTint:t(711),SetVisible:t(712),SetX:t(713),SetXY:t(714),SetY:t(715),ShiftPosition:t(716),Shuffle:t(717),SmootherStep:t(718),SmoothStep:t(719),Spread:t(720),ToggleVisible:t(721),WrapInRectangle:t(722)}},function(e,c,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(123),u=[];u[s.BOTTOM_CENTER]=t(277),u[s.BOTTOM_LEFT]=t(278),u[s.BOTTOM_RIGHT]=t(279),u[s.LEFT_BOTTOM]=t(280),u[s.LEFT_CENTER]=t(281),u[s.LEFT_TOP]=t(282),u[s.RIGHT_BOTTOM]=t(283),u[s.RIGHT_CENTER]=t(284),u[s.RIGHT_TOP]=t(285),u[s.TOP_CENTER]=t(286),u[s.TOP_LEFT]=t(287),u[s.TOP_RIGHT]=t(288);var n=function(h,o,r,a,d){return u[r](h,o,a,d)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(87),n=t(88),h=t(52),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(r,u(a)+d),h(r,s(a)+l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(43),n=t(53),h=t(52),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(r,u(a)-d),h(r,s(a)+l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(44),n=t(54),h=t(52),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(r,u(a)+d),h(r,s(a)+l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(43),n=t(55),h=t(54),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),h(r,u(a)-d),n(r,s(a)+l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(89),u=t(43),n=t(90),h=t(54),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),h(r,u(a)-d),n(r,s(a)+l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(43),u=t(45),n=t(54),h=t(52),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(r,s(a)-d),h(r,u(a)-l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(44),n=t(55),h=t(53),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),h(r,u(a)+d),n(r,s(a)+l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(89),u=t(44),n=t(90),h=t(53),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),h(r,u(a)+d),n(r,s(a)+l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44),u=t(45),n=t(53),h=t(52),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(r,s(a)+d),h(r,u(a)-l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(87),u=t(45),n=t(55),h=t(88),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),h(r,s(a)+d),n(r,u(a)-l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(43),u=t(45),n=t(55),h=t(53),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),h(r,s(a)-d),n(r,u(a)-l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44),u=t(45),n=t(55),h=t(54),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),h(r,s(a)+d),n(r,u(a)-l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(123),u=[];u[s.BOTTOM_CENTER]=t(290),u[s.BOTTOM_LEFT]=t(291),u[s.BOTTOM_RIGHT]=t(292),u[s.CENTER]=t(293),u[s.LEFT_CENTER]=t(295),u[s.RIGHT_CENTER]=t(296),u[s.TOP_CENTER]=t(297),u[s.TOP_LEFT]=t(298),u[s.TOP_RIGHT]=t(299),u[s.LEFT_BOTTOM]=u[s.BOTTOM_LEFT],u[s.LEFT_TOP]=u[s.TOP_LEFT],u[s.RIGHT_BOTTOM]=u[s.BOTTOM_RIGHT],u[s.RIGHT_TOP]=u[s.TOP_RIGHT];var n=function(h,o,r,a,d){return u[r](h,o,a,d)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(87),n=t(55),h=t(88),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),h(r,u(a)+d),n(r,s(a)+l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(43),n=t(55),h=t(53),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),h(r,u(a)-d),n(r,s(a)+l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(44),n=t(55),h=t(54),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),h(r,u(a)+d),n(r,s(a)+l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(294),u=t(87),n=t(89),h=function(o,r,a,d){return a===void 0&&(a=0),d===void 0&&(d=0),s(o,u(r)+a,n(r)+d),o};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(88),u=t(90),n=function(h,o,r){return s(h,o),u(h,r)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(89),u=t(43),n=t(90),h=t(53),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),h(r,u(a)-d),n(r,s(a)+l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(89),u=t(44),n=t(90),h=t(54),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),h(r,u(a)+d),n(r,s(a)+l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(87),u=t(45),n=t(88),h=t(52),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(r,s(a)+d),h(r,u(a)-l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(43),u=t(45),n=t(53),h=t(52),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(r,s(a)-d),h(r,u(a)-l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(44),u=t(45),n=t(54),h=t(52),o=function(r,a,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),n(r,s(a)+d),h(r,u(a)-l),r};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(169),u=t(98),n=t(14),h=t(4),o=function(r,a,d){d===void 0&&(d=new h);var l=u(a,0,n.PI2);return s(r,l,d)};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(302),u=t(169),n=t(98),h=t(14),o=function(r,a,d,l){l===void 0&&(l=[]),!a&&d>0&&(a=s(r)/d);for(var f=0;f<a;f++){var v=n(f/a,0,h.PI2);l.push(u(r,v))}return l};e.exports=o},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return 2*(Math.PI*s.radius)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=2,n={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(h){return h===void 0&&(h=1),this.alpha=h,this},alpha:{get:function(){return this._alpha},set:function(h){var o=s(h,0,1);this._alpha=o,o===0?this.renderFlags&=~u:this.renderFlags|=u}}};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u={_blendMode:s.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(n){typeof n=="string"&&(n=s[n]),n|=0,n>=-1&&(this._blendMode=n)}},setBlendMode:function(n){return this.blendMode=n,this}};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_depth:0,depth:{get:function(){return this._depth},set:function(s){this.displayList&&this.displayList.queueDepthSort(),this._depth=s}},setDepth:function(s){return s===void 0&&(s=0),this.depth=s,this}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(171),u=t(130),n=function(h,o,r,a){a===void 0&&(a=[]),!o&&r>0&&(o=u(h)/r);for(var d=0;d<o;d++){var l=d/o;a.push(s(h,l))}return a};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h,o){return o===void 0&&(o=new s),o.x=n.x1+(n.x2-n.x1)*h,o.y=n.y1+(n.y2-n.y1)*h,o};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){var o=Math.cos(h),r=Math.sin(h),a=s.x-u,d=s.y-n;return s.x=a*o-d*r+u,s.y=a*r+d*o+n,s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(310),u=t(311),n={mask:null,setMask:function(h){return this.mask=h,this},clearMask:function(h){return h===void 0&&(h=!1),h&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(h){return h===void 0&&(this.texture||this.shader)&&(h=this),new s(this.scene,h)},createGeometryMask:function(h){return h===void 0&&this.type==="Graphics"&&(h=this),new u(this.scene,h)}};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(22),n=t(91),h=new s({initialize:function(r,a){var d=r.sys.renderer;this.renderer=d,this.bitmapMask=a,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),r.sys.game.events.on(u.CONTEXT_RESTORED,this.createMask,this),d&&d.on(n.RESIZE,this.createMask,this)},createMask:function(){var o=this.renderer;if(!(!o||!o.gl)){this.mainTexture&&this.clearMask();var r=o.width,a=o.height,d=(r&r-1)==0&&(a&a-1)==0,l=o.gl,f=d?l.REPEAT:l.CLAMP_TO_EDGE,v=l.LINEAR;this.mainTexture=o.createTexture2D(0,v,v,f,f,l.RGBA,null,r,a),this.maskTexture=o.createTexture2D(0,v,v,f,f,l.RGBA,null,r,a),this.mainFramebuffer=o.createFramebuffer(r,a,this.mainTexture,!0),this.maskFramebuffer=o.createFramebuffer(r,a,this.maskTexture,!0)}},clearMask:function(){var o=this.renderer;!o||!o.gl||!this.mainTexture||(o.deleteTexture(this.mainTexture),o.deleteTexture(this.maskTexture),o.deleteFramebuffer(this.mainFramebuffer),o.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(o){this.bitmapMask=o},preRenderWebGL:function(o,r,a){o.pipelines.BITMAPMASK_PIPELINE.beginMask(this,r,a)},postRenderWebGL:function(o,r){o.pipelines.BITMAPMASK_PIPELINE.endMask(this,r)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(n.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(h,o){this.geometryMask=o,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(n){return this.geometryMask=n,this},setInvertAlpha:function(n){return n===void 0&&(n=!0),this.invertAlpha=n,this},preRenderWebGL:function(n,h,o){var r=n.gl;n.flush(),n.maskStack.length===0&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),n.maskCount=0),n.currentCameraMask.mask!==this&&(n.currentMask.mask=this),n.maskStack.push({mask:this,camera:o}),this.applyStencil(n,o,!0),n.maskCount++},applyStencil:function(n,h,o){var r=n.gl,a=this.geometryMask,d=n.maskCount;r.colorMask(!1,!1,!1,!1),o?(r.stencilFunc(r.EQUAL,d,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,d+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),a.renderWebGL(n,a,h),n.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),o?this.invertAlpha?r.stencilFunc(r.NOTEQUAL,d+1,255):r.stencilFunc(r.EQUAL,d+1,255):this.invertAlpha?r.stencilFunc(r.NOTEQUAL,d,255):r.stencilFunc(r.EQUAL,d,255)},postRenderWebGL:function(n){var h=n.gl;n.maskStack.pop(),n.maskCount--,n.flush();var o=n.currentMask;if(n.maskStack.length===0)o.mask=null,h.disable(h.STENCIL_TEST);else{var r=n.maskStack[n.maskStack.length-1];r.mask.applyStencil(n,r.camera,!1),n.currentCameraMask.mask!==r.mask?(o.mask=r.mask,o.camera=r.camera):o.mask=null}},preRenderCanvas:function(n,h,o){var r=this.geometryMask;n.currentContext.save(),r.renderCanvas(n,r,o,null,null,!0),n.currentContext.clip()},postRenderCanvas:function(n){n.currentContext.restore()},destroy:function(){this.geometryMask=null}});e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(s,u){return u===void 0&&(u=s),this.scrollFactorX=s,this.scrollFactorY=u,this}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(25),n=t(177),h=t(269),o=t(270),r=t(3),a=4,d={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(l){this._scaleX=l,this._scaleY=l,l===0?this.renderFlags&=~a:this.renderFlags|=a}},scaleX:{get:function(){return this._scaleX},set:function(l){this._scaleX=l,l===0?this.renderFlags&=~a:this.renderFlags|=a}},scaleY:{get:function(){return this._scaleY},set:function(l){this._scaleY=l,l===0?this.renderFlags&=~a:this.renderFlags|=a}},angle:{get:function(){return o(this._rotation*s.RAD_TO_DEG)},set:function(l){this.rotation=o(l)*s.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(l){this._rotation=h(l)}},setPosition:function(l,f,v,g){return l===void 0&&(l=0),f===void 0&&(f=l),v===void 0&&(v=0),g===void 0&&(g=0),this.x=l,this.y=f,this.z=v,this.w=g,this},copyPosition:function(l){return l.x!==void 0&&(this.x=l.x),l.y!==void 0&&(this.y=l.y),l.z!==void 0&&(this.z=l.z),l.w!==void 0&&(this.w=l.w),this},setRandomPosition:function(l,f,v,g){return l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=l+Math.random()*v,this.y=f+Math.random()*g,this},setRotation:function(l){return l===void 0&&(l=0),this.rotation=l,this},setAngle:function(l){return l===void 0&&(l=0),this.angle=l,this},setScale:function(l,f){return l===void 0&&(l=1),f===void 0&&(f=l),this.scaleX=l,this.scaleY=f,this},setX:function(l){return l===void 0&&(l=0),this.x=l,this},setY:function(l){return l===void 0&&(l=0),this.y=l,this},setZ:function(l){return l===void 0&&(l=0),this.z=l,this},setW:function(l){return l===void 0&&(l=0),this.w=l,this},getLocalTransformMatrix:function(l){return l===void 0&&(l=new u),l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(l,f){l===void 0&&(l=new u),f===void 0&&(f=new u);var v=this.parentContainer;if(!v)return this.getLocalTransformMatrix(l);for(l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);v;)f.applyITRS(v.x,v.y,v._rotation,v._scaleX,v._scaleY),f.multiply(l,l),v=v.parentContainer;return l},getLocalPoint:function(l,f,v,g){v||(v=new r),g||(g=this.scene.sys.cameras.main);var p=g.scrollX,m=g.scrollY,y=l+p*this.scrollFactorX-p,T=f+m*this.scrollFactorY-m;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(y,T,v):n(y,T,this.x,this.y,this.rotation,this.scaleX,this.scaleY,v),this._originComponent&&(v.x+=this._displayOriginX,v.y+=this._displayOriginY),v},getParentRotation:function(){for(var l=0,f=this.parentContainer;f;)l+=f.rotation,f=f.parentContainer;return l}};e.exports=d},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=1,s={_visible:!0,visible:{get:function(){return this._visible},set:function(u){u?(this._visible=!0,this.renderFlags|=t):(this._visible=!1,this.renderFlags&=~t)}},setVisible:function(u){return this.visible=u,this}};e.exports=s},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CHANGE_DATA:t(638),CHANGE_DATA_KEY:t(639),DESTROY:t(640),REMOVE_DATA:t(641),SET_DATA:t(642)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(130),u=t(4),n=function(h,o,r,a){if(a===void 0&&(a=[]),!o&&!r)return a;o?r=Math.round(s(h)/o):o=s(h)/r;for(var d=h.x,l=h.y,f=0,v=0;v<r;v++)switch(a.push(new u(d,l)),f){case 0:d+=o,d>=h.right&&(f=1,l+=d-h.right,d=h.right);break;case 1:l+=o,l>=h.bottom&&(f=2,d-=l-h.bottom,l=h.bottom);break;case 2:d-=o,d<=h.left&&(f=3,l-=h.left-d,d=h.left);break;case 3:l-=o,l<=h.top&&(f=0,l=h.top);break}return a};e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){u===void 0&&(u=1),n===void 0&&(n=[]);var h=Math.round(s.x1),o=Math.round(s.y1),r=Math.round(s.x2),a=Math.round(s.y2),d=Math.abs(r-h),l=Math.abs(a-o),f=h<r?1:-1,v=o<a?1:-1,g=d-l;n.push({x:h,y:o});for(var p=1;!(h===r&&o===a);){var m=g<<1;m>-l&&(g-=l,h+=f),m<d&&(g+=d,o+=v),p%u==0&&n.push({x:h,y:o}),p++}return n};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u.length){if(u.length===1)return u[0]}else return NaN;var h=1,o,r;if(n){if(s<u[0][n])return u[0];for(;u[h][n]<s;)h++}else for(;u[h]<s;)h++;return h>u.length&&(h=u.length),n?(o=u[h-1][n],r=u[h][n],r-s<=s-o?u[h]:u[h-1]):(o=u[h-1],r=u[h],r-s<=s-o?r:o)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(h,o,r,a,d){d===void 0&&(d=!1),this.textureKey=h,this.textureFrame=o,this.index=r,this.frame=a,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=d},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=/\D/g;return s.sort(function(n,h){return parseInt(n.replace(u,""),10)-parseInt(h.replace(u,""),10)}),s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(185),u=t(0),n=t(102),h=t(9),o=t(132),r=t(22),a=t(2),d=t(6),l=t(186),f=t(322),v=new u({Extends:h,initialize:function(p){h.call(this),this.game=p,this.textureManager=null,this.globalTimeScale=1,this.anims=new n,this.mixes=new n,this.paused=!1,this.name="AnimationManager",p.events.once(r.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(r.DESTROY,this.destroy,this)},addMix:function(g,p,m){var y=this.anims,T=this.mixes,C=typeof g=="string"?g:g.key,S=typeof p=="string"?p:p.key;if(y.has(C)&&y.has(S)){var E=T.get(C);E||(E={}),E[S]=m,T.set(C,E)}return this},removeMix:function(g,p){var m=this.mixes,y=typeof g=="string"?g:g.key,T=m.get(y);if(T)if(p){var C=typeof p=="string"?p:p.key;T.hasOwnProperty(C)&&delete T[C]}else p||m.delete(y);return this},getMix:function(g,p){var m=this.mixes,y=typeof g=="string"?g:g.key,T=typeof p=="string"?p:p.key,C=m.get(y);return C&&C.hasOwnProperty(T)?C[T]:0},add:function(g,p){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(p.key=g,this.anims.set(g,p),this.emit(o.ADD_ANIMATION,g,p),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,p){var m=[],y=this.game.cache.json.get(g);if(!y)return m;var T=this,C=d(y,"meta",null),S=d(y,"frames",null);if(C&&S){var E=d(C,"frameTags",[]);E.forEach(function(P){var M=[],A=a(P,"name",null),R=a(P,"from",0),O=a(P,"to",0),F=a(P,"direction","forward");if(!!A&&(!p||p&&p.indexOf(A)>-1)){for(var I=[],G=Number.MAX_SAFE_INTEGER,z=R;z<=O;z++){var U=z.toString(),X=S[U];if(X){var b=a(X,"duration",Number.MAX_SAFE_INTEGER);b<G&&(G=b),I.push({frame:U,duration:b})}}I.forEach(function(w){M.push({key:g,frame:w.frame,duration:G-w.duration})});var B=G*M.length;F==="reverse"&&(M=M.reverse());var L={key:A,frames:M,duration:B,yoyo:F==="pingpong"},D=T.create(L);D&&m.push(D)}})}return m},create:function(g){var p=g.key,m=!1;return p&&(m=this.get(p),m||(m=new s(this,p,g),this.anims.set(p,m),this.emit(o.ADD_ANIMATION,p,m))),m},fromJSON:function(g,p){p===void 0&&(p=!1),p&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var m=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var y=0;y<g.anims.length;y++)m.push(this.create(g.anims[y]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&m.push(this.create(g));return m},generateFrameNames:function(g,p){var m=d(p,"prefix",""),y=d(p,"start",0),T=d(p,"end",0),C=d(p,"suffix",""),S=d(p,"zeroPad",0),E=d(p,"outputArray",[]),P=d(p,"frames",!1),M=this.textureManager.get(g);if(!M)return E;var A;if(p)for(P||(P=f(y,T)),A=0;A<P.length;A++){var R=m+l(P[A],S,"0",1)+C;M.has(R)?E.push({key:g,frame:R}):console.warn("generateFrameNames: Frame missing: "+R+" from texture: "+g)}else for(P=M.getFrameNames(),A=0;A<P.length;A++)E.push({key:g,frame:P[A]});return E},generateFrameNumbers:function(g,p){var m=d(p,"start",0),y=d(p,"end",-1),T=d(p,"first",!1),C=d(p,"outputArray",[]),S=d(p,"frames",!1),E=this.textureManager.get(g);if(!E)return C;T&&E.has(T)&&C.push({key:g,frame:T}),S||(y===-1&&(y=E.frameTotal-2),S=f(m,y));for(var P=0;P<S.length;P++)E.has(S[P])?C.push({key:g,frame:S[P]}):console.warn("generateFrameNumbers: Frame "+P+" missing from texture: "+g);return C},get:function(g){return this.anims.get(g)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(o.PAUSE_ALL)),this},play:function(g,p){Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++)p[m].anims.play(g);return this},staggerPlay:function(g,p,m,y){m===void 0&&(m=0),y===void 0&&(y=!0),Array.isArray(p)||(p=[p]);var T=p.length;y||T--;for(var C=0;C<p.length;C++){var S=m<0?Math.abs(m)*(T-C):m*C;p[C].anims.playAfterDelay(g,S)}return this},remove:function(g){var p=this.get(g);return p&&(this.emit(o.REMOVE_ANIMATION,g,p),this.anims.delete(g),this.removeMix(g)),p},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(o.RESUME_ALL)),this},toJSON:function(g){var p={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?p.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(m,y){p.anims.push(y.toJSON())}),p},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});e.exports=v},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){var o=[],r,a=!1;if((n||h)&&(a=!0,n||(n=""),h||(h="")),u<s)for(r=s;r>=u;r--)a?o.push(n+r.toString()+h):o.push(r);else for(r=s;r<=u;r++)a?o.push(n+r.toString()+h):o.push(r);return o};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(102),n=t(9),h=t(324),o=new s({initialize:function(){this.entries=new u,this.events=new n},add:function(r,a){return this.entries.set(r,a),this.events.emit(h.ADD,this,r,a),this},has:function(r){return this.entries.has(r)},exists:function(r){return this.entries.has(r)},get:function(r){return this.entries.get(r)},remove:function(r){var a=this.get(r);return a&&(this.entries.delete(r),this.events.emit(h.REMOVE,this,r,a.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:t(736),REMOVE:t(737)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(323),u=t(0),n=t(22),h=new u({initialize:function(r){this.game=r,this.binary=new s,this.bitmapFont=new s,this.json=new s,this.physics=new s,this.shader=new s,this.audio=new s,this.video=new s,this.text=new s,this.html=new s,this.obj=new s,this.tilemap=new s,this.xml=new s,this.custom={},this.game.events.once(n.DESTROY,this.destroy,this)},addCustom:function(o){return this.custom.hasOwnProperty(o)||(this.custom[o]=new s),this.custom[o]},destroy:function(){for(var o=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],r=0;r<o.length;r++)this[o[r]].destroy(),this[o[r]]=null;for(var a in this.custom)this.custom[a].destroy();this.custom=null,this.game=null}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(133),u=t(190),n=t(18),h=t(0),o=t(11),r=t(333),a=t(37),d=t(135),l=t(10),f=t(3),v=new h({Extends:s,Mixins:[o.Flip,o.Tint,o.Pipeline],initialize:function(p,m,y,T){s.call(this,p,m,y,T),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new r.Fade(this),this.flashEffect=new r.Flash(this),this.shakeEffect=new r.Shake(this),this.panEffect=new r.Pan(this),this.rotateToEffect=new r.RotateTo(this),this.zoomEffect=new r.Zoom(this),this.lerp=new f(1,1),this.followOffset=new f,this.deadzone=null,this._follow=null},setDeadzone:function(g,p){if(g===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=g,this.deadzone.height=p):this.deadzone=new l(0,0,g,p),this._follow){var m=this.width/2,y=this.height/2,T=this._follow.x-this.followOffset.x,C=this._follow.y-this.followOffset.y;this.midPoint.set(T,C),this.scrollX=T-m,this.scrollY=C-y}u(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(g,p,m,y,T,C){return this.fadeEffect.start(!1,g,p,m,y,!0,T,C)},fadeOut:function(g,p,m,y,T,C){return this.fadeEffect.start(!0,g,p,m,y,!0,T,C)},fadeFrom:function(g,p,m,y,T,C,S){return this.fadeEffect.start(!1,g,p,m,y,T,C,S)},fade:function(g,p,m,y,T,C,S){return this.fadeEffect.start(!0,g,p,m,y,T,C,S)},flash:function(g,p,m,y,T,C,S){return this.flashEffect.start(g,p,m,y,T,C,S)},shake:function(g,p,m,y,T){return this.shakeEffect.start(g,p,m,y,T)},pan:function(g,p,m,y,T,C,S){return this.panEffect.start(g,p,m,y,T,C,S)},rotateTo:function(g,p,m,y,T,C,S){return this.rotateToEffect.start(g,p,m,y,T,C,S)},zoomTo:function(g,p,m,y,T,C){return this.zoomEffect.start(g,p,m,y,T,C)},preRender:function(){this.renderList.length=0;var g=this.width,p=this.height,m=g*.5,y=p*.5,T=this.zoom,C=this.matrix,S=g*this.originX,E=p*this.originY,P=this._follow,M=this.deadzone,A=this.scrollX,R=this.scrollY;M&&u(M,this.midPoint.x,this.midPoint.y);var O=!1;if(P&&!this.panEffect.isRunning){var F=P.x-this.followOffset.x,I=P.y-this.followOffset.y;M?(F<M.x?A=d(A,A-(M.x-F),this.lerp.x):F>M.right&&(A=d(A,A+(F-M.right),this.lerp.x)),I<M.y?R=d(R,R-(M.y-I),this.lerp.y):I>M.bottom&&(R=d(R,R+(I-M.bottom),this.lerp.y))):(A=d(A,F-S,this.lerp.x),R=d(R,I-E,this.lerp.y)),O=!0}this.useBounds&&(A=this.clampX(A),R=this.clampY(R)),this.roundPixels&&(S=Math.round(S),E=Math.round(E),A=Math.round(A),R=Math.round(R)),this.scrollX=A,this.scrollY=R;var G=A+m,z=R+y;this.midPoint.set(G,z);var U=g/T,X=p/T,b=G-U/2,B=z-X/2;this.roundPixels&&(b=Math.round(b),B=Math.round(B)),this.worldView.setTo(b,B,U,X),C.applyITRS(this.x+S,this.y+E,this.rotation,T,T),C.translate(-S,-E),this.shakeEffect.preRender(),O&&this.emit(a.FOLLOW_UPDATE,this,P)},setLerp:function(g,p){return g===void 0&&(g=1),p===void 0&&(p=g),this.lerp.set(g,p),this},setFollowOffset:function(g,p){return g===void 0&&(g=0),p===void 0&&(p=0),this.followOffset.set(g,p),this},startFollow:function(g,p,m,y,T,C){p===void 0&&(p=!1),m===void 0&&(m=1),y===void 0&&(y=m),T===void 0&&(T=0),C===void 0&&(C=T),this._follow=g,this.roundPixels=p,m=n(m,0,1),y=n(y,0,1),this.lerp.set(m,y),this.followOffset.set(T,C);var S=this.width/2,E=this.height/2,P=g.x-T,M=g.y-C;return this.midPoint.set(P,M),this.scrollX=P-S,this.scrollY=M-E,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(g,p){this.visible&&(this.rotateToEffect.update(g,p),this.panEffect.update(g,p),this.zoomEffect.update(g,p),this.shakeEffect.update(g,p),this.flashEffect.update(g,p),this.fadeEffect.update(g,p))},destroy:function(){this.resetFX(),s.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});e.exports=v},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38),u=function(n){var h=new s;n=n.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(l,f,v,g){return f+f+v+v+g+g});var o=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);if(o){var r=parseInt(o[1],16),a=parseInt(o[2],16),d=parseInt(o[3],16);h.setTo(r,a,d)}return h};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){return h<<24|s<<16|u<<8|n};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){h===void 0&&(h={h:0,s:0,v:0}),s/=255,u/=255,n/=255;var o=Math.min(s,u,n),r=Math.max(s,u,n),a=r-o,d=0,l=r===0?0:a/r,f=r;return r!==o&&(r===s?d=(u-n)/a+(u<n?6:0):r===u?d=(n-s)/a+2:r===n&&(d=(s-u)/a+4),d/=6),h.hasOwnProperty("_h")?(h._h=d,h._s=l,h._v=f):(h.h=d,h.s=l,h.v=f),h};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s>16777215?{a:s>>>24,r:s>>16&255,g:s>>8&255,b:s&255}:{a:255,r:s>>16&255,g:s>>8&255,b:s&255}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38),u=function(n){return new s(n.r,n.g,n.b,n.a)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38),u=function(n){var h=new s,o=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(n.toLowerCase());if(o){var r=parseInt(o[1],10),a=parseInt(o[2],10),d=parseInt(o[3],10),l=o[4]!==void 0?parseFloat(o[4]):1;h.setTo(r,a,d,l*255)}return h};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Fade:t(761),Flash:t(762),Pan:t(763),Shake:t(796),RotateTo:t(797),Zoom:t(798)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(764),Out:t(765),InOut:t(766)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(767),Out:t(768),InOut:t(769)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(770),Out:t(771),InOut:t(772)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(773),Out:t(774),InOut:t(775)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(776),Out:t(777),InOut:t(778)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(779),Out:t(780),InOut:t(781)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=t(782)},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(783),Out:t(784),InOut:t(785)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(786),Out:t(787),InOut:t(788)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(789),Out:t(790),InOut:t(791)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:t(792),Out:t(793),InOut:t(794)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=t(795)},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(33),n=t(347),h=t(2),o=t(6),r=t(7),a=t(193),d=t(1),l=t(197),f=t(187),v=new s({initialize:function(p){p===void 0&&(p={});var m=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],y="#ffffff";this.width=o(p,"width",1024),this.height=o(p,"height",768),this.zoom=o(p,"zoom",1),this.parent=o(p,"parent",void 0),this.scaleMode=o(p,"scaleMode",0),this.expandParent=o(p,"expandParent",!0),this.autoRound=o(p,"autoRound",!1),this.autoCenter=o(p,"autoCenter",0),this.resizeInterval=o(p,"resizeInterval",500),this.fullscreenTarget=o(p,"fullscreenTarget",null),this.minWidth=o(p,"minWidth",0),this.maxWidth=o(p,"maxWidth",0),this.minHeight=o(p,"minHeight",0),this.maxHeight=o(p,"maxHeight",0);var T=o(p,"scale",null);T&&(this.width=o(T,"width",this.width),this.height=o(T,"height",this.height),this.zoom=o(T,"zoom",this.zoom),this.parent=o(T,"parent",this.parent),this.scaleMode=o(T,"mode",this.scaleMode),this.expandParent=o(T,"expandParent",this.expandParent),this.autoRound=o(T,"autoRound",this.autoRound),this.autoCenter=o(T,"autoCenter",this.autoCenter),this.resizeInterval=o(T,"resizeInterval",this.resizeInterval),this.fullscreenTarget=o(T,"fullscreenTarget",this.fullscreenTarget),this.minWidth=o(T,"min.width",this.minWidth),this.maxWidth=o(T,"max.width",this.maxWidth),this.minHeight=o(T,"min.height",this.minHeight),this.maxHeight=o(T,"max.height",this.maxHeight)),this.renderType=o(p,"type",u.AUTO),this.canvas=o(p,"canvas",null),this.context=o(p,"context",null),this.canvasStyle=o(p,"canvasStyle",null),this.customEnvironment=o(p,"customEnvironment",!1),this.sceneConfig=o(p,"scene",null),this.seed=o(p,"seed",[(Date.now()*Math.random()).toString()]),a.RND=new a.RandomDataGenerator(this.seed),this.gameTitle=o(p,"title",""),this.gameURL=o(p,"url","https://phaser.io"),this.gameVersion=o(p,"version",""),this.autoFocus=o(p,"autoFocus",!0),this.domCreateContainer=o(p,"dom.createContainer",!1),this.domBehindCanvas=o(p,"dom.behindCanvas",!1),this.domPointerEvents=o(p,"dom.pointerEvents","none"),this.inputKeyboard=o(p,"input.keyboard",!0),this.inputKeyboardEventTarget=o(p,"input.keyboard.target",window),this.inputKeyboardCapture=o(p,"input.keyboard.capture",[]),this.inputMouse=o(p,"input.mouse",!0),this.inputMouseEventTarget=o(p,"input.mouse.target",null),this.inputMousePreventDefaultDown=o(p,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=o(p,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=o(p,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=o(p,"input.mouse.preventDefaultWheel",!0),this.inputTouch=o(p,"input.touch",n.input.touch),this.inputTouchEventTarget=o(p,"input.touch.target",null),this.inputTouchCapture=o(p,"input.touch.capture",!0),this.inputActivePointers=o(p,"input.activePointers",1),this.inputSmoothFactor=o(p,"input.smoothFactor",0),this.inputWindowEvents=o(p,"input.windowEvents",!0),this.inputGamepad=o(p,"input.gamepad",!1),this.inputGamepadEventTarget=o(p,"input.gamepad.target",window),this.disableContextMenu=o(p,"disableContextMenu",!1),this.audio=o(p,"audio",{}),this.hideBanner=o(p,"banner",null)===!1,this.hidePhaser=o(p,"banner.hidePhaser",!1),this.bannerTextColor=o(p,"banner.text",y),this.bannerBackgroundColor=o(p,"banner.background",m),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=o(p,"fps",null);var C=o(p,"render",p);this.pipeline=o(C,"pipeline",null),this.antialias=o(C,"antialias",!0),this.antialiasGL=o(C,"antialiasGL",!0),this.mipmapFilter=o(C,"mipmapFilter","LINEAR"),this.desynchronized=o(C,"desynchronized",!1),this.roundPixels=o(C,"roundPixels",!1),this.pixelArt=o(C,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=o(C,"transparent",!1),this.clearBeforeRender=o(C,"clearBeforeRender",!0),this.preserveDrawingBuffer=o(C,"preserveDrawingBuffer",!1),this.premultipliedAlpha=o(C,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=o(C,"failIfMajorPerformanceCaveat",!1),this.powerPreference=o(C,"powerPreference","default"),this.batchSize=o(C,"batchSize",4096),this.maxTextures=o(C,"maxTextures",-1),this.maxLights=o(C,"maxLights",10);var S=o(p,"backgroundColor",0);this.backgroundColor=f(S),this.transparent&&(this.backgroundColor=f(0),this.backgroundColor.alpha=0),this.preBoot=o(p,"callbacks.preBoot",d),this.postBoot=o(p,"callbacks.postBoot",d),this.physics=o(p,"physics",{}),this.defaultPhysicsSystem=o(this.physics,"default",!1),this.loaderBaseURL=o(p,"loader.baseURL",""),this.loaderPath=o(p,"loader.path","");var E=n.os.android?6:32;this.loaderMaxParallelDownloads=o(p,"loader.maxParallelDownloads",E),this.loaderCrossOrigin=o(p,"loader.crossOrigin",void 0),this.loaderResponseType=o(p,"loader.responseType",""),this.loaderAsync=o(p,"loader.async",!0),this.loaderUser=o(p,"loader.user",""),this.loaderPassword=o(p,"loader.password",""),this.loaderTimeout=o(p,"loader.timeout",0),this.loaderWithCredentials=o(p,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var P=o(p,"plugins",null),M=l.DefaultScene;P&&(Array.isArray(P)?this.defaultPlugins=P:r(P)&&(this.installGlobalPlugins=h(P,"global",[]),this.installScenePlugins=h(P,"scene",[]),Array.isArray(P.default)?M=P.default:Array.isArray(P.defaultMerge)&&(M=M.concat(P.defaultMerge)))),this.defaultPlugins=M;var A="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=o(p,"images.default",A+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=o(p,"images.missing",A+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=o(p,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=u.WEBGL:window.FORCE_CANVAS&&(this.renderType=u.CANVAS))}});e.exports=v},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={os:t(105),browser:t(136),features:t(191),input:t(808),audio:t(809),video:t(810),fullscreen:t(811),canvasFeatures:t(348)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u={supportInverseAlpha:!1,supportNewBlendModes:!1};function n(){var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",a="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",d=new Image;return d.onload=function(){var l=new Image;l.onload=function(){var f=s.create(l,6,1),v=f.getContext("2d");if(v.globalCompositeOperation="multiply",v.drawImage(d,0,0),v.drawImage(l,2,0),!v.getImageData(2,0,1,1))return!1;var g=v.getImageData(2,0,1,1).data;s.remove(l),u.supportNewBlendModes=g[0]===255&&g[1]===0&&g[2]===0},l.src=r+"/wCKxvRF"+a},d.src=r+"AP804Oa6"+a,!1}function h(){var r=s.create(this,2,1),a=r.getContext("2d");a.fillStyle="rgba(10, 20, 30, 0.5)",a.fillRect(0,0,1,1);var d=a.getImageData(0,0,1,1);if(d===null)return!1;a.putImageData(d,1,0);var l=a.getImageData(1,0,1,1);return l.data[0]===d.data[0]&&l.data[1]===d.data[1]&&l.data[2]===d.data[2]&&l.data[3]===d.data[3]}function o(){return typeof importScripts!="function"&&document!==void 0&&(u.supportNewBlendModes=n(),u.supportInverseAlpha=h()),u}e.exports=o()},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){return Math.atan2(h-u,n-s)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return Math.atan2(u.y-s.y,u.x-s.x)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s=s%(2*Math.PI),s>=0?s:s+2*Math.PI};e.exports=t},function(e,c){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.x-u.x,h=s.y-u.y;return Math.sqrt(n*n+h*h)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){var o=s-n,r=u-h;return o*o+r*r};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return n===void 0&&(n=1e-4),s>u-n};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return n===void 0&&(n=1e-4),s<u+n};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(357),u=function(n,h){return s(n)/s(h)/s(n-h)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){if(s===0)return 1;for(var u=s;--s;)u*=s;return u};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(o,r){var a=1-o;return a*a*a*r}function s(o,r){var a=1-o;return 3*a*a*o*r}function u(o,r){return 3*(1-o)*o*o*r}function n(o,r){return o*o*o*r}var h=function(o,r,a,d,l){return t(o,r)+s(o,a)+u(o,d)+n(o,l)};e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(h,o){var r=1-h;return r*r*o}function s(h,o){return 2*(1-h)*h*o}function u(h,o){return h*h*o}var n=function(h,o,r,a){return t(h,o)+s(h,r)+u(h,a)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(184),u=function(n,h,o){return h+(o-h)*s(n,0,1)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=Math.log(s)/.6931471805599453;return 1<<Math.ceil(u)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.x,h=s.y;return s.x=n*Math.cos(u)-h*Math.sin(u),s.y=n*Math.sin(u)+h*Math.cos(u),s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s>0?Math.ceil(s):Math.floor(s)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(h){this.val=new Float32Array(9),h?this.copy(h):this.identity()},clone:function(){return new u(this)},set:function(n){return this.copy(n)},copy:function(n){var h=this.val,o=n.val;return h[0]=o[0],h[1]=o[1],h[2]=o[2],h[3]=o[3],h[4]=o[4],h[5]=o[5],h[6]=o[6],h[7]=o[7],h[8]=o[8],this},fromMat4:function(n){var h=n.val,o=this.val;return o[0]=h[0],o[1]=h[1],o[2]=h[2],o[3]=h[4],o[4]=h[5],o[5]=h[6],o[6]=h[8],o[7]=h[9],o[8]=h[10],this},fromArray:function(n){var h=this.val;return h[0]=n[0],h[1]=n[1],h[2]=n[2],h[3]=n[3],h[4]=n[4],h[5]=n[5],h[6]=n[6],h[7]=n[7],h[8]=n[8],this},identity:function(){var n=this.val;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,this},transpose:function(){var n=this.val,h=n[1],o=n[2],r=n[5];return n[1]=n[3],n[2]=n[6],n[3]=h,n[5]=n[7],n[6]=o,n[7]=r,this},invert:function(){var n=this.val,h=n[0],o=n[1],r=n[2],a=n[3],d=n[4],l=n[5],f=n[6],v=n[7],g=n[8],p=g*d-l*v,m=-g*a+l*f,y=v*a-d*f,T=h*p+o*m+r*y;return T?(T=1/T,n[0]=p*T,n[1]=(-g*o+r*v)*T,n[2]=(l*o-r*d)*T,n[3]=m*T,n[4]=(g*h-r*f)*T,n[5]=(-l*h+r*a)*T,n[6]=y*T,n[7]=(-v*h+o*f)*T,n[8]=(d*h-o*a)*T,this):null},adjoint:function(){var n=this.val,h=n[0],o=n[1],r=n[2],a=n[3],d=n[4],l=n[5],f=n[6],v=n[7],g=n[8];return n[0]=d*g-l*v,n[1]=r*v-o*g,n[2]=o*l-r*d,n[3]=l*f-a*g,n[4]=h*g-r*f,n[5]=r*a-h*l,n[6]=a*v-d*f,n[7]=o*f-h*v,n[8]=h*d-o*a,this},determinant:function(){var n=this.val,h=n[0],o=n[1],r=n[2],a=n[3],d=n[4],l=n[5],f=n[6],v=n[7],g=n[8];return h*(g*d-l*v)+o*(-g*a+l*f)+r*(v*a-d*f)},multiply:function(n){var h=this.val,o=h[0],r=h[1],a=h[2],d=h[3],l=h[4],f=h[5],v=h[6],g=h[7],p=h[8],m=n.val,y=m[0],T=m[1],C=m[2],S=m[3],E=m[4],P=m[5],M=m[6],A=m[7],R=m[8];return h[0]=y*o+T*d+C*v,h[1]=y*r+T*l+C*g,h[2]=y*a+T*f+C*p,h[3]=S*o+E*d+P*v,h[4]=S*r+E*l+P*g,h[5]=S*a+E*f+P*p,h[6]=M*o+A*d+R*v,h[7]=M*r+A*l+R*g,h[8]=M*a+A*f+R*p,this},translate:function(n){var h=this.val,o=n.x,r=n.y;return h[6]=o*h[0]+r*h[3]+h[6],h[7]=o*h[1]+r*h[4]+h[7],h[8]=o*h[2]+r*h[5]+h[8],this},rotate:function(n){var h=this.val,o=h[0],r=h[1],a=h[2],d=h[3],l=h[4],f=h[5],v=Math.sin(n),g=Math.cos(n);return h[0]=g*o+v*d,h[1]=g*r+v*l,h[2]=g*a+v*f,h[3]=g*d-v*o,h[4]=g*l-v*r,h[5]=g*f-v*a,this},scale:function(n){var h=this.val,o=n.x,r=n.y;return h[0]=o*h[0],h[1]=o*h[1],h[2]=o*h[2],h[3]=r*h[3],h[4]=r*h[4],h[5]=r*h[5],this},fromQuat:function(n){var h=n.x,o=n.y,r=n.z,a=n.w,d=h+h,l=o+o,f=r+r,v=h*d,g=h*l,p=h*f,m=o*l,y=o*f,T=r*f,C=a*d,S=a*l,E=a*f,P=this.val;return P[0]=1-(m+T),P[3]=g+E,P[6]=p-S,P[1]=g-E,P[4]=1-(v+T),P[7]=y+C,P[2]=p+S,P[5]=y-C,P[8]=1-(v+m),this},normalFromMat4:function(n){var h=n.val,o=this.val,r=h[0],a=h[1],d=h[2],l=h[3],f=h[4],v=h[5],g=h[6],p=h[7],m=h[8],y=h[9],T=h[10],C=h[11],S=h[12],E=h[13],P=h[14],M=h[15],A=r*v-a*f,R=r*g-d*f,O=r*p-l*f,F=a*g-d*v,I=a*p-l*v,G=d*p-l*g,z=m*E-y*S,U=m*P-T*S,X=m*M-C*S,b=y*P-T*E,B=y*M-C*E,L=T*M-C*P,D=A*L-R*B+O*b+F*X-I*U+G*z;return D?(D=1/D,o[0]=(v*L-g*B+p*b)*D,o[1]=(g*X-f*L-p*U)*D,o[2]=(f*B-v*X+p*z)*D,o[3]=(d*B-a*L-l*b)*D,o[4]=(r*L-d*X+l*U)*D,o[5]=(a*X-r*B-l*z)*D,o[6]=(E*G-P*I+M*F)*D,o[7]=(P*O-S*G-M*R)*D,o[8]=(S*I-E*O+M*A)*D,this):null}});e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(364),n=t(1),h=t(39),o=1e-6,r=new Int8Array([1,2,0]),a=new Float32Array([0,0,0]),d=new h(1,0,0),l=new h(0,1,0),f=new h,v=new u,g=new s({initialize:function(m,y,T,C){this.onChangeCallback=n,this.set(m,y,T,C)},x:{get:function(){return this._x},set:function(p){this._x=p,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(p){this._y=p,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(p){this._z=p,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(p){this._w=p,this.onChangeCallback(this)}},copy:function(p){return this.set(p)},set:function(p,m,y,T,C){return C===void 0&&(C=!0),typeof p=="object"?(this._x=p.x||0,this._y=p.y||0,this._z=p.z||0,this._w=p.w||0):(this._x=p||0,this._y=m||0,this._z=y||0,this._w=T||0),C&&this.onChangeCallback(this),this},add:function(p){return this._x+=p.x,this._y+=p.y,this._z+=p.z,this._w+=p.w,this.onChangeCallback(this),this},subtract:function(p){return this._x-=p.x,this._y-=p.y,this._z-=p.z,this._w-=p.w,this.onChangeCallback(this),this},scale:function(p){return this._x*=p,this._y*=p,this._z*=p,this._w*=p,this.onChangeCallback(this),this},length:function(){var p=this.x,m=this.y,y=this.z,T=this.w;return Math.sqrt(p*p+m*m+y*y+T*T)},lengthSq:function(){var p=this.x,m=this.y,y=this.z,T=this.w;return p*p+m*m+y*y+T*T},normalize:function(){var p=this.x,m=this.y,y=this.z,T=this.w,C=p*p+m*m+y*y+T*T;return C>0&&(C=1/Math.sqrt(C),this._x=p*C,this._y=m*C,this._z=y*C,this._w=T*C),this.onChangeCallback(this),this},dot:function(p){return this.x*p.x+this.y*p.y+this.z*p.z+this.w*p.w},lerp:function(p,m){m===void 0&&(m=0);var y=this.x,T=this.y,C=this.z,S=this.w;return this.set(y+m*(p.x-y),T+m*(p.y-T),C+m*(p.z-C),S+m*(p.w-S))},rotationTo:function(p,m){var y=p.x*m.x+p.y*m.y+p.z*m.z;return y<-.999999?(f.copy(d).cross(p).length()<o&&f.copy(l).cross(p),f.normalize(),this.setAxisAngle(f,Math.PI)):y>.999999?this.set(0,0,0,1):(f.copy(p).cross(m),this._x=f.x,this._y=f.y,this._z=f.z,this._w=1+y,this.normalize())},setAxes:function(p,m,y){var T=v.val;return T[0]=m.x,T[3]=m.y,T[6]=m.z,T[1]=y.x,T[4]=y.y,T[7]=y.z,T[2]=-p.x,T[5]=-p.y,T[8]=-p.z,this.fromMat3(v).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(p,m){m=m*.5;var y=Math.sin(m);return this.set(y*p.x,y*p.y,y*p.z,Math.cos(m))},multiply:function(p){var m=this.x,y=this.y,T=this.z,C=this.w,S=p.x,E=p.y,P=p.z,M=p.w;return this.set(m*M+C*S+y*P-T*E,y*M+C*E+T*S-m*P,T*M+C*P+m*E-y*S,C*M-m*S-y*E-T*P)},slerp:function(p,m){var y=this.x,T=this.y,C=this.z,S=this.w,E=p.x,P=p.y,M=p.z,A=p.w,R=y*E+T*P+C*M+S*A;R<0&&(R=-R,E=-E,P=-P,M=-M,A=-A);var O=1-m,F=m;if(1-R>o){var I=Math.acos(R),G=Math.sin(I);O=Math.sin((1-m)*I)/G,F=Math.sin(m*I)/G}return this.set(O*y+F*E,O*T+F*P,O*C+F*M,O*S+F*A)},invert:function(){var p=this.x,m=this.y,y=this.z,T=this.w,C=p*p+m*m+y*y+T*T,S=C?1/C:0;return this.set(-p*S,-m*S,-y*S,T*S)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(p){p*=.5;var m=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(p),E=Math.cos(p);return this.set(m*E+C*S,y*E+T*S,T*E-y*S,C*E-m*S)},rotateY:function(p){p*=.5;var m=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(p),E=Math.cos(p);return this.set(m*E-T*S,y*E+C*S,T*E+m*S,C*E-y*S)},rotateZ:function(p){p*=.5;var m=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(p),E=Math.cos(p);return this.set(m*E+y*S,y*E-m*S,T*E+C*S,C*E-T*S)},calculateW:function(){var p=this.x,m=this.y,y=this.z;return this.w=-Math.sqrt(1-p*p-m*m-y*y),this},setFromEuler:function(p,m){var y=p.x/2,T=p.y/2,C=p.z/2,S=Math.cos(y),E=Math.cos(T),P=Math.cos(C),M=Math.sin(y),A=Math.sin(T),R=Math.sin(C);switch(p.order){case"XYZ":{this.set(M*E*P+S*A*R,S*A*P-M*E*R,S*E*R+M*A*P,S*E*P-M*A*R,m);break}case"YXZ":{this.set(M*E*P+S*A*R,S*A*P-M*E*R,S*E*R-M*A*P,S*E*P+M*A*R,m);break}case"ZXY":{this.set(M*E*P-S*A*R,S*A*P+M*E*R,S*E*R+M*A*P,S*E*P-M*A*R,m);break}case"ZYX":{this.set(M*E*P-S*A*R,S*A*P+M*E*R,S*E*R-M*A*P,S*E*P+M*A*R,m);break}case"YZX":{this.set(M*E*P+S*A*R,S*A*P+M*E*R,S*E*R-M*A*P,S*E*P-M*A*R,m);break}case"XZY":{this.set(M*E*P-S*A*R,S*A*P-M*E*R,S*E*R+M*A*P,S*E*P+M*A*R,m);break}}return this},setFromRotationMatrix:function(p){var m=p.val,y=m[0],T=m[4],C=m[8],S=m[1],E=m[5],P=m[9],M=m[2],A=m[6],R=m[10],O=y+E+R,F;return O>0?(F=.5/Math.sqrt(O+1),this.set((A-P)*F,(C-M)*F,(S-T)*F,.25/F)):y>E&&y>R?(F=2*Math.sqrt(1+y-E-R),this.set(.25*F,(T+S)/F,(C+M)/F,(A-P)/F)):E>R?(F=2*Math.sqrt(1+E-y-R),this.set((T+S)/F,.25*F,(P+A)/F,(C-M)/F)):(F=2*Math.sqrt(1+R-y-E),this.set((C+M)/F,(P+A)/F,.25*F,(S-T)/F)),this},fromMat3:function(p){var m=p.val,y=m[0]+m[4]+m[8],T;if(y>0)T=Math.sqrt(y+1),this.w=.5*T,T=.5/T,this._x=(m[7]-m[5])*T,this._y=(m[2]-m[6])*T,this._z=(m[3]-m[1])*T;else{var C=0;m[4]>m[0]&&(C=1),m[8]>m[C*3+C]&&(C=2);var S=r[C],E=r[S];T=Math.sqrt(m[C*3+C]-m[S*3+S]-m[E*3+E]+1),a[C]=.5*T,T=.5/T,a[S]=(m[S*3+C]+m[C*3+S])*T,a[E]=(m[E*3+C]+m[C*3+E])*T,this._x=a[0],this._y=a[1],this._z=a[2],this._w=(m[E*3+S]-m[S*3+E])*T}return this.onChangeCallback(this),this}});e.exports=g},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(367),u=t(31),n=t(33),h=t(191),o=function(r){var a=r.config;if((a.customEnvironment||a.canvas)&&a.renderType===n.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!a.customEnvironment&&!a.canvas&&a.renderType!==n.HEADLESS)if(a.renderType===n.CANVAS||a.renderType!==n.CANVAS&&!h.webGL)if(h.canvas)a.renderType=n.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else a.renderType=n.WEBGL;a.antialias||u.disableSmoothing();var d=r.scale.baseSize,l=d.width,f=d.height;if(a.canvas?(r.canvas=a.canvas,r.canvas.width=l,r.canvas.height=f):r.canvas=u.create(r,l,f,a.renderType),a.canvasStyle&&(r.canvas.style=a.canvasStyle),a.antialias||s.setCrisp(r.canvas),a.renderType!==n.HEADLESS){var v,g;v=t(368),g=t(371),a.renderType===n.WEBGL?r.renderer=new g(r):(r.renderer=new v(r),r.context=r.renderer.gameContext)}};e.exports=o},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setCrisp:function(s){var u=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return u.forEach(function(n){s.style["image-rendering"]=n}),s.style.msInterpolationMode="nearest-neighbor",s},setBicubic:function(s){return s.style["image-rendering"]="auto",s.style.msInterpolationMode="bicubic",s}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(37),u=t(369),n=t(0),h=t(33),o=t(9),r=t(91),a=t(370),d=t(104),l=t(106),f=t(25),v=new n({Extends:o,initialize:function(p){o.call(this);var m=p.config;this.config={clearBeforeRender:m.clearBeforeRender,backgroundColor:m.backgroundColor,antialias:m.antialias,roundPixels:m.roundPixels},this.game=p,this.type=h.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=p.canvas;var y={alpha:p.config.transparent,desynchronized:p.config.desynchronized};this.gameContext=m.context?m.context:this.gameCanvas.getContext("2d",y),this.currentContext=this.gameContext,this.antialias=p.config.antialias,this.blendModes=a(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new f,this._tempMatrix2=new f,this._tempMatrix3=new f,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(l.READY,this.boot,this)},boot:function(){var g=this.game,p=g.scale.baseSize;this.width=p.width,this.height=p.height,this.isBooted=!0,g.scale.on(d.RESIZE,this.onResize,this),this.resize(p.width,p.height)},onResize:function(g,p){(p.width!==this.width||p.height!==this.height)&&this.resize(p.width,p.height)},resize:function(g,p){this.width=g,this.height=p,this.emit(r.RESIZE,g,p)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,p=this.config,m=this.width,y=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),p.clearBeforeRender&&(g.clearRect(0,0,m,y),p.transparent||(g.fillStyle=p.backgroundColor.rgba,g.fillRect(0,0,m,y))),g.save(),this.drawCount=0,this.emit(r.PRE_RENDER)},render:function(g,p,m){var y=p.length;this.emit(r.RENDER,g,m);var T=m.x,C=m.y,S=m.width,E=m.height,P=m.renderToTexture?m.context:g.sys.context;P.save(),this.game.scene.customViewports&&(P.beginPath(),P.rect(T,C,S,E),P.clip()),this.currentContext=P;var M=m.mask;M&&M.preRenderCanvas(this,null,m._maskCamera),m.transparent||(P.fillStyle=m.backgroundColor.rgba,P.fillRect(T,C,S,E)),P.globalAlpha=m.alpha,P.globalCompositeOperation="source-over",this.drawCount+=y,m.renderToTexture&&m.emit(s.PRE_RENDER,m),m.matrix.copyToContext(P);for(var A=0;A<y;A++){var R=p[A];R.mask&&R.mask.preRenderCanvas(this,R,m),R.renderCanvas(this,R,m),R.mask&&R.mask.postRenderCanvas(this,R,m)}P.setTransform(1,0,0,1,0,0),P.globalCompositeOperation="source-over",P.globalAlpha=1,m.flashEffect.postRenderCanvas(P),m.fadeEffect.postRenderCanvas(P),m.dirty=!1,M&&M.postRenderCanvas(this),P.restore(),m.renderToTexture&&(m.emit(s.POST_RENDER,m),m.renderToGame&&g.sys.context.drawImage(m.canvas,T,C))},postRender:function(){var g=this.gameContext;g.restore(),this.emit(r.POST_RENDER);var p=this.snapshotState;p.callback&&(u(this.gameCanvas,p),p.callback=null)},snapshotCanvas:function(g,p,m,y,T,C,S,E,P){m===void 0&&(m=!1),this.snapshotArea(y,T,C,S,p,E,P);var M=this.snapshotState;return M.getPixel=m,u(this.canvas,M),M.callback=null,this},snapshot:function(g,p,m){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,p,m)},snapshotArea:function(g,p,m,y,T,C,S){var E=this.snapshotState;return E.callback=T,E.type=C,E.encoder=S,E.getPixel=!1,E.x=g,E.y=p,E.width=Math.min(m,this.gameCanvas.width),E.height=Math.min(y,this.gameCanvas.height),this},snapshotPixel:function(g,p,m){return this.snapshotArea(g,p,1,1,m),this.snapshotState.getPixel=!0,this},batchSprite:function(g,p,m,y){var T=m.alpha*g.alpha;if(T!==0){var C=this.currentContext,S=this._tempMatrix1,E=this._tempMatrix2,P=p.canvasData,M=P.x,A=P.y,R=p.cutWidth,O=p.cutHeight,F=p.customPivot,I=p.source.resolution,G=g.displayOriginX,z=g.displayOriginY,U=-G+p.x,X=-z+p.y;if(g.isCropped){var b=g._crop;(b.flipX!==g.flipX||b.flipY!==g.flipY)&&p.updateCropUVs(b,g.flipX,g.flipY),R=b.cw,O=b.ch,M=b.cx,A=b.cy,U=-G+b.x,X=-z+b.y,g.flipX&&(U>=0?U=-(U+R):U<0&&(U=Math.abs(U)-R)),g.flipY&&(X>=0?X=-(X+O):X<0&&(X=Math.abs(X)-O))}var B=1,L=1;g.flipX&&(F||(U+=-p.realWidth+G*2),B=-1),g.flipY&&(F||(X+=-p.realHeight+z*2),L=-1),E.applyITRS(g.x,g.y,g.rotation,g.scaleX*B,g.scaleY*L),S.copyFrom(m.matrix),y?(S.multiplyWithOffset(y,-m.scrollX*g.scrollFactorX,-m.scrollY*g.scrollFactorY),E.e=g.x,E.f=g.y):(E.e-=m.scrollX*g.scrollFactorX,E.f-=m.scrollY*g.scrollFactorY),S.multiply(E),C.save(),S.setToContext(C),C.globalCompositeOperation=this.blendModes[g.blendMode],C.globalAlpha=T,C.imageSmoothingEnabled=!(!this.antialias||p.source.scaleMode),g.mask&&g.mask.preRenderCanvas(this,g,m),C.drawImage(p.source.image,M,A,R,O,U,X,R/I,O/I),g.mask&&g.mask.postRenderCanvas(this,g,m),C.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});e.exports=v},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=t(38),n=t(2),h=function(o,r){var a=n(r,"callback"),d=n(r,"type","image/png"),l=n(r,"encoder",.92),f=Math.abs(Math.round(n(r,"x",0))),v=Math.abs(Math.round(n(r,"y",0))),g=n(r,"width",o.width),p=n(r,"height",o.height),m=n(r,"getPixel",!1);if(m){var y=o.getContext("2d"),T=y.getImageData(f,v,1,1),C=T.data;a.call(null,new u(C[0],C[1],C[2],C[3]/255))}else if(f!==0||v!==0||g!==o.width||p!==o.height){var S=s.createWebGL(this,g,p),E=S.getContext("2d");E.drawImage(o,f,v,g,p,0,0,g,p);var P=new Image;P.onerror=function(){a.call(null),s.remove(S)},P.onload=function(){a.call(null,P),s.remove(S)},P.src=S.toDataURL(d,l)}else{var M=new Image;M.onerror=function(){a.call(null)},M.onload=function(){a.call(null,M)},M.src=o.toDataURL(d,l)}};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(348),n=function(){var h=[],o=u.supportNewBlendModes,r="source-over";return h[s.NORMAL]=r,h[s.ADD]="lighter",h[s.MULTIPLY]=o?"multiply":r,h[s.SCREEN]=o?"screen":r,h[s.OVERLAY]=o?"overlay":r,h[s.DARKEN]=o?"darken":r,h[s.LIGHTEN]=o?"lighten":r,h[s.COLOR_DODGE]=o?"color-dodge":r,h[s.COLOR_BURN]=o?"color-burn":r,h[s.HARD_LIGHT]=o?"hard-light":r,h[s.SOFT_LIGHT]=o?"soft-light":r,h[s.DIFFERENCE]=o?"difference":r,h[s.EXCLUSION]=o?"exclusion":r,h[s.HUE]=o?"hue":r,h[s.SATURATION]=o?"saturation":r,h[s.COLOR]=o?"color":r,h[s.LUMINOSITY]=o?"luminosity":r,h[s.ERASE]="destination-out",h[s.SOURCE_IN]="source-in",h[s.SOURCE_OUT]="source-out",h[s.SOURCE_ATOP]="source-atop",h[s.DESTINATION_OVER]="destination-over",h[s.DESTINATION_IN]="destination-in",h[s.DESTINATION_OUT]="destination-out",h[s.DESTINATION_ATOP]="destination-atop",h[s.LIGHTER]="lighter",h[s.COPY]="copy",h[s.XOR]="xor",h};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93),u=t(37),n=t(0),h=t(33),o=t(9),r=t(91),a=t(22),d=t(138),l=t(69),f=t(1),v=t(372),g=t(141),p=t(104),m=t(106),y=t(12),T=t(383),C=new n({Extends:o,initialize:function(E){o.call(this);var P=E.config,M={alpha:P.transparent,desynchronized:P.desynchronized,depth:!1,antialias:P.antialiasGL,premultipliedAlpha:P.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:P.failIfMajorPerformanceCaveat,powerPreference:P.powerPreference,preserveDrawingBuffer:P.preserveDrawingBuffer};this.config={clearBeforeRender:P.clearBeforeRender,antialias:P.antialias,backgroundColor:P.backgroundColor,contextCreation:M,roundPixels:P.roundPixels,maxTextures:P.maxTextures,maxTextureSize:P.maxTextureSize,batchSize:P.batchSize,maxLights:P.maxLights,mipmapFilter:P.mipmapFilter},this.game=E,this.type=h.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=E.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=f,this.contextRestoredHandler=f,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(S){var E,P=this.game,M=this.canvas,A=S.backgroundColor;if(P.config.context?E=P.config.context:E=M.getContext("webgl",S.contextCreation)||M.getContext("experimental-webgl",S.contextCreation),!E||E.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=E;var R=this;this.contextLostHandler=function(D){R.contextLost=!0,R.game.events.emit(a.CONTEXT_LOST,R),D.preventDefault()},this.contextRestoredHandler=function(){R.contextLost=!1,R.init(R.config),R.game.events.emit(a.CONTEXT_RESTORED,R)},M.addEventListener("webglcontextlost",this.contextLostHandler,!1),M.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),P.context=E;for(var O=0;O<=27;O++)this.blendModes.push({func:[E.ONE,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_ADD});this.blendModes[1].func=[E.ONE,E.DST_ALPHA],this.blendModes[2].func=[E.DST_COLOR,E.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[E.ONE,E.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[E.ZERO,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=E.BYTE,this.glFormats[1]=E.SHORT,this.glFormats[2]=E.UNSIGNED_BYTE,this.glFormats[3]=E.UNSIGNED_SHORT,this.glFormats[4]=E.FLOAT,this.glFuncMap={mat2:{func:E.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:E.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:E.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:E.uniform1f,length:1},"1fv":{func:E.uniform1fv,length:1},"1i":{func:E.uniform1i,length:1},"1iv":{func:E.uniform1iv,length:1},"2f":{func:E.uniform2f,length:2},"2fv":{func:E.uniform2fv,length:1},"2i":{func:E.uniform2i,length:2},"2iv":{func:E.uniform2iv,length:1},"3f":{func:E.uniform3f,length:3},"3fv":{func:E.uniform3fv,length:1},"3i":{func:E.uniform3i,length:3},"3iv":{func:E.uniform3iv,length:1},"4f":{func:E.uniform4f,length:4},"4fv":{func:E.uniform4fv,length:1},"4i":{func:E.uniform4i,length:4},"4iv":{func:E.uniform4iv,length:1}};var F=E.getSupportedExtensions();(!S.maxTextures||S.maxTextures===-1)&&(S.maxTextures=E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS)),S.maxTextureSize||(S.maxTextureSize=E.getParameter(E.MAX_TEXTURE_SIZE));var I="WEBGL_compressed_texture_",G="WEBKIT_"+I;this.compression.ETC1=E.getExtension(I+"etc1")||E.getExtension(G+"etc1"),this.compression.PVRTC=E.getExtension(I+"pvrtc")||E.getExtension(G+"pvrtc"),this.compression.S3TC=E.getExtension(I+"s3tc")||E.getExtension(G+"s3tc"),this.supportedExtensions=F;var z="ANGLE_instanced_arrays";this.instancedArraysExtension=F.indexOf(z)>-1?E.getExtension(z):null;var U="OES_vertex_array_object";this.vaoExtension=F.indexOf(U)>-1?E.getExtension(U):null,E.disable(E.DEPTH_TEST),E.disable(E.CULL_FACE),E.enable(E.BLEND),E.clearColor(A.redGL,A.greenGL,A.blueGL,A.alphaGL),this.mipmapFilter=E[S.mipmapFilter],this.maxTextures=y.checkShaderMax(E,S.maxTextures),this.textureIndexes=[];var X=this.tempTextures;if(Array.isArray(X))for(var b=0;O<this.maxTextures;b++)E.deleteTexture(X[b]);else X=new Array(this.maxTextures);for(var B=0;B<this.maxTextures;B++){var L=E.createTexture();E.activeTexture(E.TEXTURE0+B),E.bindTexture(E.TEXTURE_2D,L),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),X[B]=L,this.textureIndexes.push(B)}return this.tempTextures=X,this.currentActiveTexture=1,this.startActiveTexture++,E.activeTexture(E.TEXTURE1),this.pipelines=new v(this),this.setBlendMode(h.BlendModes.NORMAL),this.projectionMatrix=new l().identity(),P.textures.once(m.READY,this.boot,this),this},boot:function(){var S=this.game,E=this.pipelines,P=S.scale.baseSize;this.width=P.width,this.height=P.height,this.isBooted=!0,this.renderTarget=new g(this,this.width,this.height,1,0,!0,!0),E.boot(S.config.pipeline),this.blankTexture=S.textures.getFrame("__DEFAULT"),this.whiteTexture=S.textures.getFrame("__WHITE");var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,null),M.enable(M.SCISSOR_TEST),S.scale.on(p.RESIZE,this.onResize,this),this.resize(P.width,P.height)},onResize:function(S,E){(E.width!==this.width||E.height!==this.height)&&this.resize(E.width,E.height)},beginCapture:function(S,E){S===void 0&&(S=this.width),E===void 0&&(E=this.height),this.renderTarget.bind(!0,S,E),this.setProjectionMatrix(S,E),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(S,E){var P=this.gl;return this.width=S,this.height=E,this.setProjectionMatrix(S,E),P.viewport(0,0,S,E),this.drawingBufferHeight=P.drawingBufferHeight,P.scissor(0,P.drawingBufferHeight-E,S,E),this.defaultScissor[2]=S,this.defaultScissor[3]=E,this.emit(r.RESIZE,S,E),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(S,E){return(S!==this.projectionWidth||E!==this.projectionHeight)&&(this.projectionWidth=S,this.projectionHeight=E,this.projectionMatrix.ortho(0,S,E,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(S){return this.supportedExtensions?this.supportedExtensions.indexOf(S):!1},getExtension:function(S){return this.hasExtension(S)?(S in this.extensions||(this.extensions[S]=this.gl.getExtension(S)),this.extensions[S]):null},flush:function(){this.pipelines.flush()},pushScissor:function(S,E,P,M,A){A===void 0&&(A=this.drawingBufferHeight);var R=this.scissorStack,O=[S,E,P,M];return R.push(O),this.setScissor(S,E,P,M,A),this.currentScissor=O,O},setScissor:function(S,E,P,M,A){A===void 0&&(A=this.drawingBufferHeight);var R=this.gl,O=this.currentScissor,F=P>0&&M>0;if(O&&F){var I=O[0],G=O[1],z=O[2],U=O[3];F=I!==S||G!==E||z!==P||U!==M}F&&(this.flush(),R.scissor(S,A-E-M,P,M))},resetScissor:function(){var S=this.gl;S.enable(S.SCISSOR_TEST);var E=this.currentScissor;if(E){var P=E[0],M=E[1],A=E[2],R=E[3];A>0&&R>0&&S.scissor(P,this.drawingBufferHeight-M-R,A,R)}},popScissor:function(){var S=this.scissorStack;S.pop();var E=S[S.length-1];E&&this.setScissor(E[0],E[1],E[2],E[3]),this.currentScissor=E},hasActiveStencilMask:function(){var S=this.currentMask.mask,E=this.currentCameraMask.mask;return S&&S.isStencil||E&&E.isStencil},resetViewport:function(){var S=this.gl;S.viewport(0,0,this.width,this.height),this.drawingBufferHeight=S.drawingBufferHeight},setBlendMode:function(S,E){E===void 0&&(E=!1);var P=this.gl,M=this.blendModes[S];return E||S!==h.BlendModes.SKIP_CHECK&&this.currentBlendMode!==S?(this.flush(),P.enable(P.BLEND),P.blendEquation(M.equation),M.func.length>2?P.blendFuncSeparate(M.func[0],M.func[1],M.func[2],M.func[3]):P.blendFunc(M.func[0],M.func[1]),this.currentBlendMode=S,!0):!1},addBlendMode:function(S,E){var P=this.blendModes.push({func:S,equation:E});return P-1},updateBlendMode:function(S,E,P){return this.blendModes[S]&&(this.blendModes[S].func=E,P&&(this.blendModes[S].equation=P)),this},removeBlendMode:function(S){return S>17&&this.blendModes[S]&&this.blendModes.splice(S,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S.glTexture,!0),0;var E=this.gl,P=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,P<this.maxTextures?(S.glIndex=P,E.activeTexture(E.TEXTURE0+P),E.bindTexture(E.TEXTURE_2D,S.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},isNewNormalMap:function(S,E){return this.textureZero!==S||this.normalTexture!==E},setTextureZero:function(S,E){if(this.textureZero!==S){E&&this.flush();var P=this.gl;P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,S),this.textureZero=S}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(S){if(this.normalTexture!==S){var E=this.gl;E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S),this.normalTexture=S,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var S=this.gl,E=this.tempTextures,P=0;P<E.length;P++)S.activeTexture(S.TEXTURE0+P),S.bindTexture(S.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(S){if(S===void 0&&(S=!1),!this.isTextureClean){this.flush();var E=this.gl,P=this.tempTextures;if(S){for(var M=0;M<P.length;M++)E.activeTexture(E.TEXTURE0+M),E.bindTexture(E.TEXTURE_2D,P[M]);E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,P[1]),this.isTextureClean=!0}else E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,P[0]),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,P[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S,!0),0;var E=this.gl,P=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,P<this.maxTextures?(S.glIndex=P,E.activeTexture(E.TEXTURE0+P),E.bindTexture(E.TEXTURE_2D,S),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},pushFramebuffer:function(S,E,P,M){return S===this.currentFramebuffer?this:(this.fboStack.push(S),this.setFramebuffer(S,E,P,M))},setFramebuffer:function(S,E,P,M){if(E===void 0&&(E=!1),P===void 0&&(P=!1),M===void 0&&(M=!0),S===this.currentFramebuffer)return this;var A=this.gl,R=this.width,O=this.height;return S&&S.renderTexture&&M?(R=S.renderTexture.width,O=S.renderTexture.height):this.flush(),A.bindFramebuffer(A.FRAMEBUFFER,S),M&&A.viewport(0,0,R,O),E&&(S?(this.drawingBufferHeight=O,this.pushScissor(0,0,R,O)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=S,P&&this.resetTextures(),this},popFramebuffer:function(S,E,P){S===void 0&&(S=!1),E===void 0&&(E=!1),P===void 0&&(P=!0);var M=this.fboStack;M.pop();var A=M[M.length-1];return A||(A=null),this.setFramebuffer(A,S,E,P),A},setProgram:function(S){return S!==this.currentProgram?(this.flush(),this.gl.useProgram(S),this.currentProgram=S,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(S,E,P,M){var A=this.gl,R=A.NEAREST,O=A.NEAREST,F=A.CLAMP_TO_EDGE,I=null;E=S?S.width:E,P=S?S.height:P;var G=d(E,P);return G&&(F=A.REPEAT),M===h.ScaleModes.LINEAR&&this.config.antialias&&(R=G?this.mipmapFilter:A.LINEAR,O=A.LINEAR),!S&&typeof E=="number"&&typeof P=="number"?I=this.createTexture2D(0,R,O,F,F,A.RGBA,null,E,P):I=this.createTexture2D(0,R,O,F,F,A.RGBA,S),I},createTexture2D:function(S,E,P,M,A,R,O,F,I,G,z,U){G=G==null?!0:G,z===void 0&&(z=!1),U===void 0&&(U=!1);var X=this.gl,b=X.createTexture();X.activeTexture(X.TEXTURE0);var B=X.getParameter(X.TEXTURE_BINDING_2D);return X.bindTexture(X.TEXTURE_2D,b),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,E),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,P),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_S,A),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_T,M),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,U),O==null?X.texImage2D(X.TEXTURE_2D,S,R,F,I,0,R,X.UNSIGNED_BYTE,null):(z||(F=O.width,I=O.height),X.texImage2D(X.TEXTURE_2D,S,R,R,X.UNSIGNED_BYTE,O)),d(F,I)&&X.generateMipmap(X.TEXTURE_2D),B&&X.bindTexture(X.TEXTURE_2D,B),b.isAlphaPremultiplied=G,b.isRenderTexture=!1,b.width=F,b.height=I,b.glIndex=0,b.glIndexCounter=-1,b},createFramebuffer:function(S,E,P,M){var A=this.gl,R=A.createFramebuffer(),O=0;if(this.setFramebuffer(R),M){var F=A.createRenderbuffer();A.bindRenderbuffer(A.RENDERBUFFER,F),A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_STENCIL,S,E),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.RENDERBUFFER,F)}if(P.isRenderTexture=!0,P.isAlphaPremultiplied=!1,A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,P,0),O=A.checkFramebufferStatus(A.FRAMEBUFFER),O!==A.FRAMEBUFFER_COMPLETE){var I={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+I[O])}return R.renderTexture=P,this.setFramebuffer(null),this.resetTextures(),R},createProgram:function(S,E){var P=this.gl,M=P.createProgram(),A=P.createShader(P.VERTEX_SHADER),R=P.createShader(P.FRAGMENT_SHADER);if(P.shaderSource(A,S),P.shaderSource(R,E),P.compileShader(A),P.compileShader(R),!P.getShaderParameter(A,P.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+P.getShaderInfoLog(A));if(!P.getShaderParameter(R,P.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+P.getShaderInfoLog(R));if(P.attachShader(M,A),P.attachShader(M,R),P.linkProgram(M),!P.getProgramParameter(M,P.LINK_STATUS))throw new Error(`Link Program failed:
`+P.getProgramInfoLog(M));return P.useProgram(M),M},createVertexBuffer:function(S,E){var P=this.gl,M=P.createBuffer();return P.bindBuffer(P.ARRAY_BUFFER,M),P.bufferData(P.ARRAY_BUFFER,S,E),P.bindBuffer(P.ARRAY_BUFFER,null),M},createIndexBuffer:function(S,E){var P=this.gl,M=P.createBuffer();return P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,M),P.bufferData(P.ELEMENT_ARRAY_BUFFER,S,E),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,null),M},deleteTexture:function(S,E){return E&&this.resetTextures(!0),S&&this.gl.deleteTexture(S),this},deleteFramebuffer:function(S){return S&&(this.gl.deleteFramebuffer(S),s(this.fboStack,S),this.currentFramebuffer===S&&(this.currentFramebuffer=null)),this},deleteProgram:function(S){return S&&this.gl.deleteProgram(S),this},deleteBuffer:function(S){return this.gl.deleteBuffer(S),this},preRenderCamera:function(S){var E=S.x,P=S.y,M=S.width,A=S.height,R=S.backgroundColor;if(S.emit(u.PRE_RENDER,S),this.pipelines.preBatchCamera(S),this.pushScissor(E,P,M,A),S.mask&&(this.currentCameraMask.mask=S.mask,this.currentCameraMask.camera=S._maskCamera,S.mask.preRenderWebGL(this,S,S._maskCamera)),R.alphaGL>0){var O=this.pipelines.setMulti();O.drawFillRect(E,P,M,A,y.getTintFromFloats(R.blueGL,R.greenGL,R.redGL,1),R.alphaGL)}},getCurrentStencilMask:function(){var S=null,E=this.maskStack,P=this.currentCameraMask;return E.length>0?S=E[E.length-1]:P.mask&&P.mask.isStencil&&(S=P),S},postRenderCamera:function(S){var E=S.flashEffect,P=S.fadeEffect;if(E.isRunning||P.isRunning||P.isComplete){var M=this.pipelines.setMulti();E.postRenderWebGL(M,y.getTintFromFloats),P.postRenderWebGL(M,y.getTintFromFloats)}S.dirty=!1,this.popScissor(),S.mask&&(this.currentCameraMask.mask=null,S.mask.postRenderWebGL(this,S._maskCamera)),this.pipelines.postBatchCamera(S),S.emit(u.POST_RENDER,S)},preRender:function(){if(!this.contextLost){var S=this.gl;if(S.bindFramebuffer(S.FRAMEBUFFER,null),this.config.clearBeforeRender){var E=this.config.backgroundColor;S.clearColor(E.redGL,E.greenGL,E.blueGL,E.alphaGL),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT|S.STENCIL_BUFFER_BIT)}S.enable(S.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&S.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(r.PRE_RENDER)}},render:function(S,E,P){if(!this.contextLost){var M=E.length;if(this.emit(r.RENDER,S,P),this.preRenderCamera(P),M===0){this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(P);return}this.currentType="";for(var A=this.currentMask,R=0;R<M;R++){this.finalType=R===M-1;var O=E[R],F=O.mask;A=this.currentMask,A.mask&&A.mask!==F&&A.mask.postRenderWebGL(this,A.camera),F&&A.mask!==F&&F.preRenderWebGL(this,O,P),O.blendMode!==this.currentBlendMode&&this.setBlendMode(O.blendMode);var I=O.type;I!==this.currentType&&(this.newType=!0,this.currentType=I),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=E[R+1].type===this.currentType,O.renderWebGL(this,O,P),this.newType=!1}A=this.currentMask,A.mask&&A.mask.postRenderWebGL(this,A.camera),this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(P)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(r.POST_RENDER);var S=this.snapshotState;S.callback&&(T(this.canvas,S),S.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(S,E,P){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,S,E,P)},snapshotArea:function(S,E,P,M,A,R,O){var F=this.snapshotState;return F.callback=A,F.type=R,F.encoder=O,F.getPixel=!1,F.x=S,F.y=E,F.width=Math.min(P,this.gl.drawingBufferWidth),F.height=Math.min(M,this.gl.drawingBufferHeight),this},snapshotPixel:function(S,E,P){return this.snapshotArea(S,E,1,1,P),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(S,E,P,M,A,R,O,F,I,G,z){A===void 0&&(A=!1),R===void 0&&(R=0),O===void 0&&(O=0),F===void 0&&(F=E),I===void 0&&(I=P);var U=this.currentFramebuffer;this.snapshotArea(R,O,F,I,M,G,z);var X=this.snapshotState;return X.getPixel=A,X.isFramebuffer=!0,X.bufferWidth=E,X.bufferHeight=P,this.setFramebuffer(S),T(this.canvas,X),this.setFramebuffer(U),X.callback=null,X.isFramebuffer=!1,this},canvasToTexture:function(S,E,P,M){return P===void 0&&(P=!1),M===void 0&&(M=!1),E?this.updateCanvasTexture(S,E,M):this.createCanvasTexture(S,P,M)},createCanvasTexture:function(S,E,P){E===void 0&&(E=!1),P===void 0&&(P=!1);var M=this.gl,A=M.NEAREST,R=M.NEAREST,O=S.width,F=S.height,I=M.CLAMP_TO_EDGE,G=d(O,F);return!E&&G&&(I=M.REPEAT),this.config.antialias&&(A=G?this.mipmapFilter:M.LINEAR,R=M.LINEAR),this.createTexture2D(0,A,R,I,I,M.RGBA,S,O,F,!0,!1,P)},updateCanvasTexture:function(S,E,P){P===void 0&&(P=!1);var M=this.gl,A=S.width,R=S.height;if(A>0&&R>0){M.activeTexture(M.TEXTURE0);var O=M.getParameter(M.TEXTURE_BINDING_2D);M.bindTexture(M.TEXTURE_2D,E),M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,P),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,S),E.width=A,E.height=R,O&&M.bindTexture(M.TEXTURE_2D,O)}return E},createVideoTexture:function(S,E,P){E===void 0&&(E=!1),P===void 0&&(P=!1);var M=this.gl,A=M.NEAREST,R=M.NEAREST,O=S.videoWidth,F=S.videoHeight,I=M.CLAMP_TO_EDGE,G=d(O,F);return!E&&G&&(I=M.REPEAT),this.config.antialias&&(A=G?this.mipmapFilter:M.LINEAR,R=M.LINEAR),this.createTexture2D(0,A,R,I,I,M.RGBA,S,O,F,!0,!0,P)},updateVideoTexture:function(S,E,P){P===void 0&&(P=!1);var M=this.gl,A=S.videoWidth,R=S.videoHeight;if(A>0&&R>0){M.activeTexture(M.TEXTURE0);var O=M.getParameter(M.TEXTURE_BINDING_2D);M.bindTexture(M.TEXTURE_2D,E),M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,P),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,S),E.width=A,E.height=R,O&&M.bindTexture(M.TEXTURE_2D,O)}return E},setTextureFilter:function(S,E){var P=this.gl,M=[P.LINEAR,P.NEAREST][E];P.activeTexture(P.TEXTURE0);var A=P.getParameter(P.TEXTURE_BINDING_2D);return P.bindTexture(P.TEXTURE_2D,S),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,M),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,M),A&&P.bindTexture(P.TEXTURE_2D,A),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var S=this.gl,E=this.tempTextures,P=0;P<E.length;P++)S.deleteTexture(E[P]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});e.exports=C},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(92),n=t(102),h=t(373),o=t(376),r=t(377),a=t(108),d=t(378),l=t(379),f=t(380),v=t(381),g=new s({initialize:function(m){this.game=m.game,this.renderer=m,this.classes=new n([[u.UTILITY_PIPELINE,v],[u.MULTI_PIPELINE,a],[u.BITMAPMASK_PIPELINE,h],[u.SINGLE_PIPELINE,f],[u.ROPE_PIPELINE,l],[u.LIGHT_PIPELINE,r],[u.POINTLIGHT_PIPELINE,d],[u.GRAPHICS_PIPELINE,o]]),this.postPipelineClasses=new n,this.pipelines=new n,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(p){var m,y,T=this,C=this.game;if(this.classes.each(function(E,P){m=T.add(E,new P({game:C})),E===u.UTILITY_PIPELINE&&(T.UTILITY_PIPELINE=m,T.fullFrame1=m.fullFrame1,T.fullFrame2=m.fullFrame2,T.halfFrame1=m.halfFrame1,T.halfFrame2=m.halfFrame2)}),this.MULTI_PIPELINE=this.get(u.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(u.BITMAPMASK_PIPELINE),p)for(y in p){var S=p[y];m=new S(C),m.isPostFX?this.postPipelineClasses.set(y,S):this.has(y)||(this.classes.set(y,S),this.add(y,m))}},add:function(p,m){if(m.isPostFX){console.warn(p+" is a Post Pipeline. Use `addPostPipeline` instead");return}var y=this.pipelines,T=this.renderer;return y.has(p)?console.warn("Pipeline exists: "+p):(m.name=p,m.manager=this,y.set(p,m)),m.hasBooted||m.boot(),T.width!==0&&T.height!==0&&m.resize(T.width,T.height),m},addPostPipeline:function(p,m){this.postPipelineClasses.has(p)||this.postPipelineClasses.set(p,m)},flush:function(){this.current&&this.current.flush()},has:function(p){var m=this.pipelines;return typeof p=="string"?m.has(p):!!m.contains(p)},get:function(p){var m=this.pipelines;if(typeof p=="string")return m.get(p);if(m.contains(p))return p},getPostPipeline:function(p,m){var y=this.postPipelineClasses,T;if(typeof p=="string"?T=y.get(p):typeof p=="function"?y.contains(p)&&(T=p):typeof p=="object"&&(T=y.get(p.name)),T){var C=new T(this.game);return m&&(C.gameObject=m),C}},remove:function(p,m,y){m===void 0&&(m=!0),y===void 0&&(y=!0),this.pipelines.delete(p),m&&this.classes.delete(p),y&&this.postPipelineClasses.delete(p)},set:function(p,m,y){if(!p.isPostFX)return this.isCurrent(p,y)||(this.flush(),this.current&&this.current.unbind(),this.current=p,p.bind(y)),p.updateProjectionMatrix(),p.onBind(m),p},preBatch:function(p){if(p.hasPostPipeline){this.flush();for(var m=p.postPipelines,y=m.length-1;y>=0;y--){var T=m[y];T.active&&T.preBatch(p)}}},postBatch:function(p){if(p.hasPostPipeline){this.flush();for(var m=p.postPipelines,y=0;y<m.length;y++){var T=m[y];T.active&&T.postBatch(p)}}},preBatchCamera:function(p){if(p.hasPostPipeline){this.flush();for(var m=p.postPipelines,y=m.length-1;y>=0;y--){var T=m[y];T.active&&T.preBatch(p)}}},postBatchCamera:function(p){if(p.hasPostPipeline){this.flush();for(var m=p.postPipelines,y=0;y<m.length;y++){var T=m[y];T.active&&T.postBatch(p)}}},isCurrent:function(p,m){var y=this.renderer,T=this.current;return T&&!m&&(m=T.currentShader),!(T!==p||m.program!==y.currentProgram)},copyFrame:function(p,m,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(p,m,y,T,C),this},copyToGame:function(p){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(p),this},drawFrame:function(p,m,y,T){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(p,m,y,T),this},blendFrames:function(p,m,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(p,m,y,T,C),this},blendFramesAdditive:function(p,m,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(p,m,y,T,C),this},clearFrame:function(p,m){return this.UTILITY_PIPELINE.clearFrame(p,m),this},blitFrame:function(p,m,y,T,C,S){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(p,m,y,T,C,S),this},copyFrameRect:function(p,m,y,T,C,S,E,P){return this.UTILITY_PIPELINE.copyFrameRect(p,m,y,T,C,S,E,P),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(p){return this.UTILITY_PIPELINE.bind(p)},rebind:function(p){p===void 0&&this.previous&&(p=this.previous);var m=this.renderer,y=m.gl;y.disable(y.DEPTH_TEST),y.disable(y.CULL_FACE),m.hasActiveStencilMask()?y.clear(y.DEPTH_BUFFER_BIT):(y.disable(y.STENCIL_TEST),y.clear(y.DEPTH_BUFFER_BIT|y.STENCIL_BUFFER_BIT)),y.viewport(0,0,m.width,m.height),m.currentProgram=null,m.setBlendMode(0,!0);var T=this.pipelines.entries;for(var C in T)T[C].glReset=!0;p&&(this.current=p,p.rebind()),m.resetTextures()},clear:function(){var p=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,p.currentProgram=null,p.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});e.exports=g},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(866),h=t(867),o=t(107),r=t(58),a=new s({Extends:r,initialize:function(l){l.fragShader=u(l,"fragShader",n),l.vertShader=u(l,"vertShader",h),l.batchSize=u(l,"batchSize",1),l.vertices=u(l,"vertices",[-1,1,-1,-7,7,1]),l.attributes=u(l,"attributes",[{name:"inPosition",size:2,type:o.FLOAT}]),r.call(this,l)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(d,l){r.prototype.resize.call(this,d,l),this.set2f("uResolution",d,l)},beginMask:function(d,l,f){var v=this.gl;if(d.bitmapMask&&v){var g=this.renderer;g.flush(),g.pushFramebuffer(d.mainFramebuffer),v.disable(v.STENCIL_TEST),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),g.currentCameraMask.mask!==d&&(g.currentMask.mask=d,g.currentMask.camera=f)}},endMask:function(d,l){var f=this.gl,v=this.renderer,g=d.bitmapMask;if(g&&f){v.flush(),v.pushFramebuffer(d.maskFramebuffer),f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT),v.setBlendMode(0,!0),g.renderWebGL(v,g,l),v.flush(),v.popFramebuffer(),v.popFramebuffer();var p=v.getCurrentStencilMask();p?(f.enable(f.STENCIL_TEST),p.mask.applyStencil(v,p.camera,!0)):v.currentMask.mask=null,v.pipelines.set(this),f.activeTexture(f.TEXTURE1),f.bindTexture(f.TEXTURE_2D,d.maskTexture),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,d.mainTexture),this.set1i("uInvertMaskAlpha",d.invertAlpha),f.drawArrays(this.topology,0,3),v.resetTextures()}}});e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AFTER_FLUSH:t(868),BEFORE_FLUSH:t(869),BIND:t(870),BOOT:t(871),DESTROY:t(872),REBIND:t(873),RESIZE:t(874)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(107),h=new s({initialize:function(r,a,d,l,f){this.pipeline=r,this.name=a,this.renderer=r.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(d,l),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(f),this.createUniforms()},createAttributes:function(o){var r=0,a=0,d=[];this.vertexComponentCount=0;for(var l=0;l<o.length;l++){var f=o[l],v=f.name,g=u(f,"size",1),p=u(f,"type",n.FLOAT),m=p.enum,y=p.size,T=!!f.normalized;d.push({name:v,size:g,type:m,normalized:T,offset:a,enabled:!1,location:-1}),y===4?r+=g:r++,a+=g*y}this.vertexSize=a,this.vertexComponentCount=r,this.attributes=d},bind:function(o,r){return o===void 0&&(o=!1),r===void 0&&(r=!1),r&&this.pipeline.flush(),this.renderer.setProgram(this.program),o&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(o){o===void 0&&(o=!1);for(var r=this.gl,a=this.vertexSize,d=this.attributes,l=this.program,f=0;f<d.length;f++){var v=d[f],g=v.size,p=v.type,m=v.offset,y=v.enabled,T=v.location,C=!!v.normalized;if(o){var S=r.getAttribLocation(l,v.name);S>=0?(r.enableVertexAttribArray(S),r.vertexAttribPointer(S,g,p,C,a,m),v.enabled=!0,v.location=S):S!==-1&&r.disableVertexAttribArray(S)}else y?r.vertexAttribPointer(T,g,p,C,a,m):!y&&T>-1&&(r.disableVertexAttribArray(T),v.location=-1)}return this},createUniforms:function(){var o=this.gl,r=this.program,a=this.uniforms,d,l,f,v=o.getProgramParameter(r,o.ACTIVE_UNIFORMS);for(d=0;d<v;d++){var g=o.getActiveUniform(r,d);if(g){l=g.name,f=o.getUniformLocation(r,l),f!==null&&(a[l]={name:l,location:f,value1:null,value2:null,value3:null,value4:null});var p=l.indexOf("[");p>0&&(l=l.substr(0,p),a.hasOwnProperty(l)||(f=o.getUniformLocation(r,l),f!==null&&(a[l]={name:l,location:f,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(o){return this.uniforms.hasOwnProperty(o)},resetUniform:function(o){var r=this.uniforms[o];return r&&(r.value1=null,r.value2=null,r.value3=null,r.value4=null),this},setUniform1:function(o,r,a,d){var l=this.uniforms[r];return l?((d||l.value1!==a)&&(l.value1=a,this.renderer.setProgram(this.program),o.call(this.gl,l.location,a),this.pipeline.currentShader=this),this):this},setUniform2:function(o,r,a,d,l){var f=this.uniforms[r];return f?((l||f.value1!==a||f.value2!==d)&&(f.value1=a,f.value2=d,this.renderer.setProgram(this.program),o.call(this.gl,f.location,a,d),this.pipeline.currentShader=this),this):this},setUniform3:function(o,r,a,d,l,f){var v=this.uniforms[r];return v?((f||v.value1!==a||v.value2!==d||v.value3!==l)&&(v.value1=a,v.value2=d,v.value3=l,this.renderer.setProgram(this.program),o.call(this.gl,v.location,a,d,l),this.pipeline.currentShader=this),this):this},setUniform4:function(o,r,a,d,l,f,v){var g=this.uniforms[r];return g?((v||g.value1!==a||g.value2!==d||g.value3!==l||g.value4!==f)&&(g.value1=a,g.value2=d,g.value3=l,g.value4=f,this.renderer.setProgram(this.program),o.call(this.gl,g.location,a,d,l,f),this.pipeline.currentShader=this),this):this},set1f:function(o,r){return this.setUniform1(this.gl.uniform1f,o,r)},set2f:function(o,r,a){return this.setUniform2(this.gl.uniform2f,o,r,a)},set3f:function(o,r,a,d){return this.setUniform3(this.gl.uniform3f,o,r,a,d)},set4f:function(o,r,a,d,l){return this.setUniform4(this.gl.uniform4f,o,r,a,d,l)},set1fv:function(o,r){return this.setUniform1(this.gl.uniform1fv,o,r,!0)},set2fv:function(o,r){return this.setUniform1(this.gl.uniform2fv,o,r,!0)},set3fv:function(o,r){return this.setUniform1(this.gl.uniform3fv,o,r,!0)},set4fv:function(o,r){return this.setUniform1(this.gl.uniform4fv,o,r,!0)},set1iv:function(o,r){return this.setUniform1(this.gl.uniform1iv,o,r,!0)},set2iv:function(o,r){return this.setUniform1(this.gl.uniform2iv,o,r,!0)},set3iv:function(o,r){return this.setUniform1(this.gl.uniform3iv,o,r,!0)},set4iv:function(o,r){return this.setUniform1(this.gl.uniform4iv,o,r,!0)},set1i:function(o,r){return this.setUniform1(this.gl.uniform1i,o,r)},set2i:function(o,r,a){return this.setUniform2(this.gl.uniform2i,o,r,a)},set3i:function(o,r,a,d){return this.setUniform3(this.gl.uniform3i,o,r,a,d)},set4i:function(o,r,a,d,l){return this.setUniform4(this.gl.uniform4i,o,r,a,d,l)},setMatrix2fv:function(o,r,a){return this.setUniform2(this.gl.uniformMatrix2fv,o,r,a,!0)},setMatrix3fv:function(o,r,a){return this.setUniform2(this.gl.uniformMatrix3fv,o,r,a,!0)},setMatrix4fv:function(o,r,a){return this.setUniform2(this.gl.uniformMatrix4fv,o,r,a,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(59),n=t(2),h=t(875),o=t(876),r=t(25),a=t(107),d=t(58),l=new s({Extends:d,initialize:function(v){v.fragShader=n(v,"fragShader",h),v.vertShader=n(v,"vertShader",o),v.attributes=n(v,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:a.UNSIGNED_BYTE,normalized:!0}]),d.call(this,v),this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(f,v,g,p,m,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(m,T);var C=f+g,S=v+p,E=T.getX(f,v),P=T.getY(f,v),M=T.getX(f,S),A=T.getY(f,S),R=T.getX(C,S),O=T.getY(C,S),F=T.getX(C,v),I=T.getY(C,v),G=this.fillTint;this.batchQuad(E,P,M,A,R,O,F,I,G.TL,G.TR,G.BL,G.BR)},batchFillTriangle:function(f,v,g,p,m,y,T,C){this.renderer.pipelines.set(this);var S=this.calcMatrix;C&&C.multiply(T,S);var E=S.getX(f,v),P=S.getY(f,v),M=S.getX(g,p),A=S.getY(g,p),R=S.getX(m,y),O=S.getY(m,y),F=this.fillTint;this.batchTri(E,P,M,A,R,O,F.TL,F.TR,F.BL)},batchStrokeTriangle:function(f,v,g,p,m,y,T,C,S){var E=this.tempTriangle;E[0].x=f,E[0].y=v,E[0].width=T,E[1].x=g,E[1].y=p,E[1].width=T,E[2].x=m,E[2].y=y,E[2].width=T,E[3].x=f,E[3].y=v,E[3].width=T,this.batchStrokePath(E,T,!1,C,S)},batchFillPath:function(f,v,g){this.renderer.pipelines.set(this);var p=this.calcMatrix;g&&g.multiply(v,p);for(var m=f.length,y=this.polygonCache,T,C,S=this.fillTint.TL,E=this.fillTint.TR,P=this.fillTint.BL,M=0;M<m;++M)C=f[M],y.push(C.x,C.y);T=u(y),m=T.length;for(var A=0;A<m;A+=3){var R=T[A+0]*2,O=T[A+1]*2,F=T[A+2]*2,I=y[R+0],G=y[R+1],z=y[O+0],U=y[O+1],X=y[F+0],b=y[F+1],B=p.getX(I,G),L=p.getY(I,G),D=p.getX(z,U),w=p.getY(z,U),N=p.getX(X,b),V=p.getY(X,b);this.batchTri(B,L,D,w,N,V,S,E,P)}y.length=0},batchStrokePath:function(f,v,g,p,m){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var y=f.length-1,T=0;T<y;T++){var C=f[T],S=f[T+1];this.batchLine(C.x,C.y,S.x,S.y,C.width/2,S.width/2,v,T,!g&&T===y-1,p,m)}},batchLine:function(f,v,g,p,m,y,T,C,S,E,P){this.renderer.pipelines.set(this);var M=this.calcMatrix;P&&P.multiply(E,M);var A=g-f,R=p-v,O=Math.sqrt(A*A+R*R),F=m*(p-v)/O,I=m*(f-g)/O,G=y*(p-v)/O,z=y*(f-g)/O,U=g-G,X=p-z,b=f-F,B=v-I,L=g+G,D=p+z,w=f+F,N=v+I,V=M.getX(U,X),Y=M.getY(U,X),W=M.getX(b,B),H=M.getY(b,B),$=M.getX(L,D),K=M.getY(L,D),Z=M.getX(w,N),J=M.getY(w,N),k=this.strokeTint,Q=k.TL,q=k.TR,at=k.BL,it=k.BR;if(this.batchQuad(Z,J,W,H,V,Y,$,K,Q,q,at,it),!(T<=2)){var _=this.prevQuad,j=this.firstQuad;C>0&&_[4]?this.batchQuad(Z,J,W,H,_[0],_[1],_[2],_[3],Q,q,at,it):(j[0]=Z,j[1]=J,j[2]=W,j[3]=H,j[4]=1),S&&j[4]?this.batchQuad(V,Y,$,K,j[0],j[1],j[2],j[3],Q,q,at,it):(_[0]=V,_[1]=Y,_[2]=$,_[3]=K,_[4]=1)}},batchVert:function(f,v,g){var p=this.vertexViewF32,m=this.vertexViewU32,y=this.vertexCount*this.currentShader.vertexComponentCount-1;p[++y]=f,p[++y]=v,m[++y]=g,this.vertexCount++},batchQuad:function(f,v,g,p,m,y,T,C,S,E,P,M){var A=!1;return this.shouldFlush(6)&&(this.flush(),A=!0),this.batchVert(f,v,S),this.batchVert(g,p,P),this.batchVert(m,y,M),this.batchVert(f,v,S),this.batchVert(m,y,M),this.batchVert(T,C,E),A},batchTri:function(f,v,g,p,m,y,T,C,S){var E=!1;return this.shouldFlush(3)&&(this.flush(),E=!0),this.batchVert(f,v,T),this.batchVert(g,p,C),this.batchVert(m,y,S),E},destroy:function(){return d.prototype.destroy.call(this),this.polygonCache=null,this}});e.exports=l},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(877),h=t(108),o=t(3),r=t(58),a=10,d=new o,l=new s({Extends:h,initialize:function(v){a=v.game.renderer.config.maxLights;for(var g=u(v,"fragShader",n),p=[],m=1;m<=a;m++)p.push({name:"lights"+m,fragShader:g.replace("%LIGHT_COUNT%",m.toString())});v.shaders=p,h.call(this,v),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){r.prototype.boot.call(this);var f=this.gl,v=f.createTexture();f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,v),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,1,1,0,f.RGBA,f.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:v};for(var g=0;g<this.shaders.length;g++)this["lightShader"+(g+1)]=this.shaders[g]},onRender:function(f,v){var g=f.sys.lights;if(this.lightsActive=!1,!(!g||!g.active)){var p=g.getLights(v),m=p.length;if(m!==0){this.lightsActive=!0,this.setShader(this["lightShader"+m],!0);var y,T=this.renderer,C=T.height,S=v.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",v.x,v.y,v.rotation,v.zoom),this.set3f("uAmbientLightColor",g.ambientColor.r,g.ambientColor.g,g.ambientColor.b),y=0;y<m;y++){var E=p[y].light,P=E.color,M="uLights["+y+"].";S.transformPoint(E.x,E.y,d),this.set2f(M+"position",d.x-v.scrollX*E.scrollFactorX*v.zoom,C-(d.y-v.scrollY*E.scrollFactorY*v.zoom)),this.set3f(M+"color",P.r,P.g,P.b),this.set1f(M+"intensity",E.intensity),this.set1f(M+"radius",E.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(f){if(f!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var v=this.inverseRotationMatrix;if(f){var g=-f,p=Math.cos(g),m=Math.sin(g);v[1]=m,v[3]=-m,v[0]=v[4]=p}else v[0]=v[4]=1,v[1]=v[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,v),this.currentNormalMapRotation=f}},setTexture2D:function(f,v){var g=this.renderer;f===void 0&&(f=g.tempTextures[0]);var p=this.getNormalMap(v);g.isNewNormalMap(f,p)&&(this.flush(),g.setTextureZero(f),g.setNormalMap(p));var m=v?v.rotation:0;return this.setNormalMapRotation(m),this.currentUnit=0,0},setGameObject:function(f,v){v===void 0&&(v=f.frame);var g=this.renderer,p=v.glTexture,m=this.getNormalMap(f);return g.isNewNormalMap()&&(this.flush(),g.setTextureZero(p),g.setNormalMap(m)),this.setNormalMapRotation(f.rotation),this.currentUnit=0,0},getNormalMap:function(f){var v;return f?f.displayTexture?v=f.displayTexture.dataSource[f.displayFrame.sourceIndex]:f.texture?v=f.texture.dataSource[f.frame.sourceIndex]:f.tileset&&(Array.isArray(f.tileset)?v=f.tileset[0].image.dataSource[0]:v=f.tileset.image.dataSource[0]):v=this.defaultNormalMap,v||(v=this.defaultNormalMap),v.glTexture},batchSprite:function(f,v,g){this.lightsActive&&h.prototype.batchSprite.call(this,f,v,g)},batchTexture:function(f,v,g,p,m,y,T,C,S,E,P,M,A,R,O,F,I,G,z,U,X,b,B,L,D,w,N,V,Y,W,H,$){this.lightsActive&&h.prototype.batchTexture.call(this,f,v,g,p,m,y,T,C,S,E,P,M,A,R,O,F,I,G,z,U,X,b,B,L,D,w,N,V,Y,W,H,$)},batchTextureFrame:function(f,v,g,p,m,y,T){this.lightsActive&&h.prototype.batchTextureFrame.call(this,f,v,g,p,m,y,T)}});l.LIGHT_COUNT=a,e.exports=l},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(880),h=t(881),o=t(58),r=new s({Extends:o,initialize:function(d){d.vertShader=u(d,"vertShader",h),d.fragShader=u(d,"fragShader",n),d.attributes=u(d,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),o.call(this,d)},onRender:function(a,d){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",d.zoom)},batchPointLight:function(a,d,l,f,v,g,p,m,y,T,C,S){var E=a.color,P=a.intensity,M=a.radius,A=a.attenuation,R=E.r*P,O=E.g*P,F=E.b*P,I=d.alpha*a.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(l,f,C,S,M,A,R,O,F,I),this.batchLightVert(v,g,C,S,M,A,R,O,F,I),this.batchLightVert(p,m,C,S,M,A,R,O,F,I),this.batchLightVert(l,f,C,S,M,A,R,O,F,I),this.batchLightVert(p,m,C,S,M,A,R,O,F,I),this.batchLightVert(y,T,C,S,M,A,R,O,F,I)},batchLightVert:function(a,d,l,f,v,g,p,m,y,T){var C=this.vertexViewF32,S=this.vertexCount*this.currentShader.vertexComponentCount-1;C[++S]=a,C[++S]=d,C[++S]=l,C[++S]=f,C[++S]=v,C[++S]=g,C[++S]=p,C[++S]=m,C[++S]=y,C[++S]=T,this.vertexCount++}});e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(108),h=new s({Extends:n,initialize:function(r){r.topology=5,r.batchSize=u(r,"batchSize",256),n.call(this,r)}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=t(108),h=t(882),o=t(883),r=t(58),a=new s({Extends:n,initialize:function(l){l.fragShader=u(l,"fragShader",h),l.vertShader=u(l,"vertShader",o),l.forceZero=!0,n.call(this,l)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0)}});e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(884),u=t(35),n=t(0),h=t(198),o=t(885),r=t(886),a=t(2),d=t(887),l=t(382),f=t(58),v=new n({Extends:f,initialize:function(p){p.renderTarget=a(p,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),p.vertShader=a(p,"vertShader",l),p.shaders=a(p,"shaders",[{name:"Copy",fragShader:r},{name:"AddBlend",fragShader:s},{name:"LinearBlend",fragShader:d},{name:"ColorMatrix",fragShader:o}]),p.attributes=a(p,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),p.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],p.batchSize=1,f.call(this,p),this.colorMatrix=new h,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){f.prototype.boot.call(this);var g=this.shaders,p=this.renderTargets;this.copyShader=g[0],this.addShader=g[1],this.linearShader=g[2],this.colorMatrixShader=g[3],this.fullFrame1=p[0],this.fullFrame2=p[1],this.halfFrame1=p[2],this.halfFrame2=p[3]},copyFrame:function(g,p,m,y,T){m===void 0&&(m=1),y===void 0&&(y=!0),T===void 0&&(T=!0);var C=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",m),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,g.texture),p?(C.viewport(0,0,p.width,p.height),C.bindFramebuffer(C.FRAMEBUFFER,p.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,p.texture,0)):C.viewport(0,0,g.width,g.height),y&&(T?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},blitFrame:function(g,p,m,y,T,C){m===void 0&&(m=1),y===void 0&&(y=!0),T===void 0&&(T=!0),C===void 0&&(C=!1);var S=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",m),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),g.height>p.height)S.viewport(0,0,g.width,g.height),this.setTargetUVs(g,p);else{var E=p.height-g.height;S.viewport(0,E,g.width,g.height)}if(S.bindFramebuffer(S.FRAMEBUFFER,p.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,p.texture,0),y&&(T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),C){var P=this.renderer.currentBlendMode;this.renderer.setBlendMode(u.ERASE)}S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),C&&this.renderer.setBlendMode(P),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(g,p,m,y,T,C,S,E){S===void 0&&(S=!0),E===void 0&&(E=!0);var P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,g.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,g.texture,0),S&&(E?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,p.texture),P.copyTexSubImage2D(P.TEXTURE_2D,0,0,0,m,y,T,C),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},copyToGame:function(g){var p=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,g.texture),p.bufferData(p.ARRAY_BUFFER,this.vertexData,p.STATIC_DRAW),p.drawArrays(p.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(g,p,m,y){m===void 0&&(m=!0),y===void 0&&(y=this.colorMatrix);var T=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",y.getData()),this.set1f("uAlpha",y.alpha),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,g.texture),p?(T.viewport(0,0,p.width,p.height),T.bindFramebuffer(T.FRAMEBUFFER,p.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,p.texture,0)):T.viewport(0,0,g.width,g.height),m?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blendFrames:function(g,p,m,y,T,C){y===void 0&&(y=1),T===void 0&&(T=!0),C===void 0&&(C=this.linearShader);var S=this.gl;this.setShader(C),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",y),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,p.texture),m?(S.bindFramebuffer(S.FRAMEBUFFER,m.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,m.texture,0),S.viewport(0,0,m.width,m.height)):S.viewport(0,0,g.width,g.height),T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blendFramesAdditive:function(g,p,m,y,T){this.blendFrames(g,p,m,y,T,this.addShader)},clearFrame:function(g,p){p===void 0&&(p=!0);var m=this.gl;m.viewport(0,0,g.width,g.height),m.bindFramebuffer(m.FRAMEBUFFER,g.framebuffer),p?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT);var y=this.renderer.currentFramebuffer;m.bindFramebuffer(m.FRAMEBUFFER,y)},setUVs:function(g,p,m,y,T,C,S,E){var P=this.vertexViewF32;P[2]=g,P[3]=p,P[6]=m,P[7]=y,P[10]=T,P[11]=C,P[14]=g,P[15]=p,P[18]=T,P[19]=C,P[22]=S,P[23]=E},setTargetUVs:function(g,p){var m=p.height/g.height;m>.5?m=.5-(m-.5):m=.5+(.5-m),this.setUVs(0,m,0,1+m,1,1+m,1,m)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});e.exports=v},function(e,c){e.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=t(38),n=t(2),h=function(o,r){var a=o.getContext("experimental-webgl"),d=n(r,"callback"),l=n(r,"type","image/png"),f=n(r,"encoder",.92),v=n(r,"x",0),g=n(r,"y",0),p=n(r,"getPixel",!1),m=n(r,"isFramebuffer",!1),y=m?n(r,"bufferWidth",1):a.drawingBufferWidth,T=m?n(r,"bufferHeight",1):a.drawingBufferHeight;if(p){var C=new Uint8Array(4),S=m?g:T-g;a.readPixels(v,S,1,1,a.RGBA,a.UNSIGNED_BYTE,C),d.call(null,new u(C[0],C[1],C[2],C[3]/255))}else{var E=n(r,"width",y),P=n(r,"height",T),M=E*P*4,A=new Uint8Array(M);a.readPixels(v,T-g-P,E,P,a.RGBA,a.UNSIGNED_BYTE,A);for(var R=s.createWebGL(this,E,P),O=R.getContext("2d"),F=O.getImageData(0,0,E,P),I=F.data,G=0;G<P;G++)for(var z=0;z<E;z++){var U=((P-G-1)*E+z)*4,X=(G*E+z)*4;I[X+0]=A[U+0],I[X+1]=A[U+1],I[X+2]=A[U+2],I[X+3]=A[U+3]}O.putImageData(F,0,0);var b=new Image;b.onerror=function(){d.call(null),s.remove(R)},b.onload=function(){d.call(null,b),s.remove(R)},b.src=R.toDataURL(l,f)}};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(33),u=function(n){var h=n.config;if(!h.hideBanner){var o="WebGL";h.renderType===s.CANVAS?o="Canvas":h.renderType===s.HEADLESS&&(o="Headless");var r=h.audio,a=n.device.audio,d;if(a.webAudio&&!r.disableWebAudio?d="Web Audio":r.noAudio||!a.webAudio&&!a.audioData?d="No Audio":d="HTML5 Audio",n.device.browser.ie)window.console&&console.log("Phaser v"+s.VERSION+" / https://phaser.io");else{var l="",f=[l];if(Array.isArray(h.bannerBackgroundColor)){var v;h.bannerBackgroundColor.forEach(function(p){l=l.concat("%c "),f.push("background: "+p),v=p}),f[f.length-1]="color: "+h.bannerTextColor+"; background: "+v}else l=l.concat("%c "),f.push("color: "+h.bannerTextColor+"; background: "+h.bannerBackgroundColor);f.push("background: transparent"),h.gameTitle&&(l=l.concat(h.gameTitle),h.gameVersion&&(l=l.concat(" v"+h.gameVersion)),h.hidePhaser||(l=l.concat(" / ")));var g="";h.hidePhaser||(l=l.concat("Phaser v"+s.VERSION+g+" ("+o+" | "+d+")")),l=l.concat(" %c "+h.gameURL),f[0]=l,console.log.apply(console,f)}}};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(6),n=t(1),h=t(386),o=new s({initialize:function(a,d){this.game=a,this.raf=new h,this.started=!1,this.running=!1,this.minFps=u(d,"min",5),this.targetFps=u(d,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=n,this.forceSetTimeOut=u(d,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=u(d,"deltaHistory",10),this.panicMax=u(d,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=u(d,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var r=window.performance.now();this.time=r,this.lastTime=r,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0;for(var a=0;a<this.deltaSmoothingMax;a++)this.deltaHistory[a]=Math.min(this._target,this.deltaHistory[a]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(r){if(this.started)return this;this.started=!0,this.running=!0;for(var a=0;a<this.deltaSmoothingMax;a++)this.deltaHistory[a]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=r,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var r=window.performance.now();this.now=r;var a=r-this.lastTime;a<0&&(a=0),this.rawDelta=a;var d=this.deltaIndex,l=this.deltaHistory,f=this.deltaSmoothingMax,v=a,g=a;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,v=Math.min(v,this._target)),v>this._min&&(v=l[d],v=Math.min(v,this._min)),l[d]=v,this.deltaIndex++,this.deltaIndex>f&&(this.deltaIndex=0),g=0;for(var p=0;p<f;p++)g+=l[p];g/=f}this.delta=g,this.time+=this.rawDelta,r>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0),this.framesThisSecond++;var m=g/this._target;this.callback(r,g,m),this.lastTime=r,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(r){this.running||(r&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=n,this.raf=null,this.game=null}});e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(1),n=new s({initialize:function(){this.isRunning=!1,this.callback=u,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var o=this;this.step=function r(){var a=window.performance.now();o.lastTime=o.tick,o.tick=a,o.callback(a),o.timeOutID=window.requestAnimationFrame(r)},this.stepTimeout=function r(){var a=Date.now(),d=Math.min(Math.max(o.target*2+o.tick-a,0),o.target);o.lastTime=o.tick,o.tick=a,o.callback(a),o.timeOutID=window.setTimeout(r,d)}},start:function(h,o,r){this.isRunning||(this.callback=h,this.isSetTimeOut=o,this.target=r,this.isRunning=!0,this.timeOutID=o?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=u}});e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(22),u=function(n){var h,o=n.events;if(document.hidden!==void 0)h="visibilitychange";else{var r=["webkit","moz","ms"];r.forEach(function(d){document[d+"Hidden"]!==void 0&&(document.hidden=function(){return document[d+"Hidden"]},h=d+"visibilitychange")})}var a=function(d){document.hidden||d.type==="pause"?o.emit(s.HIDDEN):o.emit(s.VISIBLE)};h&&document.addEventListener(h,a,!1),window.onblur=function(){o.emit(s.BLUR)},window.onfocus=function(){o.emit(s.FOCUS)},window.focus&&n.config.autoFocus&&window.focus()};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(389),u=t(31),n=t(6),h=function(o){var r=n(o,"data",[]),a=n(o,"canvas",null),d=n(o,"palette",s),l=n(o,"pixelWidth",1),f=n(o,"pixelHeight",l),v=n(o,"resizeCanvas",!0),g=n(o,"clearCanvas",!0),p=n(o,"preRender",null),m=n(o,"postRender",null),y=Math.floor(Math.abs(r[0].length*l)),T=Math.floor(Math.abs(r.length*f));a||(a=u.create2D(this,y,T),v=!1,g=!1),v&&(a.width=y,a.height=T);var C=a.getContext("2d");g&&C.clearRect(0,0,y,T),p&&p(a,C);for(var S=0;S<r.length;S++)for(var E=r[S],P=0;P<E.length;P++){var M=E[P];M!=="."&&M!==" "&&(C.fillStyle=d[M],C.fillRect(P*l,S*f,l,f))}return m&&m(a,C),a};e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(358),n=t(94),h=t(3),o=new s({Extends:n,initialize:function(a,d,l,f){n.call(this,"CubicBezierCurve"),Array.isArray(a)&&(f=new h(a[6],a[7]),l=new h(a[4],a[5]),d=new h(a[2],a[3]),a=new h(a[0],a[1])),this.p0=a,this.p1=d,this.p2=l,this.p3=f},getStartPoint:function(r){return r===void 0&&(r=new h),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,a){a===void 0&&(a=new h);var d=this.p0,l=this.p1,f=this.p2,v=this.p3;return a.set(u(r,d.x,l.x,f.x,v.x),u(r,d.y,l.y,f.y,v.y))},draw:function(r,a){a===void 0&&(a=32);var d=this.getPoints(a);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var l=1;l<d.length;l++)r.lineTo(d[l].x,d[l].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});o.fromJSON=function(r){var a=r.points,d=new h(a[0],a[1]),l=new h(a[2],a[3]),f=new h(a[4],a[5]),v=new h(a[6],a[7]);return new o(d,l,f,v)},e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(94),n=t(36),h=t(6),o=t(196),r=t(3),a=new s({Extends:u,initialize:function(l,f,v,g,p,m,y,T){if(typeof l=="object"){var C=l;l=h(C,"x",0),f=h(C,"y",0),v=h(C,"xRadius",0),g=h(C,"yRadius",v),p=h(C,"startAngle",0),m=h(C,"endAngle",360),y=h(C,"clockwise",!1),T=h(C,"rotation",0)}else g===void 0&&(g=v),p===void 0&&(p=0),m===void 0&&(m=360),y===void 0&&(y=!1),T===void 0&&(T=0);u.call(this,"EllipseCurve"),this.p0=new r(l,f),this._xRadius=v,this._yRadius=g,this._startAngle=n(p),this._endAngle=n(m),this._clockwise=y,this._rotation=n(T)},getStartPoint:function(d){return d===void 0&&(d=new r),this.getPoint(0,d)},getResolution:function(d){return d*2},getPoint:function(d,l){l===void 0&&(l=new r);for(var f=Math.PI*2,v=this._endAngle-this._startAngle,g=Math.abs(v)<Number.EPSILON;v<0;)v+=f;for(;v>f;)v-=f;v<Number.EPSILON&&(g?v=0:v=f),this._clockwise&&!g&&(v===f?v=-f:v=v-f);var p=this._startAngle+d*v,m=this.p0.x+this._xRadius*Math.cos(p),y=this.p0.y+this._yRadius*Math.sin(p);if(this._rotation!==0){var T=Math.cos(this._rotation),C=Math.sin(this._rotation),S=m-this.p0.x,E=y-this.p0.y;m=S*T-E*C+this.p0.x,y=S*C+E*T+this.p0.y}return l.set(m,y)},setXRadius:function(d){return this.xRadius=d,this},setYRadius:function(d){return this.yRadius=d,this},setWidth:function(d){return this.xRadius=d/2,this},setHeight:function(d){return this.yRadius=d/2,this},setStartAngle:function(d){return this.startAngle=d,this},setEndAngle:function(d){return this.endAngle=d,this},setClockwise:function(d){return this.clockwise=d,this},setRotation:function(d){return this.rotation=d,this},x:{get:function(){return this.p0.x},set:function(d){this.p0.x=d}},y:{get:function(){return this.p0.y},set:function(d){this.p0.y=d}},xRadius:{get:function(){return this._xRadius},set:function(d){this._xRadius=d}},yRadius:{get:function(){return this._yRadius},set:function(d){this._yRadius=d}},startAngle:{get:function(){return o(this._startAngle)},set:function(d){this._startAngle=n(d)}},endAngle:{get:function(){return o(this._endAngle)},set:function(d){this._endAngle=n(d)}},clockwise:{get:function(){return this._clockwise},set:function(d){this._clockwise=d}},angle:{get:function(){return o(this._rotation)},set:function(d){this._rotation=n(d)}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=d}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:o(this._startAngle),endAngle:o(this._endAngle),clockwise:this._clockwise,rotation:o(this._rotation)}}});a.fromJSON=function(d){return new a(d)},e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(94),n=t(199),h=t(10),o=t(3),r=new s({Extends:u,initialize:function(d,l){u.call(this,"LineCurve"),Array.isArray(d)&&(l=new o(d[2],d[3]),d=new o(d[0],d[1])),this.p0=d,this.p1=l,this.arcLengthDivisions=1},getBounds:function(a){return a===void 0&&(a=new h),n([this.p0,this.p1],a)},getStartPoint:function(a){return a===void 0&&(a=new o),a.copy(this.p0)},getResolution:function(a){return a===void 0&&(a=1),a},getPoint:function(a,d){return d===void 0&&(d=new o),a===1?d.copy(this.p1):(d.copy(this.p1).subtract(this.p0).scale(a).add(this.p0),d)},getPointAt:function(a,d){return this.getPoint(a,d)},getTangent:function(a,d){return d===void 0&&(d=new o),d.copy(this.p1).subtract(this.p0).normalize(),d},getUtoTmapping:function(a,d,l){var f;if(d){var v=this.getLengths(l),g=v[v.length-1],p=Math.min(d,g);f=p/g}else f=a;return f},draw:function(a){return a.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),a},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});r.fromJSON=function(a){var d=a.points,l=new o(d[0],d[1]),f=new o(d[2],d[3]);return new r(l,f)},e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(3),n=new s({initialize:function(o,r){this.active=!1,this.p0=new u(o,r)},getPoint:function(h,o){return o===void 0&&(o=new u),o.copy(this.p0)},getPointAt:function(h,o){return this.getPoint(h,o)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(94),n=t(359),h=t(3),o=new s({Extends:u,initialize:function(a,d,l){u.call(this,"QuadraticBezier"),Array.isArray(a)&&(l=new h(a[4],a[5]),d=new h(a[2],a[3]),a=new h(a[0],a[1])),this.p0=a,this.p1=d,this.p2=l},getStartPoint:function(r){return r===void 0&&(r=new h),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,a){a===void 0&&(a=new h);var d=this.p0,l=this.p1,f=this.p2;return a.set(n(r,d.x,l.x,f.x),n(r,d.y,l.y,f.y))},draw:function(r,a){a===void 0&&(a=32);var d=this.getPoints(a);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var l=1;l<d.length;l++)r.lineTo(d[l].x,d[l].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});o.fromJSON=function(r){var a=r.points,d=new h(a[0],a[1]),l=new h(a[2],a[3]),f=new h(a[4],a[5]);return new o(d,l,f)},e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(194),u=t(0),n=t(94),h=t(3),o=new u({Extends:n,initialize:function(a){a===void 0&&(a=[]),n.call(this,"SplineCurve"),this.points=[],this.addPoints(a)},addPoints:function(r){for(var a=0;a<r.length;a++){var d=new h;typeof r[a]=="number"?(d.x=r[a],d.y=r[a+1],a++):Array.isArray(r[a])?(d.x=r[a][0],d.y=r[a][1]):(d.x=r[a].x,d.y=r[a].y),this.points.push(d)}return this},addPoint:function(r,a){var d=new h(r,a);return this.points.push(d),d},getStartPoint:function(r){return r===void 0&&(r=new h),r.copy(this.points[0])},getResolution:function(r){return r*this.points.length},getPoint:function(r,a){a===void 0&&(a=new h);var d=this.points,l=(d.length-1)*r,f=Math.floor(l),v=l-f,g=d[f===0?f:f-1],p=d[f],m=d[f>d.length-2?d.length-1:f+1],y=d[f>d.length-3?d.length-1:f+2];return a.set(s(v,g.x,p.x,m.x,y.x),s(v,g.y,p.y,m.y,y.y))},toJSON:function(){for(var r=[],a=0;a<this.points.length;a++)r.push(this.points[a].x),r.push(this.points[a].y);return{type:this.type,points:r}}});o.fromJSON=function(r){return new o(r.points)},e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(h,o,r,a){(!o||o==="")&&(o=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!r||r==="")&&(r=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),a===void 0&&(a=null),this.key=h,this.fragmentSrc=o,this.vertexSrc=r,this.uniforms=a}});e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38);s.ColorSpectrum=t(909),s.ColorToRGBA=t(910),s.ComponentToHex=t(398),s.GetColor=t(103),s.GetColor32=t(328),s.HexStringToColor=t(327),s.HSLToColor=t(911),s.HSVColorWheel=t(912),s.HSVToRGB=t(188),s.HueToComponent=t(399),s.IntegerToColor=t(189),s.IntegerToRGB=t(330),s.Interpolate=t(913),s.ObjectToColor=t(331),s.RandomRGB=t(914),s.RGBStringToColor=t(332),s.RGBToHSV=t(329),s.RGBToString=t(915),s.ValueToColor=t(187),e.exports=s},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=s.toString(16);return u.length===1?"0"+u:u};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?s+(u-s)*6*n:n<1/2?u:n<2/3?s+(u-s)*(2/3-n)*6:s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(105),u=function(n){if(document.readyState==="complete"||document.readyState==="interactive"){n();return}var h=function(){document.removeEventListener("deviceready",h,!0),document.removeEventListener("DOMContentLoaded",h,!0),window.removeEventListener("load",h,!0),n()};document.body?s.cordova?document.addEventListener("deviceready",h,!1):(document.addEventListener("DOMContentLoaded",h,!0),window.addEventListener("load",h,!0)):window.setTimeout(h,20)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){if(!s)return window.innerHeight;var u=Math.abs(window.orientation),n={w:0,h:0},h=document.createElement("div");return h.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(h),n.w=u===90?h.offsetHeight:window.innerWidth,n.h=u===90?window.innerWidth:h.offsetHeight,document.documentElement.removeChild(h),h=null,Math.abs(window.orientation)!==90?n.h:n.w};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(201),u=function(n,h){var o=window.screen,r=o?o.orientation||o.mozOrientation||o.msOrientation:!1;if(r&&typeof r.type=="string")return r.type;if(typeof r=="string")return r;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?s.ORIENTATION.PORTRAIT:s.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return s.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return s.ORIENTATION.LANDSCAPE}else return h>n?s.ORIENTATION.PORTRAIT:s.ORIENTATION.LANDSCAPE};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u;return s!==""&&(typeof s=="string"?u=document.getElementById(s):s&&s.nodeType===1&&(u=s)),u||(u=document.body),u};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u="";try{if(window.DOMParser){var n=new DOMParser;u=n.parseFromString(s,"text/xml")}else u=new ActiveXObject("Microsoft.XMLDOM"),u.loadXML(s)}catch{u=null}return!u||!u.documentElement||u.getElementsByTagName("parsererror").length?null:u};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(203),n=t(9),h=t(51),o=t(22),r=t(410),a=t(411),d=t(412),l=t(413),f=t(25),v=t(177),g=new s({initialize:function(m,y){this.game=m,this.scaleManager,this.canvas,this.config=y,this.enabled=!0,this.events=new n,this.isOver=!0,this.defaultCursor="",this.keyboard=y.inputKeyboard?new r(this):null,this.mouse=y.inputMouse?new a(this):null,this.touch=y.inputTouch?new l(this):null,this.pointers=[],this.pointersTotal=y.inputActivePointers,y.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var T=0;T<=this.pointersTotal;T++){var C=new d(this,T);C.smoothFactor=y.inputSmoothFactor,this.pointers.push(C)}this.mousePointer=y.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new f,this._tempMatrix2=new f,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],m.events.once(o.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(h.MANAGER_BOOT),this.game.events.on(o.PRE_RENDER,this.preRender,this),this.game.events.once(o.DESTROY,this.destroy,this)},setCanvasOver:function(p){this.isOver=!0,this.events.emit(h.GAME_OVER,p)},setCanvasOut:function(p){this.isOver=!1,this.events.emit(h.GAME_OUT,p)},preRender:function(){var p=this.game.loop.now,m=this.game.loop.delta,y=this.game.scene.getScenes(!0,!0);this.time=p,this.events.emit(h.MANAGER_UPDATE);for(var T=0;T<y.length;T++){var C=y[T];if(C.sys.input&&C.sys.input.updatePoll(p,m)&&this.globalTopOnly)return}},setDefaultCursor:function(p){this.defaultCursor=p,this.canvas.style.cursor!==p&&(this.canvas.style.cursor=p)},setCursor:function(p){p.cursor&&(this.canvas.style.cursor=p.cursor)},resetCursor:function(p){p.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(p){p===void 0&&(p=1);var m=[];this.pointersTotal+p>10&&(p=10-this.pointersTotal);for(var y=0;y<p;y++){var T=this.pointers.length,C=new d(this,T);C.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(C),this.pointersTotal++,m.push(C)}return m},updateInputPlugins:function(p,m){var y=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var T=0;T<y.length;T++){var C=y[T];if(C.sys.input){var S=C.sys.input.update(p,m);if(S&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(p){for(var m=this.pointers,y=[],T=0;T<p.changedTouches.length;T++)for(var C=p.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=m[S];if(!E.active){E.touchstart(C,p),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(u.TOUCH_START,y)},onTouchMove:function(p){for(var m=this.pointers,y=[],T=0;T<p.changedTouches.length;T++)for(var C=p.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=m[S];if(E.active&&E.identifier===C.identifier){E.touchmove(C,p),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(u.TOUCH_MOVE,y)},onTouchEnd:function(p){for(var m=this.pointers,y=[],T=0;T<p.changedTouches.length;T++)for(var C=p.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=m[S];if(E.active&&E.identifier===C.identifier){E.touchend(C,p),y.push(E);break}}this.updateInputPlugins(u.TOUCH_END,y)},onTouchCancel:function(p){for(var m=this.pointers,y=[],T=0;T<p.changedTouches.length;T++)for(var C=p.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=m[S];if(E.active&&E.identifier===C.identifier){E.touchcancel(C,p),y.push(E);break}}this.updateInputPlugins(u.TOUCH_CANCEL,y)},onMouseDown:function(p){var m=this.mousePointer;m.down(p),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(u.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(p){var m=this.mousePointer;m.move(p),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(u.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(p){var m=this.mousePointer;m.up(p),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(u.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(p){var m=this.mousePointer;m.wheel(p),this.activePointer=m,this.updateInputPlugins(u.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(p){var m=this.mouse.locked;this.mousePointer.locked=m,this.events.emit(h.POINTERLOCK_CHANGE,p,m)},inputCandidate:function(p,m){var y=p.input;if(!y||!y.enabled||!y.alwaysEnabled&&!p.willRender(m))return!1;var T=!0,C=p.parentContainer;if(C)do{if(!C.willRender(m)){T=!1;break}C=C.parentContainer}while(C);return T},hitTest:function(p,m,y,T){T===void 0&&(T=this._tempHitTest);var C=this._tempPoint,S=y.scrollX,E=y.scrollY;T.length=0;var P=p.x,M=p.y;y.getWorldPoint(P,M,C),p.worldX=C.x,p.worldY=C.y;for(var A={x:0,y:0},R=this._tempMatrix,O=this._tempMatrix2,F=0;F<m.length;F++){var I=m[F];if(!!this.inputCandidate(I,y)){var G=C.x+S*I.scrollFactorX-S,z=C.y+E*I.scrollFactorY-E;I.parentContainer?(I.getWorldTransformMatrix(R,O),R.applyInverse(G,z,A)):v(G,z,I.x,I.y,I.rotation,I.scaleX,I.scaleY,A),this.pointWithinHitArea(I,A.x,A.y)&&T.push(I)}}return T},pointWithinHitArea:function(p,m,y){m+=p.displayOriginX,y+=p.displayOriginY;var T=p.input;return T&&T.hitAreaCallback(T.hitArea,m,y,p)?(T.localX=m,T.localY=y,!0):!1},pointWithinInteractiveObject:function(p,m,y){return p.hitArea?(m+=p.gameObject.displayOriginX,y+=p.gameObject.displayOriginY,p.localX=m,p.localY=y,p.hitAreaCallback(p.hitArea,m,y,p)):!1},transformPointer:function(p,m,y,T){var C=p.position,S=p.prevPosition;S.x=C.x,S.y=C.y;var E=this.scaleManager.transformX(m),P=this.scaleManager.transformY(y),M=p.smoothFactor;!T||M===0?(C.x=E,C.y=P):(C.x=E*M+S.x*(1-M),C.y=P*M+S.y*(1-M))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(o.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var p=0;p<this.pointers.length;p++)this.pointers[p].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});e.exports=g},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93),u=t(0),n=t(22),h=t(51),o=t(143),r=t(1),a=new u({initialize:function(l){this.manager=l,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=r,this.onKeyUp=r,l.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function(){var d=this.manager.config;this.enabled=d.inputKeyboard,this.target=d.inputKeyboardEventTarget,this.addCapture(d.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(n.POST_STEP,this.postUpdate,this)},startListeners:function(){var d=this;this.onKeyDown=function(f){if(!(f.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(f),d.manager.events.emit(h.MANAGER_PROCESS);var v=f.altKey||f.ctrlKey||f.shiftKey||f.metaKey;d.preventDefault&&!v&&d.captures.indexOf(f.keyCode)>-1&&f.preventDefault()}},this.onKeyUp=function(f){if(!(f.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(f),d.manager.events.emit(h.MANAGER_PROCESS);var v=f.altKey||f.ctrlKey||f.shiftKey||f.metaKey;d.preventDefault&&!v&&d.captures.indexOf(f.keyCode)>-1&&f.preventDefault()}};var l=this.target;l&&(l.addEventListener("keydown",this.onKeyDown,!1),l.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var d=this.target;d.removeEventListener("keydown",this.onKeyDown,!1),d.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var l=this.captures,f=0;f<d.length;f++){var v=d[f];typeof v=="string"&&(v=o[v.trim().toUpperCase()]),l.indexOf(v)===-1&&l.push(v)}this.preventDefault=l.length>0},removeCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var l=this.captures,f=0;f<d.length;f++){var v=d[f];typeof v=="string"&&(v=o[v.toUpperCase()]),s(l,v)}this.preventDefault=l.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(n.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(191),n=t(51),h=t(1),o=new s({initialize:function(a){this.manager=a,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=h,this.onMouseDown=h,this.onMouseUp=h,this.onMouseDownWindow=h,this.onMouseUpWindow=h,this.onMouseOver=h,this.onMouseOut=h,this.onMouseWheel=h,this.pointerLockChange=h,this.isTop=!0,a.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputMouse,this.target=r.inputMouseEventTarget,this.passive=r.inputMousePassive,this.preventDefaultDown=r.inputMousePreventDefaultDown,this.preventDefaultUp=r.inputMousePreventDefaultUp,this.preventDefaultMove=r.inputMousePreventDefaultMove,this.preventDefaultWheel=r.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},requestPointerLock:function(){if(u.pointerLock){var r=this.target;r.requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock,r.requestPointerLock()}},releasePointerLock:function(){u.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var r=this.target;if(!!r){var a=this,d=this.manager,l=d.canvas,f=window&&window.focus&&d.game.config.autoFocus;this.onMouseMove=function(g){!g.defaultPrevented&&a.enabled&&d&&d.enabled&&(d.onMouseMove(g),a.preventDefaultMove&&g.preventDefault())},this.onMouseDown=function(g){f&&window.focus(),!g.defaultPrevented&&a.enabled&&d&&d.enabled&&(d.onMouseDown(g),a.preventDefaultDown&&g.target===l&&g.preventDefault())},this.onMouseDownWindow=function(g){!g.defaultPrevented&&a.enabled&&d&&d.enabled&&g.target!==l&&d.onMouseDown(g)},this.onMouseUp=function(g){!g.defaultPrevented&&a.enabled&&d&&d.enabled&&(d.onMouseUp(g),a.preventDefaultUp&&g.target===l&&g.preventDefault())},this.onMouseUpWindow=function(g){!g.defaultPrevented&&a.enabled&&d&&d.enabled&&g.target!==l&&d.onMouseUp(g)},this.onMouseOver=function(g){!g.defaultPrevented&&a.enabled&&d&&d.enabled&&d.setCanvasOver(g)},this.onMouseOut=function(g){!g.defaultPrevented&&a.enabled&&d&&d.enabled&&d.setCanvasOut(g)},this.onMouseWheel=function(g){!g.defaultPrevented&&a.enabled&&d&&d.enabled&&d.onMouseWheel(g),a.preventDefaultWheel&&g.target===l&&g.preventDefault()};var v={passive:!0};if(r.addEventListener("mousemove",this.onMouseMove),r.addEventListener("mousedown",this.onMouseDown),r.addEventListener("mouseup",this.onMouseUp),r.addEventListener("mouseover",this.onMouseOver,v),r.addEventListener("mouseout",this.onMouseOut,v),this.preventDefaultWheel?r.addEventListener("wheel",this.onMouseWheel,{passive:!1}):r.addEventListener("wheel",this.onMouseWheel,v),window&&d.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,v),window.top.addEventListener("mouseup",this.onMouseUpWindow,v)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,v),window.addEventListener("mouseup",this.onMouseUpWindow,v),this.isTop=!1}u.pointerLock&&(this.pointerLockChange=function(g){var p=a.target;a.locked=document.pointerLockElement===p||document.mozPointerLockElement===p||document.webkitPointerLockElement===p,d.onPointerLockChange(g)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("mousemove",this.onMouseMove),r.removeEventListener("mousedown",this.onMouseDown),r.removeEventListener("mouseup",this.onMouseUp),r.removeEventListener("mouseover",this.onMouseOver),r.removeEventListener("mouseout",this.onMouseOut),window&&(r=this.isTop?window.top:window,r.removeEventListener("mousedown",this.onMouseDownWindow),r.removeEventListener("mouseup",this.onMouseUpWindow)),u.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(349),u=t(0),n=t(50),h=t(124),o=t(360),r=t(3),a=t(105),d=new u({initialize:function(f,v){this.manager=f,this.id=v,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new r,this.prevPosition=new r,this.midPoint=new r(-1,-1),this.velocity=new r,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=v===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(l){var f=l.getWorldPoint(this.x,this.y);return this.worldX=f.x,this.worldY=f.y,this},positionToCamera:function(l,f){return l.getWorldPoint(this.x,this.y,f)},updateMotion:function(){var l=this.position.x,f=this.position.y,v=this.midPoint.x,g=this.midPoint.y;if(!(l===v&&f===g)){var p=o(this.motionFactor,v,l),m=o(this.motionFactor,g,f);h(p,l,.1)&&(p=l),h(m,f,.1)&&(m=f),this.midPoint.set(p,m);var y=l-p,T=f-m;this.velocity.set(y,T),this.angle=s(p,m,l,f),this.distance=Math.sqrt(y*y+T*T)}},up:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.button=l.button,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),l.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=l.timeStamp,this.wasTouch=!1)},down:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.button=l.button,this.downElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),l.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),a.macOS&&l.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=l.timeStamp),this.wasTouch=!1},move:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.manager.transformPointer(this,l.pageX,l.pageY,!0),this.locked&&(this.movementX=l.movementX||l.mozMovementX||l.webkitMovementX||0,this.movementY=l.movementY||l.mozMovementY||l.webkitMovementY||0),this.moveTime=l.timeStamp,this.wasTouch=!1},wheel:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.deltaX=l.deltaX,this.deltaY=l.deltaY,this.deltaZ=l.deltaZ,this.wasTouch=!1},touchstart:function(l,f){l.pointerId&&(this.pointerId=l.pointerId),this.identifier=l.identifier,this.target=l.target,this.active=!0,this.buttons=1,this.event=f,this.downElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=f.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(l,f){this.event=f,this.manager.transformPointer(this,l.pageX,l.pageY,!0),this.moveTime=f.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(l,f){this.buttons=0,this.event=f,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=f.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(l,f){this.buttons=0,this.event=f,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=f.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(l,f){l===void 0&&(l=10),f===void 0&&(f=[]);for(var v=this.prevPosition.x,g=this.prevPosition.y,p=this.position.x,m=this.position.y,y=0;y<l;y++){var T=1/l*y;f[y]={x:o(T,v,p),y:o(T,g,m)}}return f},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(l){this.position.x=l}},y:{get:function(){return this.position.y},set:function(l){this.position.y=l}},time:{get:function(){return this.event?this.event.timeStamp:0}}});e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(51),n=t(1),h=new s({initialize:function(r){this.manager=r,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=n,this.onTouchStartWindow=n,this.onTouchMove=n,this.onTouchEnd=n,this.onTouchEndWindow=n,this.onTouchCancel=n,this.onTouchCancelWindow=n,this.onTouchOver=n,this.onTouchOut=n,r.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var o=this.manager.config;this.enabled=o.inputTouch,this.target=o.inputTouchEventTarget,this.capture=o.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),o.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(o){return o.preventDefault(),!1}),this},startListeners:function(){var o=this,r=this.manager.canvas,a=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(v){a&&window.focus(),!v.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&(o.manager.onTouchStart(v),o.capture&&v.cancelable&&v.target===r&&v.preventDefault())},this.onTouchStartWindow=function(v){!v.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&v.target!==r&&o.manager.onTouchStart(v)},this.onTouchMove=function(v){!v.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&(o.manager.onTouchMove(v),o.capture&&v.cancelable&&v.preventDefault())},this.onTouchEnd=function(v){!v.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&(o.manager.onTouchEnd(v),o.capture&&v.cancelable&&v.target===r&&v.preventDefault())},this.onTouchEndWindow=function(v){!v.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&v.target!==r&&o.manager.onTouchEnd(v)},this.onTouchCancel=function(v){!v.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&(o.manager.onTouchCancel(v),o.capture&&v.preventDefault())},this.onTouchCancelWindow=function(v){!v.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&o.manager.onTouchCancel(v)},this.onTouchOver=function(v){!v.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&o.manager.setCanvasOver(v)},this.onTouchOut=function(v){!v.defaultPrevented&&o.enabled&&o.manager&&o.manager.enabled&&o.manager.setCanvasOut(v)};var d=this.target;if(!!d){var l={passive:!0},f={passive:!1};d.addEventListener("touchstart",this.onTouchStart,this.capture?f:l),d.addEventListener("touchmove",this.onTouchMove,this.capture?f:l),d.addEventListener("touchend",this.onTouchEnd,this.capture?f:l),d.addEventListener("touchcancel",this.onTouchCancel,this.capture?f:l),d.addEventListener("touchover",this.onTouchOver,this.capture?f:l),d.addEventListener("touchout",this.onTouchOut,this.capture?f:l),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,f),window.addEventListener("touchend",this.onTouchEndWindow,f),window.addEventListener("touchcancel",this.onTouchCancelWindow,f)),this.enabled=!0}},stopListeners:function(){var o=this.target;o.removeEventListener("touchstart",this.onTouchStart),o.removeEventListener("touchmove",this.onTouchMove),o.removeEventListener("touchend",this.onTouchEnd),o.removeEventListener("touchcancel",this.onTouchCancel),o.removeEventListener("touchover",this.onTouchOver),o.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(22),n=t(9),h=t(8),o=t(16),r=t(5),a=t(2),d=t(24),l=t(93),f=new s({Extends:n,initialize:function(g){n.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted?this.boot():g.events.once(u.BOOT,this.boot,this)},boot:function(){var v,g,p,m,y,T,C,S=this.game.config,E=S.installGlobalPlugins;for(E=E.concat(this._pendingGlobal),v=0;v<E.length;v++)g=E[v],p=a(g,"key",null),m=a(g,"plugin",null),y=a(g,"start",!1),T=a(g,"mapping",null),C=a(g,"data",null),p&&(m?this.install(p,m,y,T,C):console.warn("Missing `plugin` for key: "+p));for(E=S.installScenePlugins,E=E.concat(this._pendingScene),v=0;v<E.length;v++)g=E[v],p=a(g,"key",null),m=a(g,"plugin",null),T=a(g,"mapping",null),p&&(m?this.installScenePlugin(p,m,T):console.warn("Missing `plugin` for key: "+p));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(u.DESTROY,this.destroy,this)},addToScene:function(v,g,p){var m,y,T,C=this.game,S=v.scene,E=v.settings.map,P=v.settings.isBooted;for(m=0;m<g.length;m++)y=g[m],C[y]?(v[y]=C[y],E.hasOwnProperty(y)&&(S[E[y]]=v[y])):y==="game"&&E.hasOwnProperty(y)&&(S[E[y]]=C);for(var M=0;M<p.length;M++)for(T=p[M],m=0;m<T.length;m++)if(y=T[m],!!d.hasCore(y)){var A=d.getCore(y),R=A.mapping,O=new A.plugin(S,this,R);v[R]=O,A.custom?S[R]=O:E.hasOwnProperty(R)&&(S[E[R]]=O),P&&O.boot()}for(T=this.plugins,m=0;m<T.length;m++){var F=T[m];F.mapping&&(S[F.mapping]=F.plugin)}},getDefaultScenePlugins:function(){var v=this.game.config.defaultPlugins;return v=v.concat(this.scenePlugins),v},installScenePlugin:function(v,g,p,m,y){if(y===void 0&&(y=!1),typeof g!="function"){console.warn("Invalid Scene Plugin: "+v);return}if(!d.hasCore(v))d.register(v,g,p,!0),this.scenePlugins.push(v);else if(!y&&d.hasCore(v)){console.warn("Scene Plugin key in use: "+v);return}if(m){var T=new g(m,this,v);m.sys[v]=T,p&&p!==""&&(m[p]=T),T.boot()}},install:function(v,g,p,m,y){if(p===void 0&&(p=!1),m===void 0&&(m=null),y===void 0&&(y=null),typeof g!="function")return console.warn("Invalid Plugin: "+v),null;if(d.hasCustom(v))return console.warn("Plugin key in use: "+v),null;if(m!==null&&(p=!0),!this.game.isBooted)this._pendingGlobal.push({key:v,plugin:g,start:p,mapping:m,data:y});else if(d.registerCustom(v,g,m,y),p)return this.start(v);return null},getIndex:function(v){for(var g=this.plugins,p=0;p<g.length;p++){var m=g[p];if(m.key===v)return p}return-1},getEntry:function(v){var g=this.getIndex(v);if(g!==-1)return this.plugins[g]},isActive:function(v){var g=this.getEntry(v);return g&&g.active},start:function(v,g){g===void 0&&(g=v);var p=this.getEntry(g);return p&&!p.active?(p.active=!0,p.plugin.start()):p||(p=this.createEntry(v,g)),p?p.plugin:null},createEntry:function(v,g){var p=d.getCustom(v);if(p){var m=new p.plugin(this);p={key:g,plugin:m,active:!0,mapping:p.mapping,data:p.data},this.plugins.push(p),m.init(p.data),m.start()}return p},stop:function(v){var g=this.getEntry(v);return g&&g.active&&(g.active=!1,g.plugin.stop()),this},get:function(v,g){g===void 0&&(g=!0);var p=this.getEntry(v);if(p)return p.plugin;var m=this.getClass(v);return m&&g?(p=this.createEntry(v,v),p?p.plugin:null):m||null},getClass:function(v){return d.getCustomClass(v)},removeGlobalPlugin:function(v){var g=this.getEntry(v);g&&l(this.plugins,g),d.removeCustom(v)},removeScenePlugin:function(v){l(this.scenePlugins,v),d.remove(v)},registerGameObject:function(v,g,p){return g&&r.register(v,g),p&&o.register(v,p),this},removeGameObject:function(v,g,p){return g===void 0&&(g=!0),p===void 0&&(p=!0),g&&r.remove(v),p&&o.remove(v),this},registerFileType:function(v,g,p){h.register(v,g),p&&p.sys.load&&(p.sys.load[v]=g)},destroy:function(){for(var v=0;v<this.plugins.length;v++)this.plugins[v].plugin.destroy();d.destroyCustomPlugins(),this.game.noReturn&&d.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});e.exports=f},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(201),u=t(0),n=t(9),h=t(104),o=t(22),r=t(401),a=t(407),d=t(402),l=t(1),f=t(10),v=t(416),g=t(76),p=t(3),m=new u({Extends:n,initialize:function(T){n.call(this),this.game=T,this.canvas,this.canvasBounds=new f,this.parent=null,this.parentIsWindow=!1,this.parentSize=new v,this.gameSize=new v,this.baseSize=new v,this.displaySize=new v,this.scaleMode=s.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new p(1,1),this.autoRound=!1,this.autoCenter=s.CENTER.NO_CENTER,this.orientation=s.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:l,windowResize:l,fullScreenChange:l,fullScreenError:l}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(o.BOOT,this.boot,this)},boot:function(){var y=this.game;this.canvas=y.canvas,this.fullscreen=y.device.fullscreen,this.scaleMode!==s.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===s.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),y.events.on(o.PRE_STEP,this.step,this),y.events.once(o.READY,this.refresh,this),y.events.once(o.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(y){this.getParent(y),this.getParentBounds();var T=y.width,C=y.height,S=y.scaleMode,E=y.zoom,P=y.autoRound;if(typeof T=="string"){var M=this.parentSize.width;M===0&&(M=window.innerWidth);var A=parseInt(T,10)/100;T=Math.floor(M*A)}if(typeof C=="string"){var R=this.parentSize.height;R===0&&(R=window.innerHeight);var O=parseInt(C,10)/100;C=Math.floor(R*O)}this.scaleMode=S,this.autoRound=P,this.autoCenter=y.autoCenter,this.resizeInterval=y.resizeInterval,P&&(T=Math.floor(T),C=Math.floor(C)),this.gameSize.setSize(T,C),E===s.ZOOM.MAX_ZOOM&&(E=this.getMaxZoom()),this.zoom=E,E!==1&&(this._resetZoom=!0),this.baseSize.setSize(T,C),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),y.minWidth>0&&this.displaySize.setMin(y.minWidth*E,y.minHeight*E),y.maxWidth>0&&this.displaySize.setMax(y.maxWidth*E,y.maxHeight*E),this.displaySize.setSize(T,C),this.orientation=d(T,C)},getParent:function(y){var T=y.parent;if(T!==null){if(this.parent=a(T),this.parentIsWindow=this.parent===document.body,y.expandParent&&y.scaleMode!==s.SCALE_MODE.NONE){var C=this.parent.getBoundingClientRect();(this.parentIsWindow||C.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",C=this.parent.getBoundingClientRect(),!this.parentIsWindow&&C.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}y.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=a(y.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var y=this.parentSize,T=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(T.height=r(!0));var C=T.width,S=T.height;return y.width!==C||y.height!==S?(y.setSize(C,S),!0):!1},lockOrientation:function(y){var T=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return T?T.call(screen,y):!1},setParentSize:function(y,T){return this.parentSize.setSize(y,T),this.refresh()},setGameSize:function(y,T){var C=this.autoRound;C&&(y=Math.floor(y),T=Math.floor(T));var S=this.width,E=this.height;return this.gameSize.resize(y,T),this.baseSize.resize(y,T),C&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(y/T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(S,E)},resize:function(y,T){var C=this.zoom,S=this.autoRound;S&&(y=Math.floor(y),T=Math.floor(T));var E=this.width,P=this.height;this.gameSize.resize(y,T),this.baseSize.resize(y,T),S&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(y*C,T*C),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var M=this.canvas.style,A=y*C,R=T*C;return S&&(A=Math.floor(A),R=Math.floor(R)),(A!==y||R!==T)&&(M.width=A+"px",M.height=R+"px"),this.refresh(E,P)},setZoom:function(y){return this.zoom=y,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(y,T){y===void 0&&(y=this.width),T===void 0&&(T=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var C=this.game.domContainer;if(C){this.baseSize.setCSS(C);var S=this.canvas.style,E=C.style;E.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",E.marginLeft=S.marginLeft,E.marginTop=S.marginTop}return this.emit(h.RESIZE,this.gameSize,this.baseSize,this.displaySize,y,T),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var y=d(this.width,this.height);y!==this.orientation&&(this.orientation=y,this.emit(h.ORIENTATION_CHANGE,y))}},updateScale:function(){var y=this.canvas.style,T=this.gameSize.width,C=this.gameSize.height,S,E,P=this.zoom,M=this.autoRound;this.scaleMode===s.SCALE_MODE.NONE?(this.displaySize.setSize(T*P,C*P),S=this.displaySize.width,E=this.displaySize.height,M&&(S=Math.floor(S),E=Math.floor(E)),this._resetZoom&&(y.width=S+"px",y.height=E+"px",this._resetZoom=!1)):this.scaleMode===s.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),S=this.displaySize.width,E=this.displaySize.height,M&&(S=Math.floor(S),E=Math.floor(E)),this.canvas.width=S,this.canvas.height=E):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),S=this.displaySize.width,E=this.displaySize.height,M&&(S=Math.floor(S),E=Math.floor(E)),y.width=S+"px",y.height=E+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var y=g(this.parentSize.width,this.gameSize.width,0,!0),T=g(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(y,T),1)},updateCenter:function(){var y=this.autoCenter;if(y!==s.CENTER.NO_CENTER){var T=this.canvas,C=T.style,S=T.getBoundingClientRect(),E=S.width,P=S.height,M=Math.floor((this.parentSize.width-E)/2),A=Math.floor((this.parentSize.height-P)/2);y===s.CENTER.CENTER_HORIZONTALLY?A=0:y===s.CENTER.CENTER_VERTICALLY&&(M=0),C.marginLeft=M+"px",C.marginTop=A+"px"}},updateBounds:function(){var y=this.canvasBounds,T=this.canvas.getBoundingClientRect();y.x=T.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),y.y=T.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),y.width=T.width,y.height=T.height},transformX:function(y){return(y-this.canvasBounds.left)*this.displayScale.x},transformY:function(y){return(y-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(y){y===void 0&&(y={navigationUI:"hide"});var T=this.fullscreen;if(!T.available){this.emit(h.FULLSCREEN_UNSUPPORTED);return}if(!T.active){var C=this.getFullscreenTarget();T.keyboard?C[T.request](Element.ALLOW_KEYBOARD_INPUT):C[T.request](y)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(h.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(y){this.removeFullscreenTarget(),this.emit(h.FULLSCREEN_FAILED,y)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var y=document.createElement("div");y.style.margin="0",y.style.padding="0",y.style.width="100%",y.style.height="100%",this.fullscreenTarget=y,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var T=this.canvas.parentNode;T.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var y=this.fullscreenTarget;if(y&&y.parentNode){var T=y.parentNode;T.insertBefore(this.canvas,y),T.removeChild(y)}}},stopFullscreen:function(){var y=this.fullscreen;if(!y.available)return this.emit(h.FULLSCREEN_UNSUPPORTED),!1;y.active&&document[y.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(h.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(y){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(y)},startListeners:function(){var y=this,T=this.listeners;if(T.orientationChange=function(){y.updateBounds(),y._checkOrientation=!0,y.dirty=!0},T.windowResize=function(){y.updateBounds(),y.dirty=!0},window.addEventListener("orientationchange",T.orientationChange,!1),window.addEventListener("resize",T.windowResize,!1),this.fullscreen.available){T.fullScreenChange=function(S){return y.onFullScreenChange(S)},T.fullScreenError=function(S){return y.onFullScreenError(S)};var C=["webkit","moz",""];C.forEach(function(S){document.addEventListener(S+"fullscreenchange",T.fullScreenChange,!1),document.addEventListener(S+"fullscreenerror",T.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.addEventListener("MSFullscreenError",T.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(y,T){!this.parent||(this._lastCheck+=T,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var y=this.listeners;window.removeEventListener("orientationchange",y.orientationChange,!1),window.removeEventListener("resize",y.windowResize,!1);var T=["webkit","moz",""];T.forEach(function(C){document.removeEventListener(C+"fullscreenchange",y.fullScreenChange,!1),document.removeEventListener(C+"fullscreenerror",y.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",y.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",y.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===s.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===s.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});e.exports=m},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(76),h=t(3),o=new u({initialize:function(a,d,l,f){a===void 0&&(a=0),d===void 0&&(d=a),l===void 0&&(l=0),f===void 0&&(f=null),this._width=a,this._height=d,this._parent=f,this.aspectMode=l,this.aspectRatio=d===0?1:a/d,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new h},setAspectMode:function(r){return r===void 0&&(r=0),this.aspectMode=r,this.setSize(this._width,this._height)},setSnap:function(r,a){return r===void 0&&(r=0),a===void 0&&(a=r),this.snapTo.set(r,a),this.setSize(this._width,this._height)},setParent:function(r){return this._parent=r,this.setSize(this._width,this._height)},setMin:function(r,a){return r===void 0&&(r=0),a===void 0&&(a=r),this.minWidth=s(r,0,this.maxWidth),this.minHeight=s(a,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(r,a){return r===void 0&&(r=Number.MAX_VALUE),a===void 0&&(a=r),this.maxWidth=s(r,this.minWidth,Number.MAX_VALUE),this.maxHeight=s(a,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(r,a){switch(r===void 0&&(r=0),a===void 0&&(a=r),this.aspectMode){case o.NONE:this._width=this.getNewWidth(n(r,this.snapTo.x)),this._height=this.getNewHeight(n(a,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case o.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(n(r,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case o.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(n(a,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case o.FIT:this.constrain(r,a,!0);break;case o.ENVELOP:this.constrain(r,a,!1);break}return this},setAspectRatio:function(r){return this.aspectRatio=r,this.setSize(this._width,this._height)},resize:function(r,a){return this._width=this.getNewWidth(n(r,this.snapTo.x)),this._height=this.getNewHeight(n(a,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(r,a){return a===void 0&&(a=!0),r=s(r,this.minWidth,this.maxWidth),a&&this._parent&&r>this._parent.width&&(r=Math.max(this.minWidth,this._parent.width)),r},getNewHeight:function(r,a){return a===void 0&&(a=!0),r=s(r,this.minHeight,this.maxHeight),a&&this._parent&&r>this._parent.height&&(r=Math.max(this.minHeight,this._parent.height)),r},constrain:function(r,a,d){r===void 0&&(r=0),a===void 0&&(a=r),d===void 0&&(d=!0),r=this.getNewWidth(r),a=this.getNewHeight(a);var l=this.snapTo,f=a===0?1:r/a;return d&&this.aspectRatio>f||!d&&this.aspectRatio<f?(r=n(r,l.x),a=r/this.aspectRatio,l.y>0&&(a=n(a,l.y),r=a*this.aspectRatio)):(d&&this.aspectRatio<f||!d&&this.aspectRatio>f)&&(a=n(a,l.y),r=a*this.aspectRatio,l.x>0&&(r=n(r,l.x),a=r*(1/this.aspectRatio))),this._width=r,this._height=a,this},fitTo:function(r,a){return this.constrain(r,a,!0)},envelop:function(r,a){return this.constrain(r,a,!1)},setWidth:function(r){return this.setSize(r,this._height)},setHeight:function(r){return this.setSize(this._width,r)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(r){r&&r.style&&(r.style.width=this._width+"px",r.style.height=this._height+"px")},copy:function(r){return r.setAspectMode(this.aspectMode),r.aspectRatio=this.aspectRatio,r.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(r){this.setSize(r,this._height)}},height:{get:function(){return this._height},set:function(r){this.setSize(this._width,r)}}});o.NONE=0,o.WIDTH_CONTROLS_HEIGHT=1,o.HEIGHT_CONTROLS_WIDTH=2,o.FIT=3,o.ENVELOP=4,e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(144),n=t(20),h=t(22),o=t(6),r=t(95),a=t(1),d=t(418),l=t(204),f=new s({initialize:function(g,p){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,p){Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++)this._pending.push({key:"default",scene:p[m],autoStart:m===0,data:{}})}g.events.once(h.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var v,g,p,m;for(v=0;v<this._pending.length;v++){g=this._pending[v],p=g.key,m=g.scene;var y;m instanceof d?y=this.createSceneFromInstance(p,m):typeof m=="object"?y=this.createSceneFromObject(p,m):typeof m=="function"&&(y=this.createSceneFromFunction(p,m)),p=y.sys.settings.key,this.keys[p]=y,this.scenes.push(y),this._data[p]&&(y.sys.settings.data=this._data[p].data,this._data[p].autoStart&&(g.autoStart=!0)),(g.autoStart||y.sys.settings.active)&&this._start.push(p)}for(this._pending.length=0,this._data={},this.isBooted=!0,v=0;v<this._start.length;v++)g=this._start[v],this.start(g);this._start.length=0}},processQueue:function(){var v=this._pending.length,g=this._queue.length;if(!(v===0&&g===0)){var p,m;if(v){for(p=0;p<v;p++)m=this._pending[p],this.add(m.key,m.scene,m.autoStart,m.data);for(p=0;p<this._start.length;p++)m=this._start[p],this.start(m);this._start.length=0,this._pending.length=0;return}for(p=0;p<this._queue.length;p++)m=this._queue[p],this[m.op](m.keyA,m.keyB);this._queue.length=0}},add:function(v,g,p,m){if(p===void 0&&(p=!1),m===void 0&&(m={}),this.isProcessing||!this.isBooted)return this._pending.push({key:v,scene:g,autoStart:p,data:m}),this.isBooted||(this._data[v]={data:m}),null;v=this.getKey(v,g);var y;return g instanceof d?y=this.createSceneFromInstance(v,g):typeof g=="object"?(g.key=v,y=this.createSceneFromObject(v,g)):typeof g=="function"&&(y=this.createSceneFromFunction(v,g)),y.sys.settings.data=m,v=y.sys.settings.key,this.keys[v]=y,this.scenes.push(y),(p||y.sys.settings.active)&&(this._pending.length?this._start.push(v):this.start(v)),y},remove:function(v){if(this.isProcessing)this._queue.push({op:"remove",keyA:v,keyB:null});else{var g=this.getScene(v);if(!g||g.sys.isTransitioning())return this;var p=this.scenes.indexOf(g),m=g.sys.settings.key;p>-1&&(delete this.keys[m],this.scenes.splice(p,1),this._start.indexOf(m)>-1&&(p=this._start.indexOf(m),this._start.splice(p,1)),g.sys.destroy())}return this},bootScene:function(v){var g=v.sys,p=g.settings;g.sceneUpdate=a,v.init&&(v.init.call(v,p.data),p.status=u.INIT,p.isTransition&&g.events.emit(n.TRANSITION_INIT,p.transitionFrom,p.transitionDuration));var m;g.load&&(m=g.load,m.reset()),m&&v.preload?(v.preload.call(v),m.list.size===0?this.create(v):(p.status=u.LOADING,m.once(r.COMPLETE,this.loadComplete,this),m.start())):this.create(v)},loadComplete:function(v){this.create(v.scene)},payloadComplete:function(v){this.bootScene(v.scene)},update:function(v,g){this.processQueue(),this.isProcessing=!0;for(var p=this.scenes.length-1;p>=0;p--){var m=this.scenes[p].sys;m.settings.status>u.START&&m.settings.status<=u.RUNNING&&m.step(v,g)}},render:function(v){for(var g=0;g<this.scenes.length;g++){var p=this.scenes[g].sys;p.settings.visible&&p.settings.status>=u.LOADING&&p.settings.status<u.SLEEPING&&p.render(v)}this.isProcessing=!1},create:function(v){var g=v.sys,p=g.settings;v.create&&(p.status=u.CREATING,v.create.call(v,p.data),p.status===u.DESTROYED)||(p.isTransition&&g.events.emit(n.TRANSITION_START,p.transitionFrom,p.transitionDuration),v.update&&(g.sceneUpdate=v.update),p.status=u.RUNNING,g.events.emit(n.CREATE,v))},createSceneFromFunction:function(v,g){var p=new g;if(p instanceof d){var m=p.sys.settings.key;if(m!==""&&(v=m),this.keys.hasOwnProperty(v))throw new Error("Cannot add a Scene with duplicate key: "+v);return this.createSceneFromInstance(v,p)}else return p.sys=new l(p),p.sys.settings.key=v,p.sys.init(this.game),p},createSceneFromInstance:function(v,g){var p=g.sys.settings.key;return p===""&&(g.sys.settings.key=v),g.sys.init(this.game),g},createSceneFromObject:function(v,g){var p=new d(g),m=p.sys.settings.key;m!==""?v=m:p.sys.settings.key=v,p.sys.init(this.game);for(var y=["init","preload","create","update","render"],T=0;T<y.length;T++){var C=o(g,y[T],null);C&&(p[y[T]]=C)}if(g.hasOwnProperty("extend")){for(var S in g.extend)if(!!g.extend.hasOwnProperty(S)){var E=g.extend[S];S==="data"&&p.hasOwnProperty("data")&&typeof E=="object"?p.data.merge(E):S!=="sys"&&(p[S]=E)}}return p},getKey:function(v,g){if(v||(v="default"),typeof g=="function")return v;if(g instanceof d?v=g.sys.settings.key:typeof g=="object"&&g.hasOwnProperty("key")&&(v=g.key),this.keys.hasOwnProperty(v))throw new Error("Cannot add a Scene with duplicate key: "+v);return v},getScenes:function(v,g){v===void 0&&(v=!0),g===void 0&&(g=!1);for(var p=[],m=this.scenes,y=0;y<m.length;y++){var T=m[y];T&&(!v||v&&T.sys.isActive())&&p.push(T)}return g?p.reverse():p},getScene:function(v){if(typeof v=="string"){if(this.keys[v])return this.keys[v]}else for(var g=0;g<this.scenes.length;g++)if(v===this.scenes[g])return v;return null},isActive:function(v){var g=this.getScene(v);return g?g.sys.isActive():null},isPaused:function(v){var g=this.getScene(v);return g?g.sys.isPaused():null},isVisible:function(v){var g=this.getScene(v);return g?g.sys.isVisible():null},isSleeping:function(v){var g=this.getScene(v);return g?g.sys.isSleeping():null},pause:function(v,g){var p=this.getScene(v);return p&&p.sys.pause(g),this},resume:function(v,g){var p=this.getScene(v);return p&&p.sys.resume(g),this},sleep:function(v,g){var p=this.getScene(v);return p&&!p.sys.isTransitioning()&&p.sys.sleep(g),this},wake:function(v,g){var p=this.getScene(v);return p&&p.sys.wake(g),this},run:function(v,g){var p=this.getScene(v);if(!p){for(var m=0;m<this._pending.length;m++)if(this._pending[m].key===v){this.queueOp("start",v,g);break}return this}p.sys.isSleeping()?p.sys.wake(g):p.sys.isPaused()?p.sys.resume(g):this.start(v,g)},start:function(v,g){if(!this.isBooted)return this._data[v]={autoStart:!0,data:g},this;var p=this.getScene(v);if(p){var m=p.sys;if(m.isActive()||m.isPaused())m.shutdown(),m.sceneUpdate=a,m.start(g);else{m.sceneUpdate=a,m.start(g);var y;if(m.load&&(y=m.load),y&&m.settings.hasOwnProperty("pack")&&(y.reset(),y.addPack({payload:m.settings.pack})))return m.settings.status=u.LOADING,y.once(r.COMPLETE,this.payloadComplete,this),y.start(),this}this.bootScene(p)}return this},stop:function(v,g){var p=this.getScene(v);return p&&!p.sys.isTransitioning()&&p.sys.shutdown(g),this},switch:function(v,g){var p=this.getScene(v),m=this.getScene(g);return p&&m&&p!==m&&(this.sleep(v),this.isSleeping(g)?this.wake(g):this.start(g)),this},getAt:function(v){return this.scenes[v]},getIndex:function(v){var g=this.getScene(v);return this.scenes.indexOf(g)},bringToTop:function(v){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:v,keyB:null});else{var g=this.getIndex(v);if(g!==-1&&g<this.scenes.length){var p=this.getScene(v);this.scenes.splice(g,1),this.scenes.push(p)}}return this},sendToBack:function(v){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:v,keyB:null});else{var g=this.getIndex(v);if(g!==-1&&g>0){var p=this.getScene(v);this.scenes.splice(g,1),this.scenes.unshift(p)}}return this},moveDown:function(v){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:v,keyB:null});else{var g=this.getIndex(v);if(g>0){var p=g-1,m=this.getScene(v),y=this.getAt(p);this.scenes[g]=y,this.scenes[p]=m}}return this},moveUp:function(v){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:v,keyB:null});else{var g=this.getIndex(v);if(g<this.scenes.length-1){var p=g+1,m=this.getScene(v),y=this.getAt(p);this.scenes[g]=y,this.scenes[p]=m}}return this},moveAbove:function(v,g){if(v===g)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:v,keyB:g});else{var p=this.getIndex(v),m=this.getIndex(g);if(p!==-1&&m!==-1){var y=this.getAt(m);this.scenes.splice(m,1),this.scenes.splice(p+1,0,y)}}return this},moveBelow:function(v,g){if(v===g)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:v,keyB:g});else{var p=this.getIndex(v),m=this.getIndex(g);if(p!==-1&&m!==-1){var y=this.getAt(m);this.scenes.splice(m,1),p===0?this.scenes.unshift(y):this.scenes.splice(p,0,y)}}return this},queueOp:function(v,g,p){return this._queue.push({op:v,keyA:g,keyB:p}),this},swapPosition:function(v,g){if(v===g)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:v,keyB:g});else{var p=this.getIndex(v),m=this.getIndex(g);if(p!==m&&p!==-1&&m!==-1){var y=this.getAt(p);this.scenes[p]=this.scenes[m],this.scenes[m]=y}}return this},dump:function(){for(var v=[],g=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],p=0;p<this.scenes.length;p++){var m=this.scenes[p].sys,y=m.settings.visible&&(m.settings.status===u.RUNNING||m.settings.status===u.PAUSED)?"[*] ":"[-] ";y+=m.settings.key+" ("+g[m.settings.status]+")",v.push(y)}console.log(v.join(`
`))},destroy:function(){for(var v=0;v<this.scenes.length;v++){var g=this.scenes[v].sys;g.destroy()}this.update=a,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});e.exports=f},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(204),n=new s({initialize:function(o){this.sys=new u(this,o),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=t(205),n=function(h){var o=h.game.config.defaultPhysicsSystem,r=s(h.settings,"physics",!1);if(!(!o&&!r)){var a=[];if(o&&a.push(u(o+"Physics")),r)for(var d in r)d=u(d.concat("Physics")),a.indexOf(d)===-1&&a.push(d);return a}};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=function(n){var h=n.plugins.getDefaultScenePlugins(),o=s(n.settings,"plugins",!1);return Array.isArray(o)?o:h||[]};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(144),u=t(6),n=t(127),h=t(978),o={create:function(r){return typeof r=="string"?r={key:r}:r===void 0&&(r={}),{status:s.PENDING,key:u(r,"key",""),active:u(r,"active",!1),visible:u(r,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:u(r,"pack",!1),cameras:u(r,"cameras",null),map:u(r,"map",n(h,u(r,"mapAdd",{}))),physics:u(r,"physics",{}),loader:u(r,"loader",{}),plugins:u(r,"plugins",!1),input:u(r,"input",{})}}};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=t(423),n=t(0),h=t(38),o=t(33),r=t(9),a=t(106),d=t(22),l=t(388),f=t(6),v=t(425),g=t(206),p=new n({Extends:r,initialize:function(y){r.call(this),this.game=y,this.name="TextureManager",this.list={},this._tempCanvas=s.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,y.events.once(d.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(a.LOAD,this.updatePending,this),this.on(a.ERROR,this.updatePending,this);var m=this.game.config;this.addBase64("__DEFAULT",m.defaultImage),this.addBase64("__MISSING",m.missingImage),this.addBase64("__WHITE",m.whiteImage),this.game.events.once(d.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(a.LOAD),this.off(a.ERROR),this.emit(a.READY))},checkKey:function(m){return this.exists(m)?(console.error("Texture key already in use: "+m),!1):!0},remove:function(m){if(typeof m=="string")if(this.exists(m))m=this.get(m);else return console.warn("No texture found matching key: "+m),this;return this.list.hasOwnProperty(m.key)&&(m.destroy(),this.emit(a.REMOVE,m.key)),this},removeKey:function(m){return this.list.hasOwnProperty(m)&&delete this.list[m],this},addBase64:function(m,y){if(this.checkKey(m)){var T=this,C=new Image;C.onerror=function(){T.emit(a.ERROR,m)},C.onload=function(){var S=T.create(m,C);v.Image(S,0),T.emit(a.ADD,m,S),T.emit(a.LOAD,m,S)},C.src=y}return this},getBase64:function(m,y,T,C){T===void 0&&(T="image/png"),C===void 0&&(C=.92);var S="",E=this.getFrame(m,y);if(E&&(E.source.isRenderTexture||E.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(E){var P=E.canvasData,M=s.create2D(this,P.width,P.height),A=M.getContext("2d");A.drawImage(E.source.image,P.x,P.y,P.width,P.height,0,0,P.width,P.height),S=M.toDataURL(T,C),s.remove(M)}return S},addImage:function(m,y,T){var C=null;return this.checkKey(m)&&(C=this.create(m,y),v.Image(C,0),T&&C.setDataSource(T),this.emit(a.ADD,m,C)),C},addGLTexture:function(m,y,T,C){var S=null;return this.checkKey(m)&&(T===void 0&&(T=y.width),C===void 0&&(C=y.height),S=this.create(m,y,T,C),S.add("__BASE",0,0,0,T,C),this.emit(a.ADD,m,S)),S},addRenderTexture:function(m,y){var T=null;return this.checkKey(m)&&(T=this.create(m,y),T.add("__BASE",0,0,0,y.width,y.height),this.emit(a.ADD,m,T)),T},generate:function(m,y){if(this.checkKey(m)){var T=s.create(this,1,1);return y.canvas=T,l(y),this.addCanvas(m,T)}else return null},createCanvas:function(m,y,T){if(y===void 0&&(y=256),T===void 0&&(T=256),this.checkKey(m)){var C=s.create(this,y,T,o.CANVAS,!0);return this.addCanvas(m,C)}return null},addCanvas:function(m,y,T){T===void 0&&(T=!1);var C=null;return T?C=new u(this,m,y,y.width,y.height):this.checkKey(m)&&(C=new u(this,m,y,y.width,y.height),this.list[m]=C,this.emit(a.ADD,m,C)),C},addAtlas:function(m,y,T,C){return Array.isArray(T.textures)||Array.isArray(T.frames)?this.addAtlasJSONArray(m,y,T,C):this.addAtlasJSONHash(m,y,T,C)},addAtlasJSONArray:function(m,y,T,C){var S=null;if(this.checkKey(m)){if(S=this.create(m,y),Array.isArray(T))for(var E=T.length===1,P=0;P<S.source.length;P++){var M=E?T[0]:T[P];v.JSONArray(S,P,M)}else v.JSONArray(S,0,T);C&&S.setDataSource(C),this.emit(a.ADD,m,S)}return S},addAtlasJSONHash:function(m,y,T,C){var S=null;if(this.checkKey(m)){if(S=this.create(m,y),Array.isArray(T))for(var E=0;E<T.length;E++)v.JSONHash(S,E,T[E]);else v.JSONHash(S,0,T);C&&S.setDataSource(C),this.emit(a.ADD,m,S)}return S},addAtlasXML:function(m,y,T,C){var S=null;return this.checkKey(m)&&(S=this.create(m,y),v.AtlasXML(S,0,T),C&&S.setDataSource(C),this.emit(a.ADD,m,S)),S},addUnityAtlas:function(m,y,T,C){var S=null;return this.checkKey(m)&&(S=this.create(m,y),v.UnityYAML(S,0,T),C&&S.setDataSource(C),this.emit(a.ADD,m,S)),S},addSpriteSheet:function(m,y,T){var C=null;if(this.checkKey(m)){C=this.create(m,y);var S=C.source[0].width,E=C.source[0].height;v.SpriteSheet(C,0,0,0,S,E,T),this.emit(a.ADD,m,C)}return C},addSpriteSheetFromAtlas:function(m,y){if(!this.checkKey(m))return null;var T=f(y,"atlas",null),C=f(y,"frame",null);if(!(!T||!C)){var S=this.get(T),E=S.get(C);if(E){var P=this.create(m,E.source.image);return E.trimmed?v.SpriteSheetFromAtlas(P,E,y):v.SpriteSheet(P,0,E.cutX,E.cutY,E.cutWidth,E.cutHeight,y),this.emit(a.ADD,m,P),P}}},create:function(m,y,T,C){var S=null;return this.checkKey(m)&&(S=new g(this,m,y,T,C),this.list[m]=S),S},exists:function(m){return this.list.hasOwnProperty(m)},get:function(m){return m===void 0&&(m="__DEFAULT"),this.list[m]?this.list[m]:m instanceof g?m:this.list.__MISSING},cloneFrame:function(m,y){if(this.list[m])return this.list[m].get(y).clone()},getFrame:function(m,y){if(this.list[m])return this.list[m].get(y)},getTextureKeys:function(){var m=[];for(var y in this.list)y!=="__DEFAULT"&&y!=="__MISSING"&&m.push(y);return m},getPixel:function(m,y,T,C){var S=this.getFrame(T,C);if(S){m-=S.x,y-=S.y;var E=S.data.cut;if(m+=E.x,y+=E.y,m>=E.x&&m<E.r&&y>=E.y&&y<E.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(S.source.image,m,y,1,1,0,0,1,1);var M=P.getImageData(0,0,1,1);return new h(M.data[0],M.data[1],M.data[2],M.data[3])}}return null},getPixelAlpha:function(m,y,T,C){var S=this.getFrame(T,C);if(S){m-=S.x,y-=S.y;var E=S.data.cut;if(m+=E.x,y+=E.y,m>=E.x&&m<E.r&&y>=E.y&&y<E.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(S.source.image,m,y,1,1,0,0,1,1);var M=P.getImageData(0,0,1,1);return M.data[3]}}return null},setTexture:function(m,y,T){return this.list[y]&&(m.texture=this.list[y],m.frame=m.texture.get(T)),m},renameTexture:function(m,y){var T=this.get(m);return T&&m!==y?(T.key=y,this.list[y]=T,delete this.list[m],!0):!1},each:function(m,y){for(var T=[null],C=1;C<arguments.length;C++)T.push(arguments[C]);for(var S in this.list)T[0]=this.list[S],m.apply(y,T)},destroy:function(){for(var m in this.list)this.list[m].destroy();this.list={},this.game=null,s.remove(this._tempCanvas)}});e.exports=p},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(18),n=t(38),h=t(33),o=t(138),r=t(206),a=new s({Extends:r,initialize:function(l,f,v,g,p){r.call(this,l,f,v,g,p),this.add("__BASE",0,0,0,g,p),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=g,this.height=p,this.imageData=this.context.getImageData(0,0,g,p),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===h.WEBGL&&this.refresh(),this},draw:function(d,l,f){return this.context.drawImage(f,d,l),this.update()},drawFrame:function(d,l,f,v){f===void 0&&(f=0),v===void 0&&(v=0);var g=this.manager.getFrame(d,l);if(g){var p=g.canvasData,m=g.cutWidth,y=g.cutHeight,T=g.source.resolution;return this.context.drawImage(g.source.image,p.x,p.y,m,y,f,v,m/T,y/T),this.update()}else return this},setPixel:function(d,l,f,v,g,p){p===void 0&&(p=255),d=Math.abs(Math.floor(d)),l=Math.abs(Math.floor(l));var m=this.getIndex(d,l);if(m>-1){var y=this.context.getImageData(d,l,1,1);y.data[0]=f,y.data[1]=v,y.data[2]=g,y.data[3]=p,this.context.putImageData(y,d,l)}return this},putData:function(d,l,f,v,g,p,m){return v===void 0&&(v=0),g===void 0&&(g=0),p===void 0&&(p=d.width),m===void 0&&(m=d.height),this.context.putImageData(d,l,f,v,g,p,m),this},getData:function(d,l,f,v){d=u(Math.floor(d),0,this.width-1),l=u(Math.floor(l),0,this.height-1),f=u(f,1,this.width-d),v=u(v,1,this.height-l);var g=this.context.getImageData(d,l,f,v);return g},getPixel:function(d,l,f){f||(f=new n);var v=this.getIndex(d,l);if(v>-1){var g=this.data,p=g[v+0],m=g[v+1],y=g[v+2],T=g[v+3];f.setTo(p,m,y,T)}return f},getPixels:function(d,l,f,v){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=this.width),v===void 0&&(v=f),d=Math.abs(Math.round(d)),l=Math.abs(Math.round(l));for(var g=u(d,0,this.width),p=u(d+f,0,this.width),m=u(l,0,this.height),y=u(l+v,0,this.height),T=new n,C=[],S=m;S<y;S++){for(var E=[],P=g;P<p;P++)T=this.getPixel(P,S,T),E.push({x:P,y:S,color:T.color,alpha:T.alphaGL});C.push(E)}return C},getIndex:function(d,l){return d=Math.abs(Math.round(d)),l=Math.abs(Math.round(l)),d<this.width&&l<this.height?(d+l*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(d,l,f,v){return d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=this.width),v===void 0&&(v=this.height),this.context.clearRect(d,l,f,v),this.update()},setSize:function(d,l){return l===void 0&&(l=d),(d!==this.width||l!==this.height)&&(this.canvas.width=d,this.canvas.height=l,this._source.width=d,this._source.height=l,this._source.isPowerOf2=o(d,l),this.frames.__BASE.setSize(d,l,0,0),this.width=d,this.height=l,this.refresh()),this},destroy:function(){r.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=t(0),n=t(138),h=t(168),o=new u({initialize:function(a,d,l,f,v){v===void 0&&(v=!1);var g=a.manager.game;this.renderer=g.renderer,this.texture=a,this.source=d,this.image=d,this.compressionAlgorithm=null,this.resolution=1,this.width=l||d.naturalWidth||d.videoWidth||d.width||0,this.height=f||d.naturalHeight||d.videoHeight||d.height||0,this.scaleMode=h.DEFAULT,this.isCanvas=d instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&d instanceof HTMLVideoElement,this.isRenderTexture=d.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&d instanceof WebGLTexture,this.isPowerOf2=n(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=v,this.init(g)},init:function(r){var a=this.renderer;a&&(a.gl?this.isCanvas?this.glTexture=a.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=a.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=a.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=a.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),r.config.antialias||this.setFilter(1)},setFilter:function(r){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,r),this.scaleMode=r},setFlipY:function(r){return r===void 0&&(r=!0),this.flipY=r,this},update:function(){var r=this.renderer.gl;r&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):r&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&s.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AtlasXML:t(979),Canvas:t(980),Image:t(981),JSONArray:t(982),JSONHash:t(983),SpriteSheet:t(984),SpriteSheetFromAtlas:t(985),UnityYAML:t(986)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(427),u=t(430),n=t(432),h={create:function(o){var r=o.config.audio,a=o.device.audio;return r.noAudio||!a.webAudio&&!a.audioData?new u(o):a.webAudio&&!r.disableWebAudio?new n(o):new s(o)}};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(145),u=t(0),n=t(70),h=t(429),o=new u({Extends:s,initialize:function(a){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,s.call(this,a)},add:function(r,a){var d=new h(this,r,a);return this.sounds.push(d),d},unlock:function(){this.locked=!1;var r=this;if(this.game.cache.audio.entries.each(function(f,v){for(var g=0;g<v.length;g++)if(v[g].dataset.locked==="true")return r.locked=!0,!1;return!0}),!!this.locked){var a=!1,d=function(){a=!0},l=function(){if(a){a=!1;return}document.body.removeEventListener("touchmove",d),document.body.removeEventListener("touchend",l);var f=[];if(r.game.cache.audio.entries.each(function(g,p){for(var m=0;m<p.length;m++){var y=p[m];y.dataset.locked==="true"&&f.push(y)}return!0}),f.length!==0){var v=f[f.length-1];v.oncanplaythrough=function(){v.oncanplaythrough=null,f.forEach(function(g){g.dataset.locked="false"}),r.unlocked=!0},f.forEach(function(g){g.load()})}};this.once(n.UNLOCKED,function(){for(this.forEachActiveSound(function(v){v.currentMarker===null&&v.duration===0&&(v.duration=v.tags[0].duration),v.totalDuration=v.tags[0].duration});this.lockedActionsQueue.length;){var f=this.lockedActionsQueue.shift();f.sound[f.prop].apply?f.sound[f.prop].apply(f.sound,f.value||[]):f.sound[f.prop]=f.value}},this),document.body.addEventListener("touchmove",d,!1),document.body.addEventListener("touchend",l,!1)}},onBlur:function(){this.forEachActiveSound(function(r){r.isPlaying&&(this.onBlurPausedSounds.push(r),r.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(r){r.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){s.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(r,a,d){return r.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:r,prop:a,value:d}),!0):!1},setMute:function(r){return this.mute=r,this},mute:{get:function(){return this._mute},set:function(r){this._mute=r,this.forEachActiveSound(function(a){a.updateMute()}),this.emit(n.GLOBAL_MUTE,this,r)}},setVolume:function(r){return this.volume=r,this},volume:{get:function(){return this._volume},set:function(r){this._volume=r,this.forEachActiveSound(function(a){a.updateVolume()}),this.emit(n.GLOBAL_VOLUME,this,r)}}});e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,h,o,r,a){if(r===void 0&&(r=0),a===void 0&&(a=n.length),s(n,r,a))for(var d=r;d<a;d++){var l=n[d];if(!h||h&&o===void 0&&l.hasOwnProperty(h)||h&&o!==void 0&&l[h]===o)return l}return null};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(146),u=t(0),n=t(70),h=t(18),o=new u({Extends:s,initialize:function(a,d,l){if(l===void 0&&(l={}),this.tags=a.game.cache.audio.get(d),!this.tags)throw new Error('There is no audio asset with key "'+d+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,s.call(this,a,d,l)},play:function(r,a){return this.manager.isLocked(this,"play",[r,a])||!s.prototype.play.call(this,r,a)||!this.pickAndPlayAudioTag()?!1:(this.emit(n.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!s.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(n.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!s.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(n.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!s.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(n.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var r=this.currentConfig.seek,a=this.currentConfig.delay,d=(this.currentMarker?this.currentMarker.start:0)+r;return this.previousTime=d,this.audio.currentTime=d,this.applyConfig(),a===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+a*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var r=0;r<this.tags.length;r++){var a=this.tags[r];if(a.dataset.used==="false")return a.dataset.used="true",this.audio=a,!0}if(!this.manager.override)return!1;var d=[];this.manager.forEachActiveSound(function(f){f.key===this.key&&f.audio&&d.push(f)},this),d.sort(function(f,v){return f.loop===v.loop?v.seek/v.duration-f.seek/f.duration:f.loop?1:-1});var l=d[0];return this.audio=l.audio,l.reset(),l.audio=null,l.startTime=0,l.previousTime=0,!0},playCatchPromise:function(){var r=this.audio.play();r&&r.catch(function(a){console.warn(a)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){s.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(r){if(!!this.isPlaying){if(this.startTime>0){this.startTime<r-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,r-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var a=this.currentMarker?this.currentMarker.start:0,d=a+this.duration,l=this.audio.currentTime;if(this.currentConfig.loop)l>=d-this.manager.loopEndOffset?(this.audio.currentTime=a+Math.max(0,l-d),l=this.audio.currentTime):l<a&&(this.audio.currentTime+=a,l=this.audio.currentTime),l<this.previousTime&&this.emit(n.LOOPED,this);else if(l>=d){this.reset(),this.stopAndReleaseAudioTag(),this.emit(n.COMPLETE,this);return}this.previousTime=l}},destroy:function(){s.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=h(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){s.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(r){this.currentConfig.mute=r,!this.manager.isLocked(this,"mute",r)&&(this.updateMute(),this.emit(n.MUTE,this,r))}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.currentConfig.volume},set:function(r){this.currentConfig.volume=r,!this.manager.isLocked(this,"volume",r)&&(this.updateVolume(),this.emit(n.VOLUME,this,r))}},setVolume:function(r){return this.volume=r,this},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,!this.manager.isLocked(this,n.RATE,r)&&(this.calculateRate(),this.emit(n.RATE,this,r))}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,!this.manager.isLocked(this,n.DETUNE,r)&&(this.calculateRate(),this.emit(n.DETUNE,this,r))}},setDetune:function(r){return this.detune=r,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.isLocked(this,"seek",r)||this.startTime>0||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.isPlaying?(this.previousTime=r,this.audio.currentTime=r):this.isPaused&&(this.currentConfig.seek=r),this.emit(n.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,!this.manager.isLocked(this,"loop",r)&&(this.audio&&(this.audio.loop=r),this.emit(n.LOOP,this,r))}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.currentConfig.pan},set:function(r){this.currentConfig.pan=r,this.emit(n.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(145),u=t(0),n=t(9),h=t(431),o=t(1),r=new u({Extends:n,initialize:function(d){n.call(this),this.game=d,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(a,d){var l=new h(this,a,d);return this.sounds.push(l),l},addAudioSprite:function(a,d){var l=this.add(a,d);return l.spritemap={},l},play:function(a,d){return!1},playAudioSprite:function(a,d,l){return!1},remove:function(a){return s.prototype.remove.call(this,a)},removeByKey:function(a){return s.prototype.removeByKey.call(this,a)},pauseAll:o,resumeAll:o,stopAll:o,update:o,setRate:o,setDetune:o,setMute:o,setVolume:o,forEachActiveSound:function(a,d){s.prototype.forEachActiveSound.call(this,a,d)},destroy:function(){s.prototype.destroy.call(this)}});e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(146),u=t(0),n=t(9),h=t(17),o=function(){return!1},r=function(){return null},a=function(){return this},d=new u({Extends:n,initialize:function(f,v,g){g===void 0&&(g={}),n.call(this),this.manager=f,this.key=v,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=h({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:o,updateMarker:o,removeMarker:r,play:o,pause:o,resume:o,stop:o,destroy:function(){s.prototype.destroy.call(this)},setMute:a,setVolume:a,setRate:a,setDetune:a,setSeek:a,setLoop:a,setPan:a});e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(433),u=t(145),n=t(0),h=t(70),o=t(22),r=t(434),a=new n({Extends:u,initialize:function(l){this.context=this.createAudioContext(l),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),u.call(this,l),this.locked&&l.isBooted?this.unlock():l.events.once(o.BOOT,this.unlock,this)},createAudioContext:function(d){var l=d.config.audio;if(l.context)return l.context.resume(),l.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(d){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=d,this.masterMuteNode=d.createGain(),this.masterVolumeNode=d.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(d.destination),this.destination=this.masterMuteNode,this},add:function(d,l){var f=new r(this,d,l);return this.sounds.push(f),f},decodeAudio:function(d,l){var f;Array.isArray(d)?f=d:f=[{key:d,data:l}];for(var v=this.game.cache.audio,g=f.length,p=0;p<f.length;p++){var m=f[p],y=m.key,T=m.data;typeof T=="string"&&(T=s(T));var C=function(E,P){v.add(E,P),this.emit(h.DECODED,E),g--,g===0&&this.emit(h.DECODED_ALL)}.bind(this,y),S=function(E,P){console.error("Error decoding audio: "+E+" - ",P?P.message:""),g--,g===0&&this.emit(h.DECODED_ALL)}.bind(this,y);this.context.decodeAudioData(T,C,S)}},unlock:function(){var d=this,l=document.body,f=function v(){if(d.context&&l){var g=l.removeEventListener;d.context.resume().then(function(){g("touchstart",v),g("touchend",v),g("click",v),g("keydown",v),d.unlocked=!0},function(){g("touchstart",v),g("touchend",v),g("click",v),g("keydown",v)})}};l&&(l.addEventListener("touchstart",f,!1),l.addEventListener("touchend",f,!1),l.addEventListener("click",f,!1),l.addEventListener("keydown",f,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var d=this.context;(d.state==="suspended"||d.state==="interrupted")&&!this.locked&&d.resume()},update:function(d,l){u.prototype.update.call(this,d,l);var f=this.context;f&&f.state==="interrupted"&&f.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var d=this;this.context.close().then(function(){d.context=null})}u.prototype.destroy.call(this)},setMute:function(d){return this.mute=d,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(d){this.masterMuteNode.gain.setValueAtTime(d?0:1,0),this.emit(h.GLOBAL_MUTE,this,d)}},setVolume:function(d){return this.volume=d,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(d){this.masterVolumeNode.gain.setValueAtTime(d,0),this.emit(h.GLOBAL_VOLUME,this,d)}}});e.exports=a},function(e,c){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Uint8Array(256),u=0;u<t.length;u++)s[t.charCodeAt(u)]=u;var n=function(h){h=h.substr(h.indexOf(",")+1);var o=h.length,r=o*.75,a=0,d,l,f,v;h[o-1]==="="&&(r--,h[o-2]==="="&&r--);for(var g=new ArrayBuffer(r),p=new Uint8Array(g),m=0;m<o;m+=4)d=s[h.charCodeAt(m)],l=s[h.charCodeAt(m+1)],f=s[h.charCodeAt(m+2)],v=s[h.charCodeAt(m+3)],p[a++]=d<<2|l>>4,p[a++]=(l&15)<<4|f>>2,p[a++]=(f&3)<<6|v&63;return g};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(146),u=t(0),n=t(70),h=new u({Extends:s,initialize:function(r,a,d){if(d===void 0&&(d={}),this.audioBuffer=r.game.cache.audio.get(a),!this.audioBuffer)throw new Error('Audio key "'+a+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=r.context.createGain(),this.volumeNode=r.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),r.context.createStereoPanner?(this.pannerNode=r.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(r.destination)):this.volumeNode.connect(r.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,s.call(this,r,a,d)},play:function(o,r){return s.prototype.play.call(this,o,r)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(n.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!s.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(n.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!s.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(n.RESUME,this),!0)},stop:function(){return s.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(n.STOP,this),!0):!1},createAndStartBufferSource:function(){var o=this.currentConfig.seek,r=this.currentConfig.delay,a=this.manager.context.currentTime+r,d=(this.currentMarker?this.currentMarker.start:0)+o,l=this.duration-o;this.playTime=a-o,this.startTime=a,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,a),Math.max(0,d),Math.max(0,l)),this.resetConfig()},createAndStartLoopBufferSource:function(){var o=this.getLoopTime(),r=this.currentMarker?this.currentMarker.start:0,a=this.duration;this.loopTime=o,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,o),Math.max(0,r),Math.max(0,a))},createBufferSource:function(){var o=this,r=this.manager.context.createBufferSource();return r.buffer=this.audioBuffer,r.connect(this.muteNode),r.onended=function(a){a.target===o.source&&(o.currentConfig.loop?o.hasLooped=!0:o.hasEnded=!0)},r},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),s.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,s.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(n.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(n.LOOPED,this))},destroy:function(){s.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){s.prototype.calculateRate.call(this);var o=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,o),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,o)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var o=0,r=0;r<this.rateUpdates.length;r++){var a=0;r<this.rateUpdates.length-1?a=this.rateUpdates[r+1].time:a=this.manager.context.currentTime-this.playTime,o+=(a-this.rateUpdates[r].time)*this.rateUpdates[r].rate}return o},getLoopTime:function(){for(var o=0,r=0;r<this.rateUpdates.length-1;r++)o+=(this.rateUpdates[r+1].time-this.rateUpdates[r].time)*this.rateUpdates[r].rate;var a=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+a.time+(this.duration-o)/a.rate},rate:{get:function(){return this.currentConfig.rate},set:function(o){this.currentConfig.rate=o,this.calculateRate(),this.emit(n.RATE,this,o)}},setRate:function(o){return this.rate=o,this},detune:{get:function(){return this.currentConfig.detune},set:function(o){this.currentConfig.detune=o,this.calculateRate(),this.emit(n.DETUNE,this,o)}},setDetune:function(o){return this.detune=o,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(o){this.currentConfig.mute=o,this.muteNode.gain.setValueAtTime(o?0:1,0),this.emit(n.MUTE,this,o)}},setMute:function(o){return this.mute=o,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(o){this.currentConfig.volume=o,this.volumeNode.gain.setValueAtTime(o,0),this.emit(n.VOLUME,this,o)}},setVolume:function(o){return this.volume=o,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(o){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(o=Math.min(Math.max(0,o),this.duration),this.currentConfig.seek=o,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(n.SEEK,this,o))}},setSeek:function(o){return this.seek=o,this},loop:{get:function(){return this.currentConfig.loop},set:function(o){this.currentConfig.loop=o,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),o&&this.createAndStartLoopBufferSource()),this.emit(n.LOOP,this,o)}},setLoop:function(o){return this.loop=o,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(o){this.currentConfig.pan=o,this.pannerNode&&this.pannerNode.pan.setValueAtTime(o,this.manager.context.currentTime),this.emit(n.PAN,this,o)}},setPan:function(o){return this.pan=o,this}});e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=s.length,n=s[0].length,h=new Array(n),o=0;o<n;o++){h[o]=new Array(u);for(var r=u-1;r>-1;r--)h[o][r]=s[r][o]}return h};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(n,h,o){var r=n[h];n[h]=n[o],n[o]=r}function s(n,h){return n<h?-1:n>h?1:0}var u=function(n,h,o,r,a){for(o===void 0&&(o=0),r===void 0&&(r=n.length-1),a===void 0&&(a=s);r>o;){if(r-o>600){var d=r-o+1,l=h-o+1,f=Math.log(d),v=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*v*(d-v)/d)*(l-d/2<0?-1:1),p=Math.max(o,Math.floor(h-l*v/d+g)),m=Math.min(r,Math.floor(h+(d-l)*v/d+g));u(n,h,p,m,a)}var y=n[h],T=o,C=r;for(t(n,o,h),a(n[r],y)>0&&t(n,o,r);T<C;){for(t(n,T,C),T++,C--;a(n[T],y)<0;)T++;for(;a(n[C],y)>0;)C--}a(n[o],y)===0?t(n,o,C):(C++,t(n,C,r)),C<=h&&(o=C+1),h<=C&&(r=C-1)}};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u=t(131),n=function(o,r,a){for(var d=[],l=0;l<o.length;l++)for(var f=0;f<r.length;f++)for(var v=0;v<a;v++)d.push({a:o[l],b:r[f]});return d},h=function(o,r,a){var d=s(a,"max",0),l=s(a,"qty",1),f=s(a,"random",!1),v=s(a,"randomB",!1),g=s(a,"repeat",0),p=s(a,"yoyo",!1),m=[];if(v&&u(r),g===-1)if(d===0)g=0;else{var y=o.length*r.length*l;p&&(y*=2),g=Math.ceil(d/y)}for(var T=0;T<=g;T++){var C=n(o,r,l);f&&u(C),m=m.concat(C),p&&(C.reverse(),m=m.concat(C))}return d&&m.splice(d),m};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={PROCESS_QUEUE_ADD:t(1041),PROCESS_QUEUE_REMOVE:t(1042)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(13),u=function(n,h){var o=s(h,"anims",null);if(o===null)return n;if(typeof o=="string")n.anims.play(o);else if(typeof o=="object"){var r=n.anims,a=s(o,"key",void 0);if(a){var d=s(o,"startFrame",void 0),l=s(o,"delay",0),f=s(o,"repeat",0),v=s(o,"repeatDelay",0),g=s(o,"yoyo",!1),p=s(o,"play",!1),m=s(o,"delayedPlay",0),y={key:a,delay:l,repeat:f,repeatDelay:v,yoyo:g,startFrame:d};p?r.play(y):m>0?r.playAfterDelay(y,m):r.load(y)}}return n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(109),n=new s({initialize:function(o,r,a,d,l){this.parent=o,this.x=r,this.y=a,this.frame=d,this.data={},this.tint=16777215,this._visible=l,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(h){return h===void 0?this.frame=this.parent.frame:h instanceof u&&h.texture===this.parent.texture?this.frame=h:this.frame=this.parent.texture.get(h),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(h,o,r){return this.x=h,this.y=o,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,r&&this.setFrame(r),this},setPosition:function(h,o){return this.x=h,this.y=o,this},setFlipX:function(h){return this.flipX=h,this},setFlipY:function(h){return this.flipY=h,this},setFlip:function(h,o){return this.flipX=h,this.flipY=o,this},setVisible:function(h){return this.visible=h,this},setAlpha:function(h){return this.alpha=h,this},setTint:function(h){return this.tint=h,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(h){this.parent.dirty|=this._visible!==h,this._visible=h}},alpha:{get:function(){return this._alpha},set:function(h){this.parent.dirty|=this._alpha>0!=h>0,this._alpha=h}}});e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,h,o){o===void 0&&(o=new s);var r=Math.min(n.x,h.x),a=Math.min(n.y,h.y),d=Math.max(n.right,h.right)-r,l=Math.max(n.bottom,h.bottom)-a;return o.setTo(r,a,d,l)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(1055),h=t(15),o=t(7),r=t(202),a=t(20),d=t(140),l=new s({Extends:h,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Origin,u.ScrollFactor,u.Transform,u.Visible,n],initialize:function(v,g,p,m,y,T){h.call(this,v,"DOMElement"),this.parent=v.sys.game.domContainer,this.cache=v.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new d,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,p),typeof m=="string"?m[0]==="#"?this.setElement(m.substr(1),y,T):this.createElement(m,y,T):m&&this.setElement(m,y,T),v.sys.events.on(a.SLEEP,this.handleSceneEvent,this),v.sys.events.on(a.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(f){var v=this.node,g=v.style;v&&(g.display=f.settings.visible?"block":"none")},setSkew:function(f,v){return f===void 0&&(f=0),v===void 0&&(v=f),this.skewX=f,this.skewY=v,this},setPerspective:function(f){return this.parent.style.perspective=f+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(f){this.parent.style.perspective=f+"px"}},addListener:function(f){if(this.node){f=f.split(" ");for(var v=0;v<f.length;v++)this.node.addEventListener(f[v],this.handler,!1)}return this},removeListener:function(f){if(this.node){f=f.split(" ");for(var v=0;v<f.length;v++)this.node.removeEventListener(f[v],this.handler)}return this},dispatchNativeEvent:function(f){this.emit(f.type,f)},createElement:function(f,v,g){return this.setElement(document.createElement(f),v,g)},setElement:function(f,v,g){this.removeElement();var p;if(typeof f=="string"?(f[0]==="#"&&(f=f.substr(1)),p=document.getElementById(f)):typeof f=="object"&&f.nodeType===1&&(p=f),!p)return this;if(this.node=p,v&&o(v))for(var m in v)p.style[m]=v[m];else typeof v=="string"&&(p.style=v);return p.style.zIndex="0",p.style.display="inline",p.style.position="absolute",p.phaser=this,this.parent&&this.parent.appendChild(p),g&&(p.innerText=g),this.updateSize()},createFromCache:function(f,v){var g=this.cache.get(f);return g&&this.createFromHTML(g,v),this},createFromHTML:function(f,v){v===void 0&&(v="div"),this.removeElement();var g=document.createElement(v);return this.node=g,g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),g.innerHTML=f,this.updateSize()},removeElement:function(){return this.node&&(r(this.node),this.node=null),this},updateSize:function(){var f=this.node,v=f.getBoundingClientRect();return this.width=f.clientWidth,this.height=f.clientHeight,this.displayWidth=v.width||0,this.displayHeight=v.height||0,this},getChildByProperty:function(f,v){if(this.node){for(var g=this.node.querySelectorAll("*"),p=0;p<g.length;p++)if(g[p][f]===v)return g[p]}return null},getChildByID:function(f){return this.getChildByProperty("id",f)},getChildByName:function(f){return this.getChildByProperty("name",f)},setClassName:function(f){return this.node&&(this.node.className=f,this.updateSize()),this},setText:function(f){return this.node&&(this.node.innerText=f,this.updateSize()),this},setHTML:function(f){return this.node&&(this.node.innerHTML=f,this.updateSize()),this},preUpdate:function(){var f=this.parentContainer,v=this.node;v&&f&&!f.willRender()&&(v.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(a.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(a.WAKE,this.handleSceneEvent,this)}});e.exports=l},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1056),u=t(15),n=t(25),h=new n,o=new n,r=new n,a=function(d,l,f,v){if(!!l.node){var g=l.node.style,p=l.scene.sys.settings;if(!g||!p.visible||u.RENDER_MASK!==l.renderFlags||l.cameraFilter!==0&&l.cameraFilter&f.id||l.parentContainer&&!l.parentContainer.willRender()){g.display="none";return}var m=l.parentContainer,y=f.alpha*l.alpha;m&&(y*=m.alpha);var T=h,C=o,S=r,E=0,P=0,M="0%",A="0%";v?(E=l.width*l.scaleX*l.originX,P=l.height*l.scaleY*l.originY,C.applyITRS(l.x-E,l.y-P,l.rotation,l.scaleX,l.scaleY),T.copyFrom(f.matrix),T.multiplyWithOffset(v,-f.scrollX*l.scrollFactorX,-f.scrollY*l.scrollFactorY),C.e=l.x-E,C.f=l.y-P,T.multiply(C,S)):(E=l.width*l.originX,P=l.height*l.originY,C.applyITRS(l.x-E,l.y-P,l.rotation,l.scaleX,l.scaleY),T.copyFrom(f.matrix),M=100*l.originX+"%",A=100*l.originY+"%",C.e-=f.scrollX*l.scrollFactorX,C.f-=f.scrollY*l.scrollFactorY,T.multiply(C,S)),l.transformOnly||(g.display="block",g.opacity=y,g.zIndex=l._depth,g.pointerEvents=l.pointerEvents,g.mixBlendMode=s[l._blendMode]),g.transform=S.getCSSMatrix()+" skew("+l.skewX+"rad, "+l.skewY+"rad) rotate3d("+l.rotate3d.x+","+l.rotate3d.y+","+l.rotate3d.z+","+l.rotate3d.w+l.rotate3dAngle+")",g.transformOrigin=M+" "+A}};e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),h=t(1060),o=new s({Extends:n,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.Origin,u.ScrollFactor,u.Size,u.Texture,u.Tint,u.Transform,u.Visible,h],initialize:function(a){n.call(this,a,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(218),u=t(98),n=t(14),h=t(4),o=function(r,a,d){d===void 0&&(d=new h);var l=u(a,0,n.PI2);return s(r,l,d)};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(447),u=t(218),n=t(98),h=t(14),o=function(r,a,d,l){l===void 0&&(l=[]),!a&&d>0&&(a=s(r)/d);for(var f=0;f<a;f++){var v=n(f/a,0,h.PI2);l.push(u(r,v))}return l};e.exports=o},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=s.width/2,n=s.height/2,h=Math.pow(u-n,2)/Math.pow(u+n,2);return Math.PI*(u+n)*(1+3*h/(10+Math.sqrt(4-3*h)))};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(217),u=t(30),n=function(h,o,r,a,d,l){var f=o.commandBuffer,v=f.length,g=d||h.currentContext;if(!(v===0||!u(h,g,o,r,a))){r.addToRenderList(o);var p=1,m=1,y=0,T=0,C=1,S=0,E=0,P=0;g.beginPath();for(var M=0;M<v;++M){var A=f[M];switch(A){case s.ARC:g.arc(f[M+1],f[M+2],f[M+3],f[M+4],f[M+5],f[M+6]),M+=7;break;case s.LINE_STYLE:C=f[M+1],y=f[M+2],p=f[M+3],S=(y&16711680)>>>16,E=(y&65280)>>>8,P=y&255,g.strokeStyle="rgba("+S+","+E+","+P+","+p+")",g.lineWidth=C,M+=3;break;case s.FILL_STYLE:T=f[M+1],m=f[M+2],S=(T&16711680)>>>16,E=(T&65280)>>>8,P=T&255,g.fillStyle="rgba("+S+","+E+","+P+","+m+")",M+=2;break;case s.BEGIN_PATH:g.beginPath();break;case s.CLOSE_PATH:g.closePath();break;case s.FILL_PATH:l||g.fill();break;case s.STROKE_PATH:l||g.stroke();break;case s.FILL_RECT:l?g.rect(f[M+1],f[M+2],f[M+3],f[M+4]):g.fillRect(f[M+1],f[M+2],f[M+3],f[M+4]),M+=4;break;case s.FILL_TRIANGLE:g.beginPath(),g.moveTo(f[M+1],f[M+2]),g.lineTo(f[M+3],f[M+4]),g.lineTo(f[M+5],f[M+6]),g.closePath(),l||g.fill(),M+=6;break;case s.STROKE_TRIANGLE:g.beginPath(),g.moveTo(f[M+1],f[M+2]),g.lineTo(f[M+3],f[M+4]),g.lineTo(f[M+5],f[M+6]),g.closePath(),l||g.stroke(),M+=6;break;case s.LINE_TO:g.lineTo(f[M+1],f[M+2]),M+=2;break;case s.MOVE_TO:g.moveTo(f[M+1],f[M+2]),M+=2;break;case s.LINE_FX_TO:g.lineTo(f[M+1],f[M+2]),M+=5;break;case s.MOVE_FX_TO:g.moveTo(f[M+1],f[M+2]),M+=5;break;case s.SAVE:g.save();break;case s.RESTORE:g.restore();break;case s.TRANSLATE:g.translate(f[M+1],f[M+2]),M+=2;break;case s.SCALE:g.scale(f[M+1],f[M+2]),M+=2;break;case s.ROTATE:g.rotate(f[M+1]),M+=1;break;case s.GRADIENT_FILL_STYLE:M+=5;break;case s.GRADIENT_LINE_STYLE:M+=6;break}}g.restore()}};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(137),n=t(80),h=t(2),o=t(68),r=new s({initialize:function(d,l,f,v){v===void 0&&(v=!1),this.propertyKey=l,this.propertyValue=f,this.defaultValue=f,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=v,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(d)},loadConfig:function(a,d){a===void 0&&(a={}),d&&(this.propertyKey=d),this.propertyValue=h(a,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(a){return this.propertyValue=a,this.setMethods()},setMethods:function(){var a=this.propertyValue,d=typeof a;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,d==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(a))this.onEmit=this.randomStaticValueEmit;else if(d==="function")this.emitOnly?this.onEmit=a:this.onUpdate=a;else if(d==="object"&&this.hasBoth(a,"start","end")){this.start=a.start,this.end=a.end;var l=this.has(a,"random");if(l&&(this.onEmit=this.randomRangedValueEmit),this.has(a,"steps"))this.steps=a.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var f=this.has(a,"ease")?a.ease:"Linear";this.ease=n(f,a.easeParams),l||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(d==="object"&&this.hasBoth(a,"min","max"))this.start=a.min,this.end=a.max,this.onEmit=this.randomRangedValueEmit;else if(d==="object"&&this.has(a,"random")){var v=a.random;Array.isArray(v)&&(this.start=v[0],this.end=v[1]),this.onEmit=this.randomRangedValueEmit}else d==="object"&&this.hasEither(a,"onEmit","onUpdate")&&(this.has(a,"onEmit")&&(this.onEmit=a.onEmit),this.has(a,"onUpdate")&&(this.onUpdate=a.onUpdate));return this},has:function(a,d){return a.hasOwnProperty(d)},hasBoth:function(a,d,l){return a.hasOwnProperty(d)&&a.hasOwnProperty(l)},hasEither:function(a,d,l){return a.hasOwnProperty(d)||a.hasOwnProperty(l)},defaultEmit:function(a,d,l){return l},defaultUpdate:function(a,d,l,f){return f},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var a=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[a]},randomRangedValueEmit:function(a,d){var l=u(this.start,this.end);return a&&a.data[d]&&(a.data[d].min=l),l},steppedEmit:function(){var a=this.counter,d=this.counter+(this.end-this.start)/this.steps;return this.counter=o(d,this.start,this.end),a},easedValueEmit:function(a,d){if(a&&a.data[d]){var l=a.data[d];l.min=this.start,l.max=this.end}return this.start},easeValueUpdate:function(a,d,l){var f=a.data[d];return(f.max-f.min)*this.ease(l)+f.min}});e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=new s({initialize:function(o,r,a,d,l){if(typeof o=="object"){var f=o;o=u(f,"x",0),r=u(f,"y",0),a=u(f,"power",0),d=u(f,"epsilon",100),l=u(f,"gravity",50)}else o===void 0&&(o=0),r===void 0&&(r=0),a===void 0&&(a=0),d===void 0&&(d=100),l===void 0&&(l=50);this.x=o,this.y=r,this.active=!0,this._gravity=l,this._power=0,this._epsilon=0,this.power=a,this.epsilon=d},update:function(h,o){var r=this.x-h.x,a=this.y-h.y,d=r*r+a*a;if(d!==0){var l=Math.sqrt(d);d<this._epsilon&&(d=this._epsilon);var f=this._power*o/(d*l)*100;h.velocityX+=r*f,h.velocityY+=a*f}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(h){this._epsilon=h*h}},power:{get:function(){return this._power/this._gravity},set:function(h){this._power=h*this._gravity}},gravity:{get:function(){return this._gravity},set:function(h){var o=this.power;this._gravity=h,this.power=o}}});e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(36),n=t(50),h=new s({initialize:function(r){this.emitter=r,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(o,r){var a=this.emitter;this.frame=a.getFrame(),a.emitZone&&a.emitZone.getPoint(this),o===void 0?this.x+=a.x.onEmit(this,"x"):this.x+=o,r===void 0?this.y+=a.y.onEmit(this,"y"):this.y+=r,this.life=a.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var d=a.speedX.onEmit(this,"speedX"),l=a.speedY?a.speedY.onEmit(this,"speedY"):d;if(a.radial){var f=u(a.angle.onEmit(this,"angle"));this.velocityX=Math.cos(f)*Math.abs(d),this.velocityY=Math.sin(f)*Math.abs(l)}else if(a.moveTo){var v=a.moveToX.onEmit(this,"moveToX"),g=a.moveToY?a.moveToY.onEmit(this,"moveToY"):v,p=Math.atan2(g-this.y,v-this.x),m=n(this.x,this.y,v,g)/(this.life/1e3);this.velocityX=Math.cos(p)*m,this.velocityY=Math.sin(p)*m}else this.velocityX=d,this.velocityY=l;a.acceleration&&(this.accelerationX=a.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=a.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=a.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=a.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=a.delay.onEmit(this,"delay"),this.scaleX=a.scaleX.onEmit(this,"scaleX"),this.scaleY=a.scaleY?a.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=a.rotate.onEmit(this,"rotate"),this.rotation=u(this.angle),this.bounce=a.bounce.onEmit(this,"bounce"),this.alpha=a.alpha.onEmit(this,"alpha"),this.tint=a.tint.onEmit(this,"tint")},computeVelocity:function(o,r,a,d){var l=this.velocityX,f=this.velocityY,v=this.accelerationX,g=this.accelerationY,p=this.maxVelocityX,m=this.maxVelocityY;l+=o.gravityX*a,f+=o.gravityY*a,v&&(l+=v*a),g&&(f+=g*a),l>p?l=p:l<-p&&(l=-p),f>m?f=m:f<-m&&(f=-m),this.velocityX=l,this.velocityY=f;for(var y=0;y<d.length;y++)d[y].update(this,r,a)},checkBounds:function(o){var r=o.bounds,a=-this.bounce;this.x<r.x&&o.collideLeft?(this.x=r.x,this.velocityX*=a):this.x>r.right&&o.collideRight&&(this.x=r.right,this.velocityX*=a),this.y<r.y&&o.collideTop?(this.y=r.y,this.velocityY*=a):this.y>r.bottom&&o.collideBottom&&(this.y=r.bottom,this.velocityY*=a)},update:function(o,r,a){if(this.delayCurrent>0)return this.delayCurrent-=o,!1;var d=this.emitter,l=1-this.lifeCurrent/this.life;return this.lifeT=l,this.computeVelocity(d,o,r,a),this.x+=this.velocityX*r,this.y+=this.velocityY*r,d.bounds&&this.checkBounds(d),d.deathZone&&d.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=d.scaleX.onUpdate(this,"scaleX",l,this.scaleX),d.scaleY?this.scaleY=d.scaleY.onUpdate(this,"scaleY",l,this.scaleY):this.scaleY=this.scaleX,this.angle=d.rotate.onUpdate(this,"rotate",l,this.angle),this.rotation=u(this.angle),this.alpha=d.alpha.onUpdate(this,"alpha",l,this.alpha),this.tint=d.tint.onUpdate(this,"tint",l,this.tint),this.lifeCurrent-=o,this.lifeCurrent<=0)}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(35),u=t(0),n=t(11),h=t(453),o=t(454),r=t(449),a=t(2),d=t(210),l=t(455),f=t(126),v=t(451),g=t(456),p=t(10),m=t(79),y=t(3),T=t(68),C=new u({Mixins:[n.BlendMode,n.Mask,n.ScrollFactor,n.Visible],initialize:function(E,P){this.manager=E,this.texture=E.texture,this.frames=[E.defaultFrame],this.defaultFrame=E.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=v,this.x=new r(P,"x",0,!0),this.y=new r(P,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new r(P,"accelerationX",0,!0),this.accelerationY=new r(P,"accelerationY",0,!0),this.maxVelocityX=new r(P,"maxVelocityX",1e4,!0),this.maxVelocityY=new r(P,"maxVelocityY",1e4,!0),this.speedX=new r(P,"speedX",0,!0),this.speedY=new r(P,"speedY",0,!0),this.moveTo=!1,this.moveToX=new r(P,"moveToX",0,!0),this.moveToY=new r(P,"moveToY",0,!0),this.bounce=new r(P,"bounce",0,!0),this.scaleX=new r(P,"scaleX",1),this.scaleY=new r(P,"scaleY",1),this.tint=new r(P,"tint",16777215),this.alpha=new r(P,"alpha",1),this.lifespan=new r(P,"lifespan",1e3,!0),this.angle=new r(P,"angle",{min:0,max:360},!0),this.rotate=new r(P,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new r(P,"quantity",1,!0),this.delay=new r(P,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=s.NORMAL,this.follow=null,this.followOffset=new y,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,P&&this.fromJSON(P)},fromJSON:function(S){if(!S)return this;var E=0,P="";for(E=0;E<this.configFastMap.length;E++)P=this.configFastMap[E],f(S,P)&&(this[P]=a(S,P));for(E=0;E<this.configOpMap.length;E++)P=this.configOpMap[E],f(S,P)&&this[P].loadConfig(S);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,f(S,"speed")&&(this.speedX.loadConfig(S,"speed"),this.speedY=null),(l(S,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),f(S,"scale")&&(this.scaleX.loadConfig(S,"scale"),this.scaleY=null),f(S,"callbackScope")){var M=a(S,"callbackScope",null);this.emitCallbackScope=M,this.deathCallbackScope=M}return f(S,"emitZone")&&this.setEmitZone(S.emitZone),f(S,"deathZone")&&this.setDeathZone(S.deathZone),f(S,"bounds")&&this.setBounds(S.bounds),f(S,"followOffset")&&this.followOffset.setFromObject(a(S,"followOffset",0)),f(S,"frame")&&this.setFrame(S.frame),f(S,"reserve")&&this.reserve(S.reserve),this},toJSON:function(S){S===void 0&&(S={});var E=0,P="";for(E=0;E<this.configFastMap.length;E++)P=this.configFastMap[E],S[P]=this[P];for(E=0;E<this.configOpMap.length;E++)P=this.configOpMap[E],this[P]&&(S[P]=this[P].toJSON());return this.speedY||(delete S.speedX,S.speed=this.speedX.toJSON()),this.scaleY||(delete S.scaleX,S.scale=this.scaleX.toJSON()),S},startFollow:function(S,E,P,M){return E===void 0&&(E=0),P===void 0&&(P=0),M===void 0&&(M=!1),this.follow=S,this.followOffset.set(E,P),this.trackVisible=M,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return d(this.frames);var S=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=T(this.currentFrame+1,0,this._frameLength)),S},setFrame:function(S,E,P){E===void 0&&(E=!0),P===void 0&&(P=1),this.randomFrame=E,this.frameQuantity=P,this.currentFrame=0,this._frameCounter=0;var M=typeof S;if(Array.isArray(S)||M==="string"||M==="number")this.manager.setEmitterFrames(S,this);else if(M==="object"){var A=S;S=a(A,"frames",null),S&&this.manager.setEmitterFrames(S,this);var R=a(A,"cycle",!1);this.randomFrame=!R,this.frameQuantity=a(A,"quantity",P)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(S){return S===void 0&&(S=!0),this.radial=S,this},setPosition:function(S,E){return this.x.onChange(S),this.y.onChange(E),this},setBounds:function(S,E,P,M){if(typeof S=="object"){var A=S;S=A.x,E=A.y,P=f(A,"w")?A.w:A.width,M=f(A,"h")?A.h:A.height}return this.bounds?this.bounds.setTo(S,E,P,M):this.bounds=new p(S,E,P,M),this},setSpeedX:function(S){return this.speedX.onChange(S),this.radial=!1,this},setSpeedY:function(S){return this.speedY&&(this.speedY.onChange(S),this.radial=!1),this},setSpeed:function(S){return this.speedX.onChange(S),this.speedY=null,this.radial=!0,this},setScaleX:function(S){return this.scaleX.onChange(S),this},setScaleY:function(S){return this.scaleY.onChange(S),this},setScale:function(S){return this.scaleX.onChange(S),this.scaleY=null,this},setGravityX:function(S){return this.gravityX=S,this},setGravityY:function(S){return this.gravityY=S,this},setGravity:function(S,E){return this.gravityX=S,this.gravityY=E,this},setAlpha:function(S){return this.alpha.onChange(S),this},setTint:function(S){return this.tint.onChange(S),this},setEmitterAngle:function(S){return this.angle.onChange(S),this},setAngle:function(S){return this.angle.onChange(S),this},setLifespan:function(S){return this.lifespan.onChange(S),this},setQuantity:function(S){return this.quantity.onChange(S),this},setFrequency:function(S,E){return this.frequency=S,this._counter=0,E&&this.quantity.onChange(E),this},setEmitZone:function(S){if(S===void 0)this.emitZone=null;else{var E=a(S,"type","random"),P=a(S,"source",null);switch(E){case"random":this.emitZone=new g(P);break;case"edge":var M=a(S,"quantity",1),A=a(S,"stepRate",0),R=a(S,"yoyo",!1),O=a(S,"seamless",!0);this.emitZone=new o(P,M,A,R,O);break}}return this},setDeathZone:function(S){if(S===void 0)this.deathZone=null;else{var E=a(S,"type","onEnter"),P=a(S,"source",null);if(P&&typeof P.contains=="function"){var M=E==="onEnter";this.deathZone=new h(P,M)}}return this},reserve:function(S){for(var E=this.dead,P=0;P<S;P++)E.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(S,E){return S===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof S=="function"&&(this.emitCallback=S,E&&(this.emitCallbackScope=E)),this},onParticleDeath:function(S,E){return S===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof S=="function"&&(this.deathCallback=S,E&&(this.deathCallbackScope=E)),this},killAll:function(){for(var S=this.dead,E=this.alive;E.length>0;)S.push(E.pop());return this},forEachAlive:function(S,E){for(var P=this.alive,M=P.length,A=0;A<M;++A)S.call(E,P[A],this);return this},forEachDead:function(S,E){for(var P=this.dead,M=P.length,A=0;A<M;++A)S.call(E,P[A],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return m(this.alive,this.depthSortCallback),this},flow:function(S,E){return E===void 0&&(E=1),this.frequency=S,this.quantity.onChange(E),this.start()},explode:function(S,E,P){return this.frequency=-1,this.emitParticle(S,E,P)},emitParticleAt:function(S,E,P){return this.emitParticle(P,S,E)},emitParticle:function(S,E,P){if(!this.atLimit()){S===void 0&&(S=this.quantity.onEmit());for(var M=this.dead,A=this.follow?this.follow.x+this.followOffset.x:E,R=this.follow?this.follow.y+this.followOffset.y:P,O=0;O<S;O++){var F=M.pop();if(F||(F=new this.particleClass(this)),F.fire(A,R),this.particleBringToTop?this.alive.push(F):this.alive.unshift(F),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,F,this),this.atLimit())break}return F}},preUpdate:function(S,E){E*=this.timeScale;var P=E/1e3;this.trackVisible&&(this.visible=this.follow.visible);var M=this.manager.getProcessors(),A=this.alive,R=this.dead,O=0,F=[],I=A.length;for(O=0;O<I;O++){var G=A[O];G.update(E,P,M)&&F.push({index:O,particle:G})}if(I=F.length,I>0){var z=this.deathCallback,U=this.deathCallbackScope;for(O=I-1;O>=0;O--){var X=F[O];A.splice(X.index,1),R.push(X.particle),z&&z.call(U,X.particle),X.particle.resetPosition()}}!this.on||(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=E,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(S,E){return S.y-E.y}});e.exports=C},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(h,o){this.source=h,this.killOnEnter=o},willKill:function(n){var h=this.source.contains(n.x,n.y);return h&&this.killOnEnter||!h&&!this.killOnEnter}});e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(h,o,r,a,d){a===void 0&&(a=!1),d===void 0&&(d=!0),this.source=h,this.points=[],this.quantity=o,this.stepRate=r,this.yoyo=a,this.counter=-1,this.seamless=d,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var n=this.points[0],h=this.points[this.points.length-1];n.x===h.x&&n.y===h.y&&this.points.pop()}var o=this._length;return this._length=this.points.length,this._length<o&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(n){return this.source=n,this.updateSource()},getPoint:function(n){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var h=this.points[this.counter];h&&(n.x=h.x,n.y=h.y)}});e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){for(var n=0;n<u.length;n++)if(s.hasOwnProperty(u[n]))return!0;return!1};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(3),n=new s({initialize:function(o){this.source=o,this._tempVec=new u},getPoint:function(h){var o=this._tempVec;this.source.getRandomPoint(o),h.x=o.x,h.y=o.y}});e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(73),h=new s({Extends:n,Mixins:[u.PathFollower],initialize:function(r,a,d,l,f,v){n.call(this,r,d,l,f,v),this.path=a},preUpdate:function(o,r){this.anims.update(o,r),this.pathUpdate(o)}});e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h=s.canvas,o=s.context,r=s.style,a=[],d=0,l=n.length;r.maxLines>0&&r.maxLines<n.length&&(l=r.maxLines),r.syncFont(h,o);for(var f=0;f<l;f++){var v=r.strokeThickness;v+=o.measureText(n[f]).width,r.wordWrap&&(v-=o.measureText(" ").width),a[f]=Math.ceil(v),d=Math.max(d,a[f])}var g=u.fontSize+r.strokeThickness,p=g*l,m=s.lineSpacing;return l>1&&(p+=m*(l-1)),{width:d,height:p,lines:l,lineWidths:a,lineSpacing:m,lineHeight:g}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(13),n=t(6),h=t(460),o={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},r=new s({initialize:function(d,l){this.parent=d,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(l,!1,!0);var f=n(l,"metrics",!1);f?this.metrics={ascent:n(f,"ascent",0),descent:n(f,"descent",0),fontSize:n(f,"fontSize",0)}:this.metrics=h(this)},setStyle:function(a,d,l){d===void 0&&(d=!0),l===void 0&&(l=!1),a&&a.hasOwnProperty("fontSize")&&typeof a.fontSize=="number"&&(a.fontSize=a.fontSize.toString()+"px");for(var f in o){var v=l?o[f][1]:this[f];f==="wordWrapCallback"||f==="wordWrapCallbackScope"?this[f]=n(a,o[f][0],v):this[f]=u(a,o[f][0],v)}var g=n(a,"font",null);g!==null&&this.setFont(g,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var p=n(a,"fill",null);return p!==null&&(this.color=p),d?this.update(!0):this.parent},syncFont:function(a,d){d.font=this._font},syncStyle:function(a,d){d.textBaseline="alphabetic",d.fillStyle=this.color,d.strokeStyle=this.stroke,d.lineWidth=this.strokeThickness,d.lineCap="round",d.lineJoin="round"},syncShadow:function(a,d){d?(a.shadowOffsetX=this.shadowOffsetX,a.shadowOffsetY=this.shadowOffsetY,a.shadowColor=this.shadowColor,a.shadowBlur=this.shadowBlur):(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowColor=0,a.shadowBlur=0)},update:function(a){return a&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=h(this)),this.parent.updateText()},setFont:function(a,d){d===void 0&&(d=!0);var l=a,f="",v="";if(typeof a!="string")l=n(a,"fontFamily","Courier"),f=n(a,"fontSize","16px"),v=n(a,"fontStyle","");else{var g=a.split(" "),p=0;v=g.length>2?g[p++]:"",f=g[p++]||"16px",l=g[p++]||"Courier"}return(l!==this.fontFamily||f!==this.fontSize||v!==this.fontStyle)&&(this.fontFamily=l,this.fontSize=f,this.fontStyle=v,d&&this.update(!0)),this.parent},setFontFamily:function(a){return this.fontFamily!==a&&(this.fontFamily=a,this.update(!0)),this.parent},setFontStyle:function(a){return this.fontStyle!==a&&(this.fontStyle=a,this.update(!0)),this.parent},setFontSize:function(a){return typeof a=="number"&&(a=a.toString()+"px"),this.fontSize!==a&&(this.fontSize=a,this.update(!0)),this.parent},setTestString:function(a){return this.testString=a,this.update(!0)},setFixedSize:function(a,d){return this.fixedWidth=a,this.fixedHeight=d,a&&(this.parent.width=a),d&&(this.parent.height=d),this.update(!1)},setBackgroundColor:function(a){return this.backgroundColor=a,this.update(!1)},setFill:function(a){return this.color=a,this.update(!1)},setColor:function(a){return this.color=a,this.update(!1)},setResolution:function(a){return this.resolution=a,this.update(!1)},setStroke:function(a,d){return d===void 0&&(d=this.strokeThickness),a===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==a||this.strokeThickness!==d)&&(this.stroke=a,this.strokeThickness=d,this.update(!0)),this.parent},setShadow:function(a,d,l,f,v,g){return a===void 0&&(a=0),d===void 0&&(d=0),l===void 0&&(l="#000"),f===void 0&&(f=0),v===void 0&&(v=!1),g===void 0&&(g=!0),this.shadowOffsetX=a,this.shadowOffsetY=d,this.shadowColor=l,this.shadowBlur=f,this.shadowStroke=v,this.shadowFill=g,this.update(!1)},setShadowOffset:function(a,d){return a===void 0&&(a=0),d===void 0&&(d=a),this.shadowOffsetX=a,this.shadowOffsetY=d,this.update(!1)},setShadowColor:function(a){return a===void 0&&(a="#000"),this.shadowColor=a,this.update(!1)},setShadowBlur:function(a){return a===void 0&&(a=0),this.shadowBlur=a,this.update(!1)},setShadowStroke:function(a){return this.shadowStroke=a,this.update(!1)},setShadowFill:function(a){return this.shadowFill=a,this.update(!1)},setWordWrapWidth:function(a,d){return d===void 0&&(d=!1),this.wordWrapWidth=a,this.wordWrapUseAdvanced=d,this.update(!1)},setWordWrapCallback:function(a,d){return d===void 0&&(d=null),this.wordWrapCallback=a,this.wordWrapCallbackScope=d,this.update(!1)},setAlign:function(a){return a===void 0&&(a="left"),this.align=a,this.update(!1)},setMaxLines:function(a){return a===void 0&&(a=0),this.maxLines=a,this.update(!1)},getTextMetrics:function(){var a=this.metrics;return{ascent:a.ascent,descent:a.descent,fontSize:a.fontSize}},toJSON:function(){var a={};for(var d in o)a[d]=this[d];return a.metrics=this.getTextMetrics(),a},destroy:function(){this.parent=void 0}});e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(31),u=function(n){var h=s.create(this),o=h.getContext("2d");n.syncFont(h,o);var r=o.measureText(n.testString);if("actualBoundingBoxAscent"in r){var a=r.actualBoundingBoxAscent,d=r.actualBoundingBoxDescent;return s.remove(h),{ascent:a,descent:d,fontSize:a+d}}var l=Math.ceil(r.width*n.baselineX),f=l,v=2*f;f=f*n.baselineY|0,h.width=l,h.height=v,o.fillStyle="#f00",o.fillRect(0,0,l,v),o.font=n._font,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(n.testString,0,f);var g={ascent:0,descent:0,fontSize:0},p=o.getImageData(0,0,l,v);if(!p)return g.ascent=f,g.descent=f+6,g.fontSize=g.ascent+g.descent,s.remove(h),g;var m=p.data,y=m.length,T=l*4,C,S,E=0,P=!1;for(C=0;C<f;C++){for(S=0;S<T;S+=4)if(m[E+S]!==255){P=!0;break}if(!P)E+=T;else break}for(g.ascent=f-C,E=y-T,P=!1,C=v;C>f;C--){for(S=0;S<T;S+=4)if(m[E+S]!==255){P=!0;break}if(!P)E-=T;else break}return g.descent=C-f,g.fontSize=g.ascent+g.descent,s.remove(h),g};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1097),u=t(0),n=t(36),h=t(59),o=t(65),r=t(14),a=t(34),d=new u({Extends:a,Mixins:[s],initialize:function(f,v,g,p,m,y,T,C,S){v===void 0&&(v=0),g===void 0&&(g=0),p===void 0&&(p=128),m===void 0&&(m=0),y===void 0&&(y=360),T===void 0&&(T=!1),a.call(this,f,"Arc",new o(0,0,p)),this._startAngle=m,this._endAngle=y,this._anticlockwise=T,this._iterations=.01,this.setPosition(v,g);var E=this.geom.radius*2;this.setSize(E,E),C!==void 0&&this.setFillStyle(C,S),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(l){this._iterations=l,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(l){this.geom.radius=l;var f=l*2;this.setSize(f,f),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(l){this._startAngle=l,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(l){this._endAngle=l,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(l){this._anticlockwise=l,this.updateData()}},setRadius:function(l){return this.radius=l,this},setIterations:function(l){return l===void 0&&(l=.01),this.iterations=l,this},setStartAngle:function(l,f){return this._startAngle=l,f!==void 0&&(this._anticlockwise=f),this.updateData()},setEndAngle:function(l,f){return this._endAngle=l,f!==void 0&&(this._anticlockwise=f),this.updateData()},updateData:function(){var l=this._iterations,f=l,v=this.geom.radius,g=n(this._startAngle),p=n(this._endAngle),m=this._anticlockwise,y=v,T=v;p-=g,m?p<-r.PI2?p=-r.PI2:p>0&&(p=-r.PI2+p%r.PI2):p>r.PI2?p=r.PI2:p<0&&(p=r.PI2+p%r.PI2);for(var C=[y+Math.cos(g)*v,T+Math.sin(g)*v],S;f<1;)S=p*f+g,C.push(y+Math.cos(S)*v,T+Math.sin(S)*v),f+=l;return S=p+g,C.push(y+Math.cos(S)*v,T+Math.sin(S)*v),C.push(y+Math.cos(g)*v,T+Math.sin(g)*v),this.pathIndexes=h(C),this.pathData=C,this}});e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(1100),n=t(59),h=t(10),o=t(34),r=new s({Extends:o,Mixins:[u],initialize:function(d,l,f,v,g,p){l===void 0&&(l=0),f===void 0&&(f=0),o.call(this,d,"Curve",v),this._smoothness=32,this._curveBounds=new h,this.closePath=!1,this.setPosition(l,f),g!==void 0&&this.setFillStyle(g,p),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(a){this._smoothness=a,this.updateData()}},setSmoothness:function(a){return this._smoothness=a,this.updateData()},updateData:function(){var a=this._curveBounds,d=this._smoothness;this.geom.getBounds(a,d),this.setSize(a.width,a.height),this.updateDisplayOrigin();for(var l=[],f=this.geom.getPoints(d),v=0;v<f.length;v++)l.push(f[v].x,f[v].y);return l.push(f[0].x,f[0].y),this.pathIndexes=n(l),this.pathData=l,this}});e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(59),n=t(1103),h=t(111),o=t(34),r=new s({Extends:o,Mixins:[n],initialize:function(d,l,f,v,g,p,m){l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=128),g===void 0&&(g=128),o.call(this,d,"Ellipse",new h(v/2,g/2,v,g)),this._smoothness=64,this.setPosition(l,f),this.width=v,this.height=g,p!==void 0&&this.setFillStyle(p,m),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(a){this._smoothness=a,this.updateData()}},setSize:function(a,d){return this.width=a,this.height=d,this.geom.setPosition(a/2,d/2),this.geom.setSize(a,d),this.updateData()},setSmoothness:function(a){return this._smoothness=a,this.updateData()},updateData:function(){for(var a=[],d=this.geom.getPoints(this._smoothness),l=0;l<d.length;l++)a.push(d[l].x,d[l].y);return a.push(d[0].x,d[0].y),this.pathIndexes=u(a),this.pathData=a,this}});e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(34),n=t(1106),h=new s({Extends:u,Mixins:[n],initialize:function(r,a,d,l,f,v,g,p,m,y,T){a===void 0&&(a=0),d===void 0&&(d=0),l===void 0&&(l=128),f===void 0&&(f=128),v===void 0&&(v=32),g===void 0&&(g=32),u.call(this,r,"Grid",null),this.cellWidth=v,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(a,d),this.setSize(l,f),this.setFillStyle(p,m),y!==void 0&&this.setOutlineStyle(y,T),this.updateDisplayOrigin()},setFillStyle:function(o,r){return r===void 0&&(r=1),o===void 0?this.showCells=!1:(this.fillColor=o,this.fillAlpha=r,this.showCells=!0),this},setAltFillStyle:function(o,r){return r===void 0&&(r=1),o===void 0?this.showAltCells=!1:(this.altFillColor=o,this.altFillAlpha=r,this.showAltCells=!0),this},setOutlineStyle:function(o,r){return r===void 0&&(r=1),o===void 0?this.showOutline=!1:(this.outlineFillColor=o,this.outlineFillAlpha=r,this.showOutline=!0),this}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1109),u=t(0),n=t(34),h=new u({Extends:n,Mixins:[s],initialize:function(r,a,d,l,f,v,g,p){a===void 0&&(a=0),d===void 0&&(d=0),l===void 0&&(l=48),f===void 0&&(f=32),v===void 0&&(v=15658734),g===void 0&&(g=10066329),p===void 0&&(p=13421772),n.call(this,r,"IsoBox",null),this.projection=4,this.fillTop=v,this.fillLeft=g,this.fillRight=p,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(a,d),this.setSize(l,f),this.updateDisplayOrigin()},setProjection:function(o){return this.projection=o,this},setFaces:function(o,r,a){return o===void 0&&(o=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),this.showTop=o,this.showLeft=r,this.showRight=a,this},setFillStyle:function(o,r,a){return this.fillTop=o,this.fillLeft=r,this.fillRight=a,this.isFilled=!0,this}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(1112),n=t(34),h=new s({Extends:n,Mixins:[u],initialize:function(r,a,d,l,f,v,g,p,m){a===void 0&&(a=0),d===void 0&&(d=0),l===void 0&&(l=48),f===void 0&&(f=32),v===void 0&&(v=!1),g===void 0&&(g=15658734),p===void 0&&(p=10066329),m===void 0&&(m=13421772),n.call(this,r,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=p,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=v,this.isFilled=!0,this.setPosition(a,d),this.setSize(l,f),this.updateDisplayOrigin()},setProjection:function(o){return this.projection=o,this},setReversed:function(o){return this.isReversed=o,this},setFaces:function(o,r,a){return o===void 0&&(o=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),this.showTop=o,this.showLeft=r,this.showRight=a,this},setFillStyle:function(o,r,a){return this.fillTop=o,this.fillLeft=r,this.fillRight=a,this.isFilled=!0,this}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(34),n=t(47),h=t(1115),o=new s({Extends:u,Mixins:[h],initialize:function(a,d,l,f,v,g,p,m,y){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=0),g===void 0&&(g=128),p===void 0&&(p=0),u.call(this,a,"Line",new n(f,v,g,p));var T=Math.max(1,this.geom.right-this.geom.left),C=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(d,l),this.setSize(T,C),m!==void 0&&this.setStrokeStyle(1,m,y),this.updateDisplayOrigin()},setLineWidth:function(r,a){return a===void 0&&(a=r),this._startWidth=r,this._endWidth=a,this.lineWidth=r,this},setTo:function(r,a,d,l){return this.geom.setTo(r,a,d,l),this}});e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1118),u=t(0),n=t(59),h=t(469),o=t(227),r=t(34),a=t(472),d=new u({Extends:r,Mixins:[s],initialize:function(f,v,g,p,m,y){v===void 0&&(v=0),g===void 0&&(g=0),r.call(this,f,"Polygon",new o(p));var T=h(this.geom);this.setPosition(v,g),this.setSize(T.width,T.height),m!==void 0&&this.setFillStyle(m,y),this.updateDisplayOrigin(),this.updateData()},smooth:function(l){l===void 0&&(l=1);for(var f=0;f<l;f++)a(this.geom);return this.updateData()},updateData:function(){for(var l=[],f=this.geom.points,v=0;v<f.length;v++)l.push(f[v].x,f[v].y);return l.push(f[0].x,f[0].y),this.pathIndexes=n(l),this.pathData=l,this}});e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,h){h===void 0&&(h=new s);for(var o=1/0,r=1/0,a=-o,d=-r,l,f=0;f<n.points.length;f++)l=n.points[f],o=Math.min(o,l.x),r=Math.min(r,l.y),a=Math.max(a,l.x),d=Math.max(d,l.y);return h.x=o,h.y=r,h.width=a-o,h.height=d-r,h};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=t(47),n=t(471),h=function(o,r,a,d){d===void 0&&(d=[]);var l=o.points,f=n(o);!r&&a>0&&(r=f/a);for(var v=0;v<r;v++)for(var g=f*(v/r),p=0,m=0;m<l.length;m++){var y=l[m],T=l[(m+1)%l.length],C=new u(y.x,y.y,T.x,T.y),S=s(C);if(g<p||g>p+S){p+=S;continue}var E=C.getPoint((g-p)/S);d.push(E);break}return d};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=t(47),n=function(h){for(var o=h.points,r=0,a=0;a<o.length;a++){var d=o[a],l=o[(a+1)%o.length],f=new u(d.x,d.y,l.x,l.y);r+=s(f)}return r};e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(u,n){return u[0]=n[0],u[1]=n[1],u},s=function(u){var n,h=[],o=u.points;for(n=0;n<o.length;n++)h.push([o[n].x,o[n].y]);var r=[];for(h.length>0&&r.push(t([0,0],h[0])),n=0;n<h.length-1;n++){var a=h[n],d=h[n+1],l=a[0],f=a[1],v=d[0],g=d[1];r.push([.85*l+.15*v,.85*f+.15*g]),r.push([.15*l+.85*v,.15*f+.85*g])}return h.length>1&&r.push(t([0,0],h[h.length-1])),u.setTo(r)};e.exports=s},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(10),n=t(34),h=t(1121),o=new s({Extends:n,Mixins:[h],initialize:function(a,d,l,f,v,g,p){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=128),v===void 0&&(v=128),n.call(this,a,"Rectangle",new u(0,0,f,v)),this.setPosition(d,l),this.setSize(f,v),g!==void 0&&this.setFillStyle(g,p),this.updateDisplayOrigin(),this.updateData()},setSize:function(r,a){return this.width=r,this.height=a,this.geom.setSize(r,a),this.updateData(),this},updateData:function(){var r=[],a=this.geom,d=this._tempLine;return a.getLineA(d),r.push(d.x1,d.y1,d.x2,d.y2),a.getLineB(d),r.push(d.x2,d.y2),a.getLineC(d),r.push(d.x2,d.y2),a.getLineD(d),r.push(d.x2,d.y2),this.pathData=r,this}});e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1124),u=t(0),n=t(59),h=t(34),o=new u({Extends:h,Mixins:[s],initialize:function(a,d,l,f,v,g,p,m){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=5),v===void 0&&(v=32),g===void 0&&(g=64),h.call(this,a,"Star",null),this._points=f,this._innerRadius=v,this._outerRadius=g,this.setPosition(d,l),this.setSize(g*2,g*2),p!==void 0&&this.setFillStyle(p,m),this.updateDisplayOrigin(),this.updateData()},setPoints:function(r){return this._points=r,this.updateData()},setInnerRadius:function(r){return this._innerRadius=r,this.updateData()},setOuterRadius:function(r){return this._outerRadius=r,this.updateData()},points:{get:function(){return this._points},set:function(r){this._points=r,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(r){this._innerRadius=r,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(r){this._outerRadius=r,this.updateData()}},updateData:function(){var r=[],a=this._points,d=this._innerRadius,l=this._outerRadius,f=Math.PI/2*3,v=Math.PI/a,g=l,p=l;r.push(g,p+-l);for(var m=0;m<a;m++)r.push(g+Math.cos(f)*l,p+Math.sin(f)*l),f+=v,r.push(g+Math.cos(f)*d,p+Math.sin(f)*d),f+=v;return r.push(g,p+-l),this.pathIndexes=n(r),this.pathData=r,this}});e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(34),n=t(82),h=t(1127),o=new s({Extends:u,Mixins:[h],initialize:function(a,d,l,f,v,g,p,m,y,T,C){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=128),g===void 0&&(g=64),p===void 0&&(p=0),m===void 0&&(m=128),y===void 0&&(y=128),u.call(this,a,"Triangle",new n(f,v,g,p,m,y));var S=this.geom.right-this.geom.left,E=this.geom.bottom-this.geom.top;this.setPosition(d,l),this.setSize(S,E),T!==void 0&&this.setFillStyle(T,C),this.updateDisplayOrigin(),this.updateData()},setTo:function(r,a,d,l,f,v){return this.geom.setTo(r,a,d,l,f,v),this.updateData()},updateData:function(){var r=[],a=this.geom,d=this._tempLine;return a.getLineA(d),r.push(d.x1,d.y1,d.x2,d.y2),a.getLineB(d),r.push(d.x2,d.y2),a.getLineC(d),r.push(d.x2,d.y2),this.pathData=r,this}});e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(67),n=function(h,o,r){r===void 0&&(r=new s);var a=h.getLineA(),d=h.getLineB(),l=h.getLineC();if(o<=0||o>=1)return r.x=a.x1,r.y=a.y1,r;var f=u(a),v=u(d),g=u(l),p=f+v+g,m=p*o,y=0;return m<f?(y=m/f,r.x=a.x1+(a.x2-a.x1)*y,r.y=a.y1+(a.y2-a.y1)*y):m>f+v?(m-=f+v,y=m/g,r.x=l.x1+(l.x2-l.x1)*y,r.y=l.y1+(l.y2-l.y1)*y):(m-=f,y=m/v,r.x=d.x1+(d.x2-d.x1)*y,r.y=d.y1+(d.y2-d.y1)*y),r};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=t(4),n=function(h,o,r,a){a===void 0&&(a=[]);var d=h.getLineA(),l=h.getLineB(),f=h.getLineC(),v=s(d),g=s(l),p=s(f),m=v+g+p;!o&&r>0&&(o=m/r);for(var y=0;y<o;y++){var T=m*(y/o),C=0,S=new u;T<v?(C=T/v,S.x=d.x1+(d.x2-d.x1)*C,S.y=d.y1+(d.y2-d.y1)*C):T>v+g?(T-=v+g,C=T/p,S.x=f.x1+(f.x2-f.x1)*C,S.y=f.y1+(f.y2-f.y1)*C):(T-=v,C=T/g,S.x=l.x1+(l.x2-l.x1)*C,S.y=l.y1+(l.y2-l.y1)*C),a.push(S)}return a};e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(!s||typeof s=="number")return!1;if(s.hasOwnProperty(u))return s[u]=n,!0;if(u.indexOf(".")!==-1){for(var h=u.split("."),o=s,r=s,a=0;a<h.length;a++)if(o.hasOwnProperty(h[a]))r=o,o=o[h[a]];else return!1;return r[h[h.length-1]]=n,!0}return!1};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(116),u=t(117),n=function(h,o,r,a,d,l,f){if(a===void 0&&(a=!1),l===void 0&&(l=16777215),f===void 0&&(f=1),h.length!==o.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var v={faces:[],vertices:[]},g,p,m,y,T,C,S,E,P,M,A,R=a?3:2,O=Array.isArray(l),F=Array.isArray(f);if(Array.isArray(r)&&r.length>0)for(g=0;g<r.length;g++){var I=r[g],G=r[g]*2,z=r[g]*R;p=h[z],m=h[z+1],y=a?h[z+2]:0,T=o[G],C=o[G+1],S=O?l[I]:l,E=F?f[I]:f,P=0,M=0,A=0,d&&(P=d[z],M=d[z+1],A=a?d[z+2]:0),v.vertices.push(new u(p,m,y,T,C,S,E,P,M,A))}else{var U=0,X=0;for(g=0;g<h.length;g+=R)p=h[g],m=h[g+1],y=a?h[g+2]:0,T=o[U],C=o[U+1],S=O?l[X]:l,E=F?f[X]:f,P=0,M=0,A=0,d&&(P=d[g],M=d[g+1],A=a?d[g+2]:0),v.vertices.push(new u(p,m,y,T,C,S,E,P,M,A)),U+=2,X++}for(g=0;g<v.vertices.length;g+=3){var b=v.vertices[g],B=v.vertices[g+1],L=v.vertices[g+2];v.faces.push(new s(b,B,L))}return v};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(116),u=t(69),n=t(39),h=t(117),o=new n,r=new n,a=new u,d=function(l,f,v,g,p,m,y,T,C,S){v===void 0&&(v=1),g===void 0&&(g=0),p===void 0&&(p=0),m===void 0&&(m=0),y===void 0&&(y=0),T===void 0&&(T=0),C===void 0&&(C=0),S===void 0&&(S=!0);var E={faces:[],verts:[]},P=l.materials;o.set(g,p,m),r.set(y,T,C),a.fromRotationXYTranslation(r,o,S);for(var M=0;M<l.models.length;M++)for(var A=l.models[M],R=A.vertices,O=A.textureCoords,F=A.faces,I=0;I<F.length;I++){var G=F[I],z=G.vertices[0],U=G.vertices[1],X=G.vertices[2],b=R[z.vertexIndex],B=R[U.vertexIndex],L=R[X.vertexIndex],D=z.textureCoordsIndex,w=U.textureCoordsIndex,N=X.textureCoordsIndex,V=D===-1?{u:0,v:1}:O[D],Y=w===-1?{u:0,v:0}:O[w],W=N===-1?{u:1,v:1}:O[N],H=16777215;G.material!==""&&P[G.material]&&(H=P[G.material]);var $=new h(b.x*v,b.y*v,b.z*v,V.u,V.v,H).transformMat4(a),K=new h(B.x*v,B.y*v,B.z*v,Y.u,Y.v,H).transformMat4(a),Z=new h(L.x*v,L.y*v,L.z*v,W.u,W.v,H).transformMat4(a);E.verts.push($,K,Z),E.faces.push(new s($,K,Z))}return f&&(f.faces=f.faces.concat(E.faces),f.vertices=f.vertices.concat(E.verts)),E};e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65),u=t(0),n=t(11),h=t(200),o=t(12),r=new u({Extends:s,Mixins:[n.ScrollFactor,n.Visible],initialize:function(d,l,f,v,g,p,m){s.call(this,d,l,f),this.color=new h(v,g,p),this.intensity=m,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(a){return!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&a.id)},setColor:function(a){var d=o.getFloatsFromUintRGB(a);return this.color.set(d[0],d[1],d[2]),this},setIntensity:function(a){return this.intensity=a,this},setRadius:function(a){return this.radius=a,this}});r.RENDER_MASK=15,e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(151),u=t(0),n=t(50),h=t(481),o=t(150),r=t(200),a=t(74),d=t(79),l=t(12),f=new u({initialize:function(){this.lights=[],this.ambientColor=new r(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(v,g,p,m,y,T){return this.systems.displayList.add(new o(this.scene,v,g,p,m,y,T))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(v){for(var g=this.lights,p=v.worldView,m=[],y=0;y<g.length;y++){var T=g[y];T.willRender(v)&&s(T,p)&&m.push({light:T,distance:n(T.x,T.y,p.centerX,p.centerY)})}return m.length>this.maxLights&&(d(m,this.sortByDistance),m=m.slice(0,this.maxLights)),this.visibleLights=m.length,m},sortByDistance:function(v,g){return v.distance>=g.distance},setAmbientColor:function(v){var g=l.getFloatsFromUintRGB(v);return this.ambientColor.set(g[0],g[1],g[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(v,g,p,m,y){v===void 0&&(v=0),g===void 0&&(g=0),p===void 0&&(p=128),m===void 0&&(m=16777215),y===void 0&&(y=1);var T=l.getFloatsFromUintRGB(m),C=new h(v,g,p,T[0],T[1],T[2],y);return this.lights.push(C),C},removeLight:function(v){var g=this.lights.indexOf(v);return g>=0&&a(this.lights,g),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});e.exports=f},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(56),u=t(17),n={Circle:t(1191),Ellipse:t(1201),Intersects:t(484),Line:t(1221),Mesh:t(1243),Point:t(1246),Polygon:t(1260),Rectangle:t(502),Triangle:t(1293)};n=u(!1,n,s),e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CircleToCircle:t(231),CircleToRectangle:t(151),GetCircleToCircle:t(1211),GetCircleToRectangle:t(1212),GetLineToCircle:t(232),GetLineToLine:t(485),GetLineToPoints:t(486),GetLineToPolygon:t(487),GetLineToRectangle:t(234),GetRaysFromPointToPolygon:t(1213),GetRectangleIntersection:t(1214),GetRectangleToRectangle:t(1215),GetRectangleToTriangle:t(1216),GetTriangleToCircle:t(1217),GetTriangleToLine:t(492),GetTriangleToTriangle:t(1218),LineToCircle:t(233),LineToLine:t(96),LineToRectangle:t(488),PointToLine:t(496),PointToLineSegment:t(1219),RectangleToRectangle:t(152),RectangleToTriangle:t(489),RectangleToValues:t(1220),TriangleToCircle:t(491),TriangleToLine:t(493),TriangleToTriangle:t(494)}},function(e,c,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(39),u=function(n,h,o){var r=n.x1,a=n.y1,d=n.x2,l=n.y2,f=h.x1,v=h.y1,g=h.x2,p=h.y2,m=d-r,y=l-a,T=g-f,C=p-v,S=C*m-T*y;if(m===0||S===0)return!1;var E=(m*(v-a)+y*(r-f))/(T*y-C*m),P=(f+T*E-r)/m;return P<0||E<0||E>1?null:(o===void 0&&(o=new s),o.set(r+m*P,a+y*P,P))};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(39),u=t(485),n=t(47),h=new n,o=new s,r=function(a,d,l){l===void 0&&(l=new s);var f=!1;l.set(),o.set();for(var v=d[0],g=1;g<d.length;g++){var p=d[g];h.setTo(v.x,v.y,p.x,p.y),v=p,u(a,h,o)&&(!f||o.z<l.z)&&(l.copy(o),f=!0)}return f?l:null};e.exports=r},function(e,c,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(39),u=t(140),n=t(486),h=new s,o=function(r,a,d){d===void 0&&(d=new u),Array.isArray(a)||(a=[a]);var l=!1;d.set(),h.set();for(var f=0;f<a.length;f++)n(r,a[f].points,h)&&(!l||h.z<d.z)&&(d.set(h.x,h.y,h.z,f),l=!0);return l?d:null};e.exports=o},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.x1,h=s.y1,o=s.x2,r=s.y2,a=u.x,d=u.y,l=u.right,f=u.bottom,v=0;if(n>=a&&n<=l&&h>=d&&h<=f||o>=a&&o<=l&&r>=d&&r<=f)return!0;if(n<a&&o>=a){if(v=h+(r-h)*(a-n)/(o-n),v>d&&v<=f)return!0}else if(n>l&&o<=l&&(v=h+(r-h)*(l-n)/(o-n),v>=d&&v<=f))return!0;if(h<d&&r>=d){if(v=n+(o-n)*(d-h)/(r-h),v>=a&&v<=l)return!0}else if(h>f&&r<=f&&(v=n+(o-n)*(f-h)/(r-h),v>=a&&v<=l))return!0;return!1};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(96),u=t(57),n=t(235),h=t(490),o=function(r,a){if(a.left>r.right||a.right<r.left||a.top>r.bottom||a.bottom<r.top)return!1;var d=a.getLineA(),l=a.getLineB(),f=a.getLineC();if(u(r,d.x1,d.y1)||u(r,d.x2,d.y2)||u(r,l.x1,l.y1)||u(r,l.x2,l.y2)||u(r,f.x1,f.y1)||u(r,f.x2,f.y2))return!0;var v=r.getLineA(),g=r.getLineB(),p=r.getLineC(),m=r.getLineD();if(s(d,v)||s(d,g)||s(d,p)||s(d,m)||s(l,v)||s(l,g)||s(l,p)||s(l,m)||s(f,v)||s(f,g)||s(f,p)||s(f,m))return!0;var y=h(r),T=n(a,y,!0);return T.length>0};e.exports=o},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=[]),u.push({x:s.x,y:s.y}),u.push({x:s.right,y:s.y}),u.push({x:s.right,y:s.bottom}),u.push({x:s.x,y:s.bottom}),u};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(233),u=t(115),n=function(h,o){return h.left>o.right||h.right<o.left||h.top>o.bottom||h.bottom<o.top?!1:!!(u(h,o.x,o.y)||s(h.getLineA(),o)||s(h.getLineB(),o)||s(h.getLineC(),o))};e.exports=n},function(e,c,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(493),n=t(96),h=function(o,r,a){if(a===void 0&&(a=[]),u(o,r))for(var d=o.getLineA(),l=o.getLineB(),f=o.getLineC(),v=[new s,new s,new s],g=[n(d,r,v[0]),n(l,r,v[1]),n(f,r,v[2])],p=0;p<3;p++)g[p]&&a.push(v[p]);return a};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(96),u=function(n,h){return!!(n.contains(h.x1,h.y1)||n.contains(h.x2,h.y2)||s(n.getLineA(),h)||s(n.getLineB(),h)||s(n.getLineC(),h))};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(235),u=t(495),n=t(96),h=function(o,r){if(o.left>r.right||o.right<r.left||o.top>r.bottom||o.bottom<r.top)return!1;var a=o.getLineA(),d=o.getLineB(),l=o.getLineC(),f=r.getLineA(),v=r.getLineB(),g=r.getLineC();if(n(a,f)||n(a,v)||n(a,g)||n(d,f)||n(d,v)||n(d,g)||n(l,f)||n(l,v)||n(l,g))return!0;var p=u(o),m=s(r,p,!0);return!!(m.length>0||(p=u(r),m=s(o,p,!0),m.length>0))};e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=[]),u.push({x:s.x1,y:s.y1}),u.push({x:s.x2,y:s.y2}),u.push({x:s.x3,y:s.y3}),u};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){n===void 0&&(n=1);var h=u.x1,o=u.y1,r=u.x2,a=u.y2,d=s.x,l=s.y,f=(r-h)*(r-h)+(a-o)*(a-o);if(f===0)return!1;var v=((d-h)*(r-h)+(l-o)*(a-o))/f;if(v<0)return Math.sqrt((h-d)*(h-d)+(o-l)*(o-l))<=n;if(v>=0&&v<=1){var g=((o-l)*(r-h)-(h-d)*(a-o))/f;return Math.abs(g)*Math.sqrt(f)<=n}else return Math.sqrt((r-d)*(r-d)+(a-l)*(a-l))<=n};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(68),n=t(97),h=function(o){var r=n(o)-s.TAU;return u(r,-Math.PI,Math.PI)};e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=!0,s="untitled",u="",n="";function h(y){var T=y.indexOf("#");return T>-1?y.substring(0,T):y}function o(y){return y.models.length===0&&y.models.push({faces:[],name:s,textureCoords:[],vertexNormals:[],vertices:[]}),u="",y.models[y.models.length-1]}function r(y,T){var C=y.length>=2?y[1]:s;T.models.push({faces:[],name:C,textureCoords:[],vertexNormals:[],vertices:[]}),u=""}function a(y){y.length===2&&(u=y[1])}function d(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,P=C>=4?parseFloat(y[3]):0;o(T).vertices.push({x:S,y:E,z:P})}function l(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,P=C>=4?parseFloat(y[3]):0;isNaN(S)&&(S=0),isNaN(E)&&(E=0),isNaN(P)&&(P=0),t&&(E=1-E),o(T).textureCoords.push({u:S,v:E,w:P})}function f(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,P=C>=4?parseFloat(y[3]):0;o(T).vertexNormals.push({x:S,y:E,z:P})}function v(y,T){var C=y.length-1;if(!(C<3)){for(var S={group:u,material:n,vertices:[]},E=0;E<C;E++){var P=y[E+1],M=P.split("/"),A=M.length;if(!(A<1||A>3)){var R=0,O=0,F=0;R=parseInt(M[0],10),A>1&&M[1]!==""&&(O=parseInt(M[1],10)),A>2&&(F=parseInt(M[2],10)),R!==0&&(R<0&&(R=o(T).vertices.length+1+R),O-=1,R-=1,F-=1,S.vertices.push({textureCoordsIndex:O,vertexIndex:R,vertexNormalIndex:F}))}}o(T).faces.push(S)}}function g(y,T){y.length>=2&&T.materialLibraries.push(y[1])}function p(y){y.length>=2&&(n=y[1])}var m=function(y,T){T===void 0&&(T=!0),t=T;var C={materials:{},materialLibraries:[],models:[]};u="",n="";for(var S=y.split(`
`),E=0;E<S.length;E++){var P=h(S[E]),M=P.replace(/\s\s+/g," ").trim().split(" ");switch(M[0].toLowerCase()){case"o":r(M,C);break;case"g":a(M);break;case"v":d(M,C);break;case"vt":l(M,C);break;case"vn":f(M,C);break;case"f":v(M,C);break;case"mtllib":g(M,C);break;case"usemtl":p(M);break}}return C};e.exports=m},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(103),u=function(n){for(var h={},o=n.split(`
`),r="",a=0;a<o.length;a++){var d=o[a].trim();if(!(d.indexOf("#")===0||d==="")){var l=d.replace(/\s\s+/g," ").trim().split(" ");switch(l[0].toLowerCase()){case"newmtl":{r=l[1];break}case"kd":{var f=Math.floor(l[1]*255),v=l.length>=2?Math.floor(l[2]*255):f,g=l.length>=3?Math.floor(l[3]*255):f;h[r]=s(f,v,g);break}}}}return h};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x*s.x+s.y*s.y};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10);s.Area=t(1267),s.Ceil=t(1268),s.CeilAll=t(1269),s.CenterOn=t(190),s.Clone=t(1270),s.Contains=t(57),s.ContainsPoint=t(1271),s.ContainsRect=t(503),s.CopyFrom=t(1272),s.Decompose=t(490),s.Equals=t(1273),s.FitInside=t(1274),s.FitOutside=t(1275),s.Floor=t(1276),s.FloorAll=t(1277),s.FromPoints=t(199),s.FromXY=t(1278),s.GetAspectRatio=t(237),s.GetCenter=t(1279),s.GetPoint=t(171),s.GetPoints=t(306),s.GetSize=t(1280),s.Inflate=t(1281),s.Intersection=t(1282),s.MarchingAnts=t(316),s.MergePoints=t(1283),s.MergeRect=t(1284),s.MergeXY=t(1285),s.Offset=t(1286),s.OffsetPoint=t(1287),s.Overlaps=t(1288),s.Perimeter=t(130),s.PerimeterPoint=t(1289),s.Random=t(174),s.RandomOutside=t(1290),s.SameDimensions=t(1291),s.Scale=t(1292),s.Union=t(441),e.exports=s},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.width*u.height>s.width*s.height?!1:u.x>s.x&&u.x<s.right&&u.right>s.x&&u.right<s.right&&u.y>s.y&&u.y<s.bottom&&u.bottom>s.y&&u.bottom<s.bottom};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h){return h===void 0&&(h=new s),h.x=(n.x1+n.x2+n.x3)/3,h.y=(n.y1+n.y2+n.y3)/3,h};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x1+=u,s.y1+=n,s.x2+=u,s.y2+=n,s.x3+=u,s.y3+=n,s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4);function u(h,o,r,a){var d=h-r,l=o-a,f=d*d+l*l;return Math.sqrt(f)}var n=function(h,o){o===void 0&&(o=new s);var r=h.x1,a=h.y1,d=h.x2,l=h.y2,f=h.x3,v=h.y3,g=u(f,v,d,l),p=u(r,a,f,v),m=u(d,l,r,a),y=g+p+m;return o.x=(r*g+d*p+f*m)/y,o.y=(a*g+l*p+v*m)/y,o};e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return function(n,h,o,r){var a=s.getPixelAlpha(h,o,r.texture.key,r.frame.name);return a&&a>=u}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return{gameObject:s,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:u,hitAreaCallback:n,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(h,o){this.pad=h,this.events=h.events,this.index=o,this.value=0,this.threshold=.1},update:function(n){this.value=n},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(239),n=new s({initialize:function(o,r){this.pad=o,this.events=o.manager,this.index=r,this.value=0,this.threshold=1,this.pressed=!1},update:function(h){this.value=h;var o=this.pad,r=this.index;h>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(u.BUTTON_DOWN,o,this,h),this.pad.emit(u.GAMEPAD_BUTTON_DOWN,r,h,this)):this.pressed&&(this.pressed=!1,this.events.emit(u.BUTTON_UP,o,this,h),this.pad.emit(u.GAMEPAD_BUTTON_UP,r,h,this))},destroy:function(){this.pad=null,this.events=null}});e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(509),u=t(510),n=t(0),h=t(9),o=t(3),r=new n({Extends:h,initialize:function(d,l){h.call(this),this.manager=d,this.pad=l,this.id=l.id,this.index=l.index;for(var f=[],v=0;v<l.buttons.length;v++)f.push(new u(this,v));this.buttons=f;var g=[];for(v=0;v<l.axes.length;v++)g.push(new s(this,v));this.axes=g,this.vibration=l.vibrationActuator;var p={value:0,pressed:!1};this._LCLeft=f[14]?f[14]:p,this._LCRight=f[15]?f[15]:p,this._LCTop=f[12]?f[12]:p,this._LCBottom=f[13]?f[13]:p,this._RCLeft=f[2]?f[2]:p,this._RCRight=f[1]?f[1]:p,this._RCTop=f[3]?f[3]:p,this._RCBottom=f[0]?f[0]:p,this._FBLeftTop=f[4]?f[4]:p,this._FBLeftBottom=f[6]?f[6]:p,this._FBRightTop=f[5]?f[5]:p,this._FBRightBottom=f[7]?f[7]:p;var m={value:0};this._HAxisLeft=g[0]?g[0]:m,this._VAxisLeft=g[1]?g[1]:m,this._HAxisRight=g[2]?g[2]:m,this._VAxisRight=g[3]?g[3]:m,this.leftStick=new o,this.rightStick=new o,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(a){return this.axes[a].getValue()},setAxisThreshold:function(a){for(var d=0;d<this.axes.length;d++)this.axes[d].threshold=a},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(a){return this.buttons[a].value},isButtonDown:function(a){return this.buttons[a].pressed},update:function(a){if(!(a.timestamp<this._created)){var d,l=this.buttons,f=a.buttons,v=l.length;for(d=0;d<v;d++)l[d].update(f[d].value);var g=this.axes,p=a.axes;for(v=g.length,d=0;d<v;d++)g[d].update(p[d]);v>=2&&(this.leftStick.set(g[0].getValue(),g[1].getValue()),v>=4&&this.rightStick.set(g[2].getValue(),g[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var a;for(a=0;a<this.buttons.length;a++)this.buttons[a].destroy();for(a=0;a<this.axes.length;a++)this.axes[a].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(154),h=new s({Extends:u,initialize:function(r,a){u.call(this),this.plugin=r,this.keyCode=a,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(o){return this.emitOnRepeat=o,this},onDown:function(o){this.originalEvent=o,!!this.enabled&&(this.altKey=o.altKey,this.ctrlKey=o.ctrlKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.location=o.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(n.DOWN,this,o):(this.isDown=!0,this.isUp=!1,this.timeDown=o.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(n.DOWN,this,o)))},onUp:function(o){this.originalEvent=o,!!this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=o.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(n.UP,this,o))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(154),n=t(2),h=t(514),o=t(516),r=new s({initialize:function(d,l,f){if(f===void 0&&(f={}),l.length<2)return!1;this.manager=d,this.enabled=!0,this.keyCodes=[];for(var v=0;v<l.length;v++){var g=l[v];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=n(f,"resetOnWrongKey",!0),this.maxKeyDelay=n(f,"maxKeyDelay",0),this.resetOnMatch=n(f,"resetOnMatch",!1),this.deleteOnMatch=n(f,"deleteOnMatch",!1);var p=this,m=function(y){if(!(p.matched||!p.enabled)){var T=h(y,p);T&&(p.manager.emit(u.COMBO_MATCH,p,y),p.resetOnMatch?o(p):p.deleteOnMatch&&p.destroy())}};this.onKeyDown=m,this.manager.on(u.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(u.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(515),u=function(n,h){if(h.matched)return!0;var o=!1,r=!1;if(n.keyCode===h.current)if(h.index>0&&h.maxKeyDelay>0){var a=h.timeLastMatched+h.maxKeyDelay;n.timeStamp<=a&&(r=!0,o=s(n,h))}else r=!0,o=s(n,h);return!r&&h.resetOnWrongKey&&(h.index=0,h.current=h.keyCodes[0]),o&&(h.timeLastMatched=n.timeStamp,h.matched=!0,h.timeMatched=n.timeStamp),o};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.timeLastMatched=s.timeStamp,u.index++,u.index===u.size?!0:(u.current=u.keyCodes[u.index],!1)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.current=s.keyCodes[0],s.index=0,s.timeLastMatched=0,s.matched=!1,s.timeMatched=0,s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(240),u=function(n,h){var o=s(h,n.xhrSettings),r=new XMLHttpRequest;if(r.open("GET",n.src,o.async,o.user,o.password),r.responseType=n.xhrSettings.responseType,r.timeout=o.timeout,o.headers)for(var a in o.headers)r.setRequestHeader(a,o.headers[a]);return o.header&&o.headerValue&&r.setRequestHeader(o.header,o.headerValue),o.requestedWith&&r.setRequestHeader("X-Requested-With",o.requestedWith),o.overrideMimeType&&r.overrideMimeType(o.overrideMimeType),o.withCredentials&&(r.withCredentials=!0),r.onload=n.onLoad.bind(n,r),r.onerror=n.onError.bind(n,r),r.onprogress=n.onProgress.bind(n),r.send(),r};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(2),r=t(519),a=t(7),d=new s({Extends:n,initialize:function(f,v,g,p,m){if(a(v)){var y=v;v=o(y,"key"),p=o(y,"xhrSettings"),m=o(y,"context",m)}var T={type:"audio",cache:f.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:v,url:g.url,xhrSettings:p,config:{context:m}};n.call(this,f,T)},onProcess:function(){this.state=u.FILE_PROCESSING;var l=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(f){l.data=f,l.onProcessComplete()},function(f){console.error("Error decoding audio: "+l.key+" - ",f?f.message:null),l.onProcessError()}),this.config.context=null}});d.create=function(l,f,v,g,p){var m=l.systems.game,y=m.config.audio,T=m.device.audio;a(f)&&(v=o(f,"url",[]),g=o(f,"config",{}));var C=d.getAudioURL(m,v);return C?T.webAudio&&!y.disableWebAudio?new d(l,f,C,p,m.sound.context):new r(l,f,C,g):null},d.getAudioURL=function(l,f){Array.isArray(f)||(f=[f]);for(var v=0;v<f.length;v++){var g=o(f[v],"url",f[v]);if(g.indexOf("blob:")===0||g.indexOf("data:")===0)return{url:g,type:""};var p=g.match(/\.([a-zA-Z0-9]+)($|\?)/);if(p=o(f[v],"type",p?p[1]:"").toLowerCase(),l.device.audio[p])return{url:g,type:p}}return null},h.register("audio",function(l,f,v,g){var p=this.systems.game,m=p.config.audio,y=p.device.audio;if(m.noAudio||!y.webAudio&&!y.audioData)return this;var T;if(Array.isArray(l))for(var C=0;C<l.length;C++)T=d.create(this,l[C]),T&&this.addFile(T);else T=d.create(this,l,f,v,g),T&&this.addFile(T);return this}),e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(95),n=t(23),h=t(2),o=t(155),r=t(7),a=new s({Extends:n,initialize:function(l,f,v,g){if(r(f)){var p=f;f=h(p,"key"),g=h(p,"config",g)}var m={type:"audio",cache:l.cacheManager.audio,extension:v.type,key:f,url:v.url,config:g};n.call(this,l,m),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var d=0;d<this.data.length;d++){var l=this.data[d];l.oncanplaythrough=null,l.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(d){var l=d.target;l.oncanplaythrough=null,l.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var d=this.config&&this.config.instances||1;this.filesTotal=d,this.filesLoaded=0,this.percentComplete=0;for(var l=0;l<d;l++){var f=new Audio;f.dataset||(f.dataset={}),f.dataset.name=this.key+("0"+l).slice(-2),f.dataset.used="false",this.locked?f.dataset.locked="true":(f.dataset.locked="false",f.preload="auto",f.oncanplaythrough=this.onProgress.bind(this),f.onerror=this.onError.bind(this)),this.data.push(f)}for(l=0;l<this.data.length;l++)f=this.data[l],f.src=o(this,this.loader.baseURL),this.locked||f.load();this.locked&&setTimeout(this.onLoad.bind(this))}});e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(2),r=t(7),a=new s({Extends:n,initialize:function(l,f,v,g){var p="js";if(r(f)){var m=f;f=o(m,"key"),v=o(m,"url"),g=o(m,"xhrSettings"),p=o(m,"extension",p)}var y={type:"script",cache:!1,extension:p,responseType:"text",key:f,url:v,xhrSettings:g};n.call(this,l,y)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});h.register("script",function(d,l,f){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new a(this,d[v]));else this.addFile(new a(this,d,l,f));return this}),e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(522),u=t(157),n=t(0),h=t(62),o=t(524),r=t(525),a=new n({initialize:function(l){this.world=l,this.scene=l.scene,this.sys=l.scene.sys},collider:function(d,l,f,v,g){return this.world.addCollider(d,l,f,v,g)},overlap:function(d,l,f,v,g){return this.world.addOverlap(d,l,f,v,g)},existing:function(d,l){var f=l?h.STATIC_BODY:h.DYNAMIC_BODY;return this.world.enableBody(d,f),d},staticImage:function(d,l,f,v){var g=new s(this.scene,d,l,f,v);return this.sys.displayList.add(g),this.world.enableBody(g,h.STATIC_BODY),g},image:function(d,l,f,v){var g=new s(this.scene,d,l,f,v);return this.sys.displayList.add(g),this.world.enableBody(g,h.DYNAMIC_BODY),g},staticSprite:function(d,l,f,v){var g=new u(this.scene,d,l,f,v);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,h.STATIC_BODY),g},sprite:function(d,l,f,v){var g=new u(this.scene,d,l,f,v);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,h.DYNAMIC_BODY),g},staticGroup:function(d,l){return this.sys.updateList.add(new r(this.world,this.world.scene,d,l))},group:function(d,l){return this.sys.updateList.add(new o(this.world,this.world.scene,d,l))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(243),n=t(125),h=new s({Extends:n,Mixins:[u.Acceleration,u.Angular,u.Bounce,u.Debug,u.Drag,u.Enable,u.Friction,u.Gravity,u.Immovable,u.Mass,u.Pushable,u.Size,u.Velocity],initialize:function(r,a,d,l,f){n.call(this,r,a,d,l,f),this.body=null}});e.exports=h},function(e,c,t){var s=t(244),u=t(65),n=t(231),h=t(151),o=function(r,a,d,l,f,v){var g=s(r,a-l,d-l,2*l,2*l,f,v);if(g.length===0)return g;for(var p=new u(a,d,l),m=new u,y=[],T=0;T<g.length;T++){var C=g[T];C.isCircle?(m.setTo(C.center.x,C.center.y,C.halfWidth),n(p,m)&&y.push(C)):h(p,C)&&y.push(C)}return y};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(157),u=t(0),n=t(62),h=t(2),o=t(113),r=t(7),a=new u({Extends:o,initialize:function(l,f,v,g){if(!v&&!g)g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(r(v))g=v,v=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(v)&&r(v[0])){g=v[0];var p=this;v.forEach(function(m){m.internalCreateCallback=p.createCallbackHandler,m.internalRemoveCallback=p.removeCallbackHandler}),v=null}else g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=l,g.classType=h(g,"classType",s),this.physicsType=n.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:h(g,"collideWorldBounds",!1),setBoundsRectangle:h(g,"customBoundsRectangle",null),setAccelerationX:h(g,"accelerationX",0),setAccelerationY:h(g,"accelerationY",0),setAllowDrag:h(g,"allowDrag",!0),setAllowGravity:h(g,"allowGravity",!0),setAllowRotation:h(g,"allowRotation",!0),setBounceX:h(g,"bounceX",0),setBounceY:h(g,"bounceY",0),setDragX:h(g,"dragX",0),setDragY:h(g,"dragY",0),setEnable:h(g,"enable",!0),setGravityX:h(g,"gravityX",0),setGravityY:h(g,"gravityY",0),setFrictionX:h(g,"frictionX",0),setFrictionY:h(g,"frictionY",0),setMaxVelocityX:h(g,"maxVelocityX",1e4),setMaxVelocityY:h(g,"maxVelocityY",1e4),setVelocityX:h(g,"velocityX",0),setVelocityY:h(g,"velocityY",0),setAngularVelocity:h(g,"angularVelocity",0),setAngularAcceleration:h(g,"angularAcceleration",0),setAngularDrag:h(g,"angularDrag",0),setMass:h(g,"mass",1),setImmovable:h(g,"immovable",!1)},o.call(this,f,v,g),this.type="PhysicsGroup"},createCallbackHandler:function(d){d.body||this.world.enableBody(d,n.DYNAMIC_BODY);var l=d.body;for(var f in this.defaults)l[f](this.defaults[f])},removeCallbackHandler:function(d){d.body&&this.world.disableBody(d)},setVelocity:function(d,l,f){f===void 0&&(f=0);for(var v=this.getChildren(),g=0;g<v.length;g++)v[g].body.velocity.set(d+g*f,l+g*f);return this},setVelocityX:function(d,l){l===void 0&&(l=0);for(var f=this.getChildren(),v=0;v<f.length;v++)f[v].body.velocity.x=d+v*l;return this},setVelocityY:function(d,l){l===void 0&&(l=0);for(var f=this.getChildren(),v=0;v<f.length;v++)f[v].body.velocity.y=d+v*l;return this}});e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(157),u=t(0),n=t(62),h=t(2),o=t(113),r=t(7),a=new u({Extends:o,initialize:function(l,f,v,g){!v&&!g?g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:s}:r(v)?(g=v,v=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=h(g,"classType",s)):Array.isArray(v)&&r(v[0])?(g=v,v=null,g.forEach(function(p){p.internalCreateCallback=this.createCallbackHandler,p.internalRemoveCallback=this.removeCallbackHandler,p.createMultipleCallback=this.createMultipleCallbackHandler,p.classType=h(p,"classType",s)})):g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=l,this.physicsType=n.STATIC_BODY,o.call(this,f,v,g),this.type="StaticPhysicsGroup"},createCallbackHandler:function(d){d.body||this.world.enableBody(d,n.STATIC_BODY)},removeCallbackHandler:function(d){d.body&&this.world.disableBody(d)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var d=this.children.entries,l=0;l<d.length;l++)d[l].body.reset();return this}});e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(350),u=t(527),n=t(18),h=t(0),o=t(528),r=t(62),a=t(50),d=t(9),l=t(245),f=t(124),v=t(354),g=t(355),p=t(246),m=t(247),y=t(529),T=t(6),C=t(14),S=t(211),E=t(530),P=t(10),M=t(531),A=t(532),R=t(537),O=t(538),F=t(149),I=t(539),G=t(248),z=t(25),U=t(3),X=t(68),b=new h({Extends:d,initialize:function(L,D){d.call(this),this.scene=L,this.bodies=new F,this.staticBodies=new F,this.pendingDestroy=new F,this.colliders=new S,this.gravity=new U(T(D,"gravity.x",0),T(D,"gravity.y",0)),this.bounds=new P(T(D,"x",0),T(D,"y",0),T(D,"width",L.sys.scale.width),T(D,"height",L.sys.scale.height)),this.checkCollision={up:T(D,"checkCollision.up",!0),down:T(D,"checkCollision.down",!0),left:T(D,"checkCollision.left",!0),right:T(D,"checkCollision.right",!0)},this.fps=T(D,"fps",60),this.fixedStep=T(D,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=T(D,"timeScale",1),this.OVERLAP_BIAS=T(D,"overlapBias",4),this.TILE_BIAS=T(D,"tileBias",16),this.forceX=T(D,"forceX",!1),this.isPaused=T(D,"isPaused",!1),this._total=0,this.drawDebug=T(D,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:T(D,"debugShowBody",!0),debugShowStaticBody:T(D,"debugShowStaticBody",!0),debugShowVelocity:T(D,"debugShowVelocity",!0),bodyDebugColor:T(D,"debugBodyColor",16711935),staticBodyDebugColor:T(D,"debugStaticBodyColor",255),velocityDebugColor:T(D,"debugVelocityColor",65280)},this.maxEntries=T(D,"maxEntries",16),this.useTree=T(D,"useTree",!0),this.tree=new M(this.maxEntries),this.staticTree=new M(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new z,this._tempMatrix2=new z,this.drawDebug&&this.createDebugGraphic()},enable:function(B,L){L===void 0&&(L=r.DYNAMIC_BODY),Array.isArray(B)||(B=[B]);for(var D=0;D<B.length;D++){var w=B[D];if(w.isParent)for(var N=w.getChildren(),V=0;V<N.length;V++){var Y=N[V];Y.isParent?this.enable(Y,L):this.enableBody(Y,L)}else this.enableBody(w,L)}},enableBody:function(B,L){return L===void 0&&(L=r.DYNAMIC_BODY),B.body||(L===r.DYNAMIC_BODY?B.body=new u(this,B):L===r.STATIC_BODY&&(B.body=new I(this,B))),this.add(B.body),B},add:function(B){return B.physicsType===r.DYNAMIC_BODY?this.bodies.set(B):B.physicsType===r.STATIC_BODY&&(this.staticBodies.set(B),this.staticTree.insert(B)),B.enable=!0,B},disable:function(B){Array.isArray(B)||(B=[B]);for(var L=0;L<B.length;L++){var D=B[L];if(D.isParent)for(var w=D.getChildren(),N=0;N<w.length;N++){var V=w[N];V.isParent?this.disable(V):this.disableBody(V.body)}else this.disableBody(D.body)}},disableBody:function(B){this.remove(B),B.enable=!1},remove:function(B){B.physicsType===r.DYNAMIC_BODY?(this.tree.remove(B),this.bodies.delete(B)):B.physicsType===r.STATIC_BODY&&(this.staticBodies.delete(B),this.staticTree.remove(B))},createDebugGraphic:function(){var B=this.scene.sys.add.graphics({x:0,y:0});return B.setDepth(Number.MAX_VALUE),this.debugGraphic=B,this.drawDebug=!0,B},setBounds:function(B,L,D,w,N,V,Y,W){return this.bounds.setTo(B,L,D,w),N!==void 0&&this.setBoundsCollision(N,V,Y,W),this},setBoundsCollision:function(B,L,D,w){return B===void 0&&(B=!0),L===void 0&&(L=!0),D===void 0&&(D=!0),w===void 0&&(w=!0),this.checkCollision.left=B,this.checkCollision.right=L,this.checkCollision.up=D,this.checkCollision.down=w,this},pause:function(){return this.isPaused=!0,this.emit(l.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(l.RESUME),this},addCollider:function(B,L,D,w,N){D===void 0&&(D=null),w===void 0&&(w=null),N===void 0&&(N=D);var V=new o(this,!1,B,L,D,w,N);return this.colliders.add(V),V},addOverlap:function(B,L,D,w,N){D===void 0&&(D=null),w===void 0&&(w=null),N===void 0&&(N=D);var V=new o(this,!0,B,L,D,w,N);return this.colliders.add(V),V},removeCollider:function(B){return this.colliders.remove(B),this},setFPS:function(B){return this.fps=B,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(B,L){if(!(this.isPaused||this.bodies.size===0)){var D,w=this._frameTime,N=this._frameTimeMS*this.timeScale;this._elapsed+=L;var V,Y=this.bodies.entries,W=this._elapsed>=N;for(this.fixedStep||(w=L*.001,W=!0,this._elapsed=0),D=0;D<Y.length;D++)V=Y[D],V.enable&&V.preUpdate(W,w);if(W){this._elapsed-=N,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(Y));var H=this.colliders.update();for(D=0;D<H.length;D++){var $=H[D];$.active&&$.update()}this.emit(l.WORLD_STEP,w)}for(;this._elapsed>=N;)this._elapsed-=N,this.step(w)}},step:function(B){var L,D,w=this.bodies.entries,N=w.length;for(L=0;L<N;L++)D=w[L],D.enable&&D.update(B);this.useTree&&(this.tree.clear(),this.tree.load(w));var V=this.colliders.update();for(L=0;L<V.length;L++){var Y=V[L];Y.active&&Y.update()}this.emit(l.WORLD_STEP,B),this.stepsLastFrame++},postUpdate:function(){var B,L,D=this.bodies.entries,w=D.length,N=this.bodies,V=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,B=0;B<w;B++)L=D[B],L.enable&&L.postUpdate();if(this.drawDebug){var Y=this.debugGraphic;for(Y.clear(),B=0;B<w;B++)L=D[B],L.willDrawDebug()&&L.drawDebug(Y);for(D=V.entries,w=D.length,B=0;B<w;B++)L=D[B],L.willDrawDebug()&&L.drawDebug(Y)}var W=this.pendingDestroy;if(W.size>0){var H=this.tree,$=this.staticTree;for(D=W.entries,w=D.length,B=0;B<w;B++)L=D[B],L.physicsType===r.DYNAMIC_BODY?(H.remove(L),N.delete(L)):L.physicsType===r.STATIC_BODY&&($.remove(L),V.delete(L)),L.world=void 0,L.gameObject=void 0;W.clear()}},updateMotion:function(B,L){B.allowRotation&&this.computeAngularVelocity(B,L),this.computeVelocity(B,L)},computeAngularVelocity:function(B,L){var D=B.angularVelocity,w=B.angularAcceleration,N=B.angularDrag,V=B.maxAngular;w?D+=w*L:B.allowDrag&&N&&(N*=L,v(D-N,0,.1)?D-=N:g(D+N,0,.1)?D+=N:D=0),D=n(D,-V,V);var Y=D-B.angularVelocity;B.angularVelocity+=Y,B.rotation+=B.angularVelocity*L},computeVelocity:function(B,L){var D=B.velocity.x,w=B.acceleration.x,N=B.drag.x,V=B.maxVelocity.x,Y=B.velocity.y,W=B.acceleration.y,H=B.drag.y,$=B.maxVelocity.y,K=B.speed,Z=B.maxSpeed,J=B.allowDrag,k=B.useDamping;B.allowGravity&&(D+=(this.gravity.x+B.gravity.x)*L,Y+=(this.gravity.y+B.gravity.y)*L),w?D+=w*L:J&&N&&(k?(N=Math.pow(N,L),D*=N,K=Math.sqrt(D*D+Y*Y),f(K,0,.001)&&(D=0)):(N*=L,v(D-N,0,.01)?D-=N:g(D+N,0,.01)?D+=N:D=0)),W?Y+=W*L:J&&H&&(k?(H=Math.pow(H,L),Y*=H,K=Math.sqrt(D*D+Y*Y),f(K,0,.001)&&(Y=0)):(H*=L,v(Y-H,0,.01)?Y-=H:g(Y+H,0,.01)?Y+=H:Y=0)),D=n(D,-V,V),Y=n(Y,-$,$),B.velocity.set(D,Y),Z>-1&&K>Z&&(B.velocity.normalize().scale(Z),K=Z),B.speed=K},separate:function(B,L,D,w,N,V){if(!V&&!B.enable||!L.enable||B.checkCollision.none||L.checkCollision.none||!this.intersects(B,L)||D&&D.call(w,B.gameObject,L.gameObject)===!1)return!1;if(B.isCircle&&L.isCircle)return this.separateCircle(B,L,N);if(B.isCircle!==L.isCircle){var Y=B.isCircle?L:B,W=B.isCircle?B:L,H={x:Y.x,y:Y.y,right:Y.right,bottom:Y.bottom},$=W.center;if(($.y<H.y||$.y>H.bottom)&&($.x<H.x||$.x>H.right))return this.separateCircle(B,L,N)}var K=!1,Z=!1;N?(K=R(B,L,N,this.OVERLAP_BIAS),Z=O(B,L,N,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+B.gravity.y)<Math.abs(this.gravity.x+B.gravity.x)?(K=R(B,L,N,this.OVERLAP_BIAS),this.intersects(B,L)&&(Z=O(B,L,N,this.OVERLAP_BIAS))):(Z=O(B,L,N,this.OVERLAP_BIAS),this.intersects(B,L)&&(K=R(B,L,N,this.OVERLAP_BIAS)));var J=K||Z;return J&&(N?(B.onOverlap||L.onOverlap)&&this.emit(l.OVERLAP,B.gameObject,L.gameObject,B,L):(B.onCollide||L.onCollide)&&this.emit(l.COLLIDE,B.gameObject,L.gameObject,B,L)),J},separateCircle:function(B,L,D,w){p(B,L,!1,w),m(B,L,!1,w);var N=0;if(B.isCircle!==L.isCircle){var V={x:L.isCircle?B.position.x:L.position.x,y:L.isCircle?B.position.y:L.position.y,right:L.isCircle?B.right:L.right,bottom:L.isCircle?B.bottom:L.bottom},Y={x:B.isCircle?B.center.x:L.center.x,y:B.isCircle?B.center.y:L.center.y,radius:B.isCircle?B.halfWidth:L.halfWidth};Y.y<V.y?Y.x<V.x?N=a(Y.x,Y.y,V.x,V.y)-Y.radius:Y.x>V.right&&(N=a(Y.x,Y.y,V.right,V.y)-Y.radius):Y.y>V.bottom&&(Y.x<V.x?N=a(Y.x,Y.y,V.x,V.bottom)-Y.radius:Y.x>V.right&&(N=a(Y.x,Y.y,V.right,V.bottom)-Y.radius)),N*=-1}else N=B.halfWidth+L.halfWidth-a(B.center.x,B.center.y,L.center.x,L.center.y);if(B.overlapR=N,L.overlapR=N,D||N===0||B.immovable&&L.immovable||B.customSeparateX||L.customSeparateX)return N!==0&&(B.onOverlap||L.onOverlap)&&this.emit(l.OVERLAP,B.gameObject,L.gameObject,B,L),N!==0;var W=B.center.x-L.center.x,H=B.center.y-L.center.y,$=Math.sqrt(Math.pow(W,2)+Math.pow(H,2)),K=(L.center.x-B.center.x)/$||0,Z=(L.center.y-B.center.y)/$||0,J=2*(B.velocity.x*K+B.velocity.y*Z-L.velocity.x*K-L.velocity.y*Z)/(B.mass+L.mass);(B.immovable||L.immovable)&&(J*=2),B.immovable||(B.velocity.x=B.velocity.x-J/B.mass*K,B.velocity.y=B.velocity.y-J/B.mass*Z),L.immovable||(L.velocity.x=L.velocity.x+J/L.mass*K,L.velocity.y=L.velocity.y+J/L.mass*Z),!B.immovable&&!L.immovable&&(N/=2);var k=s(B.center,L.center),Q=(N+C.EPSILON)*Math.cos(k),q=(N+C.EPSILON)*Math.sin(k);return B.immovable||(B.x-=Q,B.y-=q,B.updateCenter()),L.immovable||(L.x+=Q,L.y+=q,L.updateCenter()),B.velocity.x*=B.bounce.x,B.velocity.y*=B.bounce.y,L.velocity.x*=L.bounce.x,L.velocity.y*=L.bounce.y,(B.onCollide||L.onCollide)&&this.emit(l.COLLIDE,B.gameObject,L.gameObject,B,L),!0},intersects:function(B,L){return B===L?!1:!B.isCircle&&!L.isCircle?!(B.right<=L.position.x||B.bottom<=L.position.y||B.position.x>=L.right||B.position.y>=L.bottom):B.isCircle?L.isCircle?a(B.center.x,B.center.y,L.center.x,L.center.y)<=B.halfWidth+L.halfWidth:this.circleBodyIntersects(B,L):this.circleBodyIntersects(L,B)},circleBodyIntersects:function(B,L){var D=n(B.center.x,L.left,L.right),w=n(B.center.y,L.top,L.bottom),N=(B.center.x-D)*(B.center.x-D),V=(B.center.y-w)*(B.center.y-w);return N+V<=B.halfWidth*B.halfWidth},overlap:function(B,L,D,w,N){return D===void 0&&(D=null),w===void 0&&(w=null),N===void 0&&(N=D),this.collideObjects(B,L,D,w,N,!0)},collide:function(B,L,D,w,N){return D===void 0&&(D=null),w===void 0&&(w=null),N===void 0&&(N=D),this.collideObjects(B,L,D,w,N,!1)},collideObjects:function(B,L,D,w,N,V){var Y,W;B.isParent&&B.physicsType===void 0&&(B=B.children.entries),L&&L.isParent&&L.physicsType===void 0&&(L=L.children.entries);var H=Array.isArray(B),$=Array.isArray(L);if(this._total=0,!H&&!$)this.collideHandler(B,L,D,w,N,V);else if(!H&&$)for(Y=0;Y<L.length;Y++)this.collideHandler(B,L[Y],D,w,N,V);else if(H&&!$)if(L)for(Y=0;Y<B.length;Y++)this.collideHandler(B[Y],L,D,w,N,V);else for(Y=0;Y<B.length;Y++){var K=B[Y];for(W=Y+1;W<B.length;W++)Y!==W&&this.collideHandler(K,B[W],D,w,N,V)}else for(Y=0;Y<B.length;Y++)for(W=0;W<L.length;W++)this.collideHandler(B[Y],L[W],D,w,N,V);return this._total>0},collideHandler:function(B,L,D,w,N,V){if(L===void 0&&B.isParent)return this.collideGroupVsGroup(B,B,D,w,N,V);if(!B||!L)return!1;if(B.body){if(L.body)return this.collideSpriteVsSprite(B,L,D,w,N,V);if(L.isParent)return this.collideSpriteVsGroup(B,L,D,w,N,V);if(L.isTilemap)return this.collideSpriteVsTilemapLayer(B,L,D,w,N,V)}else if(B.isParent){if(L.body)return this.collideSpriteVsGroup(L,B,D,w,N,V);if(L.isParent)return this.collideGroupVsGroup(B,L,D,w,N,V);if(L.isTilemap)return this.collideGroupVsTilemapLayer(B,L,D,w,N,V)}else if(B.isTilemap){if(L.body)return this.collideSpriteVsTilemapLayer(L,B,D,w,N,V);if(L.isParent)return this.collideGroupVsTilemapLayer(L,B,D,w,N,V)}},collideSpriteVsSprite:function(B,L,D,w,N,V){return!B.body||!L.body?!1:(this.separate(B.body,L.body,w,N,V)&&(D&&D.call(N,B,L),this._total++),!0)},collideSpriteVsGroup:function(B,L,D,w,N,V){var Y=B.body;if(!(L.length===0||!Y||!Y.enable||Y.checkCollision.none)){var W,H,$;if(this.useTree||L.physicsType===r.STATIC_BODY){var K=this.treeMinMax;K.minX=Y.left,K.minY=Y.top,K.maxX=Y.right,K.maxY=Y.bottom;var Z=L.physicsType===r.DYNAMIC_BODY?this.tree.search(K):this.staticTree.search(K);for(H=Z.length,W=0;W<H;W++)$=Z[W],!(Y===$||!$.enable||$.checkCollision.none||!L.contains($.gameObject))&&this.separate(Y,$,w,N,V,!0)&&(D&&D.call(N,Y.gameObject,$.gameObject),this._total++)}else{var J=L.getChildren(),k=L.children.entries.indexOf(B);for(H=J.length,W=0;W<H;W++)$=J[W].body,!(!$||W===k||!$.enable)&&this.separate(Y,$,w,N,V)&&(D&&D.call(N,Y.gameObject,$.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(B,L,D,w,N,V){var Y=B.getChildren();if(Y.length===0)return!1;for(var W=!1,H=0;H<Y.length;H++)Y[H].body&&this.collideSpriteVsTilemapLayer(Y[H],L,D,w,N,V)&&(W=!0);return W},collideTiles:function(B,L,D,w,N){return!B.body.enable||L.length===0?!1:this.collideSpriteVsTilesHandler(B,L,D,w,N,!1,!1)},overlapTiles:function(B,L,D,w,N){return!B.body.enable||L.length===0?!1:this.collideSpriteVsTilesHandler(B,L,D,w,N,!0,!1)},collideSpriteVsTilemapLayer:function(B,L,D,w,N,V){var Y=B.body;if(!Y.enable||Y.checkCollision.none)return!1;var W=Y.position.x,H=Y.position.y,$=Y.width,K=Y.height,Z=L.layer;if(Z.tileWidth>Z.baseTileWidth){var J=(Z.tileWidth-Z.baseTileWidth)*L.scaleX;W-=J,$+=J}if(Z.tileHeight>Z.baseTileHeight){var k=(Z.tileHeight-Z.baseTileHeight)*L.scaleY;K+=k}var Q=y(W,H,$,K,null,L.scene.cameras.main,L.layer);return Q.length===0?!1:this.collideSpriteVsTilesHandler(B,Q,D,w,N,V,!0)},collideSpriteVsTilesHandler:function(B,L,D,w,N,V,Y){for(var W=B.body,H,$={left:0,right:0,top:0,bottom:0},K,Z=!1,J=0;J<L.length;J++){H=L[J],K=H.tilemapLayer;var k=K.tileToWorldXY(H.x,H.y);$.left=k.x,$.top=k.y,H.baseHeight!==H.height&&($.top-=(H.height-H.baseHeight)*K.scaleY),$.right=$.left+H.width*K.scaleX,$.bottom=$.top+H.height*K.scaleY,G($,W)&&(!w||w.call(N,B,H))&&E(H,B)&&(V||A(J,W,H,$,K,this.TILE_BIAS,Y))&&(this._total++,Z=!0,D&&D.call(N,B,H),V&&W.onOverlap?this.emit(l.TILE_OVERLAP,B,H,W):W.onCollide&&this.emit(l.TILE_COLLIDE,B,H,W))}return Z},collideGroupVsGroup:function(B,L,D,w,N,V){if(!(B.length===0||L.length===0))for(var Y=B.getChildren(),W=0;W<Y.length;W++)this.collideSpriteVsGroup(Y[W],L,D,w,N,V)},wrap:function(B,L){B.body?this.wrapObject(B,L):B.getChildren?this.wrapArray(B.getChildren(),L):Array.isArray(B)?this.wrapArray(B,L):this.wrapObject(B,L)},wrapArray:function(B,L){for(var D=0;D<B.length;D++)this.wrapObject(B[D],L)},wrapObject:function(B,L){L===void 0&&(L=0),B.x=X(B.x,this.bounds.left-L,this.bounds.right+L),B.y=X(B.y,this.bounds.top-L,this.bounds.bottom+L)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});e.exports=b},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(62),n=t(245),h=t(196),o=t(10),r=t(57),a=t(3),d=new s({initialize:function(f,v){var g=v.displayWidth?v.displayWidth:64,p=v.displayHeight?v.displayHeight:64;this.world=f,this.gameObject=v,this.transform={x:v.x,y:v.y,rotation:v.angle,scaleX:v.scaleX,scaleY:v.scaleY,displayOriginX:v.displayOriginX,displayOriginY:v.displayOriginY},this.debugShowBody=f.defaults.debugShowBody,this.debugShowVelocity=f.defaults.debugShowVelocity,this.debugBodyColor=f.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new a,this.position=new a(v.x-v.scaleX*v.displayOriginX,v.y-v.scaleY*v.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=v.angle,this.preRotation=v.angle,this.width=g,this.height=p,this.sourceWidth=g,this.sourceHeight=p,v.frame&&(this.sourceWidth=v.frame.realWidth,this.sourceHeight=v.frame.realHeight),this.halfWidth=Math.abs(g/2),this.halfHeight=Math.abs(p/2),this.center=new a(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new a,this.newVelocity=new a,this.deltaMax=new a,this.acceleration=new a,this.allowDrag=!0,this.drag=new a,this.allowGravity=!0,this.gravity=new a,this.bounce=new a,this.worldBounce=null,this.customBoundsRectangle=f.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new a(1e4,1e4),this.maxSpeed=-1,this.friction=new a(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=u.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=u.DYNAMIC_BODY,this._sx=v.scaleX,this._sy=v.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new o},updateBounds:function(){var l=this.gameObject,f=this.transform;if(l.parentContainer){var v=l.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);f.x=v.tx,f.y=v.ty,f.rotation=h(v.rotation),f.scaleX=v.scaleX,f.scaleY=v.scaleY,f.displayOriginX=l.displayOriginX,f.displayOriginY=l.displayOriginY}else f.x=l.x,f.y=l.y,f.rotation=l.angle,f.scaleX=l.scaleX,f.scaleY=l.scaleY,f.displayOriginX=l.displayOriginX,f.displayOriginY=l.displayOriginY;var g=!1;if(this.syncBounds){var p=l.getBounds(this._bounds);this.width=p.width,this.height=p.height,g=!0}else{var m=Math.abs(f.scaleX),y=Math.abs(f.scaleY);(this._sx!==m||this._sy!==y)&&(this.width=this.sourceWidth*m,this.height=this.sourceHeight*y,this._sx=m,this._sy=y,g=!0)}g&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var l=this.transform;this.position.x=l.x+l.scaleX*(this.offset.x-l.displayOriginX),this.position.y=l.y+l.scaleY*(this.offset.y-l.displayOriginY),this.updateCenter()},resetFlags:function(l){l===void 0&&(l=!1);var f=this.wasTouching,v=this.touching,g=this.blocked;l?(f.none=!0,f.up=!1,f.down=!1,f.left=!1,f.right=!1):(f.none=v.none,f.up=v.up,f.down=v.down,f.left=v.left,f.right=v.right),v.none=!0,v.up=!1,v.down=!1,v.left=!1,v.right=!1,g.none=!0,g.up=!1,g.down=!1,g.left=!1,g.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(l,f){l&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),l&&this.update(f)},update:function(l){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,l);var f=this.velocity.x,v=this.velocity.y;this.newVelocity.set(f*l,v*l),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(v,f),this.speed=Math.sqrt(f*f+v*v),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(n.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var l=this.position.x-this.prevFrame.x,f=this.position.y-this.prevFrame.y;if(this.moves){var v=this.deltaMax.x,g=this.deltaMax.y;v!==0&&l!==0&&(l<0&&l<-v?l=-v:l>0&&l>v&&(l=v)),g!==0&&f!==0&&(f<0&&f<-g?f=-g:f>0&&f>g&&(f=g)),this.gameObject.x+=l,this.gameObject.y+=f}l<0?this.facing=u.FACING_LEFT:l>0&&(this.facing=u.FACING_RIGHT),f<0?this.facing=u.FACING_UP:f>0&&(this.facing=u.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=l,this._ty=f},setBoundsRectangle:function(l){return this.customBoundsRectangle=l||this.world.bounds,this},checkWorldBounds:function(){var l=this.position,f=this.customBoundsRectangle,v=this.world.checkCollision,g=this.worldBounce?-this.worldBounce.x:-this.bounce.x,p=this.worldBounce?-this.worldBounce.y:-this.bounce.y,m=!1;return l.x<f.x&&v.left?(l.x=f.x,this.velocity.x*=g,this.blocked.left=!0,m=!0):this.right>f.right&&v.right&&(l.x=f.right-this.width,this.velocity.x*=g,this.blocked.right=!0,m=!0),l.y<f.y&&v.up?(l.y=f.y,this.velocity.y*=p,this.blocked.up=!0,m=!0):this.bottom>f.bottom&&v.down&&(l.y=f.bottom-this.height,this.velocity.y*=p,this.blocked.down=!0,m=!0),m&&(this.blocked.none=!1,this.updateCenter()),m},setOffset:function(l,f){return f===void 0&&(f=l),this.offset.set(l,f),this},setSize:function(l,f,v){v===void 0&&(v=!0);var g=this.gameObject;if(!l&&g.frame&&(l=g.frame.realWidth),!f&&g.frame&&(f=g.frame.realHeight),this.sourceWidth=l,this.sourceHeight=f,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),v&&g.getCenter){var p=(g.width-l)/2,m=(g.height-f)/2;this.offset.set(p,m)}return this.isCircle=!1,this.radius=0,this},setCircle:function(l,f,v){return f===void 0&&(f=this.offset.x),v===void 0&&(v=this.offset.y),l>0?(this.isCircle=!0,this.radius=l,this.sourceWidth=l*2,this.sourceHeight=l*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(f,v),this.updateCenter()):this.isCircle=!1,this},reset:function(l,f){this.stop();var v=this.gameObject;v.setPosition(l,f),v.getTopLeft?v.getTopLeft(this.position):this.position.set(l,f),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=v.angle,this.preRotation=v.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(l){return l.x=this.x,l.y=this.y,l.right=this.right,l.bottom=this.bottom,l},hitTest:function(l,f){if(!this.isCircle)return r(this,l,f);if(this.radius>0&&l>=this.left&&l<=this.right&&f>=this.top&&f<=this.bottom){var v=(this.center.x-l)*(this.center.x-l),g=(this.center.y-f)*(this.center.y-f);return v+g<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(l){var f=this.position,v=f.x+this.halfWidth,g=f.y+this.halfHeight;this.debugShowBody&&(l.lineStyle(l.defaultStrokeWidth,this.debugBodyColor),this.isCircle?l.strokeCircle(v,g,this.width/2):(this.checkCollision.up&&l.lineBetween(f.x,f.y,f.x+this.width,f.y),this.checkCollision.right&&l.lineBetween(f.x+this.width,f.y,f.x+this.width,f.y+this.height),this.checkCollision.down&&l.lineBetween(f.x,f.y+this.height,f.x+this.width,f.y+this.height),this.checkCollision.left&&l.lineBetween(f.x,f.y,f.x,f.y+this.height))),this.debugShowVelocity&&(l.lineStyle(l.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),l.lineBetween(v,g,v+this.velocity.x/2,g+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(l,f,v,g){l===void 0&&(l=!0),this.collideWorldBounds=l;var p=f!==void 0,m=v!==void 0;return(p||m)&&(this.worldBounce||(this.worldBounce=new a),p&&(this.worldBounce.x=f),m&&(this.worldBounce.y=v)),g!==void 0&&(this.onWorldBounds=g),this},setVelocity:function(l,f){return this.velocity.set(l,f),l=this.velocity.x,f=this.velocity.y,this.speed=Math.sqrt(l*l+f*f),this},setVelocityX:function(l){this.velocity.x=l;var f=l,v=this.velocity.y;return this.speed=Math.sqrt(f*f+v*v),this},setVelocityY:function(l){this.velocity.y=l;var f=this.velocity.x,v=l;return this.speed=Math.sqrt(f*f+v*v),this},setMaxVelocity:function(l,f){return this.maxVelocity.set(l,f),this},setMaxVelocityX:function(l){return this.maxVelocity.x=l,this},setMaxVelocityY:function(l){return this.maxVelocity.y=l,this},setMaxSpeed:function(l){return this.maxSpeed=l,this},setBounce:function(l,f){return this.bounce.set(l,f),this},setBounceX:function(l){return this.bounce.x=l,this},setBounceY:function(l){return this.bounce.y=l,this},setAcceleration:function(l,f){return this.acceleration.set(l,f),this},setAccelerationX:function(l){return this.acceleration.x=l,this},setAccelerationY:function(l){return this.acceleration.y=l,this},setAllowDrag:function(l){return l===void 0&&(l=!0),this.allowDrag=l,this},setAllowGravity:function(l){return l===void 0&&(l=!0),this.allowGravity=l,this},setAllowRotation:function(l){return l===void 0&&(l=!0),this.allowRotation=l,this},setDrag:function(l,f){return this.drag.set(l,f),this},setDamping:function(l){return this.useDamping=l,this},setDragX:function(l){return this.drag.x=l,this},setDragY:function(l){return this.drag.y=l,this},setGravity:function(l,f){return this.gravity.set(l,f),this},setGravityX:function(l){return this.gravity.x=l,this},setGravityY:function(l){return this.gravity.y=l,this},setFriction:function(l,f){return this.friction.set(l,f),this},setFrictionX:function(l){return this.friction.x=l,this},setFrictionY:function(l){return this.friction.y=l,this},setAngularVelocity:function(l){return this.angularVelocity=l,this},setAngularAcceleration:function(l){return this.angularAcceleration=l,this},setAngularDrag:function(l){return this.angularDrag=l,this},setMass:function(l){return this.mass=l,this},setImmovable:function(l){return l===void 0&&(l=!0),this.immovable=l,this},setEnable:function(l){return l===void 0&&(l=!0),this.enable=l,this},processX:function(l,f,v,g){this.x+=l,this.updateCenter(),f!==null&&(this.velocity.x=f);var p=this.blocked;v&&(p.left=!0),g&&(p.right=!0)},processY:function(l,f,v,g){this.y+=l,this.updateCenter(),f!==null&&(this.velocity.y=f);var p=this.blocked;v&&(p.up=!0),g&&(p.down=!0)},x:{get:function(){return this.position.x},set:function(l){this.position.x=l}},y:{get:function(){return this.position.y},set:function(l){this.position.y=l}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(h,o,r,a,d,l,f){this.world=h,this.name="",this.active=!0,this.overlapOnly=o,this.object1=r,this.object2=a,this.collideCallback=d,this.processCallback=l,this.callbackContext=f},setName:function(n){return this.name=n,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(3),n=new u,h=new u,o=function(r,a,d,l,f,v,g){var p=g.tilemapLayer.tilemap._convert.WorldToTileXY;p(r,a,!0,n,v,g);var m=n.x,y=n.y;p(r+d,a+l,!1,h,v,g);var T=Math.ceil(h.x),C=Math.ceil(h.y);return s(m,y,T-m,C-y,f,g)};e.exports=o},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.collisionCallback?!s.collisionCallback.call(s.collisionCallbackContext,u,s):s.layer.callbacks[s.index]?!s.layer.callbacks[s.index].callback.call(s.layer.callbacks[s.index].callbackContext,u,s):!0};e.exports=t},function(e,c,t){/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(436);function u(C){var S=[".left",".top",".right",".bottom"];if(!(this instanceof u))return new u(C,S);this._maxEntries=Math.max(4,C||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}u.prototype={all:function(){return this._all(this.data,[])},search:function(C){var S=this.data,E=[],P=this.toBBox;if(!m(C,S))return E;for(var M=[],A,R,O,F;S;){for(A=0,R=S.children.length;A<R;A++)O=S.children[A],F=S.leaf?P(O):O,m(C,F)&&(S.leaf?E.push(O):p(C,F)?this._all(O,E):M.push(O));S=M.pop()}return E},collides:function(C){var S=this.data,E=this.toBBox;if(!m(C,S))return!1;for(var P=[],M,A,R,O;S;){for(M=0,A=S.children.length;M<A;M++)if(R=S.children[M],O=S.leaf?E(R):R,m(C,O)){if(S.leaf||p(C,O))return!0;P.push(R)}S=P.pop()}return!1},load:function(C){if(!(C&&C.length))return this;if(C.length<this._minEntries){for(var S=0,E=C.length;S<E;S++)this.insert(C[S]);return this}var P=this._build(C.slice(),0,C.length-1,0);if(!this.data.children.length)this.data=P;else if(this.data.height===P.height)this._splitRoot(this.data,P);else{if(this.data.height<P.height){var M=this.data;this.data=P,P=M}this._insert(P,this.data.height-P.height-1,!0)}return this},insert:function(C){return C&&this._insert(C,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(C,S){if(!C)return this;for(var E=this.data,P=this.toBBox(C),M=[],A=[],R,O,F,I;E||M.length;){if(E||(E=M.pop(),O=M[M.length-1],R=A.pop(),I=!0),E.leaf&&(F=n(C,E.children,S),F!==-1))return E.children.splice(F,1),M.push(E),this._condense(M),this;!I&&!E.leaf&&p(E,P)?(M.push(E),A.push(R),R=0,O=E,E=E.children[0]):O?(R++,E=O.children[R],I=!1):E=null}return this},toBBox:function(C){return C},compareMinX:a,compareMinY:d,toJSON:function(){return this.data},fromJSON:function(C){return this.data=C,this},_all:function(C,S){for(var E=[];C;)C.leaf?S.push.apply(S,C.children):E.push.apply(E,C.children),C=E.pop();return S},_build:function(C,S,E,P){var M=E-S+1,A=this._maxEntries,R;if(M<=A)return R=y(C.slice(S,E+1)),h(R,this.toBBox),R;P||(P=Math.ceil(Math.log(M)/Math.log(A)),A=Math.ceil(M/Math.pow(A,P-1))),R=y([]),R.leaf=!1,R.height=P;var O=Math.ceil(M/A),F=O*Math.ceil(Math.sqrt(A)),I,G,z,U;for(T(C,S,E,F,this.compareMinX),I=S;I<=E;I+=F)for(z=Math.min(I+F-1,E),T(C,I,z,O,this.compareMinY),G=I;G<=z;G+=O)U=Math.min(G+O-1,z),R.children.push(this._build(C,G,U,P-1));return h(R,this.toBBox),R},_chooseSubtree:function(C,S,E,P){for(var M,A,R,O,F,I,G,z;P.push(S),!(S.leaf||P.length-1===E);){for(G=z=1/0,M=0,A=S.children.length;M<A;M++)R=S.children[M],F=l(R),I=v(C,R)-F,I<z?(z=I,G=F<G?F:G,O=R):I===z&&F<G&&(G=F,O=R);S=O||S.children[0]}return S},_insert:function(C,S,E){var P=this.toBBox,M=E?C:P(C),A=[],R=this._chooseSubtree(M,this.data,S,A);for(R.children.push(C),r(R,M);S>=0&&A[S].children.length>this._maxEntries;)this._split(A,S),S--;this._adjustParentBBoxes(M,A,S)},_split:function(C,S){var E=C[S],P=E.children.length,M=this._minEntries;this._chooseSplitAxis(E,M,P);var A=this._chooseSplitIndex(E,M,P),R=y(E.children.splice(A,E.children.length-A));R.height=E.height,R.leaf=E.leaf,h(E,this.toBBox),h(R,this.toBBox),S?C[S-1].children.push(R):this._splitRoot(E,R)},_splitRoot:function(C,S){this.data=y([C,S]),this.data.height=C.height+1,this.data.leaf=!1,h(this.data,this.toBBox)},_chooseSplitIndex:function(C,S,E){var P,M,A,R,O,F,I,G;for(F=I=1/0,P=S;P<=E-S;P++)M=o(C,0,P,this.toBBox),A=o(C,P,E,this.toBBox),R=g(M,A),O=l(M)+l(A),R<F?(F=R,G=P,I=O<I?O:I):R===F&&O<I&&(I=O,G=P);return G},_chooseSplitAxis:function(C,S,E){var P=C.leaf?this.compareMinX:a,M=C.leaf?this.compareMinY:d,A=this._allDistMargin(C,S,E,P),R=this._allDistMargin(C,S,E,M);A<R&&C.children.sort(P)},_allDistMargin:function(C,S,E,P){C.children.sort(P);var M=this.toBBox,A=o(C,0,S,M),R=o(C,E-S,E,M),O=f(A)+f(R),F,I;for(F=S;F<E-S;F++)I=C.children[F],r(A,C.leaf?M(I):I),O+=f(A);for(F=E-S-1;F>=S;F--)I=C.children[F],r(R,C.leaf?M(I):I),O+=f(R);return O},_adjustParentBBoxes:function(C,S,E){for(var P=E;P>=0;P--)r(S[P],C)},_condense:function(C){for(var S=C.length-1,E;S>=0;S--)C[S].children.length===0?S>0?(E=C[S-1].children,E.splice(E.indexOf(C[S]),1)):this.clear():h(C[S],this.toBBox)},compareMinX:function(C,S){return C.left-S.left},compareMinY:function(C,S){return C.top-S.top},toBBox:function(C){return{minX:C.left,minY:C.top,maxX:C.right,maxY:C.bottom}}};function n(C,S,E){if(!E)return S.indexOf(C);for(var P=0;P<S.length;P++)if(E(C,S[P]))return P;return-1}function h(C,S){o(C,0,C.children.length,S,C)}function o(C,S,E,P,M){M||(M=y(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var A=S,R;A<E;A++)R=C.children[A],r(M,C.leaf?P(R):R);return M}function r(C,S){return C.minX=Math.min(C.minX,S.minX),C.minY=Math.min(C.minY,S.minY),C.maxX=Math.max(C.maxX,S.maxX),C.maxY=Math.max(C.maxY,S.maxY),C}function a(C,S){return C.minX-S.minX}function d(C,S){return C.minY-S.minY}function l(C){return(C.maxX-C.minX)*(C.maxY-C.minY)}function f(C){return C.maxX-C.minX+(C.maxY-C.minY)}function v(C,S){return(Math.max(S.maxX,C.maxX)-Math.min(S.minX,C.minX))*(Math.max(S.maxY,C.maxY)-Math.min(S.minY,C.minY))}function g(C,S){var E=Math.max(C.minX,S.minX),P=Math.max(C.minY,S.minY),M=Math.min(C.maxX,S.maxX),A=Math.min(C.maxY,S.maxY);return Math.max(0,M-E)*Math.max(0,A-P)}function p(C,S){return C.minX<=S.minX&&C.minY<=S.minY&&S.maxX<=C.maxX&&S.maxY<=C.maxY}function m(C,S){return S.minX<=C.maxX&&S.minY<=C.maxY&&S.maxX>=C.minX&&S.maxY>=C.minY}function y(C){return{children:C,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function T(C,S,E,P,M){for(var A=[S,E],R;A.length;)E=A.pop(),S=A.pop(),!(E-S<=P)&&(R=S+Math.ceil((E-S)/P/2)*P,s(C,R,S,E,M),A.push(S,R,R,E))}e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(533),u=t(535),n=t(248),h=function(o,r,a,d,l,f,v){var g=d.left,p=d.top,m=d.right,y=d.bottom,T=a.faceLeft||a.faceRight,C=a.faceTop||a.faceBottom;if(v||(T=!0,C=!0),!T&&!C)return!1;var S=0,E=0,P=0,M=1;if(r.deltaAbsX()>r.deltaAbsY()?P=-1:r.deltaAbsX()<r.deltaAbsY()&&(M=-1),r.deltaX()!==0&&r.deltaY()!==0&&T&&C&&(P=Math.min(Math.abs(r.position.x-m),Math.abs(r.right-g)),M=Math.min(Math.abs(r.position.y-y),Math.abs(r.bottom-p))),P<M){if(T&&(S=s(r,a,g,m,f,v),S!==0&&!n(d,r)))return!0;C&&(E=u(r,a,p,y,f,v))}else{if(C&&(E=u(r,a,p,y,f,v),E!==0&&!n(d,r)))return!0;T&&(S=s(r,a,g,m,f,v))}return S!==0||E!==0};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(534),u=function(n,h,o,r,a,d){var l=0,f=h.faceLeft,v=h.faceRight,g=h.collideLeft,p=h.collideRight;return d||(f=!0,v=!0,g=!0,p=!0),n.deltaX()<0&&p&&n.checkCollision.left?v&&n.x<r&&(l=n.x-r,l<-a&&(l=0)):n.deltaX()>0&&g&&n.checkCollision.right&&f&&n.right>o&&(l=n.right-o,l>a&&(l=0)),l!==0&&(n.customSeparateX?n.overlapX=l:s(n,l)),l};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u<0?(s.blocked.none=!1,s.blocked.left=!0):u>0&&(s.blocked.none=!1,s.blocked.right=!0),s.position.x-=u,s.bounce.x===0?s.velocity.x=0:s.velocity.x=-s.velocity.x*s.bounce.x};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(536),u=function(n,h,o,r,a,d){var l=0,f=h.faceTop,v=h.faceBottom,g=h.collideUp,p=h.collideDown;return d||(f=!0,v=!0,g=!0,p=!0),n.deltaY()<0&&p&&n.checkCollision.up?v&&n.y<r&&(l=n.y-r,l<-a&&(l=0)):n.deltaY()>0&&g&&n.checkCollision.down&&f&&n.bottom>o&&(l=n.bottom-o,l>a&&(l=0)),l!==0&&(n.customSeparateY?n.overlapY=l:s(n,l)),l};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u<0?(s.blocked.none=!1,s.blocked.up=!0):u>0&&(s.blocked.none=!1,s.blocked.down=!0),s.position.y-=u,s.bounce.y===0?s.velocity.y=0:s.velocity.y=-s.velocity.y*s.bounce.y};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(246),u=t(1389),n=function(h,o,r,a){var d=s(h,o,r,a),l=h.immovable,f=o.immovable;if(r||d===0||l&&f||h.customSeparateX||o.customSeparateX)return d!==0||h.embedded&&o.embedded;var v=u.Set(h,o,d);return!l&&!f?v>0?!0:u.Check():(l?u.RunImmovableBody1(v):f&&u.RunImmovableBody2(v),!0)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(247),u=t(1390),n=function(h,o,r,a){var d=s(h,o,r,a),l=h.immovable,f=o.immovable;if(r||d===0||l&&f||h.customSeparateY||o.customSeparateY)return d!==0||h.embedded&&o.embedded;var v=u.Set(h,o,d);return!l&&!f?v>0?!0:u.Check():(l?u.RunImmovableBody1(v):f&&u.RunImmovableBody2(v),!0)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66),u=t(0),n=t(62),h=t(57),o=t(3),r=new u({initialize:function(d,l){var f=l.displayWidth?l.displayWidth:64,v=l.displayHeight?l.displayHeight:64;this.world=d,this.gameObject=l,this.debugShowBody=d.defaults.debugShowStaticBody,this.debugBodyColor=d.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new o,this.position=new o(l.x-f*l.originX,l.y-v*l.originY),this.width=f,this.height=v,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new o(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=o.ZERO,this.allowGravity=!1,this.gravity=o.ZERO,this.bounce=o.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=n.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(a,d){return a&&a!==this.gameObject&&(this.gameObject.body=null,a.body=this,this.gameObject=a),d&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var a=this.gameObject;return a.getTopLeft(this.position),this.width=a.displayWidth,this.height=a.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(a,d){return d===void 0&&(d=a),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(a,d),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(a,d,l){l===void 0&&(l=!0);var f=this.gameObject;if(!a&&f.frame&&(a=f.frame.realWidth),!d&&f.frame&&(d=f.frame.realHeight),this.world.staticTree.remove(this),this.width=a,this.height=d,this.halfWidth=Math.floor(a/2),this.halfHeight=Math.floor(d/2),l&&f.getCenter){var v=f.displayWidth/2,g=f.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(v-this.halfWidth,g-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(a,d,l){return d===void 0&&(d=this.offset.x),l===void 0&&(l=this.offset.y),a>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=a,this.width=a*2,this.height=a*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(d,l),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(a,d){var l=this.gameObject;a===void 0&&(a=l.x),d===void 0&&(d=l.y),this.world.staticTree.remove(this),l.setPosition(a,d),l.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(a){return a.x=this.x,a.y=this.y,a.right=this.right,a.bottom=this.bottom,a},hitTest:function(a,d){return this.isCircle?s(this,a,d):h(this,a,d)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(a){var d=this.position,l=d.x+this.halfWidth,f=d.y+this.halfHeight;this.debugShowBody&&(a.lineStyle(a.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?a.strokeCircle(l,f,this.width/2):a.strokeRect(d.x,d.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(a){return a<=0&&(a=.1),this.mass=a,this},x:{get:function(){return this.position.x},set:function(a){this.world.staticTree.remove(this),this.position.x=a,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(a){this.world.staticTree.remove(this),this.position.y=a,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=r},function(e,c,t){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var s=t(0),u=new s({initialize:function(h){this.pluginManager=h,this.game=h.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=new s,n=function(h,o,r,a){var d=r.tilemapLayer,l=d.cullPaddingX,f=d.cullPaddingY,v=d.tilemap.tileToWorldXY(h,o,u,a,d);return v.x>a.worldView.x+d.scaleX*r.tileWidth*(-l-.5)&&v.x<a.worldView.right+d.scaleX*r.tileWidth*(l-.5)&&v.y>a.worldView.y+d.scaleY*r.tileHeight*(-f-1)&&v.y<a.worldView.bottom+d.scaleY*r.tileHeight*(f-.5)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,h,o,r,a,d,l){for(var f=s(o,r,a,d,null,l),v=0;v<f.length;v++)f[v]&&f[v].index===n&&(f[v].index=h)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=t(139),n=t(76),h=new s,o=function(r,a){var d=r.tilemapLayer.tilemap,l=r.tilemapLayer,f=Math.floor(d.tileWidth*l.scaleX),v=Math.floor(d.tileHeight*l.scaleY),g=n(a.worldView.x-l.x,f,0,!0)-l.cullPaddingX,p=u(a.worldView.right-l.x,f,0,!0)+l.cullPaddingX,m=n(a.worldView.y-l.y,v,0,!0)-l.cullPaddingY,y=u(a.worldView.bottom-l.y,v,0,!0)+l.cullPaddingY;return h.setTo(g,m,p-g,y-m)};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(543),u=t(159),n=function(h,o,r,a){r===void 0&&(r=[]),a===void 0&&(a=0),r.length=0;var d=h.tilemapLayer,l=s(h,o);return(d.skipCull||d.scrollFactorX!==1||d.scrollFactorY!==1)&&(l.left=0,l.right=h.width,l.top=0,l.bottom=h.height),u(h,l,a,r),r};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(546),u=t(159),n=function(h,o,r,a){r===void 0&&(r=[]),a===void 0&&(a=0),r.length=0;var d=h.tilemapLayer;if(!d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1){var l=s(h,o);u(h,l,a,r)}return r};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(139),u=t(76),n=function(h,o){var r=h.tilemapLayer.tilemap,a=h.tilemapLayer,d=Math.floor(r.tileWidth*a.scaleX),l=Math.floor(r.tileHeight*a.scaleY),f=h.hexSideLength,v=(l-f)/2+f,g=u(o.worldView.x-a.x,d,0,!0)-a.cullPaddingX,p=s(o.worldView.right-a.x,d,0,!0)+a.cullPaddingX,m=u(o.worldView.y-a.y,v,0,!0)-a.cullPaddingY,y=s(o.worldView.bottom-a.y,v,0,!0)+a.cullPaddingY;return{left:g,right:p,top:m,bottom:y}};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(541),u=function(n,h,o,r){o===void 0&&(o=[]),r===void 0&&(r=0),o.length=0;var a=n.tilemapLayer,d=n.data,l=n.width,f=n.height,v=0,g=l,p=0,m=f;if(!a.skipCull){var y,T,C;if(r===0){for(T=p;T<m;T++)for(y=v;d[T]&&y<g;y++)if(s(y,T,n,h)){if(C=d[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;o.push(C)}}else if(r===1){for(T=p;T<m;T++)for(y=g;d[T]&&y>=v;y--)if(s(y,T,n,h)){if(C=d[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;o.push(C)}}else if(r===2){for(T=m;T>=p;T--)for(y=v;d[T]&&y<g;y++)if(s(y,T,n,h)){if(C=d[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;o.push(C)}}else if(r===3){for(T=m;T>=p;T--)for(y=g;d[T]&&y>=v;y--)if(s(y,T,n,h)){if(C=d[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;o.push(C)}}}return a.tilesDrawn=o.length,a.tilesTotal=l*f,o};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(549),u=t(159),n=function(h,o,r,a){r===void 0&&(r=[]),a===void 0&&(a=0),r.length=0;var d=h.tilemapLayer;if(!d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1){var l=s(h,o);u(h,l,a,r)}return r};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(139),u=t(76),n=function(h,o){var r=h.tilemapLayer.tilemap,a=h.tilemapLayer,d=Math.floor(r.tileWidth*a.scaleX),l=Math.floor(r.tileHeight*a.scaleY),f=u(o.worldView.x-a.x,d,0,!0)-a.cullPaddingX,v=s(o.worldView.right-a.x,d,0,!0)+a.cullPaddingX,g=u(o.worldView.y-a.y,l/2,0,!0)-a.cullPaddingY,p=s(o.worldView.bottom-a.y,l/2,0,!0)+a.cullPaddingY;return{left:f,right:v,top:g,bottom:p}};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,h,o,r,a){o||(o=new s);var d=a.baseTileWidth,l=a.baseTileHeight,f=a.tilemapLayer,v=0,g=0;f&&(r||(r=f.scene.cameras.main),v=f.x+r.scrollX*(1-f.scrollFactorX),d*=f.scaleX,g=f.y+r.scrollY*(1-f.scrollFactorY),l*=f.scaleY);var p=a.hexSideLength,m=(l-p)/2+p,y=v+n*d+h%2*(d/2),T=g+h*m;return o.set(y,T)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,h,o,r,a){o||(o=new s);var d=a.baseTileWidth,l=a.baseTileHeight,f=a.tilemapLayer,v=0,g=0;f&&(r||(r=f.scene.cameras.main),v=f.x+r.scrollX*(1-f.scrollFactorX),d*=f.scaleX,g=f.y+r.scrollY*(1-f.scrollFactorY),l*=f.scaleY);var p=v+(n-h)*(d/2),m=g+(n+h)*(l/2);return o.set(p,m)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,h,o,r,a){o||(o=new s);var d=a.baseTileWidth,l=a.baseTileHeight,f=a.tilemapLayer,v=0,g=0;f&&(r||(r=f.scene.cameras.main),v=f.x+r.scrollX*(1-f.scrollFactorX),d*=f.scaleX,g=f.y+r.scrollY*(1-f.scrollFactorY),l*=f.scaleY);var p=v+n*d+h%2*(d/2),m=g+h*(l/2);return o.set(p,m)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(253),u=t(254),n=t(3),h=function(o,r,a,d,l){return a||(a=new n(0,0)),a.x=s(o,d,l),a.y=u(r,d,l),a};e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h=n.baseTileHeight,o=n.tilemapLayer,r=0;o&&(u===void 0&&(u=o.scene.cameras.main),r=o.y+u.scrollY*(1-o.scrollFactorY),h*=o.scaleY);var a=o.tilemap.hexSideLength,d=(h-a)/2+a;return r+s*d};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h=n.baseTileHeight,o=n.tilemapLayer,r=0;return o&&(u===void 0&&(u=o.scene.cameras.main),r=o.y+u.scrollY*(1-o.scrollFactorY),h*=o.scaleY),r+s*(h/2)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,h,o,r,a,d){r||(r=new s);var l=d.baseTileWidth,f=d.baseTileHeight,v=d.tilemapLayer;v&&(a||(a=v.scene.cameras.main),h=h-(v.y+a.scrollY*(1-v.scrollFactorY)),f*=v.scaleY,n=n-(v.x+a.scrollX*(1-v.scrollFactorX)),l*=v.scaleX);var g=d.hexSideLength,p=(f-g)/2+g,m=o?Math.floor(h/p):h/p,y=o?Math.floor((n-m%2*.5*l)/l):(n-m%2*.5*l)/l;return r.set(y,m)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,h,o,r,a,d){r||(r=new s);var l=d.baseTileWidth,f=d.baseTileHeight,v=d.tilemapLayer;v&&(a||(a=v.scene.cameras.main),h=h-(v.y+a.scrollY*(1-v.scrollFactorY)),f*=v.scaleY,n=n-(v.x+a.scrollX*(1-v.scrollFactorX)),l*=v.scaleX);var g=o?Math.floor((n/(l/2)+h/(f/2))/2):(n/(l/2)+h/(f/2))/2,p=o?Math.floor((h/(f/2)-n/(l/2))/2):(h/(f/2)-n/(l/2))/2;return r.set(g,p)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,h,o,r,a,d){r||(r=new s);var l=d.baseTileWidth,f=d.baseTileHeight,v=d.tilemapLayer;v&&(a||(a=v.scene.cameras.main),h=h-(v.y+a.scrollY*(1-v.scrollFactorY)),f*=v.scaleY,n=n-(v.x+a.scrollX*(1-v.scrollFactorX)),l*=v.scaleX);var g=o?Math.floor(h/(f/2)):h/(f/2),p=o?Math.floor((n+g%2*.5*l)/l):(n+g%2*.5*l)/l;return r.set(p,g)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(255),u=t(256),n=t(3),h=function(o,r,a,d,l,f){return a===void 0&&(a=!0),d||(d=new n(0,0)),d.x=s(o,a,l,f),d.y=u(r,a,l,f),d};e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){var o=h.baseTileHeight,r=h.tilemapLayer;r&&(n||(n=r.scene.cameras.main),s=s-(r.y+n.scrollY*(1-r.scrollFactorY)),o*=r.scaleY);var a=h.hexSideLength,d=(o-a)/2+a;return u?Math.floor(s/d):s/d};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){var o=h.baseTileHeight,r=h.tilemapLayer;return r&&(n||(n=r.scene.cameras.main),s=s-(r.y+n.scrollY*(1-r.scrollFactorY)),o*=r.scaleY),u?Math.floor(s/(o/2)):s/(o/2)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(119),u=function(n,h,o){if(s(n,h,o)){var r=o.data[h][n];return r!==null&&r.index>-1}else return!1};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(85),u=t(119),n=t(252),h=function(o,r,a,d,l){if(a===void 0&&(a=!0),d===void 0&&(d=!0),!u(o,r,l))return null;var f=l.data[r][o];if(f)l.data[r][o]=a?null:new s(l,-1,o,r,l.tileWidth,l.tileHeight);else return null;return d&&f&&f.collides&&n(o,r,l),f};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40),u=t(259),n=t(565),h=t(566),o=t(577),r=function(a,d,l,f,v,g){var p;switch(d){case s.ARRAY_2D:p=u(a,l,f,v,g);break;case s.CSV:p=n(a,l,f,v,g);break;case s.TILED_JSON:p=h(a,l,g);break;case s.WELTMEISTER:p=o(a,l,g);break;default:console.warn("Unrecognized tilemap data format: "+d),p=null}return p};e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40),u=t(259),n=function(h,o,r,a,d){var l=o.trim().split(`
`).map(function(v){return v.split(",")}),f=u(h,l,r,a,d);return f.format=s.CSV,f};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(567),u=t(568),n=t(29),h=t(40),o=t(258),r=t(121),a=t(569),d=t(570),l=t(573),f=t(575),v=function(g,p,m){var y=new r({width:p.width,height:p.height,name:g,tileWidth:p.tilewidth,tileHeight:p.tileheight,orientation:o(p.orientation),format:h.TILED_JSON,version:p.version,properties:p.properties,renderOrder:p.renderorder,infinite:p.infinite});y.orientation===n.HEXAGONAL&&(y.hexSideLength=p.hexsidelength),y.layers=l(p,m),y.images=a(p);var T=f(p);return y.tilesets=T.tilesets,y.imageCollections=T.imageCollections,y.objects=d(p),y.tiles=u(y),s(y),y};e.exports=v},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17),u=function(n){for(var h,o,r,a,d,l=0;l<n.layers.length;l++){h=n.layers[l],a=null;for(var f=0;f<h.data.length;f++){d=h.data[f];for(var v=0;v<d.length;v++)o=d[v],!(o===null||o.index<0)&&(r=n.tiles[o.index][2],a=n.tilesets[r],o.width=a.tileWidth,o.height=a.tileHeight,a.tileProperties&&a.tileProperties[o.index-a.firstgid]&&(o.properties=s(o.properties,a.tileProperties[o.index-a.firstgid])))}}};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(122),u=function(n){var h,o,r=[];for(h=0;h<n.imageCollections.length;h++)for(var a=n.imageCollections[h],d=a.images,l=0;l<d.length;l++){var f=d[l];o=new s(f.image,f.gid,a.imageWidth,a.imageHeight,0,0),o.updateTileData(a.imageWidth,a.imageHeight),n.tilesets.push(o)}for(h=0;h<n.tilesets.length;h++){o=n.tilesets[h];for(var v=o.tileMargin,g=o.tileMargin,p=0,m=0,y=0,T=o.firstgid;T<o.firstgid+o.total&&(r[T]=[v,g,h],v+=o.tileWidth+o.tileSpacing,p++,!(p===o.total||(m++,m===o.columns&&(v=o.tileMargin,g+=o.tileHeight+o.tileSpacing,m=0,y++,y===o.rows))));T++);}return r};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=t(161),n=function(h){for(var o=[],r=[],a=u(h);a.i<a.layers.length||r.length>0;){if(a.i>=a.layers.length){if(r.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=r.pop();continue}var d=a.layers[a.i];if(a.i++,d.type!=="imagelayer"){if(d.type==="group"){var l=u(h,d,a);r.push(a),a=l}continue}var f=s(d,"offsetx",0)+s(d,"startx",0),v=s(d,"offsety",0)+s(d,"starty",0);o.push({name:a.name+d.name,image:d.image,x:a.x+f+d.x,y:a.y+v+d.y,alpha:a.opacity*d.opacity,visible:a.visible&&d.visible,properties:s(d,"properties",{})})}return o};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=t(260),n=t(572),h=t(161),o=function(r){for(var a=[],d=[],l=h(r);l.i<l.layers.length||d.length>0;){if(l.i>=l.layers.length){if(d.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}l=d.pop();continue}var f=l.layers[l.i];if(l.i++,f.opacity*=l.opacity,f.visible=l.visible&&f.visible,f.type!=="objectgroup"){if(f.type==="group"){var v=h(r,f,l);d.push(l),l=v}continue}f.name=l.name+f.name;for(var g=l.x+s(f,"startx",0)+s(f,"offsetx",0),p=l.y+s(f,"starty",0)+s(f,"offsety",0),m=[],y=0;y<f.objects.length;y++){var T=u(f.objects[y],g,p);m.push(T)}var C=new n(f);C.objects=m,a.push(C)}return a};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(126),u=function(n,h){for(var o={},r=0;r<h.length;r++){var a=h[r];s(n,a)&&(o[a]=n[a])}return o};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=new s({initialize:function(o){o===void 0&&(o={}),this.name=u(o,"name","object layer"),this.opacity=u(o,"opacity",1),this.properties=u(o,"properties",{}),this.propertyTypes=u(o,"propertytypes",{}),this.type=u(o,"type","objectgroup"),this.visible=u(o,"visible",!0),this.objects=u(o,"objects",[])}});e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(574),u=t(29),n=t(161),h=t(258),o=t(2),r=t(120),a=t(261),d=t(85),l=function(f,v){for(var g=o(f,"infinite",!1),p=[],m=[],y=n(f);y.i<y.layers.length||m.length>0;){if(y.i>=y.layers.length){if(m.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}y=m.pop();continue}var T=y.layers[y.i];if(y.i++,T.type!=="tilelayer"){if(T.type==="group"){var C=n(f,T,y);m.push(y),y=C}continue}if(T.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+T.name+"'");continue}else if(T.encoding&&T.encoding==="base64"){if(T.chunks)for(var S=0;S<T.chunks.length;S++)T.chunks[S].data=s(T.chunks[S].data);T.data&&(T.data=s(T.data)),delete T.encoding}var E,P,M,A,R=[],O=0;if(g){var F=o(T,"startx",0)+T.x,I=o(T,"starty",0)+T.y;E=new r({name:y.name+T.name,x:y.x+o(T,"offsetx",0)+F*f.tilewidth,y:y.y+o(T,"offsety",0)+I*f.tileheight,width:T.width,height:T.height,tileWidth:f.tilewidth,tileHeight:f.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:o(T,"properties",[]),orientation:h(f.orientation)}),E.orientation===u.HEXAGONAL&&(E.hexSideLength=f.hexsidelength);for(var G=0;G<T.height;G++){R.push([null]);for(var z=0;z<T.width;z++)R[G][z]=null}for(G=0,W=T.chunks.length;G<W;G++)for(var U=T.chunks[G],X=U.x-F,b=U.y-I,B=0,L=0,D=U.data.length;L<D;L++){var w=O+X,N=B+b;P=a(U.data[L]),P.gid>0?(M=new d(E,P.gid,w,N,f.tilewidth,f.tileheight),M.rotation=P.rotation,M.flipX=P.flipped,R[N][w]=M):(A=v?null:new d(E,-1,w,N,f.tilewidth,f.tileheight),R[N][w]=A),O++,O===U.width&&(B++,O=0)}}else{E=new r({name:y.name+T.name,x:y.x+o(T,"offsetx",0)+T.x,y:y.y+o(T,"offsety",0)+T.y,width:T.width,height:T.height,tileWidth:f.tilewidth,tileHeight:f.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:o(T,"properties",[]),orientation:h(f.orientation)}),E.orientation===u.HEXAGONAL&&(E.hexSideLength=f.hexsidelength);for(var V=[],Y=0,W=T.data.length;Y<W;Y++)P=a(T.data[Y]),P.gid>0?(M=new d(E,P.gid,O,R.length,f.tilewidth,f.tileheight),M.rotation=P.rotation,M.flipX=P.flipped,V.push(M)):(A=v?null:new d(E,-1,O,R.length,f.tilewidth,f.tileheight),V.push(A)),O++,O===T.width&&(R.push(V),O=0,V=[])}E.data=R,p.push(E)}return p};e.exports=l},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=window.atob(s),n=u.length,h=new Array(n/4),o=0;o<n;o+=4)h[o/4]=(u.charCodeAt(o)|u.charCodeAt(o+1)<<8|u.charCodeAt(o+2)<<16|u.charCodeAt(o+3)<<24)>>>0;return h};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(122),u=t(576),n=t(260),h=t(1453),o=function(r){for(var a=[],d=[],l=null,f,v=0;v<r.tilesets.length;v++){var g=r.tilesets[v];if(g.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(g.image){var p=new s(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing);if(r.version>1){var m=void 0,y=void 0;if(Array.isArray(g.tiles)){m=m||{},y=y||{};for(var T=0;T<g.tiles.length;T++){var C=g.tiles[T];if(C.properties){var S={};C.properties.forEach(function(G){S[G.name]=G.value}),y[C.id]=S}if(C.objectgroup&&((m[C.id]||(m[C.id]={})).objectgroup=C.objectgroup,C.objectgroup.objects)){var E=C.objectgroup.objects.map(function(G){return n(G)});m[C.id].objectgroup.objects=E}C.animation&&((m[C.id]||(m[C.id]={})).animation=C.animation),C.type&&((m[C.id]||(m[C.id]={})).type=C.type)}}Array.isArray(g.wangsets)&&(m=m||{},y=y||{},h(g.wangsets,m)),m&&(p.tileData=m,p.tileProperties=y)}else if(g.tileproperties&&(p.tileProperties=g.tileproperties),g.tiles){p.tileData=g.tiles;for(f in p.tileData){var P=p.tileData[f].objectgroup;if(P&&P.objects){var M=P.objects.map(function(G){return n(G)});p.tileData[f].objectgroup.objects=M}}}p.updateTileData(g.imagewidth,g.imageheight),a.push(p)}else{var A=new u(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties),R=0;for(T=0;T<g.tiles.length;T++){C=g.tiles[T];var O=C.image,F=parseInt(C.id,10),I=g.firstgid+F;A.addImage(I,O),R=Math.max(F,R)}A.maxId=R,d.push(A)}l&&(l.lastgid=g.firstgid-1),l=g}return{tilesets:a,imageCollections:d}};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(h,o,r,a,d,l,f){(r===void 0||r<=0)&&(r=32),(a===void 0||a<=0)&&(a=32),d===void 0&&(d=0),l===void 0&&(l=0),this.name=h,this.firstgid=o|0,this.imageWidth=r|0,this.imageHeight=a|0,this.imageMargin=d|0,this.imageSpacing=l|0,this.properties=f||{},this.images=[],this.total=0},containsImageIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},addImage:function(n,h){return this.images.push({gid:n,image:h}),this.total++,this}});e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(40),u=t(121),n=t(578),h=t(579),o=function(r,a,d){if(a.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+r),null;for(var l=0,f=0,v=0;v<a.layer.length;v++)a.layer[v].width>l&&(l=a.layer[v].width),a.layer[v].height>f&&(f=a.layer[v].height);var g=new u({width:l,height:f,name:r,tileWidth:a.layer[0].tilesize,tileHeight:a.layer[0].tilesize,format:s.WELTMEISTER});return g.layers=n(a,d),g.tilesets=h(a),g};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(120),u=t(85),n=function(h,o){for(var r=[],a=0;a<h.layer.length;a++){for(var d=h.layer[a],l=new s({name:d.name,width:d.width,height:d.height,tileWidth:d.tilesize,tileHeight:d.tilesize,visible:d.visible===1}),f=[],v=[],g=0;g<d.data.length;g++){for(var p=0;p<d.data[g].length;p++){var m=d.data[g][p]-1,y;m>-1?y=new u(l,m,p,g,d.tilesize,d.tilesize):y=o?null:new u(l,-1,p,g,d.tilesize,d.tilesize),f.push(y)}v.push(f),f=[]}l.data=v,r.push(l)}return r};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(122),u=function(n){for(var h=[],o=[],r=0;r<n.layer.length;r++){var a=n.layer[r],d=a.tilesetName;d!==""&&o.indexOf(d)===-1&&(o.push(d),h.push(new s(d,0,a.tilesize,a.tilesize,0,0)))}return h};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(36),n=t(40),h=t(2),o=t(120),r=t(29),a=t(362),d=t(74),l=t(73),f=t(85),v=t(251),g=t(581),p=t(122),m=new s({initialize:function(T,C){this.scene=T,this.tileWidth=C.tileWidth,this.tileHeight=C.tileHeight,this.width=C.width,this.height=C.height,this.orientation=C.orientation,this.renderOrder=C.renderOrder,this.format=C.format,this.version=C.version,this.properties=C.properties,this.widthInPixels=C.widthInPixels,this.heightInPixels=C.heightInPixels,this.imageCollections=C.imageCollections,this.images=C.images,this.layers=C.layers,this.tilesets=C.tilesets,this.objects=C.objects,this.currentLayerIndex=0,this.hexSideLength=C.hexSideLength;var S=this.orientation;this._convert={WorldToTileXY:v.GetWorldToTileXYFunction(S),WorldToTileX:v.GetWorldToTileXFunction(S),WorldToTileY:v.GetWorldToTileYFunction(S),TileToWorldXY:v.GetTileToWorldXYFunction(S),TileToWorldX:v.GetTileToWorldXFunction(S),TileToWorldY:v.GetTileToWorldYFunction(S)}},createBlankDynamicLayer:function(y,T,C,S,E,P,M,A){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(y,T,C,S,E,P,M,A)},createDynamicLayer:function(y,T,C,S){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(y,T,C,S)},createStaticLayer:function(y,T,C,S){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(y,T,C,S)},setRenderOrder:function(y){var T=["right-down","left-down","right-up","left-up"];return typeof y=="number"&&(y=T[y]),T.indexOf(y)>-1&&(this.renderOrder=y),this},addTilesetImage:function(y,T,C,S,E,P,M){if(y===void 0)return null;if(T==null&&(T=y),!this.scene.sys.textures.exists(T))return console.warn("Invalid Tileset Image: "+T),null;var A=this.scene.sys.textures.get(T),R=this.getTilesetIndex(y);if(R===null&&this.format===n.TILED_JSON)return console.warn("No data found for Tileset: "+y),null;var O=this.tilesets[R];return O?(O.setTileSize(C,S),O.setSpacing(E,P),O.setImage(A),O):(C===void 0&&(C=this.tileWidth),S===void 0&&(S=this.tileHeight),E===void 0&&(E=0),P===void 0&&(P=0),M===void 0&&(M=0),O=new p(y,M,C,S,E,P),O.setImage(A),this.tilesets.push(O),O)},copy:function(y,T,C,S,E,P,M,A){return A=this.getLayer(A),A!==null?(v.Copy(y,T,C,S,E,P,M,A),this):null},createBlankLayer:function(y,T,C,S,E,P,M,A){C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=this.width),P===void 0&&(P=this.height),M===void 0&&(M=this.tileWidth),A===void 0&&(A=this.tileHeight);var R=this.getLayerIndex(y);if(R!==null)return console.warn("Invalid Tilemap Layer ID: "+y),null;for(var O=new o({name:y,tileWidth:M,tileHeight:A,width:E,height:P,orientation:this.orientation}),F,I=0;I<P;I++){F=[];for(var G=0;G<E;G++)F.push(new f(O,-1,G,I,M,A,this.tileWidth,this.tileHeight));O.data.push(F)}this.layers.push(O),this.currentLayerIndex=this.layers.length-1;var z=new g(this.scene,this,this.currentLayerIndex,T,C,S);return z.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(z),z},createLayer:function(y,T,C,S){var E=this.getLayerIndex(y);if(E===null)return console.warn("Invalid Tilemap Layer ID: "+y),typeof y=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var P=this.layers[E];if(P.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+y),null;this.currentLayerIndex=E,C===void 0&&(C=P.x),S===void 0&&(S=P.y);var M=new g(this.scene,this,E,T,C,S);return M.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(M),M},createFromObjects:function(y,T){var C=[],S=this.getObjectLayer(y);if(!S)return console.warn("createFromObjects: Invalid objectLayerName given: "+y),C;Array.isArray(T)||(T=[T]);for(var E=S.objects,P=0;P<T.length;P++){for(var M=T[P],A=h(M,"id",null),R=h(M,"gid",null),O=h(M,"name",null),F,I=[],G=0;G<E.length;G++)F=E[G],(A===null&&R===null&&O===null||A!==null&&F.id===A||R!==null&&F.gid===R||O!==null&&F.name===O)&&I.push(F);for(var z=h(M,"classType",l),U=h(M,"scene",this.scene),X=h(M,"container",null),b=h(M,"key",null),B=h(M,"frame",null),L=0;L<I.length;L++){F=I[L];var D=new z(U);D.setName(F.name),D.setPosition(F.x,F.y),D.setTexture(b,B),F.width&&(D.displayWidth=F.width),F.height&&(D.displayHeight=F.height);var w={x:D.originX*F.width,y:(D.originY-1)*F.height};if(F.rotation){var N=u(F.rotation);a(w,N),D.rotation=N}if(D.x+=w.x,D.y+=w.y,(F.flippedHorizontal!==void 0||F.flippedVertical!==void 0)&&D.setFlip(F.flippedHorizontal,F.flippedVertical),F.visible||(D.visible=!1),Array.isArray(F.properties))F.properties.forEach(function(Y){var W=Y.name;D[W]!==void 0?D[W]=Y.value:D.setData(W,Y.value)});else for(var V in F.properties)D[V]!==void 0?D[V]=F.properties[V]:D.setData(V,F.properties[V]);X?X.add(D):U.add.existing(D),C.push(D)}}return C},createFromTiles:function(y,T,C,S,E,P){return P=this.getLayer(P),P===null?null:v.CreateFromTiles(y,T,C,S,E,P)},fill:function(y,T,C,S,E,P,M){return P===void 0&&(P=!0),M=this.getLayer(M),M===null?null:(v.Fill(y,T,C,S,E,P,M),this)},filterObjects:function(y,T,C){if(typeof y=="string"){var S=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+S),null}return y.objects.filter(T,C)},filterTiles:function(y,T,C,S,E,P,M,A){return A=this.getLayer(A),A===null?null:v.FilterTiles(y,T,C,S,E,P,M,A)},findByIndex:function(y,T,C,S){return S=this.getLayer(S),S===null?null:v.FindByIndex(y,T,C,S)},findObject:function(y,T,C){if(typeof y=="string"){var S=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+S),null}return y.objects.find(T,C)||null},findTile:function(y,T,C,S,E,P,M,A){return A=this.getLayer(A),A===null?null:v.FindTile(y,T,C,S,E,P,M,A)},forEachTile:function(y,T,C,S,E,P,M,A){return A=this.getLayer(A),A===null?null:(v.ForEachTile(y,T,C,S,E,P,M,A),this)},getImageIndex:function(y){return this.getIndex(this.images,y)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(y){return y.name})},getIndex:function(y,T){for(var C=0;C<y.length;C++)if(y[C].name===T)return C;return null},getLayer:function(y){var T=this.getLayerIndex(y);return T!==null?this.layers[T]:null},getObjectLayer:function(y){var T=this.getIndex(this.objects,y);return T!==null?this.objects[T]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(y){return y.name})},getLayerIndex:function(y){return y===void 0?this.currentLayerIndex:typeof y=="string"?this.getLayerIndexByName(y):typeof y=="number"&&y<this.layers.length?y:y instanceof g?y.layerIndex:null},getLayerIndexByName:function(y){return this.getIndex(this.layers,y)},getTileAt:function(y,T,C,S){return S=this.getLayer(S),S===null?null:v.GetTileAt(y,T,C,S)},getTileAtWorldXY:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:v.GetTileAtWorldXY(y,T,C,S,E)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(y){return y.name})},getTilesWithin:function(y,T,C,S,E,P){return P=this.getLayer(P),P===null?null:v.GetTilesWithin(y,T,C,S,E,P)},getTilesWithinShape:function(y,T,C,S){return S=this.getLayer(S),S===null?null:v.GetTilesWithinShape(y,T,C,S)},getTilesWithinWorldXY:function(y,T,C,S,E,P,M){return M=this.getLayer(M),M===null?null:v.GetTilesWithinWorldXY(y,T,C,S,E,P,M)},getTileset:function(y){var T=this.getIndex(this.tilesets,y);return T!==null?this.tilesets[T]:null},getTilesetIndex:function(y){return this.getIndex(this.tilesets,y)},hasTileAt:function(y,T,C){return C=this.getLayer(C),C===null?null:v.HasTileAt(y,T,C)},hasTileAtWorldXY:function(y,T,C,S){return S=this.getLayer(S),S===null?null:v.HasTileAtWorldXY(y,T,C,S)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(y){this.setLayer(y)}},putTileAt:function(y,T,C,S,E){return S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:v.PutTileAt(y,T,C,S,E)},putTileAtWorldXY:function(y,T,C,S,E,P){return S===void 0&&(S=!0),P=this.getLayer(P),P===null?null:v.PutTileAtWorldXY(y,T,C,S,E,P)},putTilesAt:function(y,T,C,S,E){return S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(v.PutTilesAt(y,T,C,S,E),this)},randomize:function(y,T,C,S,E,P){return P=this.getLayer(P),P===null?null:(v.Randomize(y,T,C,S,E,P),this)},calculateFacesAt:function(y,T,C){return C=this.getLayer(C),C===null?null:(v.CalculateFacesAt(y,T,C),this)},calculateFacesWithin:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:(v.CalculateFacesWithin(y,T,C,S,E),this)},removeLayer:function(y){var T=this.getLayerIndex(y);if(T!==null){d(this.layers,T);for(var C=T;C<this.layers.length;C++)this.layers[C].tilemapLayer&&this.layers[C].tilemapLayer.layerIndex--;return this.currentLayerIndex===T&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(y){var T=this.getLayerIndex(y);return T!==null?(y=this.layers[T],y.destroy(),d(this.layers,T),this.currentLayerIndex===T&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var y=this.layers,T=0;T<y.length;T++)y[T].tilemapLayer&&y[T].tilemapLayer.destroy(!1);return y.length=0,this.currentLayerIndex=0,this},removeTile:function(y,T,C){T===void 0&&(T=-1),C===void 0&&(C=!0);var S=[];Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++){var P=y[E];S.push(this.removeTileAt(P.x,P.y,!0,C,P.tilemapLayer)),T>-1&&this.putTileAt(T,P.x,P.y,C,P.tilemapLayer)}return S},removeTileAt:function(y,T,C,S,E){return C===void 0&&(C=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:v.RemoveTileAt(y,T,C,S,E)},removeTileAtWorldXY:function(y,T,C,S,E,P){return C===void 0&&(C=!0),S===void 0&&(S=!0),P=this.getLayer(P),P===null?null:v.RemoveTileAtWorldXY(y,T,C,S,E,P)},renderDebug:function(y,T,C){return C=this.getLayer(C),C===null?null:(this.orientation===r.ORTHOGONAL&&v.RenderDebug(y,T,C),this)},renderDebugFull:function(y,T){for(var C=this.layers,S=0;S<C.length;S++)v.RenderDebug(y,T,C[S]);return this},replaceByIndex:function(y,T,C,S,E,P,M){return M=this.getLayer(M),M===null?null:(v.ReplaceByIndex(y,T,C,S,E,P,M),this)},setCollision:function(y,T,C,S,E){return T===void 0&&(T=!0),C===void 0&&(C=!0),E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:(v.SetCollision(y,T,C,S,E),this)},setCollisionBetween:function(y,T,C,S,E){return C===void 0&&(C=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(v.SetCollisionBetween(y,T,C,S,E),this)},setCollisionByProperty:function(y,T,C,S){return T===void 0&&(T=!0),C===void 0&&(C=!0),S=this.getLayer(S),S===null?null:(v.SetCollisionByProperty(y,T,C,S),this)},setCollisionByExclusion:function(y,T,C,S){return T===void 0&&(T=!0),C===void 0&&(C=!0),S=this.getLayer(S),S===null?null:(v.SetCollisionByExclusion(y,T,C,S),this)},setCollisionFromCollisionGroup:function(y,T,C){return y===void 0&&(y=!0),T===void 0&&(T=!0),C=this.getLayer(C),C===null?null:(v.SetCollisionFromCollisionGroup(y,T,C),this)},setTileIndexCallback:function(y,T,C,S){return S=this.getLayer(S),S===null?null:(v.SetTileIndexCallback(y,T,C,S),this)},setTileLocationCallback:function(y,T,C,S,E,P,M){return M=this.getLayer(M),M===null?null:(v.SetTileLocationCallback(y,T,C,S,E,P,M),this)},setLayer:function(y){var T=this.getLayerIndex(y);return T!==null&&(this.currentLayerIndex=T),this},setBaseTileSize:function(y,T){this.tileWidth=y,this.tileHeight=T,this.widthInPixels=this.width*y,this.heightInPixels=this.height*T;for(var C=0;C<this.layers.length;C++){this.layers[C].baseTileWidth=y,this.layers[C].baseTileHeight=T;for(var S=this.layers[C].data,E=this.layers[C].width,P=this.layers[C].height,M=0;M<P;M++)for(var A=0;A<E;A++){var R=S[M][A];R!==null&&R.setSize(void 0,void 0,y,T)}}return this},setLayerTileSize:function(y,T,C){if(C=this.getLayer(C),C===null)return this;C.tileWidth=y,C.tileHeight=T;for(var S=C.data,E=C.width,P=C.height,M=0;M<P;M++)for(var A=0;A<E;A++){var R=S[M][A];R!==null&&R.setSize(y,T)}return this},shuffle:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:(v.Shuffle(y,T,C,S,E),this)},swapByIndex:function(y,T,C,S,E,P,M){return M=this.getLayer(M),M===null?null:(v.SwapByIndex(y,T,C,S,E,P,M),this)},tileToWorldX:function(y,T,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldX(y,T,C)},tileToWorldY:function(y,T,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldY(y,T,C)},tileToWorldXY:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:this._convert.TileToWorldXY(y,T,C,S,E)},weightedRandomize:function(y,T,C,S,E,P){return P=this.getLayer(P),P===null?null:(v.WeightedRandomize(T,C,S,E,y,P),this)},worldToTileX:function(y,T,C,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileX(y,T,C,S)},worldToTileY:function(y,T,C,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileY(y,T,C,S)},worldToTileXY:function(y,T,C,S,E,P){return P=this.getLayer(P),P===null?null:this._convert.WorldToTileXY(y,T,C,S,E,P)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});e.exports=m},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(11),n=t(15),h=t(251),o=t(1456),r=new s({Extends:n,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Depth,u.Flip,u.GetBounds,u.Origin,u.Pipeline,u.Transform,u.Visible,u.ScrollFactor,o],initialize:function(d,l,f,v,g,p){n.call(this,d,"TilemapLayer"),this.isTilemap=!0,this.tilemap=l,this.layerIndex=f,this.layer=l.layers[f],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=h.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(v),this.setAlpha(this.layer.alpha),this.setPosition(g,p),this.setOrigin(),this.setSize(l.tileWidth*this.layer.width,l.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(a){var d=[],l=[],f=this.tilemap;Array.isArray(a)||(a=[a]);for(var v=0;v<a.length;v++){var g=a[v];if(typeof g=="string"&&(g=f.getTileset(g)),g){l.push(g);for(var p=g.firstgid,m=0;m<g.total;m++)d[p+m]=g}}this.gidMap=d,this.tileset=l},setRenderOrder:function(a){var d=["right-down","left-down","right-up","left-up"];return typeof a=="string"&&(a=d.indexOf(a)),a>=0&&a<4&&(this._renderOrder=a),this},calculateFacesAt:function(a,d){return h.CalculateFacesAt(a,d,this.layer),this},calculateFacesWithin:function(a,d,l,f){return h.CalculateFacesWithin(a,d,l,f,this.layer),this},createFromTiles:function(a,d,l,f,v){return h.CreateFromTiles(a,d,l,f,v,this.layer)},cull:function(a){return this.cullCallback(this.layer,a,this.culledTiles,this._renderOrder)},copy:function(a,d,l,f,v,g,p){return h.Copy(a,d,l,f,v,g,p,this.layer),this},fill:function(a,d,l,f,v,g){return h.Fill(a,d,l,f,v,g,this.layer),this},filterTiles:function(a,d,l,f,v,g,p){return h.FilterTiles(a,d,l,f,v,g,p,this.layer)},findByIndex:function(a,d,l){return h.FindByIndex(a,d,l,this.layer)},findTile:function(a,d,l,f,v,g,p){return h.FindTile(a,d,l,f,v,g,p,this.layer)},forEachTile:function(a,d,l,f,v,g,p){return h.ForEachTile(a,d,l,f,v,g,p,this.layer),this},getTileAt:function(a,d,l){return h.GetTileAt(a,d,l,this.layer)},getTileAtWorldXY:function(a,d,l,f){return h.GetTileAtWorldXY(a,d,l,f,this.layer)},getTilesWithin:function(a,d,l,f,v){return h.GetTilesWithin(a,d,l,f,v,this.layer)},getTilesWithinShape:function(a,d,l){return h.GetTilesWithinShape(a,d,l,this.layer)},getTilesWithinWorldXY:function(a,d,l,f,v,g){return h.GetTilesWithinWorldXY(a,d,l,f,v,g,this.layer)},hasTileAt:function(a,d){return h.HasTileAt(a,d,this.layer)},hasTileAtWorldXY:function(a,d,l){return h.HasTileAtWorldXY(a,d,l,this.layer)},putTileAt:function(a,d,l,f){return h.PutTileAt(a,d,l,f,this.layer)},putTileAtWorldXY:function(a,d,l,f,v){return h.PutTileAtWorldXY(a,d,l,f,v,this.layer)},putTilesAt:function(a,d,l,f){return h.PutTilesAt(a,d,l,f,this.layer),this},randomize:function(a,d,l,f,v){return h.Randomize(a,d,l,f,v,this.layer),this},removeTileAt:function(a,d,l,f){return h.RemoveTileAt(a,d,l,f,this.layer)},removeTileAtWorldXY:function(a,d,l,f,v){return h.RemoveTileAtWorldXY(a,d,l,f,v,this.layer)},renderDebug:function(a,d){return h.RenderDebug(a,d,this.layer),this},replaceByIndex:function(a,d,l,f,v,g){return h.ReplaceByIndex(a,d,l,f,v,g,this.layer),this},setSkipCull:function(a){return a===void 0&&(a=!0),this.skipCull=a,this},setCullPadding:function(a,d){return a===void 0&&(a=1),d===void 0&&(d=1),this.cullPaddingX=a,this.cullPaddingY=d,this},setCollision:function(a,d,l,f){return h.SetCollision(a,d,l,this.layer,f),this},setCollisionBetween:function(a,d,l,f){return h.SetCollisionBetween(a,d,l,f,this.layer),this},setCollisionByProperty:function(a,d,l){return h.SetCollisionByProperty(a,d,l,this.layer),this},setCollisionByExclusion:function(a,d,l){return h.SetCollisionByExclusion(a,d,l,this.layer),this},setCollisionFromCollisionGroup:function(a,d){return h.SetCollisionFromCollisionGroup(a,d,this.layer),this},setTileIndexCallback:function(a,d,l){return h.SetTileIndexCallback(a,d,l,this.layer),this},setTileLocationCallback:function(a,d,l,f,v,g){return h.SetTileLocationCallback(a,d,l,f,v,g,this.layer),this},shuffle:function(a,d,l,f){return h.Shuffle(a,d,l,f,this.layer),this},swapByIndex:function(a,d,l,f,v,g){return h.SwapByIndex(a,d,l,f,v,g,this.layer),this},tileToWorldX:function(a,d){return this.tilemap.tileToWorldX(a,d,this)},tileToWorldY:function(a,d){return this.tilemap.tileToWorldY(a,d,this)},tileToWorldXY:function(a,d,l,f){return this.tilemap.tileToWorldXY(a,d,l,f,this)},weightedRandomize:function(a,d,l,f,v){return h.WeightedRandomize(d,l,f,v,a,this.layer),this},worldToTileX:function(a,d,l){return this.tilemap.worldToTileX(a,d,l,this)},worldToTileY:function(a,d,l){return this.tilemap.worldToTileY(a,d,l,this)},worldToTileXY:function(a,d,l,f,v){return this.tilemap.worldToTileXY(a,d,l,f,v,this)},destroy:function(a){a===void 0&&(a=!0),!!this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),a&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],n.prototype.destroy.call(this))}});e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(2),n=new s({initialize:function(o){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(o)},reset:function(h){return this.delay=u(h,"delay",0),this.repeat=u(h,"repeat",0),this.loop=u(h,"loop",!1),this.callback=u(h,"callback",void 0),this.callbackScope=u(h,"callbackScope",this.callback),this.args=u(h,"args",[]),this.timeScale=u(h,"timeScale",1),this.startAt=u(h,"startAt",0),this.paused=u(h,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var h=this.delay+this.delay*this.repeat,o=this.elapsed+this.delay*(this.repeat-this.repeatCount);return o/h}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(h){h===void 0&&(h=!1),this.elapsed=this.delay,this.hasDispatched=!h,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1465),u=function(n){var h,o=[];if(n.hasOwnProperty("props"))for(h in n.props)h.substr(0,1)!=="_"&&o.push({key:h,value:n.props[h]});else for(h in n)s.indexOf(h)===-1&&h.substr(0,1)!=="_"&&o.push({key:h,value:n[h]});return o};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u=function(n){var h=s(n,"tweens",null);return h===null?[]:(typeof h=="function"&&(h=h.call()),Array.isArray(h)||(h=[h]),h)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(265),u=t(13),n=t(99),h=t(80),o=t(162),r=t(6),a=t(264),d=t(266),l=t(268),f=function(v,g,p){p===void 0&&(p=s);var m=r(g,"from",0),y=r(g,"to",1),T=[{value:m}],C=o(g,"delay",p.delay),S=o(g,"duration",p.duration),E=r(g,"easeParams",p.easeParams),P=h(r(g,"ease",p.ease),E),M=o(g,"hold",p.hold),A=o(g,"repeat",p.repeat),R=o(g,"repeatDelay",p.repeatDelay),O=n(g,"yoyo",p.yoyo),F=[],I=a("value",y),G=l(T[0],0,"value",I.getEnd,I.getStart,I.getActive,P,C,S,O,M,A,R,!1,!1);G.start=m,G.current=m,G.to=y,F.push(G);var z=new d(v,F,T);z.offset=u(g,"offset",null),z.completeDelay=u(g,"completeDelay",0),z.loop=Math.round(u(g,"loop",0)),z.loopDelay=Math.round(u(g,"loopDelay",0)),z.paused=n(g,"paused",!1),z.useFrames=n(g,"useFrames",!1);for(var U=r(g,"callbackScope",z),X=[z,null],b=d.TYPES,B=0;B<b.length;B++){var L=b[B],D=r(g,L,!1);if(D){var w=r(g,L+"Scope",U),N=r(g,L+"Params",[]);z.setCallback(L,D,X.concat(N),w)}}return z};e.exports=f},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(80),u=t(6),n=t(14),h=function(o,r){r===void 0&&(r={});var a,d=u(r,"start",0),l=u(r,"ease",null),f=u(r,"grid",null),v=u(r,"from",0),g=v==="first",p=v==="center",m=v==="last",y=typeof v=="number",T=Array.isArray(o),C=parseFloat(T?o[0]:o),S=T?parseFloat(o[1]):0,E=Math.max(C,S);if(T&&(d+=C),f){var P=f[0],M=f[1],A=0,R=0,O=0,F=0,I=[];m?(A=P-1,R=M-1):y?(A=v%P,R=Math.floor(v/P)):p&&(A=(P-1)/2,R=(M-1)/2);for(var G=n.MIN_SAFE_INTEGER,z=0;z<M;z++){I[z]=[];for(var U=0;U<P;U++){O=A-U,F=R-z;var X=Math.sqrt(O*O+F*F);X>G&&(G=X),I[z][U]=X}}}var b=l?s(l):null;return f?a=function(B,L,D,w){var N=0,V=w%P,Y=Math.floor(w/P);V>=0&&V<P&&Y>=0&&Y<M&&(N=I[Y][V]);var W;if(T){var H=S-C;b?W=N/G*H*b(N/G):W=N/G*H}else b?W=N*C*b(N/G):W=N*C;return W+d}:a=function(B,L,D,w,N){N--;var V;g?V=w:p?V=Math.abs(N/2-w):m?V=N-w:y&&(V=Math.abs(v-w));var Y;if(T){var W;p?W=(S-C)/N*(V*2):W=(S-C)/N*V,b?Y=W*b(V/N):Y=W}else b?Y=N*E*b(V/N):Y=V*C;return Y+d},a};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77),u=t(265),n=t(13),h=t(99),o=t(80),r=t(162),a=t(263),d=t(584),l=t(6),f=t(588),v=t(163),g=function(p,m){var y=new f(p);y.completeDelay=n(m,"completeDelay",0),y.loop=Math.round(n(m,"loop",0)),y.loopDelay=Math.round(n(m,"loopDelay",0)),y.paused=h(m,"paused",!1),y.useFrames=h(m,"useFrames",!1);var T=l(m,"callbackScope",y),C=[y],S=l(m,"onStart",!1);if(S){var E=l(m,"onStartScope",T),P=l(m,"onStartParams",[]);y.setCallback("onStart",S,C.concat(P),E)}var M=l(m,"onUpdate",!1);if(M){var A=l(m,"onUpdateScope",T),R=l(m,"onUpdateParams",[]);y.setCallback("onUpdate",M,C.concat(R),A)}var O=l(m,"onLoop",!1);if(O){var F=l(m,"onLoopScope",T),I=l(m,"onLoopParams",[]);y.setCallback("onLoop",O,C.concat(I),F)}var G=l(m,"onYoyo",!1);if(G){var z=l(m,"onYoyoScope",T),U=l(m,"onYoyoParams",[]);y.setCallback("onYoyo",G,C.concat(null,U),z)}var X=l(m,"onComplete",!1);if(X){var b=l(m,"onCompleteScope",T),B=l(m,"onCompleteParams",[]);y.setCallback("onComplete",X,C.concat(B),b)}var L=d(m);if(L.length===0)return y.paused=!0,y;var D=s(u);D.targets=a(m);var w=n(m,"totalDuration",0);w>0?D.duration=Math.floor(w/L.length):D.duration=r(m,"duration",D.duration),D.delay=r(m,"delay",D.delay),D.easeParams=l(m,"easeParams",D.easeParams),D.ease=o(l(m,"ease",D.ease),D.easeParams),D.hold=r(m,"hold",D.hold),D.repeat=r(m,"repeat",D.repeat),D.repeatDelay=r(m,"repeatDelay",D.repeatDelay),D.yoyo=h(m,"yoyo",D.yoyo),D.flipX=h(m,"flipX",D.flipX),D.flipY=h(m,"flipY",D.flipY);for(var N=0;N<L.length;N++)y.queue(v(y,L[N],D));return y};e.exports=g},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(267),h=t(163),o=t(100),r=new s({Extends:u,initialize:function(d){u.call(this),this.manager=d,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=o.PENDING_ADD,this._pausedState=o.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(a,d){this.emit(a,this),d&&d.func.apply(d.scope,d.params)},setTimeScale:function(a){return this.timeScale=a,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===o.ACTIVE},add:function(a){return this.queue(h(this,a))},queue:function(a){return this.isPlaying()||(a.parent=this,a.parentIsTimeline=!0,this.data.push(a),this.totalData=this.data.length),this},hasOffset:function(a){return a.offset!==null},isOffsetAbsolute:function(a){return typeof a=="number"},isOffsetRelative:function(a){var d=typeof a;if(d==="string"){var l=a[0];if(l==="-"||l==="+")return!0}return!1},getRelativeOffset:function(a,d){var l=a[0],f=parseFloat(a.substr(2)),v=d;switch(l){case"+":v+=f;break;case"-":v-=f;break}return Math.max(0,v)},calcDuration:function(){for(var a=0,d=0,l=0,f=0;f<this.totalData;f++){var v=this.data[f];v.init(),this.hasOffset(v)?this.isOffsetAbsolute(v.offset)?(v.calculatedOffset=v.offset,v.offset===0&&(l=0)):this.isOffsetRelative(v.offset)&&(v.calculatedOffset=this.getRelativeOffset(v.offset,a)):v.calculatedOffset=l,a=v.totalDuration+v.calculatedOffset,d+=v.totalDuration,l+=v.totalDuration}this.duration=d,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=o.PAUSED,!1):!0},resetTweens:function(a){for(var d=0;d<this.totalData;d++){var l=this.data[d];l.play(a)}},setCallback:function(a,d,l,f){return r.TYPES.indexOf(a)!==-1&&(this.callbacks[a]={func:d,scope:f,params:l}),this},makeActive:function(a){return this.manager.makeActive(a)},play:function(){if(this.state!==o.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=o.ACTIVE;this.dispatchTimelineEvent(n.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=o.LOOP_DELAY):(this.state=o.ACTIVE,this.dispatchTimelineEvent(n.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=o.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=o.PENDING_REMOVE,this.dispatchTimelineEvent(n.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(a,d){if(this.state!==o.PAUSED){switch(this.useFrames&&(d=1*this.manager.timeScale),d*=this.timeScale,this.elapsed+=d,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=d,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case o.ACTIVE:for(var l=this.totalData,f=0;f<this.totalData;f++){var v=this.data[f];v.update(a,d)&&l--}this.dispatchTimelineEvent(n.TIMELINE_UPDATE,this.callbacks.onUpdate),l===0&&this.nextState();break;case o.LOOP_DELAY:this.countdown-=d,this.countdown<=0&&(this.state=o.ACTIVE,this.dispatchTimelineEvent(n.TIMELINE_LOOP,this.callbacks.onLoop));break;case o.COMPLETE_DELAY:this.countdown-=d,this.countdown<=0&&(this.state=o.PENDING_REMOVE,this.dispatchTimelineEvent(n.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===o.PENDING_REMOVE}},stop:function(){this.state=o.PENDING_REMOVE},pause:function(){if(this.state!==o.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=o.PAUSED,this.emit(n.TIMELINE_PAUSE,this),this},resume:function(){return this.state===o.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(n.TIMELINE_RESUME,this)),this},hasTarget:function(a){for(var d=0;d<this.data.length;d++)if(this.data[d].hasTarget(a))return!0;return!1},destroy:function(){for(var a=0;a<this.data.length;a++)this.data[a].stop()}});r.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],e.exports=r},function(e,c,t){/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(41),n=t(32),h=t(2),o=t(64),r={parseBody:function(a,d,l,f){f===void 0&&(f={});for(var v=h(l,"fixtures",[]),g=[],p=0;p<v.length;p++)for(var m=this.parseFixture(v[p]),y=0;y<m.length;y++)g.push(m[y]);var T=n.clone(l,!0);n.extend(T,f,!0),delete T.fixtures,delete T.type;var C=u.create(T);return u.setParts(C,g),u.setPosition(C,{x:a,y:d}),C},parseFixture:function(a){var d=n.extend({},!1,a);delete d.circle,delete d.vertices;var l;if(a.circle){var f=h(a.circle,"x"),v=h(a.circle,"y"),g=h(a.circle,"radius");l=[s.circle(f,v,g,d)]}else a.vertices&&(l=this.parseVertices(a.vertices,d));return l},parseVertices:function(a,d){d===void 0&&(d={});for(var l=[],f=0;f<a.length;f++)o.clockwiseSort(a[f]),l.push(u.create(n.extend({position:o.centre(a[f]),vertices:a[f]},d)));return s.flagCoincidentParts(l)}};e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(41),n={parseBody:function(h,o,r,a){a===void 0&&(a={});var d,l=r.vertices;if(l.length===1)a.vertices=l[0],d=u.create(a),s.flagCoincidentParts(d.parts);else{for(var f=[],v=0;v<l.length;v++){var g=u.create({vertices:l[v]});f.push(g)}s.flagCoincidentParts(f),a.parts=f,d=u.create(a)}return d.label=r.label,u.setPosition(d,{x:h,y:o}),d}};e.exports=n},function(e,c,t){var s={};e.exports=s;var u=t(118),n=t(128),h=t(32),o=t(41),r=t(86);(function(){s.stack=function(a,d,l,f,v,g,p){for(var m=u.create({label:"Stack"}),y=a,T=d,C,S=0,E=0;E<f;E++){for(var P=0,M=0;M<l;M++){var A=p(y,T,M,E,C,S);if(A){var R=A.bounds.max.y-A.bounds.min.y,O=A.bounds.max.x-A.bounds.min.x;R>P&&(P=R),o.translate(A,{x:O*.5,y:R*.5}),y=A.bounds.max.x+v,u.addBody(m,A),C=A,S+=1}else y+=v}T+=P+g,y=a}return m},s.chain=function(a,d,l,f,v,g){for(var p=a.bodies,m=1;m<p.length;m++){var y=p[m-1],T=p[m],C=y.bounds.max.y-y.bounds.min.y,S=y.bounds.max.x-y.bounds.min.x,E=T.bounds.max.y-T.bounds.min.y,P=T.bounds.max.x-T.bounds.min.x,M={bodyA:y,pointA:{x:S*d,y:C*l},bodyB:T,pointB:{x:P*f,y:E*v}},A=h.extend(M,g);u.addConstraint(a,n.create(A))}return a.label+=" Chain",a},s.mesh=function(a,d,l,f,v){var g=a.bodies,p,m,y,T,C;for(p=0;p<l;p++){for(m=1;m<d;m++)y=g[m-1+p*d],T=g[m+p*d],u.addConstraint(a,n.create(h.extend({bodyA:y,bodyB:T},v)));if(p>0)for(m=0;m<d;m++)y=g[m+(p-1)*d],T=g[m+p*d],u.addConstraint(a,n.create(h.extend({bodyA:y,bodyB:T},v))),f&&m>0&&(C=g[m-1+(p-1)*d],u.addConstraint(a,n.create(h.extend({bodyA:C,bodyB:T},v)))),f&&m<d-1&&(C=g[m+1+(p-1)*d],u.addConstraint(a,n.create(h.extend({bodyA:C,bodyB:T},v))))}return a.label+=" Mesh",a},s.pyramid=function(a,d,l,f,v,g,p){return s.stack(a,d,l,f,v,g,function(m,y,T,C,S,E){var P=Math.min(f,Math.ceil(l/2)),M=S?S.bounds.max.x-S.bounds.min.x:0;if(!(C>P)){C=P-C;var A=C,R=l-1-C;if(!(T<A||T>R)){E===1&&o.translate(S,{x:(T+(l%2==1?1:-1))*M,y:0});var O=S?T*M:0;return p(a+O+T*v,y,T,C,S,E)}}})},s.newtonsCradle=function(a,d,l,f,v){for(var g=u.create({label:"Newtons Cradle"}),p=0;p<l;p++){var m=1.9,y=r.circle(a+p*(f*m),d+v,f,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),T=n.create({pointA:{x:a+p*(f*m),y:d},bodyB:y});u.addBody(g,y),u.addConstraint(g,T)}return g},s.car=function(a,d,l,f,v){var g=o.nextGroup(!0),p=20,m=-l*.5+p,y=l*.5-p,T=0,C=u.create({label:"Car"}),S=r.rectangle(a,d,l,f,{collisionFilter:{group:g},chamfer:{radius:f*.5},density:2e-4}),E=r.circle(a+m,d+T,v,{collisionFilter:{group:g},friction:.8}),P=r.circle(a+y,d+T,v,{collisionFilter:{group:g},friction:.8}),M=n.create({bodyB:S,pointB:{x:m,y:T},bodyA:E,stiffness:1,length:0}),A=n.create({bodyB:S,pointB:{x:y,y:T},bodyA:P,stiffness:1,length:0});return u.addBody(C,S),u.addBody(C,E),u.addBody(C,P),u.addConstraint(C,M),u.addConstraint(C,A),C},s.softBody=function(a,d,l,f,v,g,p,m,y,T){y=h.extend({inertia:1/0},y),T=h.extend({stiffness:.2,render:{type:"line",anchors:!1}},T);var C=s.stack(a,d,l,f,v,g,function(S,E){return r.circle(S,E,m,y)});return s.mesh(C,l,f,p,T),C.label="Soft Body",C}})()},function(e,c,t){var s={};e.exports=s,t(84);var u=t(32);(function(){s.pathToVertices=function(n,h){typeof window!="undefined"&&!("SVGPathSeg"in window)&&u.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var o,r,a,d,l,f,v,g,p,m,y=[],T,C,S=0,E=0,P=0;h=h||15;var M=function(R,O,F){var I=F%2==1&&F>1;if(!p||R!=p.x||O!=p.y){p&&I?(T=p.x,C=p.y):(T=0,C=0);var G={x:T+R,y:C+O};(I||!p)&&(p=G),y.push(G),E=T+R,P=C+O}},A=function(R){var O=R.pathSegTypeAsLetter.toUpperCase();if(O!=="Z"){switch(O){case"M":case"L":case"T":case"C":case"S":case"Q":E=R.x,P=R.y;break;case"H":E=R.x;break;case"V":P=R.y;break}M(E,P,R.pathSegType)}};for(s._svgPathToAbsolute(n),a=n.getTotalLength(),f=[],o=0;o<n.pathSegList.numberOfItems;o+=1)f.push(n.pathSegList.getItem(o));for(v=f.concat();S<a;){if(m=n.getPathSegAtLength(S),l=f[m],l!=g){for(;v.length&&v[0]!=l;)A(v.shift());g=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":d=n.getPointAtLength(S),M(d.x,d.y,0);break}S+=h}for(o=0,r=v.length;o<r;++o)A(v[o]);return y},s._svgPathToAbsolute=function(n){for(var h,o,r,a,d,l,f=n.pathSegList,v=0,g=0,p=f.numberOfItems,m=0;m<p;++m){var y=f.getItem(m),T=y.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(T))"x"in y&&(v=y.x),"y"in y&&(g=y.y);else switch("x1"in y&&(r=v+y.x1),"x2"in y&&(d=v+y.x2),"y1"in y&&(a=g+y.y1),"y2"in y&&(l=g+y.y2),"x"in y&&(v+=y.x),"y"in y&&(g+=y.y),T){case"m":f.replaceItem(n.createSVGPathSegMovetoAbs(v,g),m);break;case"l":f.replaceItem(n.createSVGPathSegLinetoAbs(v,g),m);break;case"h":f.replaceItem(n.createSVGPathSegLinetoHorizontalAbs(v),m);break;case"v":f.replaceItem(n.createSVGPathSegLinetoVerticalAbs(g),m);break;case"c":f.replaceItem(n.createSVGPathSegCurvetoCubicAbs(v,g,r,a,d,l),m);break;case"s":f.replaceItem(n.createSVGPathSegCurvetoCubicSmoothAbs(v,g,d,l),m);break;case"q":f.replaceItem(n.createSVGPathSegCurvetoQuadraticAbs(v,g,r,a),m);break;case"t":f.replaceItem(n.createSVGPathSegCurvetoQuadraticSmoothAbs(v,g),m);break;case"a":f.replaceItem(n.createSVGPathSegArcAbs(v,g,y.r1,y.r2,y.angle,y.largeArcFlag,y.sweepFlag),m);break;case"z":case"Z":v=h,g=o;break}(T=="M"||T=="m")&&(h=v,o=g)}}})()},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(41),n=t(0),h=t(249),o=t(9),r=t(2),a=t(126),d=t(64),l=new n({Extends:o,Mixins:[h.Bounce,h.Collision,h.Friction,h.Gravity,h.Mass,h.Sensor,h.Sleep,h.Static],initialize:function(v,g,p){o.call(this),this.tile=g,this.world=v,g.physics.matterBody&&g.physics.matterBody.destroy(),g.physics.matterBody=this;var m=r(p,"body",null),y=r(p,"addToWorld",!0);if(m)this.setBody(m,y);else{var T=g.getCollisionGroup(),C=r(T,"objects",[]);C.length>0?this.setFromTileCollision(p):this.setFromTileRectangle(p)}},setFromTileRectangle:function(f){f===void 0&&(f={}),a(f,"isStatic")||(f.isStatic=!0),a(f,"addToWorld")||(f.addToWorld=!0);var v=this.tile.getBounds(),g=v.x+v.width/2,p=v.y+v.height/2,m=s.rectangle(g,p,v.width,v.height,f);return this.setBody(m,f.addToWorld),this},setFromTileCollision:function(f){f===void 0&&(f={}),a(f,"isStatic")||(f.isStatic=!0),a(f,"addToWorld")||(f.addToWorld=!0);for(var v=this.tile.tilemapLayer.scaleX,g=this.tile.tilemapLayer.scaleY,p=this.tile.getLeft(),m=this.tile.getTop(),y=this.tile.getCollisionGroup(),T=r(y,"objects",[]),C=[],S=0;S<T.length;S++){var E=T[S],P=p+E.x*v,M=m+E.y*g,A=E.width*v,R=E.height*g,O=null;if(E.rectangle)O=s.rectangle(P+A/2,M+R/2,A,R,f);else if(E.ellipse)O=s.circle(P+A/2,M+R/2,A/2,f);else if(E.polygon||E.polyline){var F=E.polygon?E.polygon:E.polyline,I=F.map(function(U){return{x:U.x*v,y:U.y*g}}),G=d.create(I),z=d.centre(G);P+=z.x,M+=z.y,O=s.fromVertices(P,M,G,f)}O&&C.push(O)}return C.length===1?this.setBody(C[0],f.addToWorld):C.length>1&&(f.parts=C,this.setBody(u.create(f),f.addToWorld)),this},setBody:function(f,v){return v===void 0&&(v=!0),this.body&&this.removeBody(),this.body=f,this.body.gameObject=this,v&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});e.exports=l},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1399);s.Body=t(41),s.Composite=t(118),s.World=t(596),s.Detector=t(273),s.Grid=t(597),s.Pairs=t(598),s.Pair=t(250),s.Query=t(1400),s.Resolver=t(599),s.SAT=t(274),s.Constraint=t(128),s.Common=t(32),s.Engine=t(1401),s.Events=t(166),s.Sleeping=t(165),s.Plugin=t(595),s.Bodies=t(86),s.Composites=t(591),s.Axes=t(271),s.Bounds=t(84),s.Svg=t(592),s.Vector=t(83),s.Vertices=t(64),s.World.add=s.Composite.add,s.World.remove=s.Composite.remove,s.World.addComposite=s.Composite.addComposite,s.World.addBody=s.Composite.addBody,s.World.addConstraint=s.Composite.addConstraint,s.World.clear=s.Composite.clear,e.exports=s},function(e,c,t){var s={};e.exports=s;var u=t(32);(function(){s._registry={},s.register=function(n){if(s.isPlugin(n)||u.warn("Plugin.register:",s.toString(n),"does not implement all required fields."),n.name in s._registry){var h=s._registry[n.name],o=s.versionParse(n.version).number,r=s.versionParse(h.version).number;o>r?(u.warn("Plugin.register:",s.toString(h),"was upgraded to",s.toString(n)),s._registry[n.name]=n):o<r?u.warn("Plugin.register:",s.toString(h),"can not be downgraded to",s.toString(n)):n!==h&&u.warn("Plugin.register:",s.toString(n),"is already registered to different plugin object")}else s._registry[n.name]=n;return n},s.resolve=function(n){return s._registry[s.dependencyParse(n).name]},s.toString=function(n){return typeof n=="string"?n:(n.name||"anonymous")+"@"+(n.version||n.range||"0.0.0")},s.isPlugin=function(n){return n&&n.name&&n.version&&n.install},s.isUsed=function(n,h){return n.used.indexOf(h)>-1},s.isFor=function(n,h){var o=n.for&&s.dependencyParse(n.for);return!n.for||h.name===o.name&&s.versionSatisfies(h.version,o.range)},s.use=function(n,h){if(n.uses=(n.uses||[]).concat(h||[]),n.uses.length===0){u.warn("Plugin.use:",s.toString(n),"does not specify any dependencies to install.");return}for(var o=s.dependencies(n),r=u.topologicalSort(o),a=[],d=0;d<r.length;d+=1)if(r[d]!==n.name){var l=s.resolve(r[d]);if(!l){a.push("\u274C "+r[d]);continue}s.isUsed(n,l.name)||(s.isFor(l,n)||(u.warn("Plugin.use:",s.toString(l),"is for",l.for,"but installed on",s.toString(n)+"."),l._warned=!0),l.install?l.install(n):(u.warn("Plugin.use:",s.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(a.push("\u{1F536} "+s.toString(l)),delete l._warned):a.push("\u2705 "+s.toString(l)),n.used.push(l.name))}a.length>0&&!l.silent&&u.info(a.join("  "))},s.dependencies=function(n,h){var o=s.dependencyParse(n),r=o.name;if(h=h||{},!(r in h)){n=s.resolve(n)||n,h[r]=u.map(n.uses||[],function(d){s.isPlugin(d)&&s.register(d);var l=s.dependencyParse(d),f=s.resolve(d);return f&&!s.versionSatisfies(f.version,l.range)?(u.warn("Plugin.dependencies:",s.toString(f),"does not satisfy",s.toString(l),"used by",s.toString(o)+"."),f._warned=!0,n._warned=!0):f||(u.warn("Plugin.dependencies:",s.toString(d),"used by",s.toString(o),"could not be resolved."),n._warned=!0),l.name});for(var a=0;a<h[r].length;a+=1)s.dependencies(h[r][a],h);return h}},s.dependencyParse=function(n){if(u.isString(n)){var h=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return h.test(n)||u.warn("Plugin.dependencyParse:",n,"is not a valid dependency string."),{name:n.split("@")[0],range:n.split("@")[1]||"*"}}return{name:n.name,range:n.range||n.version}},s.versionParse=function(n){var h=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;h.test(n)||u.warn("Plugin.versionParse:",n,"is not a valid version or range.");var o=n.split("-");n=o[0];var r=isNaN(Number(n[0])),a=r?n.substr(1):n,d=u.map(a.split("."),function(l){return Number(l)});return{isRange:r,version:a,range:n,operator:r?n[0]:"",parts:d,prerelease:o[1],number:d[0]*1e8+d[1]*1e4+d[2]}},s.versionSatisfies=function(n,h){h=h||"*";var o=s.versionParse(h),r=o.parts,a=s.versionParse(n),d=a.parts;if(o.isRange){if(o.operator==="*"||n==="*")return!0;if(o.operator==="~")return d[0]===r[0]&&d[1]===r[1]&&d[2]>=r[2];if(o.operator==="^")return r[0]>0?d[0]===r[0]&&a.number>=o.number:r[1]>0?d[1]===r[1]&&d[2]>=r[2]:d[2]===r[2]}return n===h||n==="*"}})()},function(e,c,t){var s={};e.exports=s;var u=t(118);t(128);var n=t(32);(function(){s.create=function(h){var o=u.create(),r={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return n.extend(o,r,h)}})()},function(e,c,t){var s={};e.exports=s;var u=t(250),n=t(273),h=t(32);(function(){s.create=function(o){var r={controller:s,detector:n.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return h.extend(r,o)},s.update=function(o,r,a,d){var l,f,v,g=a.world,p=o.buckets,m,y,T=!1,C=a.metrics;for(C.broadphaseTests=0,l=0;l<r.length;l++){var S=r[l];if(!(S.isSleeping&&!d)&&!(S.bounds.max.x<g.bounds.min.x||S.bounds.min.x>g.bounds.max.x||S.bounds.max.y<g.bounds.min.y||S.bounds.min.y>g.bounds.max.y)){var E=s._getRegion(o,S);if(!S.region||E.id!==S.region.id||d){C.broadphaseTests+=1,(!S.region||d)&&(S.region=E);var P=s._regionUnion(E,S.region);for(f=P.startCol;f<=P.endCol;f++)for(v=P.startRow;v<=P.endRow;v++){y=s._getBucketId(f,v),m=p[y];var M=f>=E.startCol&&f<=E.endCol&&v>=E.startRow&&v<=E.endRow,A=f>=S.region.startCol&&f<=S.region.endCol&&v>=S.region.startRow&&v<=S.region.endRow;!M&&A&&A&&m&&s._bucketRemoveBody(o,m,S),(S.region===E||M&&!A||d)&&(m||(m=s._createBucket(p,y)),s._bucketAddBody(o,m,S))}S.region=E,T=!0}}}T&&(o.pairsList=s._createActivePairsList(o))},s.clear=function(o){o.buckets={},o.pairs={},o.pairsList=[]},s._regionUnion=function(o,r){var a=Math.min(o.startCol,r.startCol),d=Math.max(o.endCol,r.endCol),l=Math.min(o.startRow,r.startRow),f=Math.max(o.endRow,r.endRow);return s._createRegion(a,d,l,f)},s._getRegion=function(o,r){var a=r.bounds,d=Math.floor(a.min.x/o.bucketWidth),l=Math.floor(a.max.x/o.bucketWidth),f=Math.floor(a.min.y/o.bucketHeight),v=Math.floor(a.max.y/o.bucketHeight);return s._createRegion(d,l,f,v)},s._createRegion=function(o,r,a,d){return{id:o+","+r+","+a+","+d,startCol:o,endCol:r,startRow:a,endRow:d}},s._getBucketId=function(o,r){return"C"+o+"R"+r},s._createBucket=function(o,r){var a=o[r]=[];return a},s._bucketAddBody=function(o,r,a){for(var d=0;d<r.length;d++){var l=r[d];if(!(a.id===l.id||a.isStatic&&l.isStatic)){var f=u.id(a,l),v=o.pairs[f];v?v[2]+=1:o.pairs[f]=[a,l,1]}}r.push(a)},s._bucketRemoveBody=function(o,r,a){r.splice(r.indexOf(a),1);for(var d=0;d<r.length;d++){var l=r[d],f=u.id(a,l),v=o.pairs[f];v&&(v[2]-=1)}},s._createActivePairsList=function(o){var r,a,d=[];r=h.keys(o.pairs);for(var l=0;l<r.length;l++)a=o.pairs[r[l]],a[2]>0?d.push(a):delete o.pairs[r[l]];return d}})()},function(e,c,t){var s={};e.exports=s;var u=t(250),n=t(32);(function(){s._pairMaxIdleLife=1e3,s.create=function(h){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},h)},s.update=function(h,o,r){var a=h.list,d=h.table,l=h.collisionStart,f=h.collisionEnd,v=h.collisionActive,g,p,m,y;for(l.length=0,f.length=0,v.length=0,y=0;y<a.length;y++)a[y].confirmedActive=!1;for(y=0;y<o.length;y++)g=o[y],g.collided&&(p=u.id(g.bodyA,g.bodyB),m=d[p],m?(m.isActive?v.push(m):l.push(m),u.update(m,g,r),m.confirmedActive=!0):(m=u.create(g,r),d[p]=m,l.push(m),a.push(m)));for(y=0;y<a.length;y++)m=a[y],m.isActive&&!m.confirmedActive&&(u.setActive(m,!1,r),f.push(m))},s.removeOld=function(h,o){var r=h.list,a=h.table,d=[],l,f,v,g;for(g=0;g<r.length;g++){if(l=r[g],f=l.collision,f.bodyA.isSleeping||f.bodyB.isSleeping){l.timeUpdated=o;continue}o-l.timeUpdated>s._pairMaxIdleLife&&d.push(g)}for(g=0;g<d.length;g++)v=d[g]-g,l=r[v],delete a[l.id],r.splice(v,1)},s.clear=function(h){return h.table={},h.list.length=0,h.collisionStart.length=0,h.collisionActive.length=0,h.collisionEnd.length=0,h}})()},function(e,c,t){var s={};e.exports=s;var u=t(64),n=t(83),h=t(32),o=t(84);(function(){s._restingThresh=4,s._restingThreshTangent=6,s._positionDampen=.9,s._positionWarming=.8,s._frictionNormalMultiplier=5,s.preSolvePosition=function(r){var a,d,l;for(a=0;a<r.length;a++)d=r[a],!!d.isActive&&(l=d.activeContacts.length,d.collision.parentA.totalContacts+=l,d.collision.parentB.totalContacts+=l)},s.solvePosition=function(r,a,d){var l,f,v,g,p,m,y,T,C,S,E,P,M,A,R,O,F=d*s._positionDampen;for(l=0;l<a.length;l++){var I=a[l];I.previousPositionImpulse.x=I.positionImpulse.x,I.previousPositionImpulse.y=I.positionImpulse.y}for(l=0;l<r.length;l++)g=r[l],!(!g.isActive||g.isSensor)&&(p=g.collision,m=p.parentA,y=p.parentB,T=p.normal,E=m.previousPositionImpulse,P=y.previousPositionImpulse,S=p.penetration,A=P.x-E.x+S.x,R=P.y-E.y+S.y,f=T.x,v=T.y,C=f*A+v*R,g.separation=C,O=(C-g.slop)*F,(m.isStatic||y.isStatic)&&(O*=2),m.isStatic||m.isSleeping||(M=O/m.totalContacts,m.positionImpulse.x+=f*M,m.positionImpulse.y+=v*M),y.isStatic||y.isSleeping||(M=O/y.totalContacts,y.positionImpulse.x-=f*M,y.positionImpulse.y-=v*M))},s.postSolvePosition=function(r){for(var a=0;a<r.length;a++){var d=r[a];if(d.totalContacts=0,d.positionImpulse.x!==0||d.positionImpulse.y!==0){for(var l=0;l<d.parts.length;l++){var f=d.parts[l];u.translate(f.vertices,d.positionImpulse),o.update(f.bounds,f.vertices,d.velocity),f.position.x+=d.positionImpulse.x,f.position.y+=d.positionImpulse.y}d.positionPrev.x+=d.positionImpulse.x,d.positionPrev.y+=d.positionImpulse.y,n.dot(d.positionImpulse,d.velocity)<0?(d.positionImpulse.x=0,d.positionImpulse.y=0):(d.positionImpulse.x*=s._positionWarming,d.positionImpulse.y*=s._positionWarming)}}},s.preSolveVelocity=function(r){var a,d,l,f,v,g,p,m,y,T,C,S,E,P,M=n._temp[0],A=n._temp[1];for(a=0;a<r.length;a++)if(l=r[a],!(!l.isActive||l.isSensor))for(f=l.activeContacts,v=l.collision,g=v.parentA,p=v.parentB,m=v.normal,y=v.tangent,d=0;d<f.length;d++)T=f[d],C=T.vertex,S=T.normalImpulse,E=T.tangentImpulse,(S!==0||E!==0)&&(M.x=m.x*S+y.x*E,M.y=m.y*S+y.y*E,g.isStatic||g.isSleeping||(P=n.sub(C,g.position,A),g.positionPrev.x+=M.x*g.inverseMass,g.positionPrev.y+=M.y*g.inverseMass,g.anglePrev+=n.cross(P,M)*g.inverseInertia),p.isStatic||p.isSleeping||(P=n.sub(C,p.position,A),p.positionPrev.x-=M.x*p.inverseMass,p.positionPrev.y-=M.y*p.inverseMass,p.anglePrev-=n.cross(P,M)*p.inverseInertia))},s.solveVelocity=function(r,a){for(var d=a*a,l=n._temp[0],f=n._temp[1],v=n._temp[2],g=n._temp[3],p=n._temp[4],m=n._temp[5],y=0;y<r.length;y++){var T=r[y];if(!(!T.isActive||T.isSensor)){var C=T.collision,S=C.parentA,E=C.parentB,P=C.normal,M=C.tangent,A=T.activeContacts,R=1/A.length;S.velocity.x=S.position.x-S.positionPrev.x,S.velocity.y=S.position.y-S.positionPrev.y,E.velocity.x=E.position.x-E.positionPrev.x,E.velocity.y=E.position.y-E.positionPrev.y,S.angularVelocity=S.angle-S.anglePrev,E.angularVelocity=E.angle-E.anglePrev;for(var O=0;O<A.length;O++){var F=A[O],I=F.vertex,G=n.sub(I,S.position,f),z=n.sub(I,E.position,v),U=n.add(S.velocity,n.mult(n.perp(G),S.angularVelocity),g),X=n.add(E.velocity,n.mult(n.perp(z),E.angularVelocity),p),b=n.sub(U,X,m),B=n.dot(P,b),L=n.dot(M,b),D=Math.abs(L),w=h.sign(L),N=(1+T.restitution)*B,V=h.clamp(T.separation+B,0,1)*s._frictionNormalMultiplier,Y=L,W=1/0;D>T.friction*T.frictionStatic*V*d&&(W=D,Y=h.clamp(T.friction*w*d,-W,W));var H=n.cross(G,P),$=n.cross(z,P),K=R/(S.inverseMass+E.inverseMass+S.inverseInertia*H*H+E.inverseInertia*$*$);if(N*=K,Y*=K,B<0&&B*B>s._restingThresh*d)F.normalImpulse=0;else{var Z=F.normalImpulse;F.normalImpulse=Math.min(F.normalImpulse+N,0),N=F.normalImpulse-Z}if(L*L>s._restingThreshTangent*d)F.tangentImpulse=0;else{var J=F.tangentImpulse;F.tangentImpulse=h.clamp(F.tangentImpulse+Y,-W,W),Y=F.tangentImpulse-J}l.x=P.x*N+M.x*Y,l.y=P.y*N+M.y*Y,S.isStatic||S.isSleeping||(S.positionPrev.x+=l.x*S.inverseMass,S.positionPrev.y+=l.y*S.inverseMass,S.anglePrev+=n.cross(G,l)*S.inverseInertia),E.isStatic||E.isSleeping||(E.positionPrev.x-=l.x*E.inverseMass,E.positionPrev.y-=l.y*E.inverseMass,E.anglePrev-=n.cross(z,l)*E.inverseInertia)}}}}})()},function(e,c){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch{typeof window=="object"&&(t=window)}e.exports=t},function(e,c,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(276),u=function(n,h,o,r){for(var a=n[0],d=1;d<n.length;d++){var l=n[d];s(l,a,h,o,r),a=l}return n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,h,o,r,a){return s(n,"angle",h,o,r,a)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){for(var h=0;h<s.length;h++){var o=s[h];u.call(n,o)}return s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){n===void 0&&(n=0);for(var h=n;h<s.length;h++){var o=s[h],r=!0;for(var a in u)o[a]!==u[a]&&(r=!1);if(r)return o}return null};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){n===void 0&&(n=0);for(var h=n;h<s.length;h++){var o=s[h],r=!0;for(var a in u)o[a]!==u[a]&&(r=!1);if(r)return o}return null};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(289),u=t(123),n=t(2),h=t(1),o=t(129),r=new o({sys:{queueDepthSort:h,events:{once:h}}},0,0,1,1),a=function(d,l){l===void 0&&(l={});var f=l.hasOwnProperty("width"),v=l.hasOwnProperty("height"),g=n(l,"width",-1),p=n(l,"height",-1),m=n(l,"cellWidth",1),y=n(l,"cellHeight",m),T=n(l,"position",u.TOP_LEFT),C=n(l,"x",0),S=n(l,"y",0),E=0,P=0,M=g*m,A=p*y;r.setPosition(C,S),r.setSize(m,y);for(var R=0;R<d.length;R++)if(s(d[R],r,T),f&&g===-1)r.x+=m;else if(v&&p===-1)r.y+=y;else if(v&&!f){if(P+=y,r.y+=y,P===A&&(P=0,E+=m,r.y=S,r.x+=m,E===M))break}else if(E+=m,r.x+=m,E===M&&(E=0,P+=y,r.x=C,r.y+=y,P===A))break;return d};e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=2,n={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(h,o,r,a){return h===void 0&&(h=1),o===void 0?this.alpha=h:(this._alphaTL=s(h,0,1),this._alphaTR=s(o,0,1),this._alphaBL=s(r,0,1),this._alphaBR=s(a,0,1)),this},alpha:{get:function(){return this._alpha},set:function(h){var o=s(h,0,1);this._alpha=o,this._alphaTL=o,this._alphaTR=o,this._alphaBL=o,this._alphaBR=o,o===0?this.renderFlags&=~u:this.renderFlags|=u}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(h){var o=s(h,0,1);this._alphaTL=o,o!==0&&(this.renderFlags|=u)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(h){var o=s(h,0,1);this._alphaTR=o,o!==0&&(this.renderFlags|=u)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(h){var o=s(h,0,1);this._alphaBL=o,o!==0&&(this.renderFlags|=u)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(h){var o=s(h,0,1);this._alphaBR=o,o!==0&&(this.renderFlags|=u)}}};e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(s){this.scaleX=s/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(s){this.scaleY=s/this.height}},setSize:function(s,u){return this.width=s,this.height=u,this},setDisplaySize:function(s,u){return this.displayWidth=s,this.displayHeight=u,this}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={texture:null,frame:null,isCropped:!1,setCrop:function(s,u,n,h){if(s===void 0)this.isCropped=!1;else if(this.frame){if(typeof s=="number")this.frame.setCropUVs(this._crop,s,u,n,h,this.flipX,this.flipY);else{var o=s;this.frame.setCropUVs(this._crop,o.x,o.y,o.width,o.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(s){return this.flipX=s,this},setFlipY:function(s){return this.flipY=s,this},setFlip:function(s,u){return this.flipX=s,this.flipY=u,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=t(308),n=t(3),h={prepareBoundsOutput:function(o,r){if(r===void 0&&(r=!1),this.rotation!==0&&u(o,this.x,this.y,this.rotation),r&&this.parentContainer){var a=this.parentContainer.getBoundsTransformMatrix();a.transformPoint(o.x,o.y,o)}return o},getCenter:function(o){return o===void 0&&(o=new n),o.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,o.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,o},getTopLeft:function(o,r){return o||(o=new n),o.x=this.x-this.displayWidth*this.originX,o.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(o,r)},getTopCenter:function(o,r){return o||(o=new n),o.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,o.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(o,r)},getTopRight:function(o,r){return o||(o=new n),o.x=this.x-this.displayWidth*this.originX+this.displayWidth,o.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(o,r)},getLeftCenter:function(o,r){return o||(o=new n),o.x=this.x-this.displayWidth*this.originX,o.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(o,r)},getRightCenter:function(o,r){return o||(o=new n),o.x=this.x-this.displayWidth*this.originX+this.displayWidth,o.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(o,r)},getBottomLeft:function(o,r){return o||(o=new n),o.x=this.x-this.displayWidth*this.originX,o.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(o,r)},getBottomCenter:function(o,r){return o||(o=new n),o.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,o.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(o,r)},getBottomRight:function(o,r){return o||(o=new n),o.x=this.x-this.displayWidth*this.originX+this.displayWidth,o.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(o,r)},getBounds:function(o){o===void 0&&(o=new s);var r,a,d,l,f,v,g,p;if(this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(o),m.transformPoint(o.x,o.y,o),r=o.x,a=o.y,this.getTopRight(o),m.transformPoint(o.x,o.y,o),d=o.x,l=o.y,this.getBottomLeft(o),m.transformPoint(o.x,o.y,o),f=o.x,v=o.y,this.getBottomRight(o),m.transformPoint(o.x,o.y,o),g=o.x,p=o.y}else this.getTopLeft(o),r=o.x,a=o.y,this.getTopRight(o),d=o.x,l=o.y,this.getBottomLeft(o),f=o.x,v=o.y,this.getBottomRight(o),g=o.x,p=o.y;return o.x=Math.min(r,d,f,g),o.y=Math.min(a,l,v,p),o.width=Math.max(r,d,f,g)-o.x,o.height=Math.max(a,l,v,p)-o.y,o}};e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="blur"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="contextlost"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="contextrestored"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="focus"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="hidden"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="poststep"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prestep"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="step"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="visible"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="render"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resize"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(s){this._displayOriginX=s,this.originX=s/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(s){this._displayOriginY=s,this.originY=s/this.height}},setOrigin:function(s,u){return s===void 0&&(s=.5),u===void 0&&(u=s),this.originX=s,this.originY=u,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(s,u){return s===void 0&&(s=0),u===void 0&&(u=s),this.displayOriginX=s,this.displayOriginY=u,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(36),u=t(99),n=t(6),h=t(100),o=t(3),r={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:h.PLAYING_FORWARD,setPath:function(a,d){d===void 0&&(d=this.pathConfig);var l=this.pathTween;return l&&l.isPlaying()&&l.stop(),this.path=a,d&&this.startFollow(d),this},setRotateToPath:function(a,d){return d===void 0&&(d=0),this.rotateToPath=a,this.pathRotationOffset=d,this},isFollowing:function(){var a=this.pathTween;return a&&a.isPlaying()},startFollow:function(a,d){a===void 0&&(a={}),d===void 0&&(d=0);var l=this.pathTween;l&&l.isPlaying()&&l.stop(),typeof a=="number"&&(a={duration:a}),a.from=n(a,"from",0),a.to=n(a,"to",1);var f=u(a,"positionOnPath",!1);this.rotateToPath=u(a,"rotateToPath",!1),this.pathRotationOffset=n(a,"rotationOffset",0);var v=n(a,"startAt",d);if(v&&(a.onStart=function(p){var m=p.data[0];m.progress=v,m.elapsed=m.duration*v;var y=m.ease(m.progress);m.current=m.start+(m.end-m.start)*y,m.target[m.key]=m.current}),this.pathOffset||(this.pathOffset=new o(this.x,this.y)),this.pathVector||(this.pathVector=new o),this.pathDelta||(this.pathDelta=new o),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(a),this.path.getStartPoint(this.pathOffset),f&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=h.PLAYING_FORWARD,this.rotateToPath){var g=this.path.getPoint(.1);this.rotation=Math.atan2(g.y-this.y,g.x-this.x)+s(this.pathRotationOffset)}return this.pathConfig=a,this},pauseFollow:function(){var a=this.pathTween;return a&&a.isPlaying()&&a.pause(),this},resumeFollow:function(){var a=this.pathTween;return a&&a.isPaused()&&a.resume(),this},stopFollow:function(){var a=this.pathTween;return a&&a.isPlaying()&&a.stop(),this},pathUpdate:function(){var a=this.pathTween;if(a){var d=a.data[0],l=this.pathDelta,f=this.pathVector;if(l.copy(f).negate(),d.state===h.COMPLETE){this.path.getPoint(1,f),l.add(f),f.add(this.pathOffset),this.setPosition(f.x,f.y);return}else if(d.state!==h.PLAYING_FORWARD&&d.state!==h.PLAYING_BACKWARD)return;this.path.getPoint(a.getValue(),f),l.add(f),f.add(this.pathOffset);var v=this.x,g=this.y;this.setPosition(f.x,f.y);var p=this.x-v,m=this.y-g;if(p===0&&m===0)return;if(d.state!==this._prevDirection){this._prevDirection=d.state;return}this.rotateToPath&&(this.rotation=Math.atan2(m,p)+s(this.pathRotationOffset))}}};e.exports=r},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(s){this.scaleX=s/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(s){this.scaleY=s/this.frame.realHeight}},setSizeToFrame:function(s){return s===void 0&&(s=this.frame),this.width=s.realWidth,this.height=s.realHeight,this},setSize:function(s,u){return this.width=s,this.height=u,this},setDisplaySize:function(s,u){return this.displayWidth=s,this.displayHeight=u,this}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=8,s={texture:null,frame:null,isCropped:!1,setTexture:function(u,n){return this.texture=this.scene.sys.textures.get(u),this.setFrame(n)},setFrame:function(u,n,h){return n===void 0&&(n=!0),h===void 0&&(h=!0),this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~t:this.renderFlags|=t,this._sizeComponent&&n&&this.setSizeToFrame(),this._originComponent&&h&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};e.exports=s},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=8,s={texture:null,frame:null,isCropped:!1,setCrop:function(u,n,h,o){if(u===void 0)this.isCropped=!1;else if(this.frame){if(typeof u=="number")this.frame.setCropUVs(this._crop,u,n,h,o,this.flipX,this.flipY);else{var r=u;this.frame.setCropUVs(this._crop,r.x,r.y,r.width,r.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(u,n){return this.texture=this.scene.sys.textures.get(u),this.setFrame(n)},setFrame:function(u,n,h){return n===void 0&&(n=!0),h===void 0&&(h=!0),this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~t:this.renderFlags|=t,this._sizeComponent&&n&&this.setSizeToFrame(),this._originComponent&&h&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=s},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(s,u,n,h){return s===void 0&&(s=16777215),u===void 0&&(u=s,n=s,h=s),this.tintTopLeft=s,this.tintTopRight=u,this.tintBottomLeft=n,this.tintBottomRight=h,this.tintFill=!1,this},setTintFill:function(s,u,n,h){return this.setTint(s,u,n,h),this.tintFill=!0,this},tint:{set:function(s){this.setTint(s,s,s,s)}},isTinted:{get:function(){var s=16777215;return this.tintFill||this.tintTopLeft!==s||this.tintTopRight!==s||this.tintBottomLeft!==s||this.tintBottomRight!==s}}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="changedata"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="changedata-"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedata"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="setdata"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addedtoscene"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedfromscene"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="created"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="error"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="play"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seeked"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seeking"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="timeout"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="unlocked"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addedtoscene"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="create"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postupdate"},function(e,c){/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="preupdate"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedfromscene"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="render"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="shutdown"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleep"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitioncomplete"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitioninit"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionout"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionstart"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionwake"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wake"},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,h,o,r,a){return s(n,"alpha",h,o,r,a)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,h,o,r,a){return s(n,"x",h,o,r,a)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,h,o,r,a,d,l){return o==null&&(o=h),s(n,"x",h,r,d,l),s(n,"y",o,a,d,l)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,h,o,r,a){return s(n,"y",h,o,r,a)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){n===void 0&&(n=0),h===void 0&&(h=6.28);for(var o=n,r=(h-n)/s.length,a=0;a<s.length;a++)s[a].x=u.x+u.radius*Math.cos(o),s[a].y=u.y+u.radius*Math.sin(o),o+=r;return s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){n===void 0&&(n=0),h===void 0&&(h=6.28);for(var o=n,r=(h-n)/s.length,a=u.width/2,d=u.height/2,l=0;l<s.length;l++)s[l].x=u.x+a*Math.cos(o),s[l].y=u.y+d*Math.sin(o),o+=r;return s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(172),u=function(n,h){for(var o=s(h,n.length),r=0;r<n.length;r++){var a=n[r],d=o[r];a.x=d.x,a.y=d.y}return n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(316),u=t(178),n=t(179),h=function(o,r,a){a===void 0&&(a=0);var d=s(r,!1,o.length);a>0?u(d,a):a<0&&n(d,Math.abs(a));for(var l=0;l<o.length;l++)o[l].x=d[l].x,o[l].y=d[l].y;return o};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(317),u=function(n,h,o){var r=s({x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2},o),a=s({x1:h.x2,y1:h.y2,x2:h.x3,y2:h.y3},o),d=s({x1:h.x3,y1:h.y3,x2:h.x1,y2:h.y1},o);r.pop(),a.pop(),d.pop(),r=r.concat(a,d);for(var l=r.length/n.length,f=0,v=0;v<n.length;v++){var g=n[v],p=r[Math.floor(f)];g.x=p.x,g.y=p.y,f+=l}return n};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){for(var h=0;h<s.length;h++){var o=s[h];o.anims&&o.anims.play(u,n)}return s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(170),u=function(n,h){for(var o=0;o<n.length;o++)s(h,n[o]);return n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(180),u=function(n,h){for(var o=0;o<n.length;o++)s(h,n[o]);return n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(173),u=function(n,h){for(var o=0;o<n.length;o++)s(h,n[o]);return n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(174),u=function(n,h){for(var o=0;o<n.length;o++)s(h,n[o]);return n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(181),u=function(n,h){for(var o=0;o<n.length;o++)s(h,n[o]);return n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,h,o,r,a){return s(n,"rotation",h,o,r,a)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(182),u=t(50),n=function(h,o,r){for(var a=o.x,d=o.y,l=0;l<h.length;l++){var f=h[l];s(f,a,d,r,Math.max(1,u(f.x,f.y,a,d)))}return h};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(182),u=function(n,h,o,r){var a=h.x,d=h.y;if(r===0)return n;for(var l=0;l<n.length;l++)s(n[l],a,d,o,r);return n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,h,o,r,a){return s(n,"scaleX",h,o,r,a)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,h,o,r,a,d,l){return o==null&&(o=h),s(n,"scaleX",h,r,d,l),s(n,"scaleY",o,a,d,l)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(46),u=function(n,h,o,r,a){return s(n,"scaleY",h,o,r,a)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,h,o,r,a){return s(n,"alpha",h,o,r,a)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,h,o,r){return s(n,"blendMode",h,0,o,r)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,h,o,r,a){return s(n,"depth",h,o,r,a)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){for(var h=0;h<s.length;h++)s[h].setInteractive(u,n);return s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,h,o,r,a,d,l){return o==null&&(o=h),s(n,"originX",h,r,d,l),s(n,"originY",o,a,d,l),n.forEach(function(f){f.updateDisplayOrigin()}),n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,h,o,r,a){return s(n,"rotation",h,o,r,a)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,h,o,r,a,d,l){return o==null&&(o=h),s(n,"scaleX",h,r,d,l),s(n,"scaleY",o,a,d,l)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,h,o,r,a){return s(n,"scaleX",h,o,r,a)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,h,o,r,a){return s(n,"scaleY",h,o,r,a)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,h,o,r,a,d,l){return o==null&&(o=h),s(n,"scrollFactorX",h,r,d,l),s(n,"scrollFactorY",o,a,d,l)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,h,o,r,a){return s(n,"scrollFactorX",h,o,r,a)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,h,o,r,a){return s(n,"scrollFactorY",h,o,r,a)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h,o){for(var r=0;r<s.length;r++)s[r].setTint(u,n,h,o);return s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,h,o,r){return s(n,"visible",h,0,o,r)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,h,o,r,a){return s(n,"x",h,o,r,a)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,h,o,r,a,d,l){return o==null&&(o=h),s(n,"x",h,r,d,l),s(n,"y",o,a,d,l)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(27),u=function(n,h,o,r,a){return s(n,"y",h,o,r,a)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,h,o,r,a){r===void 0&&(r=0),a===void 0&&(a=new s);var d,l;if(n.length>1){var f,v,g,p;if(r===0){var m=n.length-1;for(d=n[m].x,l=n[m].y,f=m-1;f>=0;f--)p=n[f],v=p.x,g=p.y,p.x=d,p.y=l,d=v,l=g;n[m].x=h,n[m].y=o}else{for(d=n[0].x,l=n[0].y,f=1;f<n.length;f++)p=n[f],v=p.x,g=p.y,p.x=d,p.y=l,d=v,l=g;n[0].x=h,n[0].y=o}}else d=n[0].x,l=n[0].y,n[0].x=h,n[0].y=o;return a.x=d,a.y=l,a};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(131),u=function(n){return s(n)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(183),u=function(n,h,o,r,a){a===void 0&&(a=!1);var d=Math.abs(r-o)/n.length,l;if(a)for(l=0;l<n.length;l++)n[l][h]+=s(l*d,o,r);else for(l=0;l<n.length;l++)n[l][h]=s(l*d,o,r);return n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(184),u=function(n,h,o,r,a){a===void 0&&(a=!1);var d=Math.abs(r-o)/n.length,l;if(a)for(l=0;l<n.length;l++)n[l][h]+=s(l*d,o,r);else for(l=0;l<n.length;l++)n[l][h]=s(l*d,o,r);return n};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h,o){o===void 0&&(o=!1);var r=Math.abs(h-n)/s.length,a;if(o)for(a=0;a<s.length;a++)s[a][u]+=a*r+n;else for(a=0;a<s.length;a++)s[a][u]=a*r+n;return s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=0;u<s.length;u++)s[u].visible=!s[u].visible;return s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(68),u=function(n,h,o){o===void 0&&(o=0);for(var r=0;r<n.length;r++){var a=n[r];a.x=s(a.x,h.left-o,h.right+o),a.y=s(a.y,h.top-o,h.bottom+o)}return n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Animation:t(185),AnimationFrame:t(319),AnimationManager:t(321),AnimationState:t(164),Events:t(132)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationcomplete"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationcomplete-"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationrepeat"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationrestart"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationstart"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationstop"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationupdate"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pauseall"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resumeall"},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BaseCache:t(323),CacheManager:t(325),Events:t(324)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Controls:t(739),Scene2D:t(742)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={FixedKeyControl:t(740),SmoothedKeyControl:t(741)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(6),n=new s({initialize:function(o){this.camera=u(o,"camera",null),this.left=u(o,"left",null),this.right=u(o,"right",null),this.up=u(o,"up",null),this.down=u(o,"down",null),this.zoomIn=u(o,"zoomIn",null),this.zoomOut=u(o,"zoomOut",null),this.zoomSpeed=u(o,"zoomSpeed",.01),this.minZoom=u(o,"minZoom",.001),this.maxZoom=u(o,"maxZoom",1e3),this.speedX=0,this.speedY=0;var r=u(o,"speed",null);typeof r=="number"?(this.speedX=r,this.speedY=r):(this.speedX=u(o,"speed.x",0),this.speedY=u(o,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(h){return this.camera=h,this},update:function(h){if(!!this.active){h===void 0&&(h=1);var o=this.camera;this.up&&this.up.isDown?o.scrollY-=this.speedY*h|0:this.down&&this.down.isDown&&(o.scrollY+=this.speedY*h|0),this.left&&this.left.isDown?o.scrollX-=this.speedX*h|0:this.right&&this.right.isDown&&(o.scrollX+=this.speedX*h|0),this.zoomIn&&this.zoomIn.isDown?(o.zoom-=this.zoomSpeed,o.zoom<this.minZoom&&(o.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(o.zoom+=this.zoomSpeed,o.zoom>this.maxZoom&&(o.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(6),n=new s({initialize:function(o){this.camera=u(o,"camera",null),this.left=u(o,"left",null),this.right=u(o,"right",null),this.up=u(o,"up",null),this.down=u(o,"down",null),this.zoomIn=u(o,"zoomIn",null),this.zoomOut=u(o,"zoomOut",null),this.zoomSpeed=u(o,"zoomSpeed",.01),this.minZoom=u(o,"minZoom",.001),this.maxZoom=u(o,"maxZoom",1e3),this.accelX=0,this.accelY=0;var r=u(o,"acceleration",null);typeof r=="number"?(this.accelX=r,this.accelY=r):(this.accelX=u(o,"acceleration.x",0),this.accelY=u(o,"acceleration.y",0)),this.dragX=0,this.dragY=0;var a=u(o,"drag",null);typeof a=="number"?(this.dragX=a,this.dragY=a):(this.dragX=u(o,"drag.x",0),this.dragY=u(o,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var d=u(o,"maxSpeed",null);typeof d=="number"?(this.maxSpeedX=d,this.maxSpeedY=d):(this.maxSpeedX=u(o,"maxSpeed.x",0),this.maxSpeedY=u(o,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(h){return this.camera=h,this},update:function(h){if(!!this.active){h===void 0&&(h=1);var o=this.camera;this._speedX>0?(this._speedX-=this.dragX*h,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*h,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*h,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*h,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(o.scrollX-=this._speedX*h|0),this._speedY!==0&&(o.scrollY-=this._speedY*h|0),this._zoom!==0&&(o.zoom+=this._zoom,o.zoom<this.minZoom?o.zoom=this.minZoom:o.zoom>this.maxZoom&&(o.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Camera:t(326),BaseCamera:t(133),CameraManager:t(799),Effects:t(333),Events:t(37)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameradestroy"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeincomplete"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeinstart"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeoutcomplete"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeoutstart"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameraflashcomplete"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameraflashstart"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="followupdate"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerapancomplete"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerapanstart"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerarotatecomplete"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerarotatestart"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerashakecomplete"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerashakestart"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerazoomcomplete"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerazoomstart"},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(37),h=new u({initialize:function(r){this.camera=r,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(o,r,a,d,l,f,v,g){if(o===void 0&&(o=!0),r===void 0&&(r=1e3),a===void 0&&(a=0),d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=!1),v===void 0&&(v=null),g===void 0&&(g=this.camera.scene),!f&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=r,this.direction=o,this.progress=0,this.red=a,this.green=d,this.blue=l,this.alpha=o?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=v,this._onUpdateScope=g;var p=o?n.FADE_OUT_START:n.FADE_IN_START;return this.camera.emit(p,this.camera,this,r,a,d,l),this.camera},update:function(o,r){!this.isRunning||(this._elapsed+=r,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(o){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera;return o.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",o.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(o,r){if(!this.isRunning&&!this.isComplete)return!1;var a=this.camera,d=this.red/255,l=this.green/255,f=this.blue/255;return o.drawFillRect(a.x,a.y,a.width,a.height,r(f,l,d,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var o=this.direction?n.FADE_OUT_COMPLETE:n.FADE_IN_COMPLETE;this.camera.emit(o,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(37),h=new u({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(o,r,a,d,l,f,v){return o===void 0&&(o=250),r===void 0&&(r=255),a===void 0&&(a=255),d===void 0&&(d=255),l===void 0&&(l=!1),f===void 0&&(f=null),v===void 0&&(v=this.camera.scene),!l&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=o,this.progress=0,this.red=r,this.green=a,this.blue=d,this.alpha=1,this._elapsed=0,this._onUpdate=f,this._onUpdateScope=v,this.camera.emit(n.FLASH_START,this.camera,this,o,r,a,d),this.camera)},update:function(o,r){!this.isRunning||(this._elapsed+=r,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(o){if(!this.isRunning)return!1;var r=this.camera;return o.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",o.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(o,r){if(!this.isRunning)return!1;var a=this.camera,d=this.red/255,l=this.green/255,f=this.blue/255;return o.drawFillRect(a.x,a.y,a.width,a.height,r(f,l,d,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(134),h=t(37),o=t(3),r=new u({initialize:function(d){this.camera=d,this.isRunning=!1,this.duration=0,this.source=new o,this.current=new o,this.destination=new o,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(a,d,l,f,v,g,p){l===void 0&&(l=1e3),f===void 0&&(f=n.Linear),v===void 0&&(v=!1),g===void 0&&(g=null),p===void 0&&(p=this.camera.scene);var m=this.camera;return!v&&this.isRunning||(this.isRunning=!0,this.duration=l,this.progress=0,this.source.set(m.scrollX,m.scrollY),this.destination.set(a,d),m.getScroll(a,d,this.current),typeof f=="string"&&n.hasOwnProperty(f)?this.ease=n[f]:typeof f=="function"&&(this.ease=f),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=p,this.camera.emit(h.PAN_START,this.camera,this,l,a,d)),m},update:function(a,d){if(!!this.isRunning){this._elapsed+=d;var l=s(this._elapsed/this.duration,0,1);this.progress=l;var f=this.camera;if(this._elapsed<this.duration){var v=this.ease(l);f.getScroll(this.destination.x,this.destination.y,this.current);var g=this.source.x+(this.current.x-this.source.x)*v,p=this.source.y+(this.current.y-this.source.y)*v;f.setScroll(g,p),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,l,g,p)}else f.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,l,f.scrollX,f.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=r},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1.70158),s*s*((u+1)*s-u)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1.70158),--s*s*((u+1)*s+u)+1};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=1.70158);var n=u*1.525;return(s*=2)<1?.5*(s*s*((n+1)*s-n)):.5*((s-=2)*s*((n+1)*s+n)+2)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s=1-s,s<1/2.75?1-7.5625*s*s:s<2/2.75?1-(7.5625*(s-=1.5/2.75)*s+.75):s<2.5/2.75?1-(7.5625*(s-=2.25/2.75)*s+.9375):1-(7.5625*(s-=2.625/2.75)*s+.984375)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=!1;return s<.5?(s=1-s*2,u=!0):s=s*2-1,s<1/2.75?s=7.5625*s*s:s<2/2.75?s=7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?s=7.5625*(s-=2.25/2.75)*s+.9375:s=7.5625*(s-=2.625/2.75)*s+.984375,u?(1-s)*.5:s*.5+.5};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return 1-Math.sqrt(1-s*s)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.sqrt(1- --s*s)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s*s*s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return--s*s*s+1};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?.5*s*s*s:.5*((s-=2)*s*s+2)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===void 0&&(u=.1),n===void 0&&(n=.1),s===0)return 0;if(s===1)return 1;var h=n/4;return u<1?u=1:h=n*Math.asin(1/u)/(2*Math.PI),-(u*Math.pow(2,10*(s-=1))*Math.sin((s-h)*(2*Math.PI)/n))};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===void 0&&(u=.1),n===void 0&&(n=.1),s===0)return 0;if(s===1)return 1;var h=n/4;return u<1?u=1:h=n*Math.asin(1/u)/(2*Math.PI),u*Math.pow(2,-10*s)*Math.sin((s-h)*(2*Math.PI)/n)+1};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===void 0&&(u=.1),n===void 0&&(n=.1),s===0)return 0;if(s===1)return 1;var h=n/4;return u<1?u=1:h=n*Math.asin(1/u)/(2*Math.PI),(s*=2)<1?-.5*(u*Math.pow(2,10*(s-=1))*Math.sin((s-h)*(2*Math.PI)/n)):u*Math.pow(2,-10*(s-=1))*Math.sin((s-h)*(2*Math.PI)/n)*.5+1};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.pow(2,10*(s-1))-.001};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return 1-Math.pow(2,-10*s)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?.5*Math.pow(2,10*(s-1)):.5*(2-Math.pow(2,-10*(s-1)))};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s*s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s*(2-s)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?.5*s*s:-.5*(--s*(s-2)-1)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s*s*s*s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return 1- --s*s*s*s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s*s*s*s*s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return--s*s*s*s*s+1};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s===0?0:s===1?1:1-Math.cos(s*Math.PI/2)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s===0?0:s===1?1:Math.sin(s*Math.PI/2)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s===0?0:s===1?1:.5*(1-Math.cos(Math.PI*s))};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1),s<=0?0:s>=1?1:((u*s|0)+1)*(1/u)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(37),h=t(3),o=new u({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.intensity=new h,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(r,a,d,l,f){return r===void 0&&(r=100),a===void 0&&(a=.05),d===void 0&&(d=!1),l===void 0&&(l=null),f===void 0&&(f=this.camera.scene),!d&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=r,this.progress=0,typeof a=="number"?this.intensity.set(a):this.intensity.set(a.x,a.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=l,this._onUpdateScope=f,this.camera.emit(n.SHAKE_START,this.camera,this,r,a),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(r,a){if(!!this.isRunning)if(this._elapsed+=a,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var d=this.intensity,l=this.camera.width,f=this.camera.height,v=this.camera.zoom;this._offsetX=(Math.random()*d.x*l*2-d.x*l)*v,this._offsetY=(Math.random()*d.y*f*2-d.y*f)*v,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});e.exports=o},function(e,c,t){/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var s=t(18),u=t(0),n=t(37),h=t(134),o=new u({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(r,a,d,l,f,v,g){d===void 0&&(d=1e3),l===void 0&&(l=h.Linear),f===void 0&&(f=!1),v===void 0&&(v=null),g===void 0&&(g=this.camera.scene),a===void 0&&(a=!1),this.shortestPath=a;var p=r;r<0?(p=-1*r,this.clockwise=!1):this.clockwise=!0;var m=360*Math.PI/180;p=p-Math.floor(p/m)*m;var y=this.camera;if(!f&&this.isRunning)return y;if(this.isRunning=!0,this.duration=d,this.progress=0,this.source=y.rotation,this.destination=p,typeof l=="string"&&h.hasOwnProperty(l)?this.ease=h[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=g,this.shortestPath){var T=0,C=0;this.destination>this.source?T=Math.abs(this.destination-this.source):T=Math.abs(this.destination+m)-this.source,this.source>this.destination?C=Math.abs(this.source-this.destination):C=Math.abs(this.source+m)-this.destination,T<C?this.clockwise=!0:T>C&&(this.clockwise=!1)}return this.camera.emit(n.ROTATE_START,this.camera,this,d,p),y},update:function(r,a){if(!!this.isRunning){this._elapsed+=a;var d=s(this._elapsed/this.duration,0,1);this.progress=d;var l=this.camera;if(this._elapsed<this.duration){var f=this.ease(d);this.current=l.rotation;var v=0,g=360*Math.PI/180,p=this.destination,m=this.current;this.clockwise===!1&&(p=this.current,m=this.destination),p>=m?v=Math.abs(p-m):v=Math.abs(p+g)-m;var y=0;this.clockwise?y=l.rotation+v*f:y=l.rotation-v*f,l.rotation=y,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,d,y)}else l.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,d,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(134),h=t(37),o=new u({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,a,d,l,f,v){a===void 0&&(a=1e3),d===void 0&&(d=n.Linear),l===void 0&&(l=!1),f===void 0&&(f=null),v===void 0&&(v=this.camera.scene);var g=this.camera;return!l&&this.isRunning||(this.isRunning=!0,this.duration=a,this.progress=0,this.source=g.zoom,this.destination=r,typeof d=="string"&&n.hasOwnProperty(d)?this.ease=n[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=f,this._onUpdateScope=v,this.camera.emit(h.ZOOM_START,this.camera,this,a,r)),g},update:function(r,a){!this.isRunning||(this._elapsed+=a,this.progress=s(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(326),u=t(0),n=t(2),h=t(24),o=t(57),r=t(104),a=t(20),d=new u({initialize:function(f){this.scene=f,this.systems=f.sys,this.roundPixels=f.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,f.sys.events.once(a.BOOT,this.boot,this),f.sys.events.on(a.START,this.start,this)},boot:function(){var l=this.systems;l.settings.cameras?this.fromJSON(l.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new s(0,0,l.scale.width,l.scale.height).setScene(this.scene),l.game.scale.on(r.RESIZE,this.onResize,this),this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){if(!this.main){var l=this.systems;l.settings.cameras?this.fromJSON(l.settings.cameras):this.add(),this.main=this.cameras[0]}var f=this.systems.events;f.on(a.UPDATE,this.update,this),f.once(a.SHUTDOWN,this.shutdown,this)},add:function(l,f,v,g,p,m){l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),p===void 0&&(p=!1),m===void 0&&(m="");var y=new s(l,f,v,g);return y.setName(m),y.setScene(this.scene),y.setRoundPixels(this.roundPixels),y.id=this.getNextID(),this.cameras.push(y),p&&(this.main=y),y},addExisting:function(l,f){f===void 0&&(f=!1);var v=this.cameras.indexOf(l);return v===-1?(l.id=this.getNextID(),l.setRoundPixels(this.roundPixels),this.cameras.push(l),f&&(this.main=l),l):null},getNextID:function(){for(var l=this.cameras,f=1,v=0;v<32;v++){for(var g=!1,p=0;p<l.length;p++){var m=l[p];if(m&&m.id===f){g=!0;continue}}if(g)f=f<<1;else return f}return 0},getTotal:function(l){l===void 0&&(l=!1);for(var f=0,v=this.cameras,g=0;g<v.length;g++){var p=v[g];(!l||l&&p.visible)&&f++}return f},fromJSON:function(l){Array.isArray(l)||(l=[l]);for(var f=this.scene.sys.scale.width,v=this.scene.sys.scale.height,g=0;g<l.length;g++){var p=l[g],m=n(p,"x",0),y=n(p,"y",0),T=n(p,"width",f),C=n(p,"height",v),S=this.add(m,y,T,C);S.name=n(p,"name",""),S.zoom=n(p,"zoom",1),S.rotation=n(p,"rotation",0),S.scrollX=n(p,"scrollX",0),S.scrollY=n(p,"scrollY",0),S.roundPixels=n(p,"roundPixels",!1),S.visible=n(p,"visible",!0);var E=n(p,"backgroundColor",!1);E&&S.setBackgroundColor(E);var P=n(p,"bounds",null);if(P){var M=n(P,"x",0),A=n(P,"y",0),R=n(P,"width",f),O=n(P,"height",v);S.setBounds(M,A,R,O)}}return this},getCamera:function(l){for(var f=this.cameras,v=0;v<f.length;v++)if(f[v].name===l)return f[v];return null},getCamerasBelowPointer:function(l){for(var f=this.cameras,v=l.x,g=l.y,p=[],m=0;m<f.length;m++){var y=f[m];y.visible&&y.inputEnabled&&o(y,v,g)&&p.unshift(y)}return p},remove:function(l,f){f===void 0&&(f=!0),Array.isArray(l)||(l=[l]);for(var v=0,g=this.cameras,p=0;p<l.length;p++){var m=g.indexOf(l[p]);m!==-1&&(f?g[m].destroy():g[m].renderList=[],g.splice(m,1),v++)}return!this.main&&g[0]&&(this.main=g[0]),v},render:function(l,f){for(var v=this.scene,g=this.cameras,p=0;p<this.cameras.length;p++){var m=g[p];if(m.visible&&m.alpha>0){m.preRender();var y=this.getVisibleChildren(f.getChildren(),m);l.render(v,y,m)}}},getVisibleChildren:function(l,f){for(var v=[],g=0;g<l.length;g++){var p=l[g];p.willRender(f)&&v.push(p)}return v},resetAll:function(){for(var l=0;l<this.cameras.length;l++)this.cameras[l].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(l,f){for(var v=0;v<this.cameras.length;v++)this.cameras[v].update(l,f)},onResize:function(l,f,v,g,p){for(var m=0;m<this.cameras.length;m++){var y=this.cameras[m];y._x===0&&y._y===0&&y._width===g&&y._height===p&&y.setSize(f.width,f.height)}},resize:function(l,f){for(var v=0;v<this.cameras.length;v++)this.cameras[v].setSize(l,f)},shutdown:function(){this.main=void 0;for(var l=0;l<this.cameras.length;l++)this.cameras[l].destroy();this.cameras=[];var f=this.systems.events;f.off(a.UPDATE,this.update,this),f.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});h.register("CameraManager",d,"cameras"),e.exports=d},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="enterfullscreen"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fullscreenfailed"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fullscreenunsupported"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="leavefullscreen"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="orientationchange"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resize"},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Config:t(346),CreateRenderer:t(366),DebugHeader:t(384),Events:t(22),TimeStep:t(385),VisibilityHandler:t(387)}},function(e,c){var t=e.exports={},s,u;function n(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?s=setTimeout:s=n}catch{s=n}try{typeof clearTimeout=="function"?u=clearTimeout:u=h}catch{u=h}})();function o(y){if(s===setTimeout)return setTimeout(y,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(y,0);try{return s(y,0)}catch{try{return s.call(null,y,0)}catch{return s.call(this,y,0)}}}function r(y){if(u===clearTimeout)return clearTimeout(y);if((u===h||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(y);try{return u(y)}catch{try{return u.call(null,y)}catch{return u.call(this,y)}}}var a=[],d=!1,l,f=-1;function v(){!d||!l||(d=!1,l.length?a=l.concat(a):f=-1,a.length&&g())}function g(){if(!d){var y=o(v);d=!0;for(var T=a.length;T;){for(l=a,a=[];++f<T;)l&&l[f].run();f=-1,T=a.length}l=null,d=!1,r(y)}}t.nextTick=function(y){var T=new Array(arguments.length-1);if(arguments.length>1)for(var C=1;C<arguments.length;C++)T[C-1]=arguments[C];a.push(new p(y,T)),a.length===1&&!d&&o(g)};function p(y,T){this.fun=y,this.array=T}p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function m(){}t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(y){return[]},t.binding=function(y){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(y){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(136),u={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function n(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(u.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(u.mspointer=!0),navigator.getGamepads&&(u.gamepads=!0),"onwheel"in window||s.ie&&"WheelEvent"in window?u.wheelEvent="wheel":"onmousewheel"in window?u.wheelEvent="mousewheel":s.firefox&&"MouseScrollEvent"in window&&(u.wheelEvent="DOMMouseScroll")),u}e.exports=n()},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(136),u={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function n(){if(typeof importScripts=="function")return u;u.audioData=!!window.Audio,u.webAudio=!!(window.AudioContext||window.webkitAudioContext);var h=document.createElement("audio"),o=!!h.canPlayType;try{if(o&&(h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(u.ogg=!0),(h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||h.canPlayType("audio/opus;").replace(/^no$/,""))&&(u.opus=!0),h.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(u.mp3=!0),h.canPlayType("audio/wav").replace(/^no$/,"")&&(u.wav=!0),(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/aac;").replace(/^no$/,""))&&(u.m4a=!0),h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(u.webm=!0),h.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(s.edge)u.dolby=!0;else if(s.safari&&s.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var r=parseInt(RegExp.$1,10),a=parseInt(RegExp.$2,10);(r===10&&a>=11||r>10)&&(u.dolby=!0)}}}catch{}return u}e.exports=n()},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function s(){if(typeof importScripts=="function")return t;var u=document.createElement("video"),n=!!u.canPlayType;try{n&&(u.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(t.ogg=!0),u.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.h264=!0,t.mp4=!0),u.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(t.webm=!0),u.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(t.vp9=!0),u.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.hls=!0))}catch{}return t}e.exports=s()},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={available:!1,cancel:"",keyboard:!1,request:""};function s(){if(typeof importScripts=="function")return t;var u,n="Fullscreen",h="FullScreen",o=["request"+n,"request"+h,"webkitRequest"+n,"webkitRequest"+h,"msRequest"+n,"msRequest"+h,"mozRequest"+h,"mozRequest"+n];for(u=0;u<o.length;u++)if(document.documentElement[o[u]]){t.available=!0,t.request=o[u];break}var r=["cancel"+h,"exit"+n,"webkitCancel"+h,"webkitExit"+n,"msCancel"+h,"msExit"+n,"mozCancel"+h,"mozExit"+n];if(t.available){for(u=0;u<r.length;u++)if(document[r[u]]){t.cancel=r[u];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(t.keyboard=!0),Object.defineProperty(t,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),t}e.exports=s()},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Between:t(349),BetweenPoints:t(350),BetweenPointsY:t(813),BetweenY:t(814),CounterClockwise:t(815),Normalize:t(351),Random:t(816),RandomDegrees:t(817),Reverse:t(818),RotateTo:t(819),ShortestBetween:t(820),Wrap:t(269),WrapDegrees:t(270)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return Math.atan2(u.x-s.x,u.y-s.y)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){return Math.atan2(n-s,h-u)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=function(n){return n>Math.PI&&(n-=s.PI2),Math.abs(((n+s.TAU)%s.PI2-s.PI2)%s.PI2)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(137),u=function(){return s(-Math.PI,Math.PI)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(137),u=function(){return s(-180,180)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(351),u=function(n){return s(n+Math.PI)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=function(n,h,o){return o===void 0&&(o=.05),n===h||(Math.abs(h-n)<=o||Math.abs(h-n)>=s.PI2-o?n=h:(Math.abs(h-n)>Math.PI&&(h<n?h+=s.PI2:h-=s.PI2),h>n?n+=o:h<n&&(n-=o))),n};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=u-s;if(n===0)return 0;var h=Math.floor((n- -180)/360);return n-h*360};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Between:t(50),BetweenPoints:t(352),BetweenPointsSquared:t(822),Chebyshev:t(823),Power:t(824),Snake:t(825),Squared:t(353)}},function(e,c){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.x-u.x,h=s.y-u.y;return n*n+h*h};e.exports=t},function(e,c){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){return Math.max(Math.abs(s-n),Math.abs(u-h))};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h,o){return o===void 0&&(o=2),Math.sqrt(Math.pow(n-s,o)+Math.pow(h-u,o))};e.exports=t},function(e,c){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){return Math.abs(s-n)+Math.abs(u-h)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Back:t(334),Bounce:t(335),Circular:t(336),Cubic:t(337),Elastic:t(338),Expo:t(339),Linear:t(340),Quadratic:t(341),Quartic:t(342),Quintic:t(343),Sine:t(344),Stepped:t(345)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Ceil:t(828),Equal:t(124),Floor:t(829),GreaterThan:t(354),LessThan:t(355)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1e-4),Math.ceil(s-u)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1e-4),Math.floor(s+u)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Bezier:t(831),CatmullRom:t(832),CubicBezier:t(358),Linear:t(833),QuadraticBezier:t(359),SmoothStep:t(360),SmootherStep:t(834)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(356),u=function(n,h){for(var o=0,r=n.length-1,a=0;a<=r;a++)o+=Math.pow(1-h,r-a)*Math.pow(h,a)*n[a]*s(r,a);return o};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(194),u=function(n,h){var o=n.length-1,r=o*h,a=Math.floor(r);return n[0]===n[o]?(h<0&&(a=Math.floor(r=o*(1+h))),s(r-a,n[(a-1+o)%o],n[a],n[(a+1)%o],n[(a+2)%o])):h<0?n[0]-(s(-r,n[0],n[0],n[1],n[1])-n[0]):h>1?n[o]-(s(r-o,n[o],n[o],n[o-1],n[o-1])-n[o]):s(r-a,n[a?a-1:0],n[a],n[o<a+1?o:a+1],n[o<a+2?o:a+2])};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(135),u=function(n,h){var o=n.length-1,r=o*h,a=Math.floor(r);return h<0?s(n[0],n[1],r):h>1?s(n[o],n[o-1],o-r):s(n[a],n[a+1>o?o:a+1],r-a)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(183),u=function(n,h,o){return h+(o-h)*s(n,0,1)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GetNext:t(361),IsSize:t(138),IsValue:t(836)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s>0&&(s&s-1)==0};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Ceil:t(139),Floor:t(76),To:t(838)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){return n===void 0&&(n=0),u===0?s:(s-=n,s=u*Math.round(s/u),h?(n+s)/u:n+s)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=new s({initialize:function(h){h===void 0&&(h=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],h&&this.init(h)},rnd:function(){var n=2091639*this.s0+this.c*23283064365386963e-26;return this.c=n|0,this.s0=this.s1,this.s1=this.s2,this.s2=n-this.c,this.s2},hash:function(n){var h,o=this.n;n=n.toString();for(var r=0;r<n.length;r++)o+=n.charCodeAt(r),h=.02519603282416938*o,o=h>>>0,h-=o,h*=o,o=h>>>0,h-=o,o+=h*4294967296;return this.n=o,(o>>>0)*23283064365386963e-26},init:function(n){typeof n=="string"?this.state(n):this.sow(n)},sow:function(n){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!n)for(var h=0;h<n.length&&n[h]!=null;h++){var o=n[h];this.s0-=this.hash(o),this.s0+=~~(this.s0<0),this.s1-=this.hash(o),this.s1+=~~(this.s1<0),this.s2-=this.hash(o),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(n,h){return Math.floor(this.realInRange(0,h-n+1)+n)},between:function(n,h){return Math.floor(this.realInRange(0,h-n+1)+n)},realInRange:function(n,h){return this.frac()*(h-n)+n},normal:function(){return 1-2*this.frac()},uuid:function(){var n="",h="";for(h=n="";n++<36;h+=~n%5|n*3&4?(n^15?8^this.frac()*(n^20?16:4):4).toString(16):"-");return h},pick:function(n){return n[this.integerInRange(0,n.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(n){return n[~~(Math.pow(this.frac(),2)*(n.length-1)+.5)]},timestamp:function(n,h){return this.realInRange(n||9466848e5,h||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(n){return typeof n=="string"&&n.match(/^!rnd/)&&(n=n.split(","),this.c=parseFloat(n[1]),this.s0=parseFloat(n[2]),this.s1=parseFloat(n[3]),this.s2=parseFloat(n[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(n){for(var h=n.length-1,o=h;o>0;o--){var r=Math.floor(this.frac()*(o+1)),a=n[r];n[r]=n[o],n[o]=a}return n}});e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=0,n=0;n<s.length;n++)u+=+s[n];return u/s.length};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){u===void 0&&(u=0),n===void 0&&(n=10);var h=Math.pow(n,-u);return Math.ceil(s*h)/h};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return Math.abs(s-u)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(69),h=t(1),o=new n,r=new u({initialize:function a(d,l,f,v){d===void 0&&(d=0),l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=a.DefaultOrder),this._x=d,this._y=l,this._z=f,this._order=v,this.onChangeCallback=h},x:{get:function(){return this._x},set:function(a){this._x=a,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(a){this._y=a,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(a){this._z=a,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(a){this._order=a,this.onChangeCallback(this)}},set:function(a,d,l,f){return f===void 0&&(f=this._order),this._x=a,this._y=d,this._z=l,this._order=f,this.onChangeCallback(this),this},copy:function(a){return this.set(a.x,a.y,a.z,a.order)},setFromQuaternion:function(a,d,l){return d===void 0&&(d=this._order),l===void 0&&(l=!1),o.fromQuat(a),this.setFromRotationMatrix(o,d,l)},setFromRotationMatrix:function(a,d,l){d===void 0&&(d=this._order),l===void 0&&(l=!1);var f=a.val,v=f[0],g=f[4],p=f[8],m=f[1],y=f[5],T=f[9],C=f[2],S=f[6],E=f[10],P=0,M=0,A=0,R=.99999;switch(d){case"XYZ":{M=Math.asin(s(p,-1,1)),Math.abs(p)<R?(P=Math.atan2(-T,E),A=Math.atan2(-g,v)):P=Math.atan2(S,y);break}case"YXZ":{P=Math.asin(-s(T,-1,1)),Math.abs(T)<R?(M=Math.atan2(p,E),A=Math.atan2(m,y)):M=Math.atan2(-C,v);break}case"ZXY":{P=Math.asin(s(S,-1,1)),Math.abs(S)<R?(M=Math.atan2(-C,E),A=Math.atan2(-g,y)):A=Math.atan2(m,v);break}case"ZYX":{M=Math.asin(-s(C,-1,1)),Math.abs(C)<R?(P=Math.atan2(S,E),A=Math.atan2(m,v)):A=Math.atan2(-g,y);break}case"YZX":{A=Math.asin(s(m,-1,1)),Math.abs(m)<R?(P=Math.atan2(-T,y),M=Math.atan2(-C,v)):M=Math.atan2(p,E);break}case"XZY":{A=Math.asin(-s(g,-1,1)),Math.abs(g)<R?(P=Math.atan2(S,y),M=Math.atan2(p,v)):P=Math.atan2(-T,E);break}}return this._x=P,this._y=M,this._z=A,this._order=d,l&&this.onChangeCallback(this),this}});r.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],r.DefaultOrder="XYZ",e.exports=r},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){u===void 0&&(u=0),n===void 0&&(n=10);var h=Math.pow(n,-u);return Math.floor(s*h)/h};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s/u/1e3};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s==parseFloat(s)?!(s%2):void 0};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s===parseFloat(s)?!(s%2):void 0};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return Math.min(s+u,n)};e.exports=t},function(e,c){/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=s.length;if(u===0)return 0;s.sort(function(h,o){return h-o});var n=Math.floor(u/2);return u%2==0?(s[n]+s[n-1])/2:s[n]};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return Math.max(s-u,n)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){n===void 0&&(n=u+1);var o=(s-u)/(n-u);return o>1?h!==void 0?(o=(h-s)/(h-n),o<0&&(o=0)):o=1:o<0&&(o=0),o};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=1);var n=Math.random()*2*Math.PI;return s.x=Math.cos(n)*u,s.y=Math.sin(n)*u,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=1);var n=Math.random()*2*Math.PI,h=Math.random()*2-1,o=Math.sqrt(1-h*h)*u;return s.x=Math.cos(n)*o,s.y=Math.sin(n)*o,s.z=h*u,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u=1),s.x=(Math.random()*2-1)*u,s.y=(Math.random()*2-1)*u,s.z=(Math.random()*2-1)*u,s.w=(Math.random()*2-1)*u,s};e.exports=t},function(e,c){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h,o){return s.x=u+o*Math.cos(h),s.y=n+o*Math.sin(h),s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){u===void 0&&(u=0),n===void 0&&(n=10);var h=Math.pow(n,-u);return Math.round(s*h)/h};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){u===void 0&&(u=1),n===void 0&&(n=1),h===void 0&&(h=1),h*=Math.PI/s;for(var o=[],r=[],a=0;a<s;a++)n-=u*h,u+=n*h,o[a]=n,r[a]=u;return{sin:r,cos:o,length:s}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3),u=function(n,h,o,r){r===void 0&&(r=new s);var a=0,d=0,l=h*o;return n>0&&n<=l&&(n>h-1?(d=Math.floor(n/h),a=n-d*h):a=n),r.set(a,d)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return Math.abs(s-u)<=n};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(39),u=t(69),n=t(365),h=new u,o=new n,r=new s,a=function(d,l,f){return o.setAxisAngle(l,f),h.fromRotationTranslation(o,r.set(0,0,0)),d.transformMat4(h)};e.exports=a},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addtexture"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="onerror"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="onload"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removetexture"},function(e,c){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(e,c){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineafterflush"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinebeforeflush"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinebind"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineboot"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinedestroy"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinerebind"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineresize"},function(e,c){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},function(e,c){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},function(e,c){e.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},function(e,c){e.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,c){e.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,c){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},function(e,c){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},function(e,c){e.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,c){e.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,c){e.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},function(e,c){e.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},function(e,c){e.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},function(e,c){e.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GenerateTexture:t(388),Palettes:t(889)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ARNE16:t(389),C64:t(890),CGA:t(891),JMP:t(892),MSX:t(893)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Path:t(895),MoveTo:t(393),CubicBezier:t(390),Curve:t(94),Ellipse:t(391),Line:t(392),QuadraticBezier:t(394),Spline:t(395)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(390),n=t(391),h=t(5),o=t(392),r=t(393),a=t(394),d=t(10),l=t(395),f=t(3),v=t(14),g=new s({initialize:function(m,y){m===void 0&&(m=0),y===void 0&&(y=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new f,this._tmpVec2A=new f,this._tmpVec2B=new f,typeof m=="object"?this.fromJSON(m):this.startPoint.set(m,y)},add:function(p){return this.curves.push(p),this},circleTo:function(p,m,y){return m===void 0&&(m=!1),this.ellipseTo(p,p,0,360,m,y)},closePath:function(){var p=this.curves[0].getPoint(0),m=this.curves[this.curves.length-1].getPoint(1);return p.equals(m)||this.curves.push(new o(m,p)),this},cubicBezierTo:function(p,m,y,T,C,S){var E=this.getEndPoint(),P,M,A;return p instanceof f?(P=p,M=m,A=y):(P=new f(y,T),M=new f(C,S),A=new f(p,m)),this.add(new u(E,P,M,A))},quadraticBezierTo:function(p,m,y,T){var C=this.getEndPoint(),S,E;return p instanceof f?(S=p,E=m):(S=new f(y,T),E=new f(p,m)),this.add(new a(C,S,E))},draw:function(p,m){for(var y=0;y<this.curves.length;y++){var T=this.curves[y];!T.active||T.draw(p,m)}return p},ellipseTo:function(p,m,y,T,C,S){var E=new n(0,0,p,m,y,T,C,S),P=this.getEndPoint(this._tmpVec2A),M=E.getStartPoint(this._tmpVec2B);return P.subtract(M),E.x=P.x,E.y=P.y,this.add(E)},fromJSON:function(p){this.curves=[],this.cacheLengths=[],this.startPoint.set(p.x,p.y),this.autoClose=p.autoClose;for(var m=0;m<p.curves.length;m++){var y=p.curves[m];switch(y.type){case"LineCurve":this.add(o.fromJSON(y));break;case"EllipseCurve":this.add(n.fromJSON(y));break;case"SplineCurve":this.add(l.fromJSON(y));break;case"CubicBezierCurve":this.add(u.fromJSON(y));break;case"QuadraticBezierCurve":this.add(a.fromJSON(y));break}}return this},getBounds:function(p,m){p===void 0&&(p=new d),m===void 0&&(m=16),p.x=Number.MAX_VALUE,p.y=Number.MAX_VALUE;for(var y=new d,T=v.MIN_SAFE_INTEGER,C=v.MIN_SAFE_INTEGER,S=0;S<this.curves.length;S++){var E=this.curves[S];!E.active||(E.getBounds(y,m),p.x=Math.min(p.x,y.x),p.y=Math.min(p.y,y.y),T=Math.max(T,y.right),C=Math.max(C,y.bottom))}return p.right=T,p.bottom=C,p},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var p=[],m=0,y=0;y<this.curves.length;y++)m+=this.curves[y].getLength(),p.push(m);return this.cacheLengths=p,p},getEndPoint:function(p){return p===void 0&&(p=new f),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,p):p.copy(this.startPoint),p},getLength:function(){var p=this.getCurveLengths();return p[p.length-1]},getPoint:function(p,m){m===void 0&&(m=new f);for(var y=p*this.getLength(),T=this.getCurveLengths(),C=0;C<T.length;){if(T[C]>=y){var S=T[C]-y,E=this.curves[C],P=E.getLength(),M=P===0?0:1-S/P;return E.getPointAt(M,m)}C++}return null},getPoints:function(p){p===void 0&&(p=12);for(var m=[],y,T=0;T<this.curves.length;T++){var C=this.curves[T];if(!!C.active)for(var S=C.getResolution(p),E=C.getPoints(S),P=0;P<E.length;P++){var M=E[P];y&&y.equals(M)||(m.push(M),y=M)}}return this.autoClose&&m.length>1&&!m[m.length-1].equals(m[0])&&m.push(m[0]),m},getRandomPoint:function(p){return p===void 0&&(p=new f),this.getPoint(Math.random(),p)},getSpacedPoints:function(p){p===void 0&&(p=40);for(var m=[],y=0;y<=p;y++)m.push(this.getPoint(y/p));return this.autoClose&&m.push(m[0]),m},getStartPoint:function(p){return p===void 0&&(p=new f),p.copy(this.startPoint)},getTangent:function(p,m){m===void 0&&(m=new f);for(var y=p*this.getLength(),T=this.getCurveLengths(),C=0;C<T.length;){if(T[C]>=y){var S=T[C]-y,E=this.curves[C],P=E.getLength(),M=P===0?0:1-S/P;return E.getTangentAt(M,m)}C++}return null},lineTo:function(p,m){p instanceof f?this._tmpVec2B.copy(p):this._tmpVec2B.set(p,m);var y=this.getEndPoint(this._tmpVec2A);return this.add(new o([y.x,y.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(p){return p.unshift(this.getEndPoint()),this.add(new l(p))},moveTo:function(p,m){return p instanceof f?this.add(new r(p.x,p.y)):this.add(new r(p,m))},toJSON:function(){for(var p=[],m=0;m<this.curves.length;m++)p.push(this.curves[m].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:p}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});h.register("path",function(p,m){return new g(p,m)}),e.exports=g},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DataManager:t(101),DataManagerPlugin:t(897),Events:t(315)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(101),n=t(24),h=t(20),o=new s({Extends:u,initialize:function(a){u.call(this,a,a.sys.events),this.scene=a,this.systems=a.sys,a.sys.events.once(h.BOOT,this.boot,this),a.sys.events.on(h.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(h.DESTROY,this.destroy,this)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){u.prototype.destroy.call(this),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});n.register("DataManagerPlugin",o,"data"),e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Align:t(899),BaseShader:t(396),Bounds:t(902),Canvas:t(906),Color:t(397),ColorMatrix:t(198),Masks:t(916),RGB:t(200)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(123),u=t(17),n={In:t(900),To:t(901)};n=u(!1,n,s),e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BottomCenter:t(290),BottomLeft:t(291),BottomRight:t(292),Center:t(293),LeftCenter:t(295),QuickSet:t(289),RightCenter:t(296),TopCenter:t(297),TopLeft:t(298),TopRight:t(299)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BottomCenter:t(277),BottomLeft:t(278),BottomRight:t(279),LeftBottom:t(280),LeftCenter:t(281),LeftTop:t(282),QuickSet:t(276),RightBottom:t(283),RightCenter:t(284),RightTop:t(285),TopCenter:t(286),TopLeft:t(287),TopRight:t(288)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CenterOn:t(294),GetBottom:t(42),GetBounds:t(903),GetCenterX:t(87),GetCenterY:t(89),GetLeft:t(43),GetOffsetX:t(904),GetOffsetY:t(905),GetRight:t(44),GetTop:t(45),SetBottom:t(55),SetCenterX:t(88),SetCenterY:t(90),SetLeft:t(53),SetRight:t(54),SetTop:t(52)}},function(e,c,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(42),u=t(43),n=t(44),h=t(45),o=function(r,a){a===void 0&&(a={});var d=u(r),l=h(r);return a.x=d,a.y=l,a.width=n(r)-d,a.height=s(r)-l,a};e.exports=o},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.width*s.originX};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.height*s.originY};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CanvasInterpolation:t(367),CanvasPool:t(31),Smoothing:t(192),TouchAction:t(907),UserSelect:t(908)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===void 0&&(u="none"),s.style.msTouchAction=u,s.style["ms-touch-action"]=u,s.style["touch-action"]=u,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u="none");var n=["-webkit-","-khtml-","-moz-","-ms-",""];return n.forEach(function(h){s.style[h+"user-select"]=u}),s.style["-webkit-touch-callout"]=u,s.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(103),u=function(n){n===void 0&&(n=1024);var h=[],o=255,r,a=255,d=0,l=0;for(r=0;r<=o;r++)h.push({r:a,g:r,b:l,color:s(a,r,l)});for(d=255,r=o;r>=0;r--)h.push({r,g:d,b:l,color:s(r,d,l)});for(a=0,r=0;r<=o;r++,d--)h.push({r:a,g:d,b:r,color:s(a,d,r)});for(d=0,l=255,r=0;r<=o;r++,l--,a++)h.push({r:a,g:d,b:l,color:s(a,d,l)});if(n===1024)return h;var f=[],v=0,g=1024/n;for(r=0;r<n;r++)f.push(h[Math.floor(v)]),v+=g;return f};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u={r:s>>16&255,g:s>>8&255,b:s&255,a:255};return s>16777215&&(u.a=s>>>24),u};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(38),u=t(399),n=function(h,o,r){var a=r,d=r,l=r;if(o!==0){var f=r<.5?r*(1+o):r+o-r*o,v=2*r-f;a=u(v,f,h+1/3),d=u(v,f,h),l=u(v,f,h-1/3)}var g=new s;return g.setGLTo(a,d,l,1)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(188),u=function(n,h){n===void 0&&(n=1),h===void 0&&(h=1);for(var o=[],r=0;r<=359;r++)o.push(s(r/359,n,h));return o};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(135),u=function(o,r,a,d,l,f,v,g){v===void 0&&(v=100),g===void 0&&(g=0);var p=g/v;return{r:s(o,d,p),g:s(r,l,p),b:s(a,f,p)}},n=function(o,r,a,d){return a===void 0&&(a=100),d===void 0&&(d=0),u(o.r,o.g,o.b,r.r,r.g,r.b,a,d)},h=function(o,r,a,d,l,f){return l===void 0&&(l=100),f===void 0&&(f=0),u(o.r,o.g,o.b,r,a,d,l,f)};e.exports={RGBWithRGB:u,ColorWithRGB:h,ColorWithColor:n}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(195),u=t(38),n=function(h,o){return h===void 0&&(h=0),o===void 0&&(o=255),new u(s(h,o),s(h,o),s(h,o))};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(398),u=function(n,h,o,r,a){return r===void 0&&(r=255),a===void 0&&(a="#"),a==="#"?"#"+((1<<24)+(n<<16)+(h<<8)+o).toString(16).slice(1,7):"0x"+s(r)+s(n)+s(h)+s(o)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BitmapMask:t(310),GeometryMask:t(311)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={AddToDOM:t(142),DOMContentLoaded:t(400),GetInnerHeight:t(401),GetScreenOrientation:t(402),GetTarget:t(407),ParseXML:t(408),RemoveFromDOM:t(202),RequestAnimationFrame:t(386)};e.exports=s},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={EventEmitter:t(919)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(24),h=new s({Extends:u,initialize:function(){u.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});n.register("EventEmitter",h,"events"),e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(142),u=t(321),n=t(325),h=t(31),o=t(0),r=t(346),a=t(921),d=t(366),l=t(101),f=t(384),v=t(347),g=t(400),p=t(9),m=t(22),y=t(409),T=t(24),C=t(414),S=t(415),E=t(417),P=t(106),M=t(422),A=t(385),R=t(387),O=t(426),F=new o({initialize:function(G){this.config=new r(G),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new p,this.anims=new u(this),this.textures=new M(this),this.cache=new n(this),this.registry=new l(this),this.input=new y(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=v,this.scale=new S(this,this.config),this.sound=null,this.sound=O.create(this),this.loop=new A(this,this.config.fps),this.plugins=new C(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,g(this.boot.bind(this))},boot:function(){if(!T.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),d(this),a(this),f(this),s(this.canvas,this.config.parent),this.textures.once(P.READY,this.texturesReady,this),this.events.emit(m.BOOT)},texturesReady:function(){this.events.emit(m.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),R(this);var I=this.events;I.on(m.HIDDEN,this.onHidden,this),I.on(m.VISIBLE,this.onVisible,this),I.on(m.BLUR,this.onBlur,this),I.on(m.FOCUS,this.onFocus,this)},step:function(I,G){if(this.pendingDestroy)return this.runDestroy();var z=this.events;z.emit(m.PRE_STEP,I,G),z.emit(m.STEP,I,G),this.scene.update(I,G),z.emit(m.POST_STEP,I,G);var U=this.renderer;U.preRender(),z.emit(m.PRE_RENDER,U,I,G),this.scene.render(U),U.postRender(),z.emit(m.POST_RENDER,U,I,G)},headlessStep:function(I,G){if(this.pendingDestroy)return this.runDestroy();var z=this.events;z.emit(m.PRE_STEP,I,G),z.emit(m.STEP,I,G),this.scene.update(I,G),z.emit(m.POST_STEP,I,G),z.emit(m.PRE_RENDER),z.emit(m.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(m.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(m.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(I,G){G===void 0&&(G=!1),this.pendingDestroy=!0,this.removeCanvas=I,this.noReturn=G},runDestroy:function(){this.scene.destroy(),this.events.emit(m.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(h.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});e.exports=F},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(142),u=function(n){var h=n.config;if(!(!h.parent||!h.domCreateContainer)){var o=document.createElement("div");o.style.cssText=["display: block;","width: "+n.scale.width+"px;","height: "+n.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+h.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),n.domContainer=o,s(o,h.parent)}};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragenter"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragleave"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragover"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drop"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameout"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameover"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectdown"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragenter"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragleave"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragover"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drop"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectmove"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectout"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectover"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdown"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointermove"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerout"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerover"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerup"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wheel"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectup"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectwheel"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="process"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdown"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdownoutside"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointermove"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerout"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerover"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerup"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerupoutside"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wheel"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerlockchange"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="preupdate"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="shutdown"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addfile"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="filecomplete"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="filecomplete-"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loaderror"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="load"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fileprogress"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postprocess"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="progress"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};e.exports=s},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(!n.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var h=s.source[u];s.add("__BASE",u,0,0,h.width,h.height);for(var o=n.getElementsByTagName("SubTexture"),r,a=0;a<o.length;a++){var d=o[a].attributes,l=d.name.value,f=parseInt(d.x.value,10),v=parseInt(d.y.value,10),g=parseInt(d.width.value,10),p=parseInt(d.height.value,10);if(r=s.add(l,u,f,v,g,p),d.frameX){var m=Math.abs(parseInt(d.frameX.value,10)),y=Math.abs(parseInt(d.frameY.value,10)),T=parseInt(d.frameWidth.value,10),C=parseInt(d.frameHeight.value,10);r.setTrim(g,p,m,y,T,C)}}return s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.source[u];return s.add("__BASE",u,0,0,n.width,n.height),s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.source[u];return s.add("__BASE",u,0,0,n.width,n.height),s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77),u=function(n,h,o){if(!o.frames&&!o.textures){console.warn("Invalid Texture Atlas JSON Array");return}var r=n.source[h];n.add("__BASE",h,0,0,r.width,r.height);for(var a=Array.isArray(o.textures)?o.textures[h].frames:o.frames,d,l=0;l<a.length;l++){var f=a[l];d=n.add(f.filename,h,f.frame.x,f.frame.y,f.frame.w,f.frame.h),f.trimmed&&d.setTrim(f.sourceSize.w,f.sourceSize.h,f.spriteSourceSize.x,f.spriteSourceSize.y,f.spriteSourceSize.w,f.spriteSourceSize.h),f.rotated&&(d.rotated=!0,d.updateUVsInverted());var v=f.anchor||f.pivot;v&&(d.customPivot=!0,d.pivotX=v.x,d.pivotY=v.y),d.customData=s(f)}for(var g in o)g!=="frames"&&(Array.isArray(o[g])?n.customData[g]=o[g].slice(0):n.customData[g]=o[g]);return n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77),u=function(n,h,o){if(!o.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var r=n.source[h];n.add("__BASE",h,0,0,r.width,r.height);var a=o.frames,d;for(var l in a)if(!!a.hasOwnProperty(l)){var f=a[l];d=n.add(l,h,f.frame.x,f.frame.y,f.frame.w,f.frame.h),f.trimmed&&d.setTrim(f.sourceSize.w,f.sourceSize.h,f.spriteSourceSize.x,f.spriteSourceSize.y,f.spriteSourceSize.w,f.spriteSourceSize.h),f.rotated&&(d.rotated=!0,d.updateUVsInverted());var v=f.anchor||f.pivot;v&&(d.customPivot=!0,d.pivotX=v.x,d.pivotY=v.y),d.customData=s(f)}for(var g in o)g!=="frames"&&(Array.isArray(o[g])?n.customData[g]=o[g].slice(0):n.customData[g]=o[g]);return n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=function(n,h,o,r,a,d,l){var f=s(l,"frameWidth",null),v=s(l,"frameHeight",f);if(f===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var g=n.source[h];n.add("__BASE",h,0,0,g.width,g.height);var p=s(l,"startFrame",0),m=s(l,"endFrame",-1),y=s(l,"margin",0),T=s(l,"spacing",0),C=Math.floor((a-y+T)/(f+T)),S=Math.floor((d-y+T)/(v+T)),E=C*S;E===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",n.key),(p>E||p<-E)&&(p=0),p<0&&(p=E+p),m!==-1&&(E=p+(m+1));for(var P=y,M=y,A=0,R=0,O=0;O<E;O++){A=0,R=0;var F=P+f,I=M+v;F>a&&(A=F-a),I>d&&(R=I-d),n.add(O,h,o+P,r+M,f-A,v-R),P+=f+T,P+f>a&&(P=y,M+=v+T)}return n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(2),u=function(n,h,o){var r=s(o,"frameWidth",null),a=s(o,"frameHeight",r);if(!r)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var d=n.source[0];n.add("__BASE",0,0,0,d.width,d.height),s(o,"startFrame",0),s(o,"endFrame",-1);for(var l=s(o,"margin",0),f=s(o,"spacing",0),v=h.cutX,g=h.cutY,p=h.cutWidth,m=h.cutHeight,y=h.realWidth,T=h.realHeight,C=Math.floor((y-l+f)/(r+f)),S=Math.floor((T-l+f)/(a+f)),E=h.x,P=r-E,M=r-(y-p-E),A=h.y,R=a-A,O=a-(T-m-A),F,I=l,G=l,z=0,U=h.sourceIndex,X=0;X<S;X++){for(var b=X===0,B=X===S-1,L=0;L<C;L++){var D=L===0,w=L===C-1;if(F=n.add(z,U,v+I,g+G,r,a),D||b||w||B){var N=D?E:0,V=b?A:0,Y=0,W=0;D&&(Y+=r-P),w&&(Y+=r-M),b&&(W+=a-R),B&&(W+=a-O);var H=r-Y,$=a-W;F.cutWidth=H,F.cutHeight=$,F.setTrim(r,a,N,V,H,$)}I+=f,D?I+=P:w?I+=M:I+=r,z++}I=l,G+=f,b?G+=R:B?G+=O:G+=a}return n};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=0,s=function(n,h,o,r){var a=t-r.y-r.height;n.add(o,h,r.x,a,r.width,r.height)},u=function(n,h,o){var r=n.source[h];n.add("__BASE",h,0,0,r.width,r.height),t=r.height;for(var a=o.split(`
`),d=/^[ ]*(- )*(\w+)+[: ]+(.*)/,l="",f="",v={x:0,y:0,width:0,height:0},g=0;g<a.length;g++){var p=a[g].match(d);if(!!p){var m=p[1]==="- ",y=p[2],T=p[3];if(m&&(f!==l&&(s(n,h,f,v),l=f),v={x:0,y:0,width:0,height:0}),y==="name"){f=T;continue}switch(y){case"x":case"y":case"width":case"height":v[y]=parseInt(T,10);break}}}return f!==l&&s(n,h,f,v),n};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="decoded"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="decodedall"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="detune"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="detune"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="mute"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="rate"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="volume"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="looped"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="mute"},function(e,c){/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pan"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pauseall"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="play"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="rate"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resumeall"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seek"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stopall"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="unlocked"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="volume"},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Events:t(75),DisplayList:t(1012),GameObjectCreator:t(16),GameObjectFactory:t(5),UpdateList:t(1040),Components:t(11),GetCalcMatrix:t(19),BuildGameObject:t(28),BuildGameObjectAnimation:t(439),GameObject:t(15),BitmapText:t(148),Blitter:t(213),Bob:t(440),Container:t(214),DOMElement:t(442),DynamicBitmapText:t(215),Extern:t(444),Graphics:t(216),Group:t(113),Image:t(125),Layer:t(219),Particles:t(1074),PathFollower:t(457),RenderTexture:t(221),RetroFont:t(1082),Rope:t(223),Sprite:t(73),Text:t(224),GetTextSize:t(458),MeasureText:t(460),TextStyle:t(459),TileSprite:t(225),Zone:t(129),Video:t(226),Shape:t(34),Arc:t(461),Curve:t(462),Ellipse:t(463),Grid:t(464),IsoBox:t(465),IsoTriangle:t(466),Line:t(467),Polygon:t(468),Rectangle:t(473),Star:t(474),Triangle:t(475),Factories:{Blitter:t(1130),Container:t(1131),DOMElement:t(1132),DynamicBitmapText:t(1133),Extern:t(1134),Graphics:t(1135),Group:t(1136),Image:t(1137),Layer:t(1138),Particles:t(1139),PathFollower:t(1140),RenderTexture:t(1141),Rope:t(1142),Sprite:t(1143),StaticBitmapText:t(1144),Text:t(1145),TileSprite:t(1146),Zone:t(1147),Video:t(1148),Arc:t(1149),Curve:t(1150),Ellipse:t(1151),Grid:t(1152),IsoBox:t(1153),IsoTriangle:t(1154),Line:t(1155),Polygon:t(1156),Rectangle:t(1157),Star:t(1158),Triangle:t(1159)},Creators:{Blitter:t(1160),Container:t(1161),DynamicBitmapText:t(1162),Graphics:t(1163),Group:t(1164),Image:t(1165),Layer:t(1166),Particles:t(1167),RenderTexture:t(1168),Rope:t(1169),Sprite:t(1170),StaticBitmapText:t(1171),Text:t(1172),TileSprite:t(1173),Zone:t(1174),Video:t(1175)}};s.Shader=t(229),s.Mesh=t(230),s.PointLight=t(150),s.Factories.Shader=t(1184),s.Factories.Mesh=t(1185),s.Factories.PointLight=t(1186),s.Creators.Shader=t(1187),s.Creators.Mesh=t(1188),s.Creators.PointLight=t(1189),s.Light=t(481),s.LightsManager=t(482),s.LightsPlugin=t(1190),e.exports=s},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(110),n=t(24),h=t(75),o=t(20),r=t(79),a=new s({Extends:u,initialize:function(l){u.call(this,l),this.sortChildrenFlag=!1,this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.events.once(o.DESTROY,this.destroy,this)},addChildCallback:function(d){d.displayList&&d.displayList!==this&&d.removeFromDisplayList(),d.displayList||(this.queueDepthSort(),d.displayList=this,d.emit(h.ADDED_TO_SCENE,d,this.scene),this.events.emit(o.ADDED_TO_SCENE,d,this.scene))},removeChildCallback:function(d){this.queueDepthSort(),d.displayList=null,d.emit(h.REMOVED_FROM_SCENE,d,this.scene),this.events.emit(o.REMOVED_FROM_SCENE,d,this.scene)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(r(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(d,l){return d._depth-l._depth},getChildren:function(){return this.list},shutdown:function(){for(var d=this.list,l=d.length;l--;)d[l].destroy(!0);d.length=0,this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});n.register("DisplayList",a,"displayList"),e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CheckMatrix:t(209),MatrixToString:t(1014),ReverseColumns:t(1015),ReverseRows:t(1016),Rotate180:t(1017),RotateLeft:t(1018),RotateMatrix:t(147),RotateRight:t(1019),Translate:t(1020),TransposeMatrix:t(435)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(186),u=t(209),n=function(h){var o="";if(!u(h))return o;for(var r=0;r<h.length;r++){for(var a=0;a<h[r].length;a++){var d=h[r][a].toString();d!=="undefined"?o+=s(d,2):o+="?",a<h[r].length-1&&(o+=" |")}if(r<h.length-1){o+=`
`;for(var l=0;l<h[r].length;l++)o+="---",l<h[r].length-1&&(o+="+");o+=`
`}}return o};e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.reverse()};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){for(var u=0;u<s.length;u++)s[u].reverse();return s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(147),u=function(n){return s(n,180)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(147),u=function(n){return s(n,90)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(147),u=function(n){return s(n,-90)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(178),u=t(179),n=function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),r!==0&&(r<0?s(h,Math.abs(r)):u(h,r)),o!==0)for(var a=0;a<h.length;a++){var d=h[a];o<0?s(d,Math.abs(o)):u(d,o)}return h};e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h,o){if(o===void 0&&(o=s),n>0){var r=n-s.length;if(r<=0)return null}if(!Array.isArray(u))return s.indexOf(u)===-1?(s.push(u),h&&h.call(o,u),u):null;for(var a=u.length-1;a>=0;)s.indexOf(u[a])!==-1&&u.splice(a,1),a--;if(a=u.length,a===0)return null;n>0&&a>r&&(u.splice(r),a=r);for(var d=0;d<a;d++){var l=u[d];s.push(l),h&&h.call(o,l)}return u};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h,o,r){if(n===void 0&&(n=0),r===void 0&&(r=s),h>0){var a=h-s.length;if(a<=0)return null}if(!Array.isArray(u))return s.indexOf(u)===-1?(s.splice(n,0,u),o&&o.call(r,u),u):null;for(var d=u.length-1;d>=0;)s.indexOf(u[d])!==-1&&u.pop(),d--;if(d=u.length,d===0)return null;h>0&&d>a&&(u.splice(a),d=a);for(var l=d-1;l>=0;l--){var f=u[l];s.splice(n,0,f),o&&o.call(r,f)}return u};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.indexOf(u);return n!==-1&&n<s.length&&(s.splice(n,1),s.push(u)),u};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,h,o,r,a){r===void 0&&(r=0),a===void 0&&(a=n.length);var d=0;if(s(n,r,a))for(var l=r;l<a;l++){var f=n[l];f[h]===o&&d++}return d};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h,o=[null];for(h=3;h<arguments.length;h++)o.push(arguments[h]);for(h=0;h<s.length;h++)o[0]=s[h],u.apply(n,o);return s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,h,o,r,a){if(r===void 0&&(r=0),a===void 0&&(a=n.length),s(n,r,a)){var d,l=[null];for(d=5;d<arguments.length;d++)l.push(arguments[d]);for(d=r;d<a;d++)l[0]=n[d],h.apply(o,l)}return n};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.indexOf(u);if(n>0){var h=s[n-1],o=s.indexOf(h);s[n]=h,s[o]=u}return s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h=s.indexOf(u);if(h===-1||n<0||n>=s.length)throw new Error("Supplied index out of bounds");return h!==n&&(s.splice(h,1),s.splice(n,0,u)),u};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.indexOf(u);if(n!==-1&&n<s.length-1){var h=s[n+1],o=s.indexOf(h);s[n]=h,s[o]=u}return s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===n)return s;var h=s.indexOf(u),o=s.indexOf(n);if(h<0||o<0)throw new Error("Supplied items must be elements of the same array");return h>o||(s.splice(h,1),o===s.length-1?s.push(u):s.splice(o,0,u)),s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===n)return s;var h=s.indexOf(u),o=s.indexOf(n);if(h<0||o<0)throw new Error("Supplied items must be elements of the same array");return h<o||(s.splice(h,1),o===0?s.unshift(u):s.splice(o,0,u)),s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(363),u=function(n,h,o){n===void 0&&(n=0),h===void 0&&(h=null),o===void 0&&(o=1),h===null&&(h=n,n=0);for(var r=[],a=Math.max(s((h-n)/(o||1)),0),d=0;d<a;d++)r.push(n),n+=o;return r};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74),u=function(n,h,o,r){if(r===void 0&&(r=n),h<0||h>n.length-1)throw new Error("Index out of bounds");var a=s(n,h);return o&&o.call(r,a),a};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,h,o,r,a){if(h===void 0&&(h=0),o===void 0&&(o=n.length),a===void 0&&(a=n),s(n,h,o)){var d=o-h,l=n.splice(h,d);if(r)for(var f=0;f<l.length;f++){var v=l[f];r.call(a,v)}return l}else return[]};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(74),u=function(n,h,o){h===void 0&&(h=0),o===void 0&&(o=n.length);var r=h+Math.floor(Math.random()*o);return s(n,r)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h=s.indexOf(u),o=s.indexOf(n);return h!==-1&&o===-1?(s[h]=n,!0):!1};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.indexOf(u);return n!==-1&&n>0&&(s.splice(n,1),s.unshift(u)),u};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(78),u=function(n,h,o,r,a){if(r===void 0&&(r=0),a===void 0&&(a=n.length),s(n,r,a))for(var d=r;d<a;d++){var l=n[d];l.hasOwnProperty(h)&&(l[h]=o)}return n};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){if(u===n)return s;var h=s.indexOf(u),o=s.indexOf(n);if(h<0||o<0)throw new Error("Supplied items must be elements of the same array");return s[h]=n,s[o]=u,s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(211),n=t(24),h=t(20),o=new s({Extends:u,initialize:function(a){u.call(this),this.checkQueue=!0,this.scene=a,this.systems=a.sys,a.sys.events.once(h.BOOT,this.boot,this),a.sys.events.on(h.START,this.start,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){var r=this.systems.events;r.on(h.PRE_UPDATE,this.update,this),r.on(h.UPDATE,this.sceneUpdate,this),r.once(h.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(r,a){for(var d=this._active,l=d.length,f=0;f<l;f++){var v=d[f];v.active&&v.preUpdate.call(v,r,a)}},shutdown:function(){for(var r=this._active.length;r--;)this._active[r].destroy(!0);for(r=this._pending.length;r--;)this._pending[r].destroy(!0);for(r=this._destroy.length;r--;)this._destroy[r].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var a=this.systems.events;a.off(h.PRE_UPDATE,this.update,this),a.off(h.UPDATE,this.sceneUpdate,this),a.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});n.register("UpdateList",o,"updateList"),e.exports=o},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){if(n===void 0&&(n=!1),h===void 0)return h={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},h;var o=s.text,r=o.length,a=s.maxWidth,d=s.wordWrapCharCode,l=Number.MAX_VALUE,f=Number.MAX_VALUE,v=0,g=0,p=s.fontData.chars,m=s.fontData.lineHeight,y=s.letterSpacing,T=0,C=0,S=0,E=null,P=s._align,M=0,A=0,R=s.fontSize/s.fontData.size,O=R*s.scaleX,F=R*s.scaleY,I=null,G=0,z=[],U=Number.MAX_VALUE,X=0,b=0,B=0,L,D=[],w=[],N=null;if(a>0){for(L=0;L<r;L++){if(S=o.charCodeAt(L),S===10){N!==null&&(D.push({word:N.word,i:N.i,x:N.x*O,y:N.y*F,w:N.w*O,h:N.h*F,cr:!0}),N=null),T=0,C+=m,I=null;continue}if(E=p[S],!!E){if(I!==null)var V=E.kerning[G];S===d?N!==null&&(D.push({word:N.word,i:N.i,x:N.x*O,y:N.y*F,w:N.w*O,h:N.h*F,cr:!1}),N=null):(N===null&&(N={word:"",i:L,x:T,y:C,w:0,h:m,cr:!1}),N.word=N.word.concat(o[L]),N.w+=E.xOffset+E.xAdvance+(V!==void 0?V:0)),T+=E.xAdvance+y,I=E,G=S}}N!==null&&D.push({word:N.word,i:N.i,x:N.x*O,y:N.y*F,w:N.w*O,h:N.h*F,cr:!1}),T=0,C=0,I=null,G=0;var Y,W=0,H=[];for(L=0;L<D.length;L++){var $=D[L],K=$.x,Z=$.x+$.w;if(Y){var J=K-(Y.x+Y.w);W=K-(J+Y.w),Y=null}var k=K-W,Q=Z-W;k>a||Q>a?(H.push($.i-1),$.cr?(H.push($.i+$.word.length),W=0,Y=null):Y=$):$.cr&&(H.push($.i+$.word.length),W=0,Y=null)}var q=function(Tt,mt,Vt){return Tt.substr(0,mt)+Vt+Tt.substr(mt+1)};for(L=H.length-1;L>=0;L--)o=q(o,H[L],`
`);h.wrappedText=o,r=o.length,D=[],N=null}var at=0;for(L=0;L<r;L++){if(S=o.charCodeAt(L),S===10){N!==null&&(D.push({word:N.word,i:N.i,x:N.x*O,y:N.y*F,w:N.w*O,h:N.h*F}),N=null),T=0,C+=m,I=null,z[b]=B,B>X&&(X=B),B<U&&(U=B),b++,B=0;continue}if(E=p[S],!!E){if(M=T,A=C,I!==null){var it=E.kerning[G];M+=it!==void 0?it:0}l>M&&(l=M),f>A&&(f=A);var _=M+E.xAdvance,j=A+m;v<_&&(v=_),g<j&&(g=j);var ot=E.xOffset+E.xAdvance+(it!==void 0?it:0);S===d?N!==null&&(D.push({word:N.word,i:N.i,x:N.x*O,y:N.y*F,w:N.w*O,h:N.h*F}),N=null):(N===null&&(N={word:"",i:at,x:T,y:C,w:0,h:m}),N.word=N.word.concat(o[L]),N.w+=ot),w.push({i:at,char:o[L],code:S,x:(E.xOffset+T)*R,y:(E.yOffset+C)*R,w:E.width*R,h:E.height*R,t:C*R,r:_*R,b:m*R,line:b,glyph:E}),T+=E.xAdvance+y,I=E,G=S,B=_*R,at++}}if(N!==null&&D.push({word:N.word,i:N.i,x:N.x*O,y:N.y*F,w:N.w*O,h:N.h*F}),z[b]=B,B>X&&(X=B),B<U&&(U=B),P>0)for(var tt=0;tt<w.length;tt++){var rt=w[tt];if(P===1){var Nt=(X-z[rt.line])/2;rt.x+=Nt,rt.r+=Nt}else if(P===2){var zt=X-z[rt.line];rt.x+=zt,rt.r+=zt}}var vt=h.local,ut=h.global,St=h.lines;return vt.x=l*R,vt.y=f*R,vt.width=v*R,vt.height=g*R,ut.x=s.x-s._displayOriginX+l*O,ut.y=s.y-s._displayOriginY+f*F,ut.width=v*O,ut.height=g*F,St.shortest=U,St.longest=X,St.lengths=z,u&&(vt.x=Math.ceil(vt.x),vt.y=Math.ceil(vt.y),vt.width=Math.ceil(vt.width),vt.height=Math.ceil(vt.height),ut.x=Math.ceil(ut.x),ut.y=Math.ceil(ut.y),ut.width=Math.ceil(ut.width),ut.height=Math.ceil(ut.height),St.shortest=Math.ceil(U),St.longest=Math.ceil(X)),n&&(s._displayOriginX=s.originX*vt.width,s._displayOriginY=s.originY*vt.height,ut.x=s.x-s._displayOriginX*s.scaleX,ut.y=s.y-s._displayOriginY*s.scaleY,u&&(ut.x=Math.ceil(ut.x),ut.y=Math.ceil(ut.y))),h.words=D,h.characters=w,h.lines.height=m,h.scale=R,h.scaleX=s.scaleX,h.scaleY=s.scaleY,h};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(212),u=function(n,h,o,r,a,d,l){var f=n.sys.textures.get(o),v=f.get(r),g=n.sys.cache.xml.get(a);if(v&&g){var p=s(g,v,d,l,f);return n.sys.cache.bitmapFont.add(h,{data:p,texture:o,frame:r,fromAtlas:!0}),!0}else return!1};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1046),u=t(1048),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1047),u=t(19),n=t(12),h=function(o,r,a,d){var l=r._text,f=l.length;if(f!==0){a.addToRenderList(r);var v=o.pipelines.set(r.pipeline,r),g=u(r,a,d).calc,p=a.roundPixels,m=a.alpha,y=r.charColors,T=r.tintFill,C=n.getTintAppendFloatAlpha,S=C(r.tintTopLeft,m*r._alphaTL),E=C(r.tintTopRight,m*r._alphaTR),P=C(r.tintBottomLeft,m*r._alphaBL),M=C(r.tintBottomRight,m*r._alphaBR),A=r.frame.glTexture,R=v.setGameObject(r),O=r.getTextBounds(!1),F,I,G,z=O.characters,U=r.dropShadowX,X=r.dropShadowY,b=U!==0||X!==0;if(o.pipelines.preBatch(r),b){var B=r.dropShadowColor,L=r.dropShadowAlpha,D=C(B,m*L*r._alphaTL),w=C(B,m*L*r._alphaTR),N=C(B,m*L*r._alphaBL),V=C(B,m*L*r._alphaBR);for(F=0;F<z.length;F++)I=z[F],G=I.glyph,!(I.code===32||G.width===0||G.height===0)&&s(v,r,I,G,U,X,g,p,D,w,N,V,1,A,R)}for(F=0;F<z.length;F++)if(I=z[F],G=I.glyph,!(I.code===32||G.width===0||G.height===0))if(y[I.i]){var Y=y[I.i],W=Y.tintEffect,H=C(Y.tintTL,m*r._alphaTL),$=C(Y.tintTR,m*r._alphaTR),K=C(Y.tintBL,m*r._alphaBL),Z=C(Y.tintBR,m*r._alphaBR);s(v,r,I,G,0,0,g,p,H,$,K,Z,W,A,R)}else s(v,r,I,G,0,0,g,p,S,E,P,M,T,A,R);o.pipelines.postBatch(r)}};e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h,o,r,a,d,l,f,v,g,p,m,y){var T=n.x-u.displayOriginX+o,C=n.y-u.displayOriginY+r,S=T+n.w,E=C+n.h,P=a.getXRound(T,C,d),M=a.getYRound(T,C,d),A=a.getXRound(T,E,d),R=a.getYRound(T,E,d),O=a.getXRound(S,E,d),F=a.getYRound(S,E,d),I=a.getXRound(S,C,d),G=a.getYRound(S,C,d);s.batchQuad(u,P,M,A,R,O,F,I,G,h.u0,h.v0,h.u1,h.v1,l,f,v,g,p,m,y)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(30),u=function(n,h,o,r){var a=h._text,d=a.length,l=n.currentContext;if(!(d===0||!s(n,l,h,o,r))){o.addToRenderList(h);var f=h.fromAtlas?h.frame:h.texture.frames.__BASE,v=h.fontData.chars,g=h.fontData.lineHeight,p=h._letterSpacing,m=0,y=0,T=0,C=null,S=0,E=0,P=0,M=0,A=0,R=0,O=null,F=0,I=f.source.image,G=f.cutX,z=f.cutY,U=h._fontSize/h.fontData.size,X=h._align,b=0,B=0,L=h.getTextBounds(!1);h.maxWidth>0&&(a=L.wrappedText,d=a.length);var D=h._bounds.lines;X===1?B=(D.longest-D.lengths[0])/2:X===2&&(B=D.longest-D.lengths[0]),l.translate(-h.displayOriginX,-h.displayOriginY);for(var w=o.roundPixels,N=0;N<d;N++){if(T=a.charCodeAt(N),T===10){b++,X===1?B=(D.longest-D.lengths[b])/2:X===2&&(B=D.longest-D.lengths[b]),m=0,y+=g,O=null;continue}if(C=v[T],!!C){if(S=G+C.x,E=z+C.y,P=C.width,M=C.height,A=C.xOffset+m,R=C.yOffset+y,O!==null){var V=C.kerning[F];A+=V!==void 0?V:0}A*=U,R*=U,A+=B,m+=C.xAdvance+p,O=C,F=T,!(P===0||M===0||T===32)&&(w&&(A=Math.round(A),R=Math.round(R)),l.save(),l.translate(A,R),l.scale(U,U),l.drawImage(I,S,E,P,M,0,0,P,M),l.restore())}}l.restore()}};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1050),u=t(1051),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25),u=t(12),n=new s,h=function(o,r,a,d){var l=r.getRenderList();if(l.length!==0){var f=a.alpha*r.alpha;if(f!==0){a.addToRenderList(r);var v=o.pipelines.set(this.pipeline,r),g=a.scrollX*r.scrollFactorX,p=a.scrollY*r.scrollFactorY,m=n.copyFrom(a.matrix);d&&(m.multiplyWithOffset(d,-g,-p),g=0,p=0);var y=r.x-g,T=r.y-p,C=-1,S=!1,E=a.roundPixels;o.pipelines.preBatch(r);for(var P=0;P<l.length;P++){var M=l[P],A=M.frame,R=M.alpha*f;if(R!==0){var O=A.width,F=A.height,I=y+M.x+A.x,G=T+M.y+A.y;M.flipX&&(O*=-1,I+=A.width),M.flipY&&(F*=-1,G+=A.height);var z=I+O,U=G+F,X=m.getX(I,G),b=m.getY(I,G),B=m.getX(z,U),L=m.getY(z,U),D=u.getTintAppendFloatAlpha(M.tint,R);if(A.sourceIndex!==C){var w=v.setGameObject(r,A);C=A.sourceIndex}E&&(X=Math.round(X),b=Math.round(b),B=Math.round(B),L=Math.round(L)),v.batchQuad(r,X,b,X,L,B,L,B,b,A.u0,A.v0,A.u1,A.v1,D,D,D,D,S,A.glTexture,w)&&(C=-1)}}o.pipelines.postBatch(r)}}};e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){var o=u.getRenderList();if(o.length!==0){var r=s.currentContext,a=n.alpha*u.alpha;if(a!==0){n.addToRenderList(u),r.globalCompositeOperation=s.blendModes[u.blendMode],r.imageSmoothingEnabled=!(!s.antialias||u.frame.source.scaleMode);var d=u.x-n.scrollX*u.scrollFactorX,l=u.y-n.scrollY*u.scrollFactorY;r.save(),h&&h.copyToContext(r);for(var f=n.roundPixels,v=0;v<o.length;v++){var g=o[v],p=g.flipX||g.flipY,m=g.frame,y=m.canvasData,T=m.x,C=m.y,S=1,E=1,P=g.alpha*a;P!==0&&(r.globalAlpha=P,p?(g.flipX&&(S=-1,T-=y.width),g.flipY&&(E=-1,C-=y.height),r.save(),r.translate(g.x+d,g.y+l),r.scale(S,E),r.drawImage(m.source.image,y.x,y.y,y.width,y.height,T,C,y.width,y.height),r.restore()):(f&&(T=Math.round(T),C=Math.round(C)),r.drawImage(m.source.image,y.x,y.y,y.width,y.height,T+g.x+d,C+g.y+l,y.width,y.height)))}r.restore()}}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1053),u=t(1054),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){n.addToRenderList(u);var o=u.list,r=o.length;if(r!==0){var a=u.localTransform;h?(a.loadIdentity(),a.multiply(h),a.translate(u.x,u.y),a.rotate(u.rotation),a.scale(u.scaleX,u.scaleY)):a.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),s.pipelines.preBatch(u);var d=u.blendMode!==-1;d||s.setBlendMode(0);for(var l=u.alpha,f=u.scrollFactorX,v=u.scrollFactorY,g=0;g<r;g++){var p=o[g];if(!!p.willRender(n)){var m,y,T,C;if(p.alphaTopLeft!==void 0)m=p.alphaTopLeft,y=p.alphaTopRight,T=p.alphaBottomLeft,C=p.alphaBottomRight;else{var S=p.alpha;m=S,y=S,T=S,C=S}var E=p.scrollFactorX,P=p.scrollFactorY;!d&&p.blendMode!==s.currentBlendMode&&s.setBlendMode(p.blendMode);var M=p.mask;M&&M.preRenderWebGL(s,p,n);var A=p.type;A!==s.currentType&&(s.newType=!0,s.currentType=A),s.nextTypeMatch=g<r-1?o[g+1].type===s.currentType:!1,p.setScrollFactor(E*f,P*v),p.setAlpha(m*l,y*l,T*l,C*l),p.renderWebGL(s,p,n,a),p.setAlpha(m,y,T,C),p.setScrollFactor(E,P),M&&M.postRenderWebGL(s,n),s.newType=!1}}s.pipelines.postBatch(u)}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){n.addToRenderList(u);var o=u.list;if(o.length!==0){var r=u.localTransform;h?(r.loadIdentity(),r.multiply(h),r.translate(u.x,u.y),r.rotate(u.rotation),r.scale(u.scaleX,u.scaleY)):r.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY);var a=u.blendMode!==-1;a||s.setBlendMode(0);var d=u._alpha,l=u.scrollFactorX,f=u.scrollFactorY;u.mask&&u.mask.preRenderCanvas(s,null,n);for(var v=0;v<o.length;v++){var g=o[v];if(!!g.willRender(n)){var p=g.alpha,m=g.scrollFactorX,y=g.scrollFactorY;!a&&g.blendMode!==s.currentBlendMode&&s.setBlendMode(g.blendMode),g.setScrollFactor(m*l,y*f),g.setAlpha(p*d),g.renderCanvas(s,g,n,r),g.setAlpha(p),g.setScrollFactor(m,y)}}u.mask&&u.mask.postRenderCanvas(s)}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(443),u=t(443),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1058),u=t(1059),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(25),n=t(12),h=new u,o=function(r,a,d,l){var f=a.text,v=f.length;if(v!==0){d.addToRenderList(a);var g=r.pipelines.set(a.pipeline,a),p=s(a,d,l),m=p.sprite,y=p.calc,T=h,C=a.cropWidth>0||a.cropHeight>0;C&&(g.flush(),r.pushScissor(y.tx,y.ty,a.cropWidth*y.scaleX,a.cropHeight*y.scaleY));var S=a.frame,E=S.glTexture,P=a.tintFill,M=n.getTintAppendFloatAlpha(a.tintTopLeft,d.alpha*a._alphaTL),A=n.getTintAppendFloatAlpha(a.tintTopRight,d.alpha*a._alphaTR),R=n.getTintAppendFloatAlpha(a.tintBottomLeft,d.alpha*a._alphaBL),O=n.getTintAppendFloatAlpha(a.tintBottomRight,d.alpha*a._alphaBR),F=g.setGameObject(a),I=0,G=0,z=0,U=0,X=a.letterSpacing,b,B=0,L=0,D,w=a.scrollX,N=a.scrollY,V=a.fontData,Y=V.chars,W=V.lineHeight,H=a.fontSize/V.size,$=0,K=a._align,Z=0,J=0,k=a.getTextBounds(!1);a.maxWidth>0&&(f=k.wrappedText,v=f.length);var Q=a._bounds.lines;K===1?J=(Q.longest-Q.lengths[0])/2:K===2&&(J=Q.longest-Q.lengths[0]);var q=d.roundPixels,at=a.displayCallback,it=a.callbackData;r.pipelines.preBatch(a);for(var _=0;_<v;_++){if(z=f.charCodeAt(_),z===10){Z++,K===1?J=(Q.longest-Q.lengths[Z])/2:K===2&&(J=Q.longest-Q.lengths[Z]),I=0,G+=W,D=null;continue}if(b=Y[z],!!b){B=b.width,L=b.height;var j=b.xOffset+I-w,ot=b.yOffset+G-N;if(D!==null){var tt=b.kerning[U];j+=tt!==void 0?tt:0}if(I+=b.xAdvance+X,D=b,U=z,!(B===0||L===0||z===32)){if(H=a.fontSize/a.fontData.size,$=0,at){it.color=0,it.tint.topLeft=M,it.tint.topRight=A,it.tint.bottomLeft=R,it.tint.bottomRight=O,it.index=_,it.charCode=z,it.x=j,it.y=ot,it.scale=H,it.rotation=$,it.data=b.data;var rt=at(it);j=rt.x,ot=rt.y,H=rt.scale,$=rt.rotation,rt.color?(M=rt.color,A=rt.color,R=rt.color,O=rt.color):(M=rt.tint.topLeft,A=rt.tint.topRight,R=rt.tint.bottomLeft,O=rt.tint.bottomRight),M=n.getTintAppendFloatAlpha(M,d.alpha*a._alphaTL),A=n.getTintAppendFloatAlpha(A,d.alpha*a._alphaTR),R=n.getTintAppendFloatAlpha(R,d.alpha*a._alphaBL),O=n.getTintAppendFloatAlpha(O,d.alpha*a._alphaBR)}j*=H,ot*=H,j-=a.displayOriginX,ot-=a.displayOriginY,j+=J,T.applyITRS(j,ot,$,H,H),y.multiply(T,m);var Nt=b.u0,zt=b.v0,vt=b.u1,ut=b.v1,St=B,Tt=L,mt=m.e,Vt=m.f,Te=Tt*m.c+m.e,Ce=Tt*m.d+m.f,Se=St*m.a+Tt*m.c+m.e,Ee=St*m.b+Tt*m.d+m.f,Pe=St*m.a+m.e,Me=St*m.b+m.f;q&&(mt=Math.round(mt),Vt=Math.round(Vt),Te=Math.round(Te),Ce=Math.round(Ce),Se=Math.round(Se),Ee=Math.round(Ee),Pe=Math.round(Pe),Me=Math.round(Me)),g.batchQuad(a,mt,Vt,Te,Ce,Se,Ee,Pe,Me,Nt,zt,vt,ut,M,A,R,O,P,E,F)}}}C&&(g.flush(),r.popScissor()),r.pipelines.postBatch(a)}};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(30),u=function(n,h,o,r){var a=h._text,d=a.length,l=n.currentContext;if(!(d===0||!s(n,l,h,o,r))){o.addToRenderList(h);var f=h.fromAtlas?h.frame:h.texture.frames.__BASE,v=h.displayCallback,g=h.callbackData,p=h.fontData.chars,m=h.fontData.lineHeight,y=h._letterSpacing,T=0,C=0,S=0,E=null,P=0,M=0,A=0,R=0,O=0,F=0,I=null,G=0,z=h.frame.source.image,U=f.cutX,X=f.cutY,b=0,B=0,L=h._fontSize/h.fontData.size,D=h._align,w=0,N=0;h.getTextBounds(!1);var V=h._bounds.lines;D===1?N=(V.longest-V.lengths[0])/2:D===2&&(N=V.longest-V.lengths[0]),l.translate(-h.displayOriginX,-h.displayOriginY);var Y=o.roundPixels;h.cropWidth>0&&h.cropHeight>0&&(l.beginPath(),l.rect(0,0,h.cropWidth,h.cropHeight),l.clip());for(var W=0;W<d;W++){if(B=L,b=0,S=a.charCodeAt(W),S===10){w++,D===1?N=(V.longest-V.lengths[w])/2:D===2&&(N=V.longest-V.lengths[w]),T=0,C+=m,I=null;continue}if(E=p[S],!!E){if(P=U+E.x,M=X+E.y,A=E.width,R=E.height,O=E.xOffset+T-h.scrollX,F=E.yOffset+C-h.scrollY,I!==null){var H=E.kerning[G];O+=H!==void 0?H:0}if(v){g.index=W,g.charCode=S,g.x=O,g.y=F,g.scale=B,g.rotation=b,g.data=E.data;var $=v(g);O=$.x,F=$.y,B=$.scale,b=$.rotation}O*=B,F*=B,O+=N,T+=E.xAdvance+y,I=E,G=S,!(A===0||R===0||S===32)&&(Y&&(O=Math.round(O),F=Math.round(F)),l.save(),l.translate(O,F),l.rotate(b),l.scale(B,B),l.drawImage(z,P,M,A,R,0,0,A,R),l.restore())}}l.restore()}};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1061),u=t(1062),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=function(n,h,o,r){n.pipelines.clear();var a=s(h,o,r).calc;h.render.call(h,n,o,a),n.pipelines.rebind()};e.exports=u},function(e,c){},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1064),u=t(448),u=t(448),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(217),u=t(19),n=t(25),h=t(12),o=function(f,v,g){this.x=f,this.y=v,this.width=g},r=function(f,v,g){this.points=[],this.pointsLength=1,this.points[0]=new o(f,v,g)},a=[],d=new n,l=function(f,v,g,p){if(v.commandBuffer.length!==0){g.addToRenderList(v);var m=f.pipelines.set(v.pipeline,v);f.pipelines.preBatch(v);for(var y=u(v,g,p).calc,T=d.loadIdentity(),C=v.commandBuffer,S=g.alpha*v.alpha,E=1,P=m.fillTint,M=m.strokeTint,A=0,R=0,O=0,F=.01,I=Math.PI*2,G,z=[],U=0,X=!0,b=null,B=h.getTintAppendFloatAlpha,L=0;L<C.length;L++)switch(G=C[L],G){case s.BEGIN_PATH:{z.length=0,b=null,X=!0;break}case s.CLOSE_PATH:{X=!1,b&&b.points.length&&b.points.push(b.points[0]);break}case s.FILL_PATH:{for(U=0;U<z.length;U++)m.batchFillPath(z[U].points,T,y);break}case s.STROKE_PATH:{for(U=0;U<z.length;U++)m.batchStrokePath(z[U].points,E,X,T,y);break}case s.LINE_STYLE:{E=C[++L];var D=C[++L],w=C[++L]*S,N=B(D,w);M.TL=N,M.TR=N,M.BL=N,M.BR=N;break}case s.FILL_STYLE:{var V=C[++L],Y=C[++L]*S,W=B(V,Y);P.TL=W,P.TR=W,P.BL=W,P.BR=W;break}case s.GRADIENT_FILL_STYLE:{var H=C[++L]*S,$=C[++L]*S,K=C[++L]*S,Z=C[++L]*S;P.TL=B(C[++L],H),P.TR=B(C[++L],$),P.BL=B(C[++L],K),P.BR=B(C[++L],Z);break}case s.GRADIENT_LINE_STYLE:{E=C[++L];var J=C[++L]*S;M.TL=B(C[++L],J),M.TR=B(C[++L],J),M.BL=B(C[++L],J),M.BR=B(C[++L],J);break}case s.ARC:{var k=0,Q=C[++L],q=C[++L],at=C[++L],it=C[++L],_=C[++L],j=C[++L],ot=C[++L];for(_-=it,j?_<-I?_=-I:_>0&&(_=-I+_%I):_>I?_=I:_<0&&(_=I+_%I),b===null&&(b=new r(Q+Math.cos(it)*at,q+Math.sin(it)*at,E),z.push(b),k+=F);k<1+ot;)O=_*k+it,A=Q+Math.cos(O)*at,R=q+Math.sin(O)*at,b.points.push(new o(A,R,E)),k+=F;O=_+it,A=Q+Math.cos(O)*at,R=q+Math.sin(O)*at,b.points.push(new o(A,R,E));break}case s.FILL_RECT:{m.batchFillRect(C[++L],C[++L],C[++L],C[++L],T,y);break}case s.FILL_TRIANGLE:{m.batchFillTriangle(C[++L],C[++L],C[++L],C[++L],C[++L],C[++L],T,y);break}case s.STROKE_TRIANGLE:{m.batchStrokeTriangle(C[++L],C[++L],C[++L],C[++L],C[++L],C[++L],E,T,y);break}case s.LINE_TO:{b!==null?b.points.push(new o(C[++L],C[++L],E)):(b=new r(C[++L],C[++L],E),z.push(b));break}case s.MOVE_TO:{b=new r(C[++L],C[++L],E),z.push(b);break}case s.SAVE:{a.push(T.copyToArray());break}case s.RESTORE:{T.copyFromArray(a.pop());break}case s.TRANSLATE:{Q=C[++L],q=C[++L],T.translate(Q,q);break}case s.SCALE:{Q=C[++L],q=C[++L],T.scale(Q,q);break}case s.ROTATE:{T.rotate(C[++L]);break}}f.pipelines.postBatch(v)}};e.exports=l},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1066),u=t(1067),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){n.addToRenderList(u),u.pipeline.batchSprite(u,n,h)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){n.addToRenderList(u),s.batchSprite(u,u.frame,n,h)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1069),u=t(1070),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){n.addToRenderList(u),this.pipeline.batchSprite(u,n,h)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){n.addToRenderList(u),s.batchSprite(u,u.frame,n,h)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1072),u=t(1073),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h=u.list,o=h.length;if(o!==0){u.depthSort(),s.pipelines.preBatch(u);var r=u.blendMode!==-1;r||s.setBlendMode(0);for(var a=u.alpha,d=0;d<o;d++){var l=h[d];if(!!l.willRender(n)){var f,v,g,p;if(l.alphaTopLeft!==void 0)f=l.alphaTopLeft,v=l.alphaTopRight,g=l.alphaBottomLeft,p=l.alphaBottomRight;else{var m=l.alpha;f=m,v=m,g=m,p=m}!r&&l.blendMode!==s.currentBlendMode&&s.setBlendMode(l.blendMode);var y=l.mask;y&&y.preRenderWebGL(s,l,n);var T=l.type;T!==s.currentType&&(s.newType=!0,s.currentType=T),s.nextTypeMatch=d<o-1?h[d+1].type===s.currentType:!1,l.setAlpha(f*a,v*a,g*a,p*a),l.renderWebGL(s,l,n),l.setAlpha(f,v,g,p),y&&y.postRenderWebGL(s,n),s.newType=!1}}s.pipelines.postBatch(u)}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h=u.list;if(h.length!==0){u.depthSort();var o=u.blendMode!==-1;o||s.setBlendMode(0);var r=u._alpha;u.mask&&u.mask.preRenderCanvas(s,null,n);for(var a=0;a<h.length;a++){var d=h[a];if(!!d.willRender(n)){var l=d.alpha;!o&&d.blendMode!==s.currentBlendMode&&s.setBlendMode(d.blendMode),d.setAlpha(l*r),d.renderCanvas(s,d,n),d.setAlpha(l)}}u.mask&&u.mask.postRenderCanvas(s)}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={EmitterOp:t(449),GravityWell:t(450),Particle:t(451),ParticleEmitter:t(452),ParticleEmitterManager:t(220),Zones:t(1078)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1076),u=t(1077),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25),u=t(12),n=new s,h=new s,o=new s,r=new s,a=function(d,l,f,v){var g=l.emitters.list,p=g.length;if(p!==0){var m=d.pipelines.set(l.pipeline),y=n,T=h,C=o,S=r;v?(S.loadIdentity(),S.multiply(v),S.translate(l.x,l.y),S.rotate(l.rotation),S.scale(l.scaleX,l.scaleY)):S.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY);var E=f.roundPixels,P=l.defaultFrame.glTexture,M=u.getTintAppendFloatAlpha,A=m.setGameObject(l,l.defaultFrame);d.pipelines.preBatch(l);for(var R=0;R<p;R++){var O=g[R],F=O.alive,I=F.length;if(!(!O.visible||I===0)){f.addToRenderList(O);var G=O.scrollFactorX,z=O.scrollFactorY;d.setBlendMode(O.blendMode),O.mask&&(O.mask.preRenderWebGL(d,O,f),d.pipelines.set(l.pipeline));for(var U=0,X=0;X<I;X++){var b=F[X],B=b.alpha*f.alpha;if(!(B<=0)){C.applyITRS(b.x,b.y,b.rotation,b.scaleX,b.scaleY),y.copyFrom(f.matrix),y.multiplyWithOffset(S,-f.scrollX*G,-f.scrollY*z),C.e=b.x,C.f=b.y,y.multiply(C,T);var L=b.frame,D=-L.halfWidth,w=-L.halfHeight,N=D+L.width,V=w+L.height,Y=T.getXRound(D,w,E),W=T.getYRound(D,w,E),H=T.getXRound(D,V,E),$=T.getYRound(D,V,E),K=T.getXRound(N,V,E),Z=T.getYRound(N,V,E),J=T.getXRound(N,w,E),k=T.getYRound(N,w,E),Q=M(b.tint,B);m.batchQuad(O,Y,W,H,$,K,Z,J,k,L.u0,L.v0,L.u1,L.v1,Q,Q,Q,Q,U,P,A)}}O.mask&&O.mask.postRenderWebGL(d,f)}}d.pipelines.postBatch(l)}};e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25),u=new s,n=new s,h=new s,o=new s,r=function(a,d,l,f){var v=d.emitters.list,g=v.length;if(g!==0){var p=u.copyFrom(l.matrix),m=n,y=h,T=o;f?(T.loadIdentity(),T.multiply(f),T.translate(d.x,d.y),T.rotate(d.rotation),T.scale(d.scaleX,d.scaleY)):T.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);for(var C=a.currentContext,S=l.roundPixels,E=0;E<g;E++){var P=v[E],M=P.alive,A=M.length;if(!(!P.visible||A===0)){l.addToRenderList(P);var R=P.scrollFactorX,O=P.scrollFactorY;C.save(),C.globalCompositeOperation=a.blendModes[P.blendMode];for(var F=0;F<A;F++){var I=M[F],G=I.alpha*l.alpha;if(!(G<=0)){y.applyITRS(I.x,I.y,I.rotation,I.scaleX,I.scaleY),p.copyFrom(l.matrix),p.multiplyWithOffset(T,-l.scrollX*R,-l.scrollY*O),y.e=I.x,y.f=I.y,p.multiply(y,m);var z=I.frame,U=z.canvasData,X=-z.halfWidth,b=-z.halfHeight;C.globalAlpha=G,C.save(),m.setToContext(C),S&&(X=Math.round(X),b=Math.round(b)),C.imageSmoothingEnabled=!(!a.antialias||z.source.scaleMode),C.drawImage(z.source.image,U.x,U.y,U.width,U.height,X,b,U.width,U.height),C.restore()}}C.restore()}}}};e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DeathZone:t(453),EdgeZone:t(454),RandomZone:t(456)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1080),u=t(1081),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,h,o,r){o.addToRenderList(h);var a=o.alpha,d=h.renderTarget,l=d.width,f=d.height,v=s.getTintAppendFloatAlpha,g=n.pipelines.set(h.pipeline),p=g.setTexture2D(d.texture);n.pipelines.preBatch(h),g.batchTexture(h,d.texture,l,f,h.x,h.y,l,f,h.scaleX,h.scaleY,h.rotation,h.flipX,!h.flipY,h.scrollFactorX,h.scrollFactorY,h.displayOriginX,h.displayOriginY,0,0,l,f,v(h.tintTopLeft,a*h._alphaTL),v(h.tintTopRight,a*h._alphaTR),v(h.tintBottomLeft,a*h._alphaBL),v(h.tintBottomRight,a*h._alphaBR),h.tintFill,0,0,o,r,!0,p),n.resetTextures(),n.pipelines.postBatch(h)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){n.addToRenderList(u),s.batchSprite(u,u.frame,n,h)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1083),u=t(17),n={Parse:t(1084)};n=u(!1,n,s),e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u=function(n,h){var o=h.width,r=h.height,a=Math.floor(o/2),d=Math.floor(r/2),l=s(h,"chars","");if(l!==""){var f=s(h,"image",""),v=n.sys.textures.getFrame(f),g=v.cutX,p=v.cutY,m=v.source.width,y=v.source.height,T=s(h,"offset.x",0),C=s(h,"offset.y",0),S=s(h,"spacing.x",0),E=s(h,"spacing.y",0),P=s(h,"lineSpacing",0),M=s(h,"charsPerRow",null);M===null&&(M=m/o,M>l.length&&(M=l.length));for(var A=T,R=C,O={retroFont:!0,font:f,size:o,lineHeight:r+P,chars:{}},F=0,I=0;I<l.length;I++){var G=l.charCodeAt(I),z=(g+A)/m,U=(p+R)/y,X=(g+A+o)/m,b=(p+R+r)/y;O.chars[G]={x:A,y:R,width:o,height:r,centerX:a,centerY:d,xOffset:0,yOffset:0,xAdvance:o,data:{},kerning:{},u0:z,v0:U,u1:X,v1:b},F++,F===M?(F=0,A=T,R+=r+E):A+=o+S}var B={data:O,frame:null,texture:f};return B}};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1086),u=t(1087),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(12),n=function(h,o,r,a){r.addToRenderList(o);var d=h.pipelines.set(o.pipeline,o),l=s(o,r,a).calc,f=o.vertices,v=o.uv,g=o.colors,p=o.alphas,m=o.alpha,y=u.getTintAppendFloatAlpha,T=r.roundPixels,C=f.length,S=Math.floor(C*.5);d.flush(),h.pipelines.preBatch(o);var E=d.setGameObject(o),P=d.vertexViewF32,M=d.vertexViewU32,A=d.vertexCount*d.currentShader.vertexComponentCount-1,R=0,O=o.tintFill;o.dirty&&o.updateVertices();for(var F=o.debugCallback,I=[],G=0;G<C;G+=2){var z=f[G+0],U=f[G+1],X=z*l.a+U*l.c+l.e,b=z*l.b+U*l.d+l.f;T&&(X=Math.round(X),b=Math.round(b)),P[++A]=X,P[++A]=b,P[++A]=v[G+0],P[++A]=v[G+1],P[++A]=E,P[++A]=O,M[++A]=y(g[R],r.alpha*(p[R]*m)),R++,F&&(I[G+0]=X,I[G+1]=b)}F&&F.call(o,o,C,I),d.vertexCount+=S,h.pipelines.postBatch(o)};e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1089),u=t(1090),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,h,o,r){if(!(h.width===0||h.height===0)){o.addToRenderList(h);var a=h.frame,d=a.width,l=a.height,f=s.getTintAppendFloatAlpha,v=n.pipelines.set(h.pipeline,h),g=v.setTexture2D(a.glTexture,h);n.pipelines.preBatch(h),v.batchTexture(h,a.glTexture,d,l,h.x,h.y,d/h.style.resolution,l/h.style.resolution,h.scaleX,h.scaleY,h.rotation,h.flipX,h.flipY,h.scrollFactorX,h.scrollFactorY,h.displayOriginX,h.displayOriginY,0,0,d,l,f(h.tintTopLeft,o.alpha*h._alphaTL),f(h.tintTopRight,o.alpha*h._alphaTR),f(h.tintBottomLeft,o.alpha*h._alphaBL),f(h.tintBottomRight,o.alpha*h._alphaBR),h.tintFill,0,0,o,r,!1,g),n.pipelines.postBatch(h)}};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){u.width===0||u.height===0||(n.addToRenderList(u),s.batchSprite(u,u.frame,n,h))};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1092),u=t(1093),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,h,o,r){h.updateCanvas();var a=h.width,d=h.height;if(!(a===0||d===0)){o.addToRenderList(h),n.pipelines.preBatch(h);var l=s.getTintAppendFloatAlpha,f=n.pipelines.set(h.pipeline,h),v=f.setTexture2D(h.fillPattern,h);f.batchTexture(h,h.fillPattern,h.displayFrame.width*h.tileScaleX,h.displayFrame.height*h.tileScaleY,h.x,h.y,a,d,h.scaleX,h.scaleY,h.rotation,h.flipX,h.flipY,h.scrollFactorX,h.scrollFactorY,h.originX*a,h.originY*d,0,0,a,d,l(h.tintTopLeft,o.alpha*h._alphaTL),l(h.tintTopRight,o.alpha*h._alphaTR),l(h.tintBottomLeft,o.alpha*h._alphaBL),l(h.tintBottomRight,o.alpha*h._alphaBR),h.tintFill,h.tilePositionX%h.displayFrame.width/h.displayFrame.width,h.tilePositionY%h.displayFrame.height/h.displayFrame.height,o,r,!1,v),n.pipelines.postBatch(h)}};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){u.updateCanvas(),n.addToRenderList(u),s.batchSprite(u,u.frame,n,h)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1095),u=t(1096),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){u.videoTexture&&(n.addToRenderList(u),u.pipeline.batchSprite(u,n,h))};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){u.videoTexture&&(n.addToRenderList(u),s.batchSprite(u,u.frame,n,h))};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1098),u=t(1099),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(114),n=t(81),h=function(o,r,a,d){a.addToRenderList(r);var l=o.pipelines.set(r.pipeline),f=s(r,a,d),v=l.calcMatrix.copyFrom(f.calc),g=r._displayOriginX,p=r._displayOriginY,m=a.alpha*r.alpha;o.pipelines.preBatch(r),r.isFilled&&u(l,v,r,m,g,p),r.isStroked&&n(l,r,m,g,p),o.pipelines.postBatch(r)};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(36),u=t(48),n=t(60),h=t(30),o=function(r,a,d,l){d.addToRenderList(a);var f=r.currentContext;if(h(r,f,a,d,l)){var v=a.radius;f.beginPath(),f.arc(v-a.originX*(v*2),v-a.originY*(v*2),v,s(a._startAngle),s(a._endAngle),a.anticlockwise),a.closePath&&f.closePath(),a.isFilled&&(u(f,a),f.fill()),a.isStroked&&(n(f,a),f.stroke()),f.restore()}};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1101),u=t(1102),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(114),u=t(19),n=t(81),h=function(o,r,a,d){a.addToRenderList(r);var l=o.pipelines.set(r.pipeline),f=u(r,a,d),v=l.calcMatrix.copyFrom(f.calc),g=r._displayOriginX+r._curveBounds.x,p=r._displayOriginY+r._curveBounds.y,m=a.alpha*r.alpha;o.pipelines.preBatch(r),r.isFilled&&s(l,v,r,m,g,p),r.isStroked&&n(l,r,m,g,p),o.pipelines.postBatch(r)};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),h=function(o,r,a,d){a.addToRenderList(r);var l=o.currentContext;if(n(o,l,r,a,d)){var f=r._displayOriginX+r._curveBounds.x,v=r._displayOriginY+r._curveBounds.y,g=r.pathData,p=g.length-1,m=g[0]-f,y=g[1]-v;l.beginPath(),l.moveTo(m,y),r.closePath||(p-=2);for(var T=2;T<p;T+=2){var C=g[T]-f,S=g[T+1]-v;l.lineTo(C,S)}r.closePath&&l.closePath(),r.isFilled&&(s(l,r),l.fill()),r.isStroked&&(u(l,r),l.stroke()),l.restore()}};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1104),u=t(1105),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(114),u=t(19),n=t(81),h=function(o,r,a,d){a.addToRenderList(r);var l=o.pipelines.set(r.pipeline),f=u(r,a,d),v=l.calcMatrix.copyFrom(f.calc),g=r._displayOriginX,p=r._displayOriginY,m=a.alpha*r.alpha;o.pipelines.preBatch(r),r.isFilled&&s(l,v,r,m,g,p),r.isStroked&&n(l,r,m,g,p),o.pipelines.postBatch(r)};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),h=function(o,r,a,d){a.addToRenderList(r);var l=o.currentContext;if(n(o,l,r,a,d)){var f=r._displayOriginX,v=r._displayOriginY,g=r.pathData,p=g.length-1,m=g[0]-f,y=g[1]-v;l.beginPath(),l.moveTo(m,y),r.closePath||(p-=2);for(var T=2;T<p;T+=2){var C=g[T]-f,S=g[T+1]-v;l.lineTo(C,S)}l.closePath(),r.isFilled&&(s(l,r),l.fill()),r.isStroked&&(u(l,r),l.stroke()),l.restore()}};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1107),u=t(1108),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(12),n=function(h,o,r,a){r.addToRenderList(o);var d=h.pipelines.set(o.pipeline),l=s(o,r,a),f=d.calcMatrix.copyFrom(l.calc);f.translate(-o._displayOriginX,-o._displayOriginY);var v=r.alpha*o.alpha,g=o.width,p=o.height,m=o.cellWidth,y=o.cellHeight,T=Math.ceil(g/m),C=Math.ceil(p/y),S=m,E=y,P=m-(T*m-g),M=y-(C*y-p),A,R,O=o.showCells,F=o.showAltCells,I=o.showOutline,G=0,z=0,U=0,X=0,b=0;if(I&&(S--,E--,P===m&&P--,M===y&&M--),h.pipelines.preBatch(o),O&&o.fillAlpha>0)for(A=d.fillTint,R=u.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*v),A.TL=R,A.TR=R,A.BL=R,A.BR=R,z=0;z<C;z++)for(F&&(U=z%2),G=0;G<T;G++){if(F&&U){U=0;continue}U++,X=G<T-1?S:P,b=z<C-1?E:M,d.batchFillRect(G*m,z*y,X,b)}if(F&&o.altFillAlpha>0)for(A=d.fillTint,R=u.getTintAppendFloatAlpha(o.altFillColor,o.altFillAlpha*v),A.TL=R,A.TR=R,A.BL=R,A.BR=R,z=0;z<C;z++)for(F&&(U=z%2),G=0;G<T;G++){if(F&&!U){U=1;continue}U=0,X=G<T-1?S:P,b=z<C-1?E:M,d.batchFillRect(G*m,z*y,X,b)}if(I&&o.outlineFillAlpha>0){var B=d.strokeTint,L=u.getTintAppendFloatAlpha(o.outlineFillColor,o.outlineFillAlpha*v);for(B.TL=L,B.TR=L,B.BL=L,B.BR=L,G=1;G<T;G++){var D=G*m;d.batchLine(D,0,D,p,1,1,1,0,!1)}for(z=1;z<C;z++){var w=z*y;d.batchLine(0,w,g,w,1,1,1,0,!1)}}h.pipelines.postBatch(o)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),h=function(o,r,a,d){a.addToRenderList(r);var l=o.currentContext;if(n(o,l,r,a,d)){var f=-r._displayOriginX,v=-r._displayOriginY,g=a.alpha*r.alpha,p=r.width,m=r.height,y=r.cellWidth,T=r.cellHeight,C=Math.ceil(p/y),S=Math.ceil(m/T),E=y,P=T,M=y-(C*y-p),A=T-(S*T-m),R=r.showCells,O=r.showAltCells,F=r.showOutline,I=0,G=0,z=0,U=0,X=0;if(F&&(E--,P--,M===y&&M--,A===T&&A--),R&&r.fillAlpha>0)for(s(l,r),G=0;G<S;G++)for(O&&(z=G%2),I=0;I<C;I++){if(O&&z){z=0;continue}z++,U=I<C-1?E:M,X=G<S-1?P:A,l.fillRect(f+I*y,v+G*T,U,X)}if(O&&r.altFillAlpha>0)for(s(l,r,r.altFillColor,r.altFillAlpha*g),G=0;G<S;G++)for(O&&(z=G%2),I=0;I<C;I++){if(O&&!z){z=1;continue}z=0,U=I<C-1?E:M,X=G<S-1?P:A,l.fillRect(f+I*y,v+G*T,U,X)}if(F&&r.outlineFillAlpha>0){for(u(l,r,r.outlineFillColor,r.outlineFillAlpha*g),I=1;I<C;I++){var b=I*y;l.beginPath(),l.moveTo(b+f,v),l.lineTo(b+f,m+v),l.stroke()}for(G=1;G<S;G++){var B=G*T;l.beginPath(),l.moveTo(f,B+v),l.lineTo(f+p,B+v),l.stroke()}}l.restore()}};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1110),u=t(1111),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(12),n=function(h,o,r,a){r.addToRenderList(o);var d=h.pipelines.set(o.pipeline),l=s(o,r,a),f=d.calcMatrix.copyFrom(l.calc),v=o.width,g=o.height,p=v/2,m=v/o.projection,y=r.alpha*o.alpha;if(!!o.isFilled){var T,C,S,E,P,M,A,R,O;h.pipelines.preBatch(o),o.showTop&&(T=u.getTintAppendFloatAlpha(o.fillTop,y),C=f.getX(-p,-g),S=f.getY(-p,-g),E=f.getX(0,-m-g),P=f.getY(0,-m-g),M=f.getX(p,-g),A=f.getY(p,-g),R=f.getX(0,m-g),O=f.getY(0,m-g),d.batchQuad(o,C,S,E,P,M,A,R,O,0,0,1,1,T,T,T,T,2)),o.showLeft&&(T=u.getTintAppendFloatAlpha(o.fillLeft,y),C=f.getX(-p,0),S=f.getY(-p,0),E=f.getX(0,m),P=f.getY(0,m),M=f.getX(0,m-g),A=f.getY(0,m-g),R=f.getX(-p,-g),O=f.getY(-p,-g),d.batchQuad(o,C,S,E,P,M,A,R,O,0,0,1,1,T,T,T,T,2)),o.showRight&&(T=u.getTintAppendFloatAlpha(o.fillRight,y),C=f.getX(p,0),S=f.getY(p,0),E=f.getX(0,m),P=f.getY(0,m),M=f.getX(0,m-g),A=f.getY(0,m-g),R=f.getX(p,-g),O=f.getY(p,-g),d.batchQuad(o,C,S,E,P,M,A,R,O,0,0,1,1,T,T,T,T,2)),h.pipelines.postBatch(o)}};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(30),n=function(h,o,r,a){r.addToRenderList(o);var d=h.currentContext;if(u(h,d,o,r,a)&&o.isFilled){var l=o.width,f=o.height,v=l/2,g=l/o.projection;o.showTop&&(s(d,o,o.fillTop),d.beginPath(),d.moveTo(-v,-f),d.lineTo(0,-g-f),d.lineTo(v,-f),d.lineTo(v,-1),d.lineTo(0,g-1),d.lineTo(-v,-1),d.lineTo(-v,-f),d.fill()),o.showLeft&&(s(d,o,o.fillLeft),d.beginPath(),d.moveTo(-v,0),d.lineTo(0,g),d.lineTo(0,g-f),d.lineTo(-v,-f),d.lineTo(-v,0),d.fill()),o.showRight&&(s(d,o,o.fillRight),d.beginPath(),d.moveTo(v,0),d.lineTo(0,g),d.lineTo(0,g-f),d.lineTo(v,-f),d.lineTo(v,0),d.fill()),d.restore()}};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1113),u=t(1114),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(12),n=function(h,o,r,a){r.addToRenderList(o);var d=h.pipelines.set(o.pipeline),l=s(o,r,a),f=d.calcMatrix.copyFrom(l.calc),v=o.width,g=o.height,p=v/2,m=v/o.projection,y=o.isReversed,T=r.alpha*o.alpha;if(!!o.isFilled){h.pipelines.preBatch(o);var C,S,E,P,M,A,R;if(o.showTop&&y){C=u.getTintAppendFloatAlpha(o.fillTop,T),S=f.getX(-p,-g),E=f.getY(-p,-g),P=f.getX(0,-m-g),M=f.getY(0,-m-g),A=f.getX(p,-g),R=f.getY(p,-g);var O=f.getX(0,m-g),F=f.getY(0,m-g);d.batchQuad(o,S,E,P,M,A,R,O,F,0,0,1,1,C,C,C,C,2)}o.showLeft&&(C=u.getTintAppendFloatAlpha(o.fillLeft,T),y?(S=f.getX(-p,-g),E=f.getY(-p,-g),P=f.getX(0,m),M=f.getY(0,m),A=f.getX(0,m-g),R=f.getY(0,m-g)):(S=f.getX(-p,0),E=f.getY(-p,0),P=f.getX(0,m),M=f.getY(0,m),A=f.getX(0,m-g),R=f.getY(0,m-g)),d.batchTri(o,S,E,P,M,A,R,0,0,1,1,C,C,C,2)),o.showRight&&(C=u.getTintAppendFloatAlpha(o.fillRight,T),y?(S=f.getX(p,-g),E=f.getY(p,-g),P=f.getX(0,m),M=f.getY(0,m),A=f.getX(0,m-g),R=f.getY(0,m-g)):(S=f.getX(p,0),E=f.getY(p,0),P=f.getX(0,m),M=f.getY(0,m),A=f.getX(0,m-g),R=f.getY(0,m-g)),d.batchTri(o,S,E,P,M,A,R,0,0,1,1,C,C,C,2)),h.pipelines.postBatch(o)}};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(30),n=function(h,o,r,a){r.addToRenderList(o);var d=h.currentContext;if(u(h,d,o,r,a)&&o.isFilled){var l=o.width,f=o.height,v=l/2,g=l/o.projection,p=o.isReversed;o.showTop&&p&&(s(d,o,o.fillTop),d.beginPath(),d.moveTo(-v,-f),d.lineTo(0,-g-f),d.lineTo(v,-f),d.lineTo(0,g-f),d.fill()),o.showLeft&&(s(d,o,o.fillLeft),d.beginPath(),p?(d.moveTo(-v,-f),d.lineTo(0,g),d.lineTo(0,g-f)):(d.moveTo(-v,0),d.lineTo(0,g),d.lineTo(0,g-f)),d.fill()),o.showRight&&(s(d,o,o.fillRight),d.beginPath(),p?(d.moveTo(v,-f),d.lineTo(0,g),d.lineTo(0,g-f)):(d.moveTo(v,0),d.lineTo(0,g),d.lineTo(0,g-f)),d.fill()),d.restore()}};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1116),u=t(1117),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(12),n=function(h,o,r,a){r.addToRenderList(o);var d=h.pipelines.set(o.pipeline),l=s(o,r,a);d.calcMatrix.copyFrom(l.calc);var f=o._displayOriginX,v=o._displayOriginY,g=r.alpha*o.alpha;if(h.pipelines.preBatch(o),o.isStroked){var p=d.strokeTint,m=u.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*g);p.TL=m,p.TR=m,p.BL=m,p.BR=m;var y=o._startWidth,T=o._endWidth;d.batchLine(o.geom.x1-f,o.geom.y1-v,o.geom.x2-f,o.geom.y2-v,y,T,1,0,!1,l.sprite,l.camera)}h.pipelines.postBatch(o)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(60),u=t(30),n=function(h,o,r,a){r.addToRenderList(o);var d=h.currentContext;if(u(h,d,o,r,a)){var l=o._displayOriginX,f=o._displayOriginY;o.isStroked&&(s(d,o),d.beginPath(),d.moveTo(o.geom.x1-l,o.geom.y1-f),d.lineTo(o.geom.x2-l,o.geom.y2-f),d.stroke()),d.restore()}};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1119),u=t(1120),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(114),u=t(19),n=t(81),h=function(o,r,a,d){a.addToRenderList(r);var l=o.pipelines.set(r.pipeline),f=u(r,a,d),v=l.calcMatrix.copyFrom(f.calc),g=r._displayOriginX,p=r._displayOriginY,m=a.alpha*r.alpha;o.pipelines.preBatch(r),r.isFilled&&s(l,v,r,m,g,p),r.isStroked&&n(l,r,m,g,p),o.pipelines.postBatch(r)};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),h=function(o,r,a,d){a.addToRenderList(r);var l=o.currentContext;if(n(o,l,r,a,d)){var f=r._displayOriginX,v=r._displayOriginY,g=r.pathData,p=g.length-1,m=g[0]-f,y=g[1]-v;l.beginPath(),l.moveTo(m,y),r.closePath||(p-=2);for(var T=2;T<p;T+=2){var C=g[T]-f,S=g[T+1]-v;l.lineTo(C,S)}l.closePath(),r.isFilled&&(s(l,r),l.fill()),r.isStroked&&(u(l,r),l.stroke()),l.restore()}};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1122),u=t(1123),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(81),n=t(12),h=function(o,r,a,d){a.addToRenderList(r);var l=o.pipelines.set(r.pipeline),f=s(r,a,d);l.calcMatrix.copyFrom(f.calc);var v=r._displayOriginX,g=r._displayOriginY,p=a.alpha*r.alpha;if(o.pipelines.preBatch(r),r.isFilled){var m=l.fillTint,y=n.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*p);m.TL=y,m.TR=y,m.BL=y,m.BR=y,l.batchFillRect(-v,-g,r.width,r.height)}r.isStroked&&u(l,r,p,v,g),o.pipelines.postBatch(r)};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),h=function(o,r,a,d){a.addToRenderList(r);var l=o.currentContext;if(n(o,l,r,a,d)){var f=r._displayOriginX,v=r._displayOriginY;r.isFilled&&(s(l,r),l.fillRect(-f,-v,r.width,r.height)),r.isStroked&&(u(l,r),l.beginPath(),l.rect(-f,-v,r.width,r.height),l.stroke()),l.restore()}};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1125),u=t(1126),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(114),u=t(19),n=t(81),h=function(o,r,a,d){a.addToRenderList(r);var l=o.pipelines.set(r.pipeline),f=u(r,a,d),v=l.calcMatrix.copyFrom(f.calc),g=r._displayOriginX,p=r._displayOriginY,m=a.alpha*r.alpha;o.pipelines.preBatch(r),r.isFilled&&s(l,v,r,m,g,p),r.isStroked&&n(l,r,m,g,p),o.pipelines.postBatch(r)};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),h=function(o,r,a,d){a.addToRenderList(r);var l=o.currentContext;if(n(o,l,r,a,d)){var f=r._displayOriginX,v=r._displayOriginY,g=r.pathData,p=g.length-1,m=g[0]-f,y=g[1]-v;l.beginPath(),l.moveTo(m,y),r.closePath||(p-=2);for(var T=2;T<p;T+=2){var C=g[T]-f,S=g[T+1]-v;l.lineTo(C,S)}l.closePath(),r.isFilled&&(s(l,r),l.fill()),r.isStroked&&(u(l,r),l.stroke()),l.restore()}};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1128),u=t(1129),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=t(81),n=t(12),h=function(o,r,a,d){a.addToRenderList(r);var l=o.pipelines.set(r.pipeline),f=s(r,a,d);l.calcMatrix.copyFrom(f.calc);var v=r._displayOriginX,g=r._displayOriginY,p=a.alpha*r.alpha;if(o.pipelines.preBatch(r),r.isFilled){var m=l.fillTint,y=n.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*p);m.TL=y,m.TR=y,m.BL=y,m.BR=y;var T=r.geom.x1-v,C=r.geom.y1-g,S=r.geom.x2-v,E=r.geom.y2-g,P=r.geom.x3-v,M=r.geom.y3-g;l.batchFillTriangle(T,C,S,E,P,M,f.sprite,f.camera)}r.isStroked&&u(l,r,p,v,g),o.pipelines.postBatch(r)};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(48),u=t(60),n=t(30),h=function(o,r,a,d){a.addToRenderList(r);var l=o.currentContext;if(n(o,l,r,a,d)){var f=r._displayOriginX,v=r._displayOriginY,g=r.geom.x1-f,p=r.geom.y1-v,m=r.geom.x2-f,y=r.geom.y2-v,T=r.geom.x3-f,C=r.geom.y3-v;l.beginPath(),l.moveTo(g,p),l.lineTo(m,y),l.lineTo(T,C),l.closePath(),r.isFilled&&(s(l,r),l.fill()),r.isStroked&&(u(l,r),l.stroke()),l.restore()}};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(213),u=t(5);u.register("blitter",function(n,h,o,r){return this.displayList.add(new s(this.scene,n,h,o,r))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(214),u=t(5);u.register("container",function(n,h,o){return this.displayList.add(new s(this.scene,n,h,o))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(442),u=t(5);u.register("dom",function(n,h,o,r,a){var d=new s(this.scene,n,h,o,r,a);return this.displayList.add(d),d})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(215),u=t(5);u.register("dynamicBitmapText",function(n,h,o,r,a){return this.displayList.add(new s(this.scene,n,h,o,r,a))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(444),u=t(5);u.register("extern",function(){var n=new s(this.scene);return this.displayList.add(n),n})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(216),u=t(5);u.register("graphics",function(n){return this.displayList.add(new s(this.scene,n))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(113),u=t(5);u.register("group",function(n,h){return this.updateList.add(new s(this.scene,n,h))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(125),u=t(5);u.register("image",function(n,h,o,r){return this.displayList.add(new s(this.scene,n,h,o,r))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(219),u=t(5);u.register("layer",function(n){return this.displayList.add(new s(this.scene,n))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(220);s.register("particles",function(n,h,o){return this.displayList.add(new u(this.scene,n,h,o))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(457);s.register("follower",function(n,h,o,r,a){var d=new u(this.scene,n,h,o,r,a);return this.displayList.add(d),this.updateList.add(d),d})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(221);s.register("renderTexture",function(n,h,o,r,a,d){return this.displayList.add(new u(this.scene,n,h,o,r,a,d))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(223),u=t(5);u.register("rope",function(n,h,o,r,a,d,l,f){return this.displayList.add(new s(this.scene,n,h,o,r,a,d,l,f))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(73);s.register("sprite",function(n,h,o,r){var a=new u(this.scene,n,h,o,r);return this.displayList.add(a),a})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(148),u=t(5);u.register("bitmapText",function(n,h,o,r,a,d){return this.displayList.add(new s(this.scene,n,h,o,r,a,d))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(224),u=t(5);u.register("text",function(n,h,o,r){return this.displayList.add(new s(this.scene,n,h,o,r))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(225),u=t(5);u.register("tileSprite",function(n,h,o,r,a,d){return this.displayList.add(new s(this.scene,n,h,o,r,a,d))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(129),u=t(5);u.register("zone",function(n,h,o,r){return this.displayList.add(new s(this.scene,n,h,o,r))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(226),u=t(5);u.register("video",function(n,h,o){return this.displayList.add(new s(this.scene,n,h,o))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(461),u=t(5);u.register("arc",function(n,h,o,r,a,d,l,f){return this.displayList.add(new s(this.scene,n,h,o,r,a,d,l,f))}),u.register("circle",function(n,h,o,r,a){return this.displayList.add(new s(this.scene,n,h,o,0,360,!1,r,a))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(462);s.register("curve",function(n,h,o,r,a){return this.displayList.add(new u(this.scene,n,h,o,r,a))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(463),u=t(5);u.register("ellipse",function(n,h,o,r,a,d){return this.displayList.add(new s(this.scene,n,h,o,r,a,d))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(464);s.register("grid",function(n,h,o,r,a,d,l,f,v,g){return this.displayList.add(new u(this.scene,n,h,o,r,a,d,l,f,v,g))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(465);s.register("isobox",function(n,h,o,r,a,d,l){return this.displayList.add(new u(this.scene,n,h,o,r,a,d,l))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(466);s.register("isotriangle",function(n,h,o,r,a,d,l,f){return this.displayList.add(new u(this.scene,n,h,o,r,a,d,l,f))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(467);s.register("line",function(n,h,o,r,a,d,l,f){return this.displayList.add(new u(this.scene,n,h,o,r,a,d,l,f))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(468);s.register("polygon",function(n,h,o,r,a){return this.displayList.add(new u(this.scene,n,h,o,r,a))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(473);s.register("rectangle",function(n,h,o,r,a,d){return this.displayList.add(new u(this.scene,n,h,o,r,a,d))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(474),u=t(5);u.register("star",function(n,h,o,r,a,d,l){return this.displayList.add(new s(this.scene,n,h,o,r,a,d,l))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(475);s.register("triangle",function(n,h,o,r,a,d,l,f,v,g){return this.displayList.add(new u(this.scene,n,h,o,r,a,d,l,f,v,g))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(213),u=t(28),n=t(16),h=t(13);n.register("blitter",function(o,r){o===void 0&&(o={});var a=h(o,"key",null),d=h(o,"frame",null),l=new s(this.scene,0,0,a,d);return r!==void 0&&(o.add=r),u(this.scene,l,o),l})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(214),n=t(16),h=t(13);n.register("container",function(o,r){o===void 0&&(o={});var a=h(o,"x",0),d=h(o,"y",0),l=h(o,"children",null),f=new u(this.scene,a,d,l);return r!==void 0&&(o.add=r),s(this.scene,f,o),f})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(215),u=t(28),n=t(16),h=t(13);n.register("dynamicBitmapText",function(o,r){o===void 0&&(o={});var a=h(o,"font",""),d=h(o,"text",""),l=h(o,"size",!1),f=new s(this.scene,0,0,a,d,l);return r!==void 0&&(o.add=r),u(this.scene,f,o),f})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16),u=t(216);s.register("graphics",function(n,h){n===void 0&&(n={}),h!==void 0&&(n.add=h);var o=new u(this.scene,n);return n.add&&this.scene.sys.displayList.add(o),o})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16),u=t(113);s.register("group",function(n){return new u(this.scene,null,n)})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),h=t(125);u.register("image",function(o,r){o===void 0&&(o={});var a=n(o,"key",null),d=n(o,"frame",null),l=new h(this.scene,0,0,a,d);return r!==void 0&&(o.add=r),s(this.scene,l,o),l})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(219),n=t(16),h=t(13);n.register("layer",function(o,r){o===void 0&&(o={});var a=h(o,"children",null),d=new u(this.scene,a);return r!==void 0&&(o.add=r),s(this.scene,d,o),d})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16),u=t(13),n=t(2),h=t(220);s.register("particles",function(o,r){o===void 0&&(o={});var a=u(o,"key",null),d=u(o,"frame",null),l=n(o,"emitters",null),f=new h(this.scene,a,d,l);r!==void 0&&(o.add=r);var v=n(o,"add",!1);return v?this.displayList.add(f):this.updateList.add(f),f})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),h=t(221);u.register("renderTexture",function(o,r){o===void 0&&(o={});var a=n(o,"x",0),d=n(o,"y",0),l=n(o,"width",32),f=n(o,"height",32),v=n(o,"key",void 0),g=n(o,"frame",void 0),p=new h(this.scene,a,d,l,f,v,g);return r!==void 0&&(o.add=r),s(this.scene,p,o),p})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),h=t(6),o=t(223);u.register("rope",function(r,a){r===void 0&&(r={});var d=n(r,"key",null),l=n(r,"frame",null),f=n(r,"horizontal",!0),v=h(r,"points",void 0),g=h(r,"colors",void 0),p=h(r,"alphas",void 0),m=new o(this.scene,0,0,d,l,v,f,g,p);return a!==void 0&&(r.add=a),s(this.scene,m,r),r.add||this.updateList.add(m),m})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(439),n=t(16),h=t(13),o=t(73);n.register("sprite",function(r,a){r===void 0&&(r={});var d=h(r,"key",null),l=h(r,"frame",null),f=new o(this.scene,0,0,d,l);return a!==void 0&&(r.add=a),s(this.scene,f,r),u(f,r),f})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(148),u=t(28),n=t(16),h=t(13),o=t(6);n.register("bitmapText",function(r,a){r===void 0&&(r={});var d=o(r,"font",""),l=h(r,"text",""),f=h(r,"size",!1),v=o(r,"align",0),g=new s(this.scene,0,0,d,l,f,v);return a!==void 0&&(r.add=a),u(this.scene,g,r),g})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),h=t(224);u.register("text",function(o,r){o===void 0&&(o={});var a=n(o,"text",""),d=n(o,"style",null),l=n(o,"padding",null);l!==null&&(d.padding=l);var f=new h(this.scene,0,0,a,d);return r!==void 0&&(o.add=r),s(this.scene,f,o),f.autoRound=n(o,"autoRound",!0),f.resolution=n(o,"resolution",1),f})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),h=t(225);u.register("tileSprite",function(o,r){o===void 0&&(o={});var a=n(o,"x",0),d=n(o,"y",0),l=n(o,"width",512),f=n(o,"height",512),v=n(o,"key",""),g=n(o,"frame",""),p=new h(this.scene,a,d,l,f,v,g);return r!==void 0&&(o.add=r),s(this.scene,p,o),p})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16),u=t(13),n=t(129);s.register("zone",function(h){var o=u(h,"x",0),r=u(h,"y",0),a=u(h,"width",1),d=u(h,"height",a);return new n(this.scene,o,r,a,d)})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),h=t(226);u.register("video",function(o,r){o===void 0&&(o={});var a=n(o,"key",null),d=new h(this.scene,0,0,a);return r!==void 0&&(o.add=r),s(this.scene,d,o),o.add||this.updateList.add(d),d})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1177),u=t(1178),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=function(n,h,o,r){if(!!h.shader){if(o.addToRenderList(h),n.pipelines.clear(),h.renderToTexture)h.load(),h.flush();else{var a=s(h,o,r).calc;(n.width!==h._rendererWidth||n.height!==h._rendererHeight)&&h.projOrtho(0,n.width,n.height,0),h.load(a.matrix),h.flush()}n.pipelines.rebind()}};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1180),u=t(1181),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=function(n,h,o,r){var a=h.faces,d=a.length;if(d!==0){o.addToRenderList(h);var l=n.pipelines.set(h.pipeline,h),f=s(h,o,r).calc,v=l.setGameObject(h),g=l.vertexViewF32,p=l.vertexViewU32,m=l.vertexCount*l.currentShader.vertexComponentCount-1,y=h.tintFill,T=[],C=h.debugCallback,S=f.a,E=f.b,P=f.c,M=f.d,A=f.e,R=f.f,O=h.viewPosition.z,F=h.hideCCW,I=o.roundPixels,G=o.alpha*h.alpha,z=0;n.pipelines.preBatch(h);for(var U=0;U<d;U++){var X=a[U];!X.isInView(o,F,O,G,S,E,P,M,A,R,I)||(l.shouldFlush(3)&&(l.flush(),m=0),m=X.load(g,p,m,v,y),z++,l.vertexCount+=3,C&&T.push(X))}h.totalFrame+=z,C&&C.call(h,h,T),n.pipelines.postBatch(h)}};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1183),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(19),u=function(n,h,o,r){o.addToRenderList(h);var a=n.pipelines.set(h.pipeline),d=s(h,o,r).calc,l=h.width,f=h.height,v=-h._radius,g=-h._radius,p=v+l,m=g+f,y=d.getX(0,0),T=d.getY(0,0),C=d.getX(v,g),S=d.getY(v,g),E=d.getX(v,m),P=d.getY(v,m),M=d.getX(p,m),A=d.getY(p,m),R=d.getX(p,g),O=d.getY(p,g);n.pipelines.preBatch(h),a.batchPointLight(h,o,C,S,E,P,M,A,R,O,y,T),n.pipelines.postBatch(h)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(229),u=t(5);u.register("shader",function(n,h,o,r,a,d,l){return this.displayList.add(new s(this.scene,n,h,o,r,a,d,l))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(230),u=t(5);u.register("mesh",function(n,h,o,r,a,d,l,f,v,g,p){return this.displayList.add(new s(this.scene,n,h,o,r,a,d,l,f,v,g,p))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(150);s.register("pointlight",function(n,h,o,r,a,d){return this.displayList.add(new u(this.scene,n,h,o,r,a,d))})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),h=t(229);u.register("shader",function(o,r){o===void 0&&(o={});var a=n(o,"key",null),d=n(o,"x",0),l=n(o,"y",0),f=n(o,"width",128),v=n(o,"height",128),g=new h(this.scene,a,d,l,f,v);return r!==void 0&&(o.add=r),s(this.scene,g,o),g})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),h=t(6),o=t(230);u.register("mesh",function(r,a){r===void 0&&(r={});var d=n(r,"key",null),l=n(r,"frame",null),f=h(r,"vertices",[]),v=h(r,"uvs",[]),g=h(r,"indicies",[]),p=h(r,"containsZ",!1),m=h(r,"normals",[]),y=h(r,"colors",16777215),T=h(r,"alphas",1),C=new o(this.scene,0,0,d,l,f,v,g,p,m,y,T);return a!==void 0&&(r.add=a),s(this.scene,C,r),C})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(28),u=t(16),n=t(13),h=t(150);u.register("pointlight",function(o,r){o===void 0&&(o={});var a=n(o,"color",16777215),d=n(o,"radius",128),l=n(o,"intensity",1),f=n(o,"attenuation",.1),v=new h(this.scene,0,0,a,d,l,f);return r!==void 0&&(o.add=r),s(this.scene,v,o),v})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(482),n=t(24),h=t(20),o=new s({Extends:u,initialize:function(a){this.scene=a,this.systems=a.sys,a.sys.settings.isBooted||a.sys.events.once(h.BOOT,this.boot,this),u.call(this)},boot:function(){var r=this.systems.events;r.on(h.SHUTDOWN,this.shutdown,this),r.on(h.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});n.register("LightsPlugin",o,"lights"),e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65);s.Area=t(1192),s.Circumference=t(302),s.CircumferencePoint=t(169),s.Clone=t(1193),s.Contains=t(66),s.ContainsPoint=t(1194),s.ContainsRect=t(1195),s.CopyFrom=t(1196),s.Equals=t(1197),s.GetBounds=t(1198),s.GetPoint=t(300),s.GetPoints=t(301),s.Offset=t(1199),s.OffsetPoint=t(1200),s.Random=t(170),e.exports=s},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.radius>0?Math.PI*s.radius*s.radius:0};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65),u=function(n){return new s(n.x,n.y,n.radius)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66),u=function(n,h){return s(n,h.x,h.y)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(66),u=function(n,h){return s(n,h.x,h.y)&&s(n,h.right,h.y)&&s(n,h.x,h.bottom)&&s(n,h.right,h.bottom)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x,s.y,s.radius)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x===u.x&&s.y===u.y&&s.radius===u.radius};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,h){return h===void 0&&(h=new s),h.x=n.left,h.y=n.top,h.width=n.diameter,h.height=n.diameter,h};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x+=u,s.y+=n,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x+=u.x,s.y+=u.y,s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(111);s.Area=t(1202),s.Circumference=t(447),s.CircumferencePoint=t(218),s.Clone=t(1203),s.Contains=t(112),s.ContainsPoint=t(1204),s.ContainsRect=t(1205),s.CopyFrom=t(1206),s.Equals=t(1207),s.GetBounds=t(1208),s.GetPoint=t(445),s.GetPoints=t(446),s.Offset=t(1209),s.OffsetPoint=t(1210),s.Random=t(180),e.exports=s},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.isEmpty()?0:s.getMajorRadius()*s.getMinorRadius()*Math.PI};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(111),u=function(n){return new s(n.x,n.y,n.width,n.height)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(112),u=function(n,h){return s(n,h.x,h.y)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(112),u=function(n,h){return s(n,h.x,h.y)&&s(n,h.right,h.y)&&s(n,h.x,h.bottom)&&s(n,h.right,h.bottom)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x,s.y,s.width,s.height)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x===u.x&&s.y===u.y&&s.width===u.width&&s.height===u.height};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,h){return h===void 0&&(h=new s),h.x=n.left,h.y=n.top,h.width=n.width,h.height=n.height,h};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x+=u,s.y+=n,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x+=u.x,s.y+=u.y,s};e.exports=t},function(e,c,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(231),n=function(h,o,r){if(r===void 0&&(r=[]),u(h,o)){var a=h.x,d=h.y,l=h.radius,f=o.x,v=o.y,g=o.radius,p,m,y,T,C;if(d===v)C=(g*g-l*l-f*f+a*a)/(2*(a-f)),p=1,m=-2*v,y=f*f+C*C-2*f*C+v*v-g*g,T=m*m-4*p*y,T===0?r.push(new s(C,-m/(2*p))):T>0&&(r.push(new s(C,(-m+Math.sqrt(T))/(2*p))),r.push(new s(C,(-m-Math.sqrt(T))/(2*p))));else{var S=(a-f)/(d-v),E=(g*g-l*l-f*f+a*a-v*v+d*d)/(2*(d-v));p=S*S+1,m=2*d*S-2*E*S-2*a,y=a*a+d*d+E*E-l*l-2*d*E,T=m*m-4*p*y,T===0?(C=-m/(2*p),r.push(new s(C,E-C*S))):T>0&&(C=(-m+Math.sqrt(T))/(2*p),r.push(new s(C,E-C*S)),C=(-m-Math.sqrt(T))/(2*p),r.push(new s(C,E-C*S)))}}return r};e.exports=n},function(e,c,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(232),u=t(151),n=function(h,o,r){if(r===void 0&&(r=[]),u(h,o)){var a=o.getLineA(),d=o.getLineB(),l=o.getLineC(),f=o.getLineD();s(a,h,r),s(d,h,r),s(l,h,r),s(f,h,r)}return r};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(140),u=t(487),n=t(47),h=new n;function o(d,l,f,v,g){var p=Math.cos(d),m=Math.sin(d);h.setTo(l,f,l+p,f+m);var y=u(h,v);y&&g.push(new s(y.x,y.y,d,y.w))}function r(d,l){return d.z-l.z}var a=function(d,l,f){Array.isArray(f)||(f=[f]);for(var v=[],g=[],p=0;p<f.length;p++)for(var m=f[p].points,y=0;y<m.length;y++){var T=Math.atan2(m[y].y-l,m[y].x-d);g.indexOf(T)===-1&&(o(T,d,l,f,v),o(T-1e-5,d,l,f,v),o(T+1e-5,d,l,f,v),g.push(T))}return v.sort(r)};e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=t(152),n=function(h,o,r){return r===void 0&&(r=new s),u(h,o)&&(r.x=Math.max(h.x,o.x),r.y=Math.max(h.y,o.y),r.width=Math.min(h.right,o.right)-r.x,r.height=Math.min(h.bottom,o.bottom)-r.y),r};e.exports=n},function(e,c,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(234),u=t(152),n=function(h,o,r){if(r===void 0&&(r=[]),u(h,o)){var a=h.getLineA(),d=h.getLineB(),l=h.getLineC(),f=h.getLineD();s(a,o,r),s(d,o,r),s(l,o,r),s(f,o,r)}return r};e.exports=n},function(e,c,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(489),u=t(234),n=function(h,o,r){if(r===void 0&&(r=[]),s(h,o)){var a=o.getLineA(),d=o.getLineB(),l=o.getLineC();u(a,h,r),u(d,h,r),u(l,h,r)}return r};e.exports=n},function(e,c,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(232),u=t(491),n=function(h,o,r){if(r===void 0&&(r=[]),u(h,o)){var a=h.getLineA(),d=h.getLineB(),l=h.getLineC();s(a,o,r),s(d,o,r),s(l,o,r)}return r};e.exports=n},function(e,c,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(494),u=t(492),n=function(h,o,r){if(r===void 0&&(r=[]),s(h,o)){var a=o.getLineA(),d=o.getLineB(),l=o.getLineC();u(h,a,r),u(h,d,r),u(h,l,r)}return r};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(496),u=function(n,h){if(!s(n,h))return!1;var o=Math.min(h.x1,h.x2),r=Math.max(h.x1,h.x2),a=Math.min(h.y1,h.y2),d=Math.max(h.y1,h.y2);return n.x>=o&&n.x<=r&&n.y>=a&&n.y<=d};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h,o,r){return r===void 0&&(r=0),!(u>s.right+r||n<s.left-r||h>s.bottom+r||o<s.top-r)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47);s.Angle=t(97),s.BresenhamPoints=t(317),s.CenterOn=t(1222),s.Clone=t(1223),s.CopyFrom=t(1224),s.Equals=t(1225),s.Extend=t(1226),s.GetEasedPoints=t(1227),s.GetMidPoint=t(1228),s.GetNearestPoint=t(1229),s.GetNormal=t(1230),s.GetPoint=t(307),s.GetPoints=t(172),s.GetShortestDistance=t(1231),s.Height=t(1232),s.Length=t(67),s.NormalAngle=t(497),s.NormalX=t(1233),s.NormalY=t(1234),s.Offset=t(1235),s.PerpSlope=t(1236),s.Random=t(173),s.ReflectAngle=t(1237),s.Rotate=t(1238),s.RotateAroundPoint=t(1239),s.RotateAroundXY=t(236),s.SetToAngle=t(1240),s.Slope=t(1241),s.Width=t(1242),e.exports=s},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h=u-(s.x1+s.x2)/2,o=n-(s.y1+s.y2)/2;return s.x1+=h,s.y1+=o,s.x2+=h,s.y2+=o,s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(47),u=function(n){return new s(n.x1,n.y1,n.x2,n.y2)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x1,s.y1,s.x2,s.y2)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x1===u.x1&&s.y1===u.y1&&s.x2===u.x2&&s.y2===u.y2};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=function(n,h,o){o===void 0&&(o=h);var r=s(n),a=n.x2-n.x1,d=n.y2-n.y1;return h&&(n.x1=n.x1-a/r*h,n.y1=n.y1-d/r*h),o&&(n.x2=n.x2+a/r*o,n.y2=n.y2+d/r*o),n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(352),u=t(80),n=t(4),h=function(o,r,a,d,l){d===void 0&&(d=0),l===void 0&&(l=[]);var f=[],v=o.x1,g=o.y1,p=o.x2-v,m=o.y2-g,y=u(r,l),T,C,S=a-1;for(T=0;T<S;T++)C=y(T/S),f.push(new n(v+p*C,g+m*C));if(C=y(1),f.push(new n(v+p*C,g+m*C)),d>0){var E=f[0],P=[E];for(T=1;T<f.length-1;T++){var M=f[T];s(E,M)>=d&&(P.push(M),E=M)}var A=f[f.length-1];return s(E,A)<d&&P.pop(),P.push(A),P}else return f};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h){return h===void 0&&(h=new s),h.x=(n.x1+n.x2)/2,h.y=(n.y1+n.y2)/2,h};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h,o){o===void 0&&(o=new s);var r=n.x1,a=n.y1,d=n.x2,l=n.y2,f=(d-r)*(d-r)+(l-a)*(l-a);if(f===0)return o;var v=((h.x-r)*(d-r)+(h.y-a)*(l-a))/f;return o.x=r+v*(d-r),o.y=a+v*(l-a),o};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(97),n=t(4),h=function(o,r){r===void 0&&(r=new n);var a=u(o)-s.TAU;return r.x=Math.cos(a),r.y=Math.sin(a),r};e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=s.x1,h=s.y1,o=s.x2,r=s.y2,a=(o-n)*(o-n)+(r-h)*(r-h);if(a===0)return!1;var d=((h-u.y)*(o-n)-(n-u.x)*(r-h))/a;return Math.abs(d)*Math.sqrt(a)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.abs(s.y1-s.y2)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(97),n=function(h){return Math.cos(u(h)-s.TAU)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(14),u=t(97),n=function(h){return Math.sin(u(h)-s.TAU)};e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x1+=u,s.y1+=n,s.x2+=u,s.y2+=n,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return-((s.x2-s.x1)/(s.y2-s.y1))};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(97),u=t(497),n=function(h,o){return 2*u(o)-Math.PI-s(h)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(236),u=function(n,h){var o=(n.x1+n.x2)/2,r=(n.y1+n.y2)/2;return s(n,o,r,h)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(236),u=function(n,h,o){return s(n,h.x,h.y,o)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h,o){return s.x1=u,s.y1=n,s.x2=u+Math.cos(h)*o,s.y2=n+Math.sin(h)*o,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return(s.y2-s.y1)/(s.x2-s.x1)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return Math.abs(s.x1-s.x2)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Face:t(116),GenerateGridVerts:t(1244),GenerateObjVerts:t(480),GenerateVerts:t(479),ParseObj:t(498),ParseObjMaterial:t(499),RotateFace:t(1245),Vertex:t(117)};e.exports=s},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(116),u=t(2),n=t(69),h=t(39),o=t(117),r=new h,a=new h,d=new n,l=function(f){var v=u(f,"mesh"),g=u(f,"texture",null),p=u(f,"frame"),m=u(f,"width",1),y=u(f,"height",m),T=u(f,"widthSegments",1),C=u(f,"heightSegments",T),S=u(f,"x",0),E=u(f,"y",0),P=u(f,"z",0),M=u(f,"rotateX",0),A=u(f,"rotateY",0),R=u(f,"rotateZ",0),O=u(f,"zIsUp",!0),F=u(f,"isOrtho",v?v.dirtyCache[11]:!1),I=u(f,"colors",[16777215]),G=u(f,"alphas",[1]),z=u(f,"tile",!1),U=u(f,"flipY",!1),X=u(f,"width",null),b={faces:[],verts:[]};if(r.set(S,E,P),a.set(M,A,R),d.fromRotationXYTranslation(a,r,O),!g&&v)g=v.texture;else if(v&&typeof g=="string")g=v.scene.sys.textures.get(g);else return b;var B=g.get(p);!X&&F&&g&&v&&(m=B.width/v.height,y=B.height/v.height);var L=m/2,D=y/2,w=Math.floor(T),N=Math.floor(C),V=w+1,Y=N+1,W=m/w,H=y/N,$=[],K=[],Z,J,k=0,Q=1,q=0,at=1;B&&(k=B.u0,Q=B.u1,U?(q=B.v1,at=B.v0):(q=B.v0,at=B.v1));var it=Q-k,_=at-q;for(J=0;J<Y;J++){var j=J*H-D;for(Z=0;Z<V;Z++){var ot=Z*W-L;K.push(ot,-j);var tt=k+it*(Z/w),rt=q+_*(J/N);$.push(tt,rt)}}Array.isArray(I)||(I=[I]),Array.isArray(G)||(G=[G]);var Nt=0,zt=0;for(J=0;J<N;J++)for(Z=0;Z<w;Z++){var vt=(Z+V*J)*2,ut=(Z+V*(J+1))*2,St=(Z+1+V*(J+1))*2,Tt=(Z+1+V*J)*2,mt=I[zt],Vt=G[Nt],Te=new o(K[vt],K[vt+1],0,$[vt],$[vt+1],mt,Vt).transformMat4(d),Ce=new o(K[ut],K[ut+1],0,$[ut],$[ut+1],mt,Vt).transformMat4(d),Se=new o(K[Tt],K[Tt+1],0,$[Tt],$[Tt+1],mt,Vt).transformMat4(d),Ee=new o(K[ut],K[ut+1],0,$[ut],$[ut+1],mt,Vt).transformMat4(d),Pe=new o(K[St],K[St+1],0,$[St],$[St+1],mt,Vt).transformMat4(d),Me=new o(K[Tt],K[Tt+1],0,$[Tt],$[Tt+1],mt,Vt).transformMat4(d);z&&(Te.setUVs(k,at),Ce.setUVs(k,q),Se.setUVs(Q,at),Ee.setUVs(k,q),Pe.setUVs(Q,q),Me.setUVs(Q,at)),zt++,zt===I.length&&(zt=0),Nt++,Nt===G.length&&(Nt=0),b.verts.push(Te,Ce,Se,Ee,Pe,Me),b.faces.push(new s(Te,Ce,Se),new s(Ee,Pe,Me))}return v&&(v.faces=v.faces.concat(b.faces),v.vertices=v.vertices.concat(b.verts)),b};e.exports=l},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){var o,r;if(n===void 0&&h===void 0){var a=s.getInCenter();o=a.x,r=a.y}var d=Math.cos(u),l=Math.sin(u),f=s.vertex1,v=s.vertex2,g=s.vertex3,p=f.x-o,m=f.y-r;f.set(p*d-m*l+o,p*l+m*d+r),p=v.x-o,m=v.y-r,v.set(p*d-m*l+o,p*l+m*d+r),p=g.x-o,m=g.y-r,g.set(p*d-m*l+o,p*l+m*d+r)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4);s.Ceil=t(1247),s.Clone=t(1248),s.CopyFrom=t(1249),s.Equals=t(1250),s.Floor=t(1251),s.GetCentroid=t(1252),s.GetMagnitude=t(500),s.GetMagnitudeSq=t(501),s.GetRectangleFromPoints=t(1253),s.Interpolate=t(1254),s.Invert=t(1255),s.Negative=t(1256),s.Project=t(1257),s.ProjectUnit=t(1258),s.SetMagnitude=t(1259),e.exports=s},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.setTo(Math.ceil(s.x),Math.ceil(s.y))};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n){return new s(n.x,n.y)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x,s.y)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x===u.x&&s.y===u.y};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.setTo(Math.floor(s.x),Math.floor(s.y))};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h){if(h===void 0&&(h=new s),!Array.isArray(n))throw new Error("GetCentroid points argument must be an array");var o=n.length;if(o<1)throw new Error("GetCentroid points array must not be empty");if(o===1)h.x=n[0].x,h.y=n[0].y;else{for(var r=0;r<o;r++)h.x+=n[r].x,h.y+=n[r].y;h.x/=o,h.y/=o}return h};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,h){h===void 0&&(h=new s);for(var o=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,l=0;l<n.length;l++){var f=n[l];f.x>o&&(o=f.x),f.x<r&&(r=f.x),f.y>a&&(a=f.y),f.y<d&&(d=f.y)}return h.x=r,h.y=d,h.width=o-r,h.height=a-d,h};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h,o,r){return o===void 0&&(o=0),r===void 0&&(r=new s),r.x=n.x+(h.x-n.x)*o,r.y=n.y+(h.y-n.y)*o,r};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.setTo(s.y,s.x)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h){return h===void 0&&(h=new s),h.setTo(-n.x,-n.y)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(501),n=function(h,o,r){r===void 0&&(r=new s);var a=h.x*o.x+h.y*o.y,d=a/u(o);return d!==0&&(r.x=d*o.x,r.y=d*o.y),r};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h,o){o===void 0&&(o=new s);var r=n.x*h.x+n.y*h.y;return r!==0&&(o.x=r*h.x,o.y=r*h.y),o};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(500),u=function(n,h){if(n.x!==0||n.y!==0){var o=s(n);n.x/=o,n.y/=o}return n.x*=h,n.y*=h,n};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(227);s.Clone=t(1261),s.Contains=t(228),s.ContainsPoint=t(1262),s.Earcut=t(59),s.GetAABB=t(469),s.GetNumberArray=t(1263),s.GetPoints=t(470),s.Perimeter=t(471),s.Reverse=t(1264),s.Simplify=t(1265),s.Smooth=t(472),s.Translate=t(1266),e.exports=s},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(227),u=function(n){return new s(n.points)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(228),u=function(n,h){return s(n,h.x,h.y)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=[]);for(var n=0;n<s.points.length;n++)u.push(s.points[n].x),u.push(s.points[n].y);return u};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.points.reverse(),s};e.exports=t},function(e,c){function t(r,a){var d=r.x-a.x,l=r.y-a.y;return d*d+l*l}function s(r,a,d){var l=a.x,f=a.y,v=d.x-l,g=d.y-f;if(v!==0||g!==0){var p=((r.x-l)*v+(r.y-f)*g)/(v*v+g*g);p>1?(l=d.x,f=d.y):p>0&&(l+=v*p,f+=g*p)}return v=r.x-l,g=r.y-f,v*v+g*g}function u(r,a){for(var d=r[0],l=[d],f,v=1,g=r.length;v<g;v++)f=r[v],t(f,d)>a&&(l.push(f),d=f);return d!==f&&l.push(f),l}function n(r,a,d,l,f){for(var v=l,g,p=a+1;p<d;p++){var m=s(r[p],r[a],r[d]);m>v&&(g=p,v=m)}v>l&&(g-a>1&&n(r,a,g,l,f),f.push(r[g]),d-g>1&&n(r,g,d,l,f))}function h(r,a){var d=r.length-1,l=[r[0]];return n(r,0,d,a,l),l.push(r[d]),l}var o=function(r,a,d){a===void 0&&(a=1),d===void 0&&(d=!1);var l=r.points;if(l.length>2){var f=a*a;d||(l=u(l,f)),r.setTo(h(l,f))}return r};e.exports=o},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){for(var h=s.points,o=0;o<h.length;o++)h[o].x+=u,h[o].y+=n;return s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.width*s.height};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x=Math.ceil(s.x),s.y=Math.ceil(s.y),s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x=Math.ceil(s.x),s.y=Math.ceil(s.y),s.width=Math.ceil(s.width),s.height=Math.ceil(s.height),s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n){return new s(n.x,n.y,n.width,n.height)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(57),u=function(n,h){return s(n,h.x,h.y)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x,s.y,s.width,s.height)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x===u.x&&s.y===u.y&&s.width===u.width&&s.height===u.height};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(237),u=function(n,h){var o=s(n);return o<s(h)?n.setSize(h.height*o,h.height):n.setSize(h.width,h.width/o),n.setPosition(h.centerX-n.width/2,h.centerY-n.height/2)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(237),u=function(n,h){var o=s(n);return o>s(h)?n.setSize(h.height*o,h.height):n.setSize(h.width,h.width/o),n.setPosition(h.centerX-n.width/2,h.centerY-n.height/2)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x=Math.floor(s.x),s.y=Math.floor(s.y),s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.x=Math.floor(s.x),s.y=Math.floor(s.y),s.width=Math.floor(s.width),s.height=Math.floor(s.height),s};e.exports=t},function(e,c,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=function(n,h,o,r,a){return a===void 0&&(a=new s),a.setTo(Math.min(n,o),Math.min(h,r),Math.abs(n-o),Math.abs(h-r))};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h){return h===void 0&&(h=new s),h.x=n.centerX,h.y=n.centerY,h};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=function(n,h){return h===void 0&&(h=new s),h.x=n.width,h.y=n.height,h};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(190),u=function(n,h,o){var r=n.centerX,a=n.centerY;return n.setSize(n.width+h*2,n.height+o*2),s(n,r,a)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(10),u=t(152),n=function(h,o,r){return r===void 0&&(r=new s),u(h,o)?(r.x=Math.max(h.x,o.x),r.y=Math.max(h.y,o.y),r.width=Math.min(h.right,o.right)-r.x,r.height=Math.min(h.bottom,o.bottom)-r.y):r.setEmpty(),r};e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){for(var n=s.x,h=s.right,o=s.y,r=s.bottom,a=0;a<u.length;a++)n=Math.min(n,u[a].x),h=Math.max(h,u[a].x),o=Math.min(o,u[a].y),r=Math.max(r,u[a].y);return s.x=n,s.y=o,s.width=h-n,s.height=r-o,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){var n=Math.min(s.x,u.x),h=Math.max(s.right,u.right);s.x=n,s.width=h-n;var o=Math.min(s.y,u.y),r=Math.max(s.bottom,u.bottom);return s.y=o,s.height=r-o,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){var h=Math.min(s.x,u),o=Math.max(s.right,u);s.x=h,s.width=o-h;var r=Math.min(s.y,n),a=Math.max(s.bottom,n);return s.y=r,s.height=a-r,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return s.x+=u,s.y+=n,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x+=u.x,s.y+=u.y,s};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x<u.right&&s.right>u.x&&s.y<u.bottom&&s.bottom>u.y};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(4),u=t(36),n=function(h,o,r){r===void 0&&(r=new s),o=u(o);var a=Math.sin(o),d=Math.cos(o),l=d>0?h.width/2:h.width/-2,f=a>0?h.height/2:h.height/-2;return Math.abs(l*a)<Math.abs(f*d)?f=l*a/d:l=f*d/a,r.x=l+h.centerX,r.y=f+h.centerY,r};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(195),u=t(503),n=t(4),h=function(o,r,a){if(a===void 0&&(a=new n),u(o,r))switch(s(0,3)){case 0:a.x=o.x+Math.random()*(r.right-o.x),a.y=o.y+Math.random()*(r.top-o.y);break;case 1:a.x=r.x+Math.random()*(o.right-r.x),a.y=r.bottom+Math.random()*(o.bottom-r.bottom);break;case 2:a.x=o.x+Math.random()*(r.x-o.x),a.y=r.y+Math.random()*(o.bottom-r.y);break;case 3:a.x=r.right+Math.random()*(o.right-r.right),a.y=o.y+Math.random()*(r.bottom-o.y);break}return a};e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.width===u.width&&s.height===u.height};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n){return n===void 0&&(n=u),s.width*=u,s.height*=n,s};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82);s.Area=t(1294),s.BuildEquilateral=t(1295),s.BuildFromPolygon=t(1296),s.BuildRight=t(1297),s.CenterOn=t(1298),s.Centroid=t(504),s.CircumCenter=t(1299),s.CircumCircle=t(1300),s.Clone=t(1301),s.Contains=t(115),s.ContainsArray=t(235),s.ContainsPoint=t(1302),s.CopyFrom=t(1303),s.Decompose=t(495),s.Equals=t(1304),s.GetPoint=t(476),s.GetPoints=t(477),s.InCenter=t(506),s.Perimeter=t(1305),s.Offset=t(505),s.Random=t(181),s.Rotate=t(1306),s.RotateAroundPoint=t(1307),s.RotateAroundXY=t(238),e.exports=s},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){var u=s.x1,n=s.y1,h=s.x2,o=s.y2,r=s.x3,a=s.y3;return Math.abs(((r-u)*(o-n)-(h-u)*(a-n))/2)};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82),u=function(n,h,o){var r=o*(Math.sqrt(3)/2),a=n,d=h,l=n+o/2,f=h+r,v=n-o/2,g=h+r;return new s(a,d,l,f,v,g)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(59),u=t(82),n=function(h,o,r,a,d){o===void 0&&(o=null),r===void 0&&(r=1),a===void 0&&(a=1),d===void 0&&(d=[]);for(var l=s(h,o),f,v,g,p,m,y,T,C,S,E=0;E<l.length;E+=3)f=l[E],v=l[E+1],g=l[E+2],p=h[f*2]*r,m=h[f*2+1]*a,y=h[v*2]*r,T=h[v*2+1]*a,C=h[g*2]*r,S=h[g*2+1]*a,d.push(new u(p,m,y,T,C,S));return d};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82),u=function(n,h,o,r){r===void 0&&(r=o);var a=n,d=h,l=n,f=h-r,v=n+o,g=h;return new s(a,d,l,f,v,g)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(504),u=t(505),n=function(h,o,r,a){a===void 0&&(a=s);var d=a(h),l=o-d.x,f=r-d.y;return u(h,l,f)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(3);function u(h,o,r,a){return h*a-o*r}var n=function(h,o){o===void 0&&(o=new s);var r=h.x3,a=h.y3,d=h.x1-r,l=h.y1-a,f=h.x2-r,v=h.y2-a,g=2*u(d,l,f,v),p=u(l,d*d+l*l,v,f*f+v*v),m=u(d,d*d+l*l,f,f*f+v*v);return o.x=r-p/g,o.y=a+m/g,o};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65),u=function(n,h){h===void 0&&(h=new s);var o=n.x1,r=n.y1,a=n.x2,d=n.y2,l=n.x3,f=n.y3,v=a-o,g=d-r,p=l-o,m=f-r,y=v*(o+a)+g*(r+d),T=p*(o+l)+m*(r+f),C=2*(v*(f-d)-g*(l-a)),S,E;if(Math.abs(C)<1e-6){var P=Math.min(o,a,l),M=Math.min(r,d,f);S=(Math.max(o,a,l)-P)*.5,E=(Math.max(r,d,f)-M)*.5,h.x=P+S,h.y=M+E,h.radius=Math.sqrt(S*S+E*E)}else h.x=(m*y-g*T)/C,h.y=(v*T-p*y)/C,S=h.x-o,E=h.y-r,h.radius=Math.sqrt(S*S+E*E);return h};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(82),u=function(n){return new s(n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(115),u=function(n,h){return s(n,h.x,h.y)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u.setTo(s.x1,s.y1,s.x2,s.y2,s.x3,s.y3)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.x1===u.x1&&s.y1===u.y1&&s.x2===u.x2&&s.y2===u.y2&&s.x3===u.x3&&s.y3===u.y3};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(67),u=function(n){var h=n.getLineA(),o=n.getLineB(),r=n.getLineC();return s(h)+s(o)+s(r)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(238),u=t(506),n=function(h,o){var r=u(h);return s(h,r.x,r.y,o)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(238),u=function(n,h,o){return s(n,h.x,h.y,o)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(203),u=t(17),n={CreatePixelPerfectHandler:t(507),CreateInteractiveObject:t(508),Events:t(51),Gamepad:t(1309),InputManager:t(409),InputPlugin:t(1321),InputPluginCache:t(153),Keyboard:t(1322),Mouse:t(1336),Pointer:t(412),Touch:t(1337)};n=u(!1,n,s),e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Axis:t(509),Button:t(510),Events:t(239),Gamepad:t(511),GamepadPlugin:t(1316),Configs:t(1317)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="connected"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="disconnected"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(239),h=t(511),o=t(6),r=t(153),a=t(51),d=new s({Extends:u,initialize:function(f){u.call(this),this.scene=f.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=f,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,f.pluginEvents.once(a.BOOT,this.boot,this),f.pluginEvents.on(a.START,this.start,this)},boot:function(){var l=this.scene.sys.game,f=this.settings.input,v=l.config;this.enabled=o(f,"gamepad",v.inputGamepad)&&l.device.input.gamepads,this.target=o(f,"gamepad.target",v.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(a.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(a.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var l=this,f=this.target,v=function(g){g.defaultPrevented||!l.isActive()||(l.refreshPads(),l.queue.push(g))};this.onGamepadHandler=v,f.addEventListener("gamepadconnected",v,!1),f.addEventListener("gamepaddisconnected",v,!1),this.sceneInputPlugin.pluginEvents.on(a.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(a.UPDATE,this.update);for(var l=0;l<this.gamepads.length;l++)this.gamepads[l].removeAllListeners()},disconnectAll:function(){for(var l=0;l<this.gamepads.length;l++)this.gamepads[l].pad.connected=!1},refreshPads:function(){var l=navigator.getGamepads();if(!l)this.disconnectAll();else for(var f=this.gamepads,v=0;v<l.length;v++){var g=l[v];if(!!g){var p=g.id,m=g.index,y=f[m];if(y)y.id!==p?(y.destroy(),f[m]=new h(this,g)):y.update(g);else{var T=new h(this,g);f[m]=T,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=T):this._pad3=T:this._pad2=T:this._pad1=T}}}},getAll:function(){for(var l=[],f=this.gamepads,v=0;v<f.length;v++)f[v]&&l.push(f[v]);return l},getPad:function(l){for(var f=this.gamepads,v=0;v<f.length;v++)if(f[v]&&f[v].index===l)return f[v]},update:function(){if(!!this.enabled){this.refreshPads();var l=this.queue.length;if(l!==0)for(var f=this.queue.splice(0,l),v=0;v<l;v++){var g=f[v],p=this.getPad(g.gamepad.index);g.type==="gamepadconnected"?this.emit(n.CONNECTED,p,g):g.type==="gamepaddisconnected"&&this.emit(n.DISCONNECTED,p,g)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var l=0;l<this.gamepads.length;l++)this.gamepads[l]&&this.gamepads[l].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});r.register("GamepadPlugin",d,"gamepad","gamepad","inputGamepad"),e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DUALSHOCK_4:t(1318),SNES_USB:t(1319),XBOX_360:t(1320)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(65),u=t(66),n=t(0),h=t(203),o=t(508),r=t(507),a=t(50),d=t(111),l=t(112),f=t(51),v=t(9),g=t(2),p=t(56),m=t(153),y=t(7),T=t(24),C=t(10),S=t(57),E=t(20),P=t(82),M=t(115),A=new n({Extends:v,initialize:function(O){v.call(this),this.scene=O,this.systems=O.sys,this.settings=O.sys.settings,this.manager=O.sys.game.input,this.pluginEvents=new v,this.enabled=!0,this.displayList,this.cameras,m.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var F={cancelled:!1};this._eventContainer={stopPropagation:function(){F.cancelled=!0}},this._eventData=F,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,O.sys.events.once(E.BOOT,this.boot,this),O.sys.events.on(E.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(E.DESTROY,this.destroy,this),this.pluginEvents.emit(f.BOOT)},start:function(){var R=this.systems.events;R.on(E.TRANSITION_START,this.transitionIn,this),R.on(E.TRANSITION_OUT,this.transitionOut,this),R.on(E.TRANSITION_COMPLETE,this.transitionComplete,this),R.on(E.PRE_UPDATE,this.preUpdate,this),R.once(E.SHUTDOWN,this.shutdown,this),this.manager.events.on(f.GAME_OUT,this.onGameOut,this),this.manager.events.on(f.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(f.START)},onGameOver:function(R){this.isActive()&&this.emit(f.GAME_OVER,R.timeStamp,R)},onGameOut:function(R){this.isActive()&&this.emit(f.GAME_OUT,R.timeStamp,R)},preUpdate:function(){this.pluginEvents.emit(f.PRE_UPDATE);var R=this._pendingRemoval,O=this._pendingInsertion,F=R.length,I=O.length;if(!(F===0&&I===0)){for(var G=this._list,z=0;z<F;z++){var U=R[z],X=G.indexOf(U);X>-1&&(G.splice(X,1),this.clear(U,!0))}R.length=0,this._pendingRemoval.length=0,this._list=G.concat(O.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(R,O){if(!this.isActive())return!1;if(this.pluginEvents.emit(f.UPDATE,R,O),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var F,I=this.manager,G=I.pointers,z=I.pointersTotal;for(F=0;F<z;F++)G[F].updateMotion();if(this._list.length===0)return!1;var U=this.pollRate;if(U===-1)return!1;if(U>0)if(this._pollTimer-=O,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var X=!1;for(F=0;F<z;F++){var b=0,B=G[F];this._tempZones=[],this._temp=this.hitTestPointer(B),this.sortGameObjects(this._temp,B),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),b+=this.processOverOutEvents(B),this.getDragState(B)===2&&this.processDragThresholdEvent(B,R),b>0&&(X=!0)}return X},update:function(R,O){if(!this.isActive())return!1;for(var F=O.length,I=!1,G=0;G<F;G++){var z=0,U=O[G];switch(this._tempZones=[],this._temp=this.hitTestPointer(U),this.sortGameObjects(this._temp,U),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),R){case h.MOUSE_DOWN:z+=this.processDragDownEvent(U),z+=this.processDownEvents(U),z+=this.processOverOutEvents(U);break;case h.MOUSE_UP:z+=this.processDragUpEvent(U),z+=this.processUpEvents(U),z+=this.processOverOutEvents(U);break;case h.TOUCH_START:z+=this.processDragDownEvent(U),z+=this.processDownEvents(U),z+=this.processOverEvents(U);break;case h.TOUCH_END:case h.TOUCH_CANCEL:z+=this.processDragUpEvent(U),z+=this.processUpEvents(U),z+=this.processOutEvents(U);break;case h.MOUSE_MOVE:case h.TOUCH_MOVE:z+=this.processDragMoveEvent(U),z+=this.processMoveEvents(U),z+=this.processOverOutEvents(U);break;case h.MOUSE_WHEEL:z+=this.processWheelEvent(U);break}z>0&&(I=!0)}return this._updatedThisFrame=!0,I},clear:function(R,O){O===void 0&&(O=!1);var F=R.input;if(!!F){O||this.queueForRemoval(R),F.gameObject=void 0,F.target=void 0,F.hitArea=void 0,F.hitAreaCallback=void 0,F.callbackContext=void 0,R.input=null;var I=this._draggable.indexOf(R);return I>-1&&this._draggable.splice(I,1),I=this._drag[0].indexOf(R),I>-1&&this._drag[0].splice(I,1),I=this._over[0].indexOf(R),I>-1&&(this._over[0].splice(I,1),this.manager.resetCursor(F)),R}},disable:function(R){R.input.enabled=!1},enable:function(R,O,F,I){return I===void 0&&(I=!1),R.input?R.input.enabled=!0:this.setHitArea(R,O,F),R.input&&I&&!R.input.dropZone&&(R.input.dropZone=I),this},hitTestPointer:function(R){for(var O=this.cameras.getCamerasBelowPointer(R),F=0;F<O.length;F++){for(var I=O[F],G=this.manager.hitTest(R,this._list,I),z=0;z<G.length;z++){var U=G[z];U.input.dropZone&&this._tempZones.push(U)}if(G.length>0)return R.camera=I,G}return R.camera=O[0],[]},processDownEvents:function(R){var O=0,F=this._temp,I=this._eventData,G=this._eventContainer;I.cancelled=!1;for(var z=!1,U=0;U<F.length;U++){var X=F[U];if(!!X.input){if(O++,X.emit(f.GAMEOBJECT_POINTER_DOWN,R,X.input.localX,X.input.localY,G),I.cancelled||!X.input){z=!0;break}if(this.emit(f.GAMEOBJECT_DOWN,R,X,G),I.cancelled||!X.input){z=!0;break}}}return!z&&this.manager&&(R.downElement===this.manager.game.canvas?this.emit(f.POINTER_DOWN,R,F):this.emit(f.POINTER_DOWN_OUTSIDE,R)),O},getDragState:function(R){return this._dragState[R.id]},setDragState:function(R,O){this._dragState[R.id]=O},processDragThresholdEvent:function(R,O){var F=!1,I=this.dragTimeThreshold,G=this.dragDistanceThreshold;if((G>0&&a(R.x,R.y,R.downX,R.downY)>=G||I>0&&O>=R.downTime+I)&&(F=!0),F)return this.setDragState(R,3),this.processDragStartList(R)},processDragStartList:function(R){if(this.getDragState(R)!==3)return 0;for(var O=this._drag[R.id],F=0;F<O.length;F++){var I=O[F],G=I.input;G.dragState=2,G.dragStartX=I.x,G.dragStartY=I.y,G.dragStartXGlobal=R.worldX,G.dragStartYGlobal=R.worldY,G.dragX=G.dragStartXGlobal-G.dragStartX,G.dragY=G.dragStartYGlobal-G.dragStartY,I.emit(f.GAMEOBJECT_DRAG_START,R,G.dragX,G.dragY),this.emit(f.DRAG_START,R,I)}return this.setDragState(R,4),O.length},processDragDownEvent:function(R){var O=this._temp;if(this._draggable.length===0||O.length===0||!R.primaryDown||this.getDragState(R)!==0)return 0;this.setDragState(R,1);for(var F=[],I=0;I<O.length;I++){var G=O[I];G.input.draggable&&G.input.dragState===0&&F.push(G)}return F.length===0?(this.setDragState(R,0),0):(F.length>1&&(this.sortGameObjects(F,R),this.topOnly&&F.splice(1)),this._drag[R.id]=F,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(R,3),this.processDragStartList(R)):(this.setDragState(R,2),0))},processDragMoveEvent:function(R){if(this.getDragState(R)===2&&this.processDragThresholdEvent(R,this.manager.game.loop.now),this.getDragState(R)!==4)return 0;for(var O=this._tempZones,F=this._drag[R.id],I=0;I<F.length;I++){var G=F[I],z=G.input,U=z.target;if(U){var X=O.indexOf(U);X===0?(G.emit(f.GAMEOBJECT_DRAG_OVER,R,U),this.emit(f.DRAG_OVER,R,G,U)):X>0?(G.emit(f.GAMEOBJECT_DRAG_LEAVE,R,U),this.emit(f.DRAG_LEAVE,R,G,U),z.target=O[0],U=z.target,G.emit(f.GAMEOBJECT_DRAG_ENTER,R,U),this.emit(f.DRAG_ENTER,R,G,U)):(G.emit(f.GAMEOBJECT_DRAG_LEAVE,R,U),this.emit(f.DRAG_LEAVE,R,G,U),O[0]?(z.target=O[0],U=z.target,G.emit(f.GAMEOBJECT_DRAG_ENTER,R,U),this.emit(f.DRAG_ENTER,R,G,U)):z.target=null)}else!U&&O[0]&&(z.target=O[0],U=z.target,G.emit(f.GAMEOBJECT_DRAG_ENTER,R,U),this.emit(f.DRAG_ENTER,R,G,U));var b,B;if(!G.parentContainer)b=R.worldX-z.dragX,B=R.worldY-z.dragY;else{var L=R.worldX-z.dragStartXGlobal,D=R.worldY-z.dragStartYGlobal,w=G.getParentRotation(),N=L*Math.cos(w)+D*Math.sin(w),V=D*Math.cos(w)-L*Math.sin(w);N*=1/G.parentContainer.scaleX,V*=1/G.parentContainer.scaleY,b=N+z.dragStartX,B=V+z.dragStartY}G.emit(f.GAMEOBJECT_DRAG,R,b,B),this.emit(f.DRAG,R,G,b,B)}return F.length},processDragUpEvent:function(R){for(var O=this._drag[R.id],F=0;F<O.length;F++){var I=O[F],G=I.input;if(G&&G.dragState===2){G.dragState=0,G.dragX=G.localX-I.displayOriginX,G.dragY=G.localY-I.displayOriginY;var z=!1,U=G.target;U&&(I.emit(f.GAMEOBJECT_DROP,R,U),this.emit(f.DROP,R,I,U),G.target=null,z=!0),I.input&&(I.emit(f.GAMEOBJECT_DRAG_END,R,G.dragX,G.dragY,z),this.emit(f.DRAG_END,R,I,z))}}return this.setDragState(R,0),O.splice(0),0},processMoveEvents:function(R){var O=0,F=this._temp,I=this._eventData,G=this._eventContainer;I.cancelled=!1;for(var z=!1,U=0;U<F.length;U++){var X=F[U];if(!!X.input){if(O++,X.emit(f.GAMEOBJECT_POINTER_MOVE,R,X.input.localX,X.input.localY,G),I.cancelled||!X.input){z=!0;break}if(this.emit(f.GAMEOBJECT_MOVE,R,X,G),I.cancelled||!X.input){z=!0;break}if(this.topOnly)break}}return z||this.emit(f.POINTER_MOVE,R,F),O},processWheelEvent:function(R){var O=0,F=this._temp,I=this._eventData,G=this._eventContainer;I.cancelled=!1;for(var z=!1,U=R.deltaX,X=R.deltaY,b=R.deltaZ,B=0;B<F.length;B++){var L=F[B];if(!!L.input){if(O++,L.emit(f.GAMEOBJECT_POINTER_WHEEL,R,U,X,b,G),I.cancelled||!L.input){z=!0;break}if(this.emit(f.GAMEOBJECT_WHEEL,R,L,U,X,b,G),I.cancelled||!L.input){z=!0;break}}}return z||this.emit(f.POINTER_WHEEL,R,F,U,X,b),O},processOverEvents:function(R){var O=this._temp,F=0,I=O.length,G=[];if(I>0){var z=this.manager,U=this._eventData,X=this._eventContainer;U.cancelled=!1;for(var b=!1,B=0;B<I;B++){var L=O[B];if(!!L.input){if(G.push(L),z.setCursor(L.input),L.emit(f.GAMEOBJECT_POINTER_OVER,R,L.input.localX,L.input.localY,X),F++,U.cancelled||!L.input){b=!0;break}if(this.emit(f.GAMEOBJECT_OVER,R,L,X),U.cancelled||!L.input){b=!0;break}}}b||this.emit(f.POINTER_OVER,R,G)}return this._over[R.id]=G,F},processOutEvents:function(R){var O=this._over[R.id],F=0,I=O.length;if(I>0){var G=this.manager,z=this._eventData,U=this._eventContainer;z.cancelled=!1;var X=!1;this.sortGameObjects(O,R);for(var b=0;b<I;b++){var B=O[b];if(B=O[b],!!B.input){if(G.resetCursor(B.input),B.emit(f.GAMEOBJECT_POINTER_OUT,R,U),F++,z.cancelled||!B.input){X=!0;break}if(this.emit(f.GAMEOBJECT_OUT,R,B,U),z.cancelled||!B.input){X=!0;break}X||this.emit(f.POINTER_OUT,R,O)}}this._over[R.id]=[]}return F},processOverOutEvents:function(R){var O=this._temp,F,I,G=[],z=[],U=[],X=this._over[R.id],b=this._drag[R.id],B=this.manager;for(F=0;F<X.length;F++)I=X[F],O.indexOf(I)===-1&&b.indexOf(I)===-1?G.push(I):U.push(I);for(F=0;F<O.length;F++)I=O[F],X.indexOf(I)===-1&&z.push(I);var L=G.length,D=0,w=this._eventData,N=this._eventContainer;w.cancelled=!1;var V=!1;if(L>0){for(this.sortGameObjects(G,R),F=0;F<L;F++)if(I=G[F],!!I.input){if(B.resetCursor(I.input),I.emit(f.GAMEOBJECT_POINTER_OUT,R,N),D++,w.cancelled||!I.input){V=!0;break}if(this.emit(f.GAMEOBJECT_OUT,R,I,N),w.cancelled||!I.input){V=!0;break}}V||this.emit(f.POINTER_OUT,R,G)}if(L=z.length,w.cancelled=!1,V=!1,L>0){for(this.sortGameObjects(z,R),F=0;F<L;F++)if(I=z[F],!!I.input){if(B.setCursor(I.input),I.emit(f.GAMEOBJECT_POINTER_OVER,R,I.input.localX,I.input.localY,N),D++,w.cancelled||!I.input){V=!0;break}if(this.emit(f.GAMEOBJECT_OVER,R,I,N),w.cancelled||!I.input){V=!0;break}}V||this.emit(f.POINTER_OVER,R,z)}return X=U.concat(z),this._over[R.id]=this.sortGameObjects(X,R),D},processUpEvents:function(R){var O=this._temp,F=this._eventData,I=this._eventContainer;F.cancelled=!1;for(var G=!1,z=0;z<O.length;z++){var U=O[z];if(!!U.input){if(U.emit(f.GAMEOBJECT_POINTER_UP,R,U.input.localX,U.input.localY,I),F.cancelled||!U.input){G=!0;break}if(this.emit(f.GAMEOBJECT_UP,R,U,I),F.cancelled||!U.input){G=!0;break}}}return!G&&this.manager&&(R.upElement===this.manager.game.canvas?this.emit(f.POINTER_UP,R,O):this.emit(f.POINTER_UP_OUTSIDE,R)),O.length},queueForInsertion:function(R){return this._pendingInsertion.indexOf(R)===-1&&this._list.indexOf(R)===-1&&this._pendingInsertion.push(R),this},queueForRemoval:function(R){return this._pendingRemoval.push(R),this},setDraggable:function(R,O){O===void 0&&(O=!0),Array.isArray(R)||(R=[R]);for(var F=0;F<R.length;F++){var I=R[F];I.input.draggable=O;var G=this._draggable.indexOf(I);O&&G===-1?this._draggable.push(I):!O&&G>-1&&this._draggable.splice(G,1)}return this},makePixelPerfect:function(R){R===void 0&&(R=1);var O=this.systems.textures;return r(O,R)},setHitArea:function(R,O,F){if(O===void 0)return this.setHitAreaFromTexture(R);Array.isArray(R)||(R=[R]);var I=!1,G=!1,z=!1,U=!1,X=!1,b=!0;if(y(O)){var B=O;O=g(B,"hitArea",null),F=g(B,"hitAreaCallback",null),I=g(B,"draggable",!1),G=g(B,"dropZone",!1),z=g(B,"cursor",!1),U=g(B,"useHandCursor",!1),X=g(B,"pixelPerfect",!1);var L=g(B,"alphaTolerance",1);X&&(O={},F=this.makePixelPerfect(L)),(!O||!F)&&(this.setHitAreaFromTexture(R),b=!1)}else typeof O=="function"&&!F&&(F=O,O={});for(var D=0;D<R.length;D++){var w=R[D];if(X&&w.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var N=w.input?w.input:o(w,O,F);N.customHitArea=b,N.dropZone=G,N.cursor=U?"pointer":z,w.input=N,I&&this.setDraggable(w),this.queueForInsertion(w)}return this},setHitAreaCircle:function(R,O,F,I,G){G===void 0&&(G=u);var z=new s(O,F,I);return this.setHitArea(R,z,G)},setHitAreaEllipse:function(R,O,F,I,G,z){z===void 0&&(z=l);var U=new d(O,F,I,G);return this.setHitArea(R,U,z)},setHitAreaFromTexture:function(R,O){O===void 0&&(O=S),Array.isArray(R)||(R=[R]);for(var F=0;F<R.length;F++){var I=R[F],G=I.frame,z=0,U=0;if(I.width?(z=I.width,U=I.height):G&&(z=G.realWidth,U=G.realHeight),I.type==="Container"&&(z===0||U===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}z!==0&&U!==0&&(I.input=o(I,new C(0,0,z,U),O),this.queueForInsertion(I))}return this},setHitAreaRectangle:function(R,O,F,I,G,z){z===void 0&&(z=S);var U=new C(O,F,I,G);return this.setHitArea(R,U,z)},setHitAreaTriangle:function(R,O,F,I,G,z,U,X){X===void 0&&(X=M);var b=new P(O,F,I,G,z,U);return this.setHitArea(R,b,X)},enableDebug:function(R,O){O===void 0&&(O=65280);var F=R.input;if(!F||!F.hitArea)return this;var I=F.hitArea,G=I.type,z=F.hitAreaDebug,U=this.systems.add,X=this.systems.updateList;z&&(X.remove(z),z.destroy(),z=null);var b=0,B=0;switch(G){case p.CIRCLE:z=U.arc(0,0,I.radius),b=I.x-I.radius,B=I.y-I.radius;break;case p.ELLIPSE:z=U.ellipse(0,0,I.width,I.height),b=I.x-I.width/2,B=I.y-I.height/2;break;case p.LINE:z=U.line(0,0,I.x1,I.y1,I.x2,I.y2);break;case p.POLYGON:z=U.polygon(0,0,I.points);break;case p.RECTANGLE:z=U.rectangle(0,0,I.width,I.height),b=I.x,B=I.y;break;case p.TRIANGLE:z=U.triangle(0,0,I.x1,I.y1,I.x2,I.y2,I.x3,I.y3);break}return z&&(z.isFilled=!1,z.preUpdate=function(){z.setStrokeStyle(1/R.scale,O),z.setDisplayOrigin(R.displayOriginX,R.displayOriginY);var L=R.x,D=R.y,w=R.rotation,N=R.scaleX,V=R.scaleY;if(R.parentContainer){var Y=R.getWorldTransformMatrix();L=Y.tx,D=Y.ty,w=Y.rotation,N=Y.scaleX,V=Y.scaleY}z.setRotation(w),z.setScale(N,V),z.setPosition(L+b,D+B),z.setScrollFactor(R.scrollFactorX,R.scrollFactorY),z.setDepth(R.depth)},X.add(z),F.hitAreaDebug=z),this},removeDebug:function(R){var O=R.input;if(O&&O.hitAreaDebug){var F=O.hitAreaDebug;this.systems.updateList.remove(F),F.destroy(),O.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(R){return this.pollRate=R,this._pollTimer=0,this},setGlobalTopOnly:function(R){return this.manager.globalTopOnly=R,this},setTopOnly:function(R){return this.topOnly=R,this},sortGameObjects:function(R,O){if(R.length<2)return R;var F=O.camera.renderList;return R.sort(function(I,G){return F.indexOf(G)-F.indexOf(I)})},sortDropZones:function(R){return R.length<2?R:(this.scene.sys.depthSort(),R.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(R,O){if(!R.parentContainer&&!O.parentContainer)return this.displayList.getIndex(O)-this.displayList.getIndex(R);if(R.parentContainer===O.parentContainer)return O.parentContainer.getIndex(O)-R.parentContainer.getIndex(R);if(R.parentContainer===O)return-1;if(O.parentContainer===R)return 1;for(var F=R.getIndexList(),I=O.getIndexList(),G=Math.min(F.length,I.length),z=0;z<G;z++){var U=F[z],X=I[z];if(U!==X)return X-U}return I.length-F.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(R){return this.manager.addPointer(R)},setDefaultCursor:function(R){return this.manager.setDefaultCursor(R),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(f.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var R=0;R<10;R++)this._drag[R]=[],this._over[R]=[];this.removeAllListeners();var O=this.manager;O.canvas.style.cursor=O.defaultCursor;var F=this.systems.events;F.off(E.TRANSITION_START,this.transitionIn,this),F.off(E.TRANSITION_OUT,this.transitionOut,this),F.off(E.TRANSITION_COMPLETE,this.transitionComplete,this),F.off(E.PRE_UPDATE,this.preUpdate,this),O.events.off(f.GAME_OUT,this.onGameOut,this),O.events.off(f.GAME_OVER,this.onGameOver,this),F.off(E.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(f.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(E.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});T.register("InputPlugin",A,"input"),e.exports=A},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Events:t(154),KeyboardManager:t(410),KeyboardPlugin:t(1330),Key:t(512),KeyCodes:t(143),KeyCombo:t(513),AdvanceKeyCombo:t(515),ProcessKeyCombo:t(514),ResetKeyCombo:t(516),JustDown:t(1332),JustUp:t(1333),DownDuration:t(1334),UpDuration:t(1335)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keydown"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keyup"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keycombomatch"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keydown-"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keyup-"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(9),n=t(154),h=t(22),o=t(6),r=t(51),a=t(153),d=t(512),l=t(143),f=t(513),v=t(1331),g=t(20),p=t(76),m=new s({Extends:u,initialize:function(T){u.call(this),this.game=T.systems.game,this.scene=T.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=T,this.manager=T.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,T.pluginEvents.once(r.BOOT,this.boot,this),T.pluginEvents.on(r.START,this.start,this)},boot:function(){var y=this.settings.input;this.enabled=o(y,"keyboard",!0);var T=o(y,"keyboard.capture",null);T&&this.addCaptures(T),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(r.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this),this.game.events.on(h.BLUR,this.resetKeys,this),this.scene.sys.events.on(g.PAUSE,this.resetKeys,this),this.scene.sys.events.on(g.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(y){return this.manager.addCapture(y),this},removeCapture:function(y){return this.manager.removeCapture(y),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:l.UP,down:l.DOWN,left:l.LEFT,right:l.RIGHT,space:l.SPACE,shift:l.SHIFT})},addKeys:function(y,T,C){T===void 0&&(T=!0),C===void 0&&(C=!1);var S={};if(typeof y=="string"){y=y.split(",");for(var E=0;E<y.length;E++){var P=y[E].trim();P&&(S[P]=this.addKey(P,T,C))}}else for(var M in y)S[M]=this.addKey(y[M],T,C);return S},addKey:function(y,T,C){T===void 0&&(T=!0),C===void 0&&(C=!1);var S=this.keys;if(y instanceof d){var E=S.indexOf(y);return E>-1?S[E]=y:S[y.keyCode]=y,T&&this.addCapture(y.keyCode),y.setEmitOnRepeat(C),y}return typeof y=="string"&&(y=l[y.toUpperCase()]),S[y]||(S[y]=new d(this,y),T&&this.addCapture(y),S[y].setEmitOnRepeat(C)),S[y]},removeKey:function(y,T){T===void 0&&(T=!1);var C=this.keys,S;if(y instanceof d){var E=C.indexOf(y);E>-1&&(S=this.keys[E],this.keys[E]=void 0)}else typeof y=="string"&&(y=l[y.toUpperCase()]);return C[y]&&(S=C[y],C[y]=void 0),S&&(S.plugin=null,T&&S.destroy()),this},removeAllKeys:function(y){for(var T=this.keys,C=0;C<T.length;C++){var S=T[C];S&&(T[C]=void 0,y&&S.destroy())}return this},createCombo:function(y,T){return new f(this,y,T)},checkDown:function(y,T){if(T===void 0&&(T=0),this.enabled&&y.isDown){var C=p(this.time-y.timeDown,T);if(C>y._tick)return y._tick=C,!0}return!1},update:function(){var y=this.manager.queue,T=y.length;if(!(!this.isActive()||T===0))for(var C=this.keys,S=0;S<T;S++){var E=y[S],P=E.keyCode,M=C[P],A=!1;E.cancelled===void 0&&(E.cancelled=0,E.stopImmediatePropagation=function(){E.cancelled=1},E.stopPropagation=function(){E.cancelled=-1}),E.cancelled!==-1&&(P===this.prevCode&&E.timeStamp===this.prevTime&&E.type===this.prevType||(this.prevCode=P,this.prevTime=E.timeStamp,this.prevType=E.type,E.type==="keydown"?(M&&(A=M.isDown,M.onDown(E)),!E.cancelled&&(!M||!A)&&(v[P]&&this.emit(n.KEY_DOWN+v[P],E),E.cancelled||this.emit(n.ANY_KEY_DOWN,E))):(M&&M.onUp(E),E.cancelled||(v[P]&&this.emit(n.KEY_UP+v[P],E),E.cancelled||this.emit(n.ANY_KEY_UP,E))),E.cancelled===1&&(E.cancelled=0)))}},resetKeys:function(){for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(r.MANAGER_PROCESS,this.update,this),this.game.events.off(h.BLUR,this.resetKeys),this.scene.sys.events.off(g.PAUSE,this.resetKeys,this),this.scene.sys.events.off(g.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});a.register("KeyboardPlugin",m,"keyboard","keyboard","inputKeyboard"),e.exports=m},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(143),u={};for(var n in s)u[s[n]]=n;e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s._justDown?(s._justDown=!1,!0):!1};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s._justUp?(s._justUp=!1,!0):!1};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=50);var n=s.plugin.game.loop.time-s.timeDown;return s.isDown&&n<u};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){u===void 0&&(u=50);var n=s.plugin.game.loop.time-s.timeUp;return s.isUp&&n<u};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={MouseManager:t(411)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={TouchManager:t(413)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(21),u=t(17),n={Events:t(95),FileTypes:t(1339),File:t(23),FileTypesManager:t(8),GetURL:t(155),LoaderPlugin:t(1365),MergeXHRSettings:t(240),MultiFile:t(49),XHRLoader:t(517),XHRSettings:t(156)};n=u(!1,n,s),e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AnimationJSONFile:t(1340),AsepriteFile:t(1341),AtlasJSONFile:t(1342),AtlasXMLFile:t(1343),AudioFile:t(518),AudioSpriteFile:t(1344),BinaryFile:t(1345),BitmapFontFile:t(1346),CSSFile:t(1347),GLSLFile:t(1348),HTML5AudioFile:t(519),HTMLFile:t(1349),HTMLTextureFile:t(1350),ImageFile:t(71),JSONFile:t(61),MultiAtlasFile:t(1351),MultiScriptFile:t(1352),OBJFile:t(1353),PackFile:t(1354),PluginFile:t(1355),SceneFile:t(1356),ScenePluginFile:t(1357),ScriptFile:t(520),SpriteSheetFile:t(1358),SVGFile:t(1359),TextFile:t(242),TilemapCSVFile:t(1360),TilemapImpactFile:t(1361),TilemapJSONFile:t(1362),UnityAtlasFile:t(1363),VideoFile:t(1364),XMLFile:t(241)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(61),h=t(95),o=new s({Extends:n,initialize:function(a,d,l,f,v){n.call(this,a,d,l,f,v),this.type="animationJSON"},onProcess:function(){this.loader.once(h.POST_PROCESS,this.onLoadComplete,this),n.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});u.register("animation",function(r,a,d,l){if(Array.isArray(r))for(var f=0;f<r.length;f++)this.addFile(new o(this,r[f]));else this.addFile(new o(this,r,a,l,d));return this}),e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),h=t(71),o=t(7),r=t(61),a=t(49),d=new s({Extends:a,initialize:function(f,v,g,p,m,y){var T,C;if(o(v)){var S=v;v=n(S,"key"),T=new h(f,{key:v,url:n(S,"textureURL"),extension:n(S,"textureExtension","png"),normalMap:n(S,"normalMap"),xhrSettings:n(S,"textureXhrSettings")}),C=new r(f,{key:v,url:n(S,"atlasURL"),extension:n(S,"atlasExtension","json"),xhrSettings:n(S,"atlasXhrSettings")})}else T=new h(f,v,g,m),C=new r(f,v,p,y);T.linkFile?a.call(this,f,"atlasjson",v,[T,C,T.linkFile]):a.call(this,f,"atlasjson",v,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(l.key,l.data,f.data,v),f.addToCache(),this.complete=!0}}});u.register("aseprite",function(l,f,v,g,p){var m;if(Array.isArray(l))for(var y=0;y<l.length;y++)m=new d(this,l[y]),this.addFile(m.files);else m=new d(this,l,f,v,g,p),this.addFile(m.files);return this}),e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),h=t(71),o=t(7),r=t(61),a=t(49),d=new s({Extends:a,initialize:function(f,v,g,p,m,y){var T,C;if(o(v)){var S=v;v=n(S,"key"),T=new h(f,{key:v,url:n(S,"textureURL"),extension:n(S,"textureExtension","png"),normalMap:n(S,"normalMap"),xhrSettings:n(S,"textureXhrSettings")}),C=new r(f,{key:v,url:n(S,"atlasURL"),extension:n(S,"atlasExtension","json"),xhrSettings:n(S,"atlasXhrSettings")})}else T=new h(f,v,g,m),C=new r(f,v,p,y);T.linkFile?a.call(this,f,"atlasjson",v,[T,C,T.linkFile]):a.call(this,f,"atlasjson",v,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(l.key,l.data,f.data,v),f.pendingDestroy(),this.complete=!0}}});u.register("atlas",function(l,f,v,g,p){var m;if(Array.isArray(l))for(var y=0;y<l.length;y++)m=new d(this,l[y]),this.addFile(m.files);else m=new d(this,l,f,v,g,p),this.addFile(m.files);return this}),e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),h=t(71),o=t(7),r=t(49),a=t(241),d=new s({Extends:r,initialize:function(f,v,g,p,m,y){var T,C;if(o(v)){var S=v;v=n(S,"key"),T=new h(f,{key:v,url:n(S,"textureURL"),extension:n(S,"textureExtension","png"),normalMap:n(S,"normalMap"),xhrSettings:n(S,"textureXhrSettings")}),C=new a(f,{key:v,url:n(S,"atlasURL"),extension:n(S,"atlasExtension","xml"),xhrSettings:n(S,"atlasXhrSettings")})}else T=new h(f,v,g,m),C=new a(f,v,p,y);T.linkFile?r.call(this,f,"atlasxml",v,[T,C,T.linkFile]):r.call(this,f,"atlasxml",v,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(l.key,l.data,f.data,v),f.pendingDestroy(),this.complete=!0}}});u.register("atlasXML",function(l,f,v,g,p){var m;if(Array.isArray(l))for(var y=0;y<l.length;y++)m=new d(this,l[y]),this.addFile(m.files);else m=new d(this,l,f,v,g,p),this.addFile(m.files);return this}),e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(518),u=t(0),n=t(8),h=t(2),o=t(7),r=t(61),a=t(49),d=new u({Extends:a,initialize:function(f,v,g,p,m,y,T){if(o(v)){var C=v;v=h(C,"key"),g=h(C,"jsonURL"),p=h(C,"audioURL"),m=h(C,"audioConfig"),y=h(C,"audioXhrSettings"),T=h(C,"jsonXhrSettings")}var S;if(!p)S=new r(f,v,g,T),a.call(this,f,"audiosprite",v,[S]),this.config.resourceLoad=!0,this.config.audioConfig=m,this.config.audioXhrSettings=y;else{var E=s.create(f,v,p,m,y);E&&(S=new r(f,v,g,T),a.call(this,f,"audiosprite",v,[E,S]),this.config.resourceLoad=!1)}},onFileComplete:function(l){var f=this.files.indexOf(l);if(f!==-1&&(this.pending--,this.config.resourceLoad&&l.type==="json"&&l.data.hasOwnProperty("resources"))){var v=l.data.resources,g=h(this.config,"audioConfig"),p=h(this.config,"audioXhrSettings"),m=s.create(this.loader,l.key,v,g,p);m&&(this.addToMultiFile(m),this.loader.addFile(m))}},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1];l.addToCache(),f.addToCache(),this.complete=!0}}});n.register("audioSprite",function(l,f,v,g,p,m){var y=this.systems.game,T=y.config.audio,C=y.device.audio;if(T&&T.noAudio||!C.webAudio&&!C.audioData)return this;var S;if(Array.isArray(l))for(var E=0;E<l.length;E++)S=new d(this,l[E]),S.files&&this.addFile(S.files);else S=new d(this,l,f,v,g,p,m),S.files&&this.addFile(S.files);return this})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(2),r=t(7),a=new s({Extends:n,initialize:function(l,f,v,g,p){var m="bin";if(r(f)){var y=f;f=o(y,"key"),v=o(y,"url"),g=o(y,"xhrSettings"),m=o(y,"extension",m),p=o(y,"dataType",p)}var T={type:"binary",cache:l.cacheManager.binary,extension:m,responseType:"arraybuffer",key:f,url:v,xhrSettings:g,config:{dataType:p}};n.call(this,l,T)},onProcess:function(){this.state=u.FILE_PROCESSING;var d=this.config.dataType;this.data=d?new d(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});h.register("binary",function(d,l,f,v){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new a(this,d[g]));else this.addFile(new a(this,d,l,v,f));return this}),e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),h=t(71),o=t(7),r=t(49),a=t(212),d=t(241),l=new s({Extends:r,initialize:function(v,g,p,m,y,T){var C,S;if(o(g)){var E=g;g=n(E,"key"),C=new h(v,{key:g,url:n(E,"textureURL"),extension:n(E,"textureExtension","png"),normalMap:n(E,"normalMap"),xhrSettings:n(E,"textureXhrSettings")}),S=new d(v,{key:g,url:n(E,"fontDataURL"),extension:n(E,"fontDataExtension","xml"),xhrSettings:n(E,"fontDataXhrSettings")})}else C=new h(v,g,p,y),S=new d(v,g,m,T);C.linkFile?r.call(this,v,"bitmapfont",g,[C,S,C.linkFile]):r.call(this,v,"bitmapfont",g,[C,S])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1];f.addToCache(),v.pendingDestroy();var g=f.cache.get(f.key),p=a(v.data,f.cache.getFrame(f.key),0,0,g);this.loader.cacheManager.bitmapFont.add(f.key,{data:p,texture:f.key,frame:null}),this.complete=!0}}});u.register("bitmapFont",function(f,v,g,p,m){var y;if(Array.isArray(f))for(var T=0;T<f.length;T++)y=new l(this,f[T]),this.addFile(y.files);else y=new l(this,f,v,g,p,m),this.addFile(y.files);return this}),e.exports=l},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(2),r=t(7),a=new s({Extends:n,initialize:function(l,f,v,g){var p="css";if(r(f)){var m=f;f=o(m,"key"),v=o(m,"url"),g=o(m,"xhrSettings"),p=o(m,"extension",p)}var y={type:"script",cache:!1,extension:p,responseType:"text",key:f,url:v,xhrSettings:g};n.call(this,l,y)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});h.register("css",function(d,l,f){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new a(this,d[v]));else this.addFile(new a(this,d,l,f));return this}),e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(2),r=t(7),a=t(396),d=new s({Extends:n,initialize:function(f,v,g,p,m){var y="glsl";if(r(v)){var T=v;v=o(T,"key"),g=o(T,"url"),p=o(T,"shaderType","fragment"),m=o(T,"xhrSettings"),y=o(T,"extension",y)}else p===void 0&&(p="fragment");var C={type:"glsl",cache:f.cacheManager.shader,extension:y,responseType:"text",key:v,url:g,config:{shaderType:p},xhrSettings:m};n.call(this,f,C)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l=this.data.split(`
`),f=this.extractBlock(l,0);if(f)for(;f;){var v=this.getShaderName(f.header),g=this.getShaderType(f.header),p=this.getShaderUniforms(f.header),m=f.shader;if(this.cache.has(v)){var y=this.cache.get(v);g==="fragment"?y.fragmentSrc=m:y.vertexSrc=m,y.uniforms||(y.uniforms=p)}else g==="fragment"?this.cache.add(v,new a(v,m,"",p)):this.cache.add(v,new a(v,"",m,p));f=this.extractBlock(l,f.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new a(this.key,this.data)):this.cache.add(this.key,new a(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(l){for(var f=0;f<l.length;f++){var v=l[f].trim();if(v.substring(0,5)==="name:")return v.substring(5).trim()}return this.key},getShaderType:function(l){for(var f=0;f<l.length;f++){var v=l[f].trim();if(v.substring(0,5)==="type:")return v.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(l){for(var f={},v=0;v<l.length;v++){var g=l[v].trim();if(g.substring(0,8)==="uniform."){var p=g.indexOf(":");if(p){var m=g.substring(8,p);try{f[m]=JSON.parse(g.substring(p+1))}catch{console.warn("Invalid uniform JSON: "+m)}}}}return f},extractBlock:function(l,f){for(var v=-1,g=-1,p=-1,m=!1,y=!1,T=[],C=[],S=f;S<l.length;S++){var E=l[S].trim();if(E==="---")if(v===-1)v=S,m=!0;else if(m)g=S,m=!1,y=!0;else{y=!1;break}else m?T.push(E):y&&(C.push(E),p=S)}return!m&&g!==-1?{header:T,shader:C.join(`
`),offset:p}:null}});h.register("glsl",function(l,f,v,g){if(Array.isArray(l))for(var p=0;p<l.length;p++)this.addFile(new d(this,l[p]));else this.addFile(new d(this,l,f,v,g));return this}),e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(2),r=t(7),a=new s({Extends:n,initialize:function(l,f,v,g){var p="html";if(r(f)){var m=f;f=o(m,"key"),v=o(m,"url"),g=o(m,"xhrSettings"),p=o(m,"extension",p)}var y={type:"text",cache:l.cacheManager.html,extension:p,responseType:"text",key:f,url:v,xhrSettings:g};n.call(this,l,y)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("html",function(d,l,f){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new a(this,d[v]));else this.addFile(new a(this,d,l,f));return this}),e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(2),r=t(7),a=new s({Extends:n,initialize:function(l,f,v,g,p,m){g===void 0&&(g=512),p===void 0&&(p=512);var y="html";if(r(f)){var T=f;f=o(T,"key"),v=o(T,"url"),m=o(T,"xhrSettings"),y=o(T,"extension",y),g=o(T,"width",g),p=o(T,"height",p)}var C={type:"html",cache:l.textureManager,extension:y,responseType:"text",key:f,url:v,xhrSettings:m,config:{width:g,height:p}};n.call(this,l,C)},onProcess:function(){this.state=u.FILE_PROCESSING;var d=this.config.width,l=this.config.height,f=[];f.push('<svg width="'+d+'px" height="'+l+'px" viewBox="0 0 '+d+" "+l+'" xmlns="http://www.w3.org/2000/svg">'),f.push('<foreignObject width="100%" height="100%">'),f.push('<body xmlns="http://www.w3.org/1999/xhtml">'),f.push(this.xhrLoader.responseText),f.push("</body>"),f.push("</foreignObject>"),f.push("</svg>");var v=[f.join(`
`)],g=this;try{var p=new window.Blob(v,{type:"image/svg+xml;charset=utf-8"})}catch{g.state=u.FILE_ERRORED,g.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){n.revokeObjectURL(g.data),g.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(g.data),g.onProcessError()},n.createObjectURL(this.data,p,"image/svg+xml")},addToCache:function(){var d=this.cache.addImage(this.key,this.data);this.pendingDestroy(d)}});h.register("htmlTexture",function(d,l,f,v,g){if(Array.isArray(d))for(var p=0;p<d.length;p++)this.addFile(new a(this,d[p]));else this.addFile(new a(this,d,l,f,v,g));return this}),e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),h=t(71),o=t(7),r=t(61),a=t(49),d=new s({Extends:a,initialize:function(f,v,g,p,m,y,T){if(o(v)){var C=v;v=n(C,"key"),n(C,"url",!1)?g=n(C,"url"):g=n(C,"atlasURL"),y=n(C,"xhrSettings"),p=n(C,"path"),m=n(C,"baseURL"),T=n(C,"textureXhrSettings")}var S=new r(f,v,g,y);a.call(this,f,"multiatlas",v,[S]),this.config.path=p,this.config.baseURL=m,this.config.textureXhrSettings=T},onFileComplete:function(l){var f=this.files.indexOf(l);if(f!==-1&&(this.pending--,l.type==="json"&&l.data.hasOwnProperty("textures"))){var v=l.data.textures,g=this.config,p=this.loader,m=p.baseURL,y=p.path,T=p.prefix,C=n(g,"baseURL",this.baseURL),S=n(g,"path",this.path),E=n(g,"prefix",this.prefix),P=n(g,"textureXhrSettings");p.setBaseURL(C),p.setPath(S),p.setPrefix(E);for(var M=0;M<v.length;M++){var A=v[M].image,R="MA"+this.multiKeyIndex+"_"+A,O=new h(p,R,A,P);if(this.addToMultiFile(O),p.addFile(O),v[M].normalMap){var F=new h(p,R,v[M].normalMap,P);F.type="normalMap",O.setLink(F),this.addToMultiFile(F),p.addFile(F)}}p.setBaseURL(m),p.setPath(y),p.setPrefix(T)}},addToCache:function(){if(this.isReadyToProcess()){for(var l=this.files[0],f=[],v=[],g=[],p=1;p<this.files.length;p++){var m=this.files[p];if(m.type!=="normalMap")for(var y=m.key.indexOf("_"),T=m.key.substr(y+1),C=m.data,S=0;S<l.data.textures.length;S++){var E=l.data.textures[S];if(E.image===T){v.push(C),f.push(E),m.linkFile&&g.push(m.linkFile.data);break}}}for(g.length===0&&(g=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,v,f,g),this.complete=!0,p=0;p<this.files.length;p++)this.files[p].pendingDestroy()}}});u.register("multiatlas",function(l,f,v,g,p){var m;if(Array.isArray(l))for(var y=0;y<l.length;y++)m=new d(this,l[y]),this.addFile(m.files);else m=new d(this,l,f,v,g,p),this.addFile(m.files);return this}),e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),h=t(7),o=t(49),r=t(520),a=new s({Extends:o,initialize:function(l,f,v,g){var p="js",m=[];if(h(f)){var y=f;f=n(y,"key"),v=n(y,"url"),g=n(y,"xhrSettings"),p=n(y,"extension",p)}Array.isArray(v)||(v=[v]);for(var T=0;T<v.length;T++){var C=new r(l,{key:f+"_"+T.toString(),url:v[T],extension:p,xhrSettings:g});C.onProcess=function(){this.onProcessComplete()},m.push(C)}o.call(this,l,"scripts",f,m)},addToCache:function(){if(this.isReadyToProcess()){for(var d=0;d<this.files.length;d++){var l=this.files[d];l.data=document.createElement("script"),l.data.language="javascript",l.data.type="text/javascript",l.data.defer=!1,l.data.text=l.xhrLoader.responseText,document.head.appendChild(l.data)}this.complete=!0}}});u.register("scripts",function(d,l,f){var v;if(Array.isArray(d))for(var g=0;g<d.length;g++)v=new a(this,d[g]),this.addFile(v.files);else v=new a(this,d,l,f),this.addFile(v.files);return this}),e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),h=t(7),o=t(49),r=t(498),a=t(499),d=t(242),l=new s({Extends:o,initialize:function(v,g,p,m,y,T){var C,S,E=v.cacheManager.obj;if(h(g)){var P=g;g=n(P,"key"),C=new d(v,{key:g,type:"obj",cache:E,url:n(P,"url"),extension:n(P,"extension","obj"),xhrSettings:n(P,"xhrSettings"),config:{flipUV:n(P,"flipUV",y)}}),m=n(P,"matURL"),m&&(S=new d(v,{key:g,type:"mat",cache:E,url:m,extension:n(P,"matExtension","mat"),xhrSettings:n(P,"xhrSettings")}))}else C=new d(v,{key:g,url:p,type:"obj",cache:E,extension:"obj",xhrSettings:T,config:{flipUV:y}}),m&&(S=new d(v,{key:g,url:m,type:"mat",cache:E,extension:"mat",xhrSettings:T}));o.call(this,v,"obj",g,[C,S])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],g=r(f.data,f.config.flipUV);v&&(g.materials=a(v.data)),f.cache.add(f.key,g),this.complete=!0}}});u.register("obj",function(f,v,g,p,m){var y;if(Array.isArray(f))for(var T=0;T<f.length;T++)y=new l(this,f[T]),this.addFile(y.files);else y=new l(this,f,v,g,p,m),this.addFile(y.files);return this}),e.exports=l},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(8),h=t(61),o=new s({Extends:h,initialize:function(a,d,l,f,v){h.call(this,a,d,l,f,v),this.type="packfile"},onProcess:function(){this.state!==u.FILE_POPULATED&&(this.state=u.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});n.register("pack",function(r,a,d,l){if(Array.isArray(r))for(var f=0;f<r.length;f++)this.addFile(new o(this,r[f]));else this.addFile(new o(this,r,a,l,d));return this}),e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(2),r=t(7),a=new s({Extends:n,initialize:function(l,f,v,g,p,m){var y="js";if(r(f)){var T=f;f=o(T,"key"),v=o(T,"url"),m=o(T,"xhrSettings"),y=o(T,"extension",y),g=o(T,"start"),p=o(T,"mapping")}var C={type:"plugin",cache:!1,extension:y,responseType:"text",key:f,url:v,xhrSettings:m,config:{start:g,mapping:p}};n.call(this,l,C),typeof v=="function"&&(this.data=v,this.state=u.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,l=this.config,f=o(l,"start",!1),v=o(l,"mapping",null);if(this.state===u.FILE_POPULATED)d.install(this.key,this.data,f,v);else{this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var g=d.install(this.key,window[this.key],f,v);(f||v)&&(this.loader.systems[v]=g,this.loader.scene[v]=g)}this.onProcessComplete()}});h.register("plugin",function(d,l,f,v,g){if(Array.isArray(d))for(var p=0;p<d.length;p++)this.addFile(new a(this,d[p]));else this.addFile(new a(this,d,l,f,v,g));return this}),e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(2),r=t(7),a=new s({Extends:n,initialize:function(l,f,v,g){var p="js";if(r(f)){var m=f;f=o(m,"key"),v=o(m,"url"),g=o(m,"xhrSettings"),p=o(m,"extension",p)}var y={type:"text",extension:p,responseType:"text",key:f,url:v,xhrSettings:g};n.call(this,l,y)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),l=eval;this.loader.sceneManager.add(this.key,l(d)),this.complete=!0}});h.register("sceneFile",function(d,l,f){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new a(this,d[v]));else this.addFile(new a(this,d,l,f));return this}),e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(2),r=t(7),a=new s({Extends:n,initialize:function(l,f,v,g,p,m){var y="js";if(r(f)){var T=f;f=o(T,"key"),v=o(T,"url"),m=o(T,"xhrSettings"),y=o(T,"extension",y),g=o(T,"systemKey"),p=o(T,"sceneKey")}var C={type:"scenePlugin",cache:!1,extension:y,responseType:"text",key:f,url:v,xhrSettings:m,config:{systemKey:g,sceneKey:p}};n.call(this,l,C),typeof v=="function"&&(this.data=v,this.state=u.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,l=this.config,f=this.key,v=o(l,"systemKey",f),g=o(l,"sceneKey",f);this.state===u.FILE_POPULATED?d.installScenePlugin(v,this.data,g,this.loader.scene,!0):(this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),d.installScenePlugin(v,window[this.key],g,this.loader.scene,!0)),this.onProcessComplete()}});h.register("scenePlugin",function(d,l,f,v,g){if(Array.isArray(d))for(var p=0;p<d.length;p++)this.addFile(new a(this,d[p]));else this.addFile(new a(this,d,l,f,v,g));return this}),e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(71),h=new s({Extends:n,initialize:function(r,a,d,l,f){n.call(this,r,a,d,f,l),this.type="spritesheet"},addToCache:function(){var o=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(o)}});u.register("spritesheet",function(o,r,a,d){if(Array.isArray(o))for(var l=0;l<o.length;l++)this.addFile(new h(this,o[l]));else this.addFile(new h(this,o,r,a,d));return this}),e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(2),r=t(7),a=new s({Extends:n,initialize:function(l,f,v,g,p){var m="svg";if(r(f)){var y=f;f=o(y,"key"),v=o(y,"url"),g=o(y,"svgConfig",{}),p=o(y,"xhrSettings"),m=o(y,"extension",m)}var T={type:"svg",cache:l.textureManager,extension:m,responseType:"text",key:f,url:v,xhrSettings:p,config:{width:o(g,"width"),height:o(g,"height"),scale:o(g,"scale")}};n.call(this,l,T)},onProcess:function(){this.state=u.FILE_PROCESSING;var d=this.xhrLoader.responseText,l=[d],f=this.config.width,v=this.config.height,g=this.config.scale;t:if(f&&v||g){var p=null,m=new DOMParser;p=m.parseFromString(d,"text/xml");var y=p.getElementsByTagName("svg")[0],T=y.hasAttribute("viewBox"),C=parseFloat(y.getAttribute("width")),S=parseFloat(y.getAttribute("height"));if(!T&&C&&S)y.setAttribute("viewBox","0  0 "+C+" "+S);else if(T&&!C&&!S){var E=y.getAttribute("viewBox").split(/\s+|,/);C=E[2],S=E[3]}if(g)if(C&&S)f=C*g,v=S*g;else break t;y.setAttribute("width",f.toString()+"px"),y.setAttribute("height",v.toString()+"px"),l=[new XMLSerializer().serializeToString(y)]}try{var P=new window.Blob(l,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var M=this,A=!1;this.data.onload=function(){A||n.revokeObjectURL(M.data),M.onProcessComplete()},this.data.onerror=function(){A?M.onProcessError():(A=!0,n.revokeObjectURL(M.data),M.data.src="data:image/svg+xml,"+encodeURIComponent(l.join("")))},n.createObjectURL(this.data,P,"image/svg+xml")},addToCache:function(){var d=this.cache.addImage(this.key,this.data);this.pendingDestroy(d)}});h.register("svg",function(d,l,f,v){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new a(this,d[g]));else this.addFile(new a(this,d,l,f,v));return this}),e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(2),r=t(7),a=t(40),d=new s({Extends:n,initialize:function(f,v,g,p){var m="csv";if(r(v)){var y=v;v=o(y,"key"),g=o(y,"url"),p=o(y,"xhrSettings"),m=o(y,"extension",m)}var T={type:"tilemapCSV",cache:f.cacheManager.tilemap,extension:m,responseType:"text",key:v,url:g,xhrSettings:p};n.call(this,f,T),this.tilemapFormat=a.CSV},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,l),this.pendingDestroy(l)}});h.register("tilemapCSV",function(l,f,v){if(Array.isArray(l))for(var g=0;g<l.length;g++)this.addFile(new d(this,l[g]));else this.addFile(new d(this,l,f,v));return this}),e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(61),h=t(40),o=new s({Extends:n,initialize:function(a,d,l,f){n.call(this,a,d,l,f),this.type="tilemapJSON",this.cache=a.cacheManager.tilemap},addToCache:function(){var r={format:h.WELTMEISTER,data:this.data};this.cache.add(this.key,r),this.pendingDestroy(r)}});u.register("tilemapImpact",function(r,a,d){if(Array.isArray(r))for(var l=0;l<r.length;l++)this.addFile(new o(this,r[l]));else this.addFile(new o(this,r,a,d));return this}),e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(61),h=t(40),o=new s({Extends:n,initialize:function(a,d,l,f){n.call(this,a,d,l,f),this.type="tilemapJSON",this.cache=a.cacheManager.tilemap},addToCache:function(){var r={format:h.TILED_JSON,data:this.data};this.cache.add(this.key,r),this.pendingDestroy(r)}});u.register("tilemapTiledJSON",function(r,a,d){if(Array.isArray(r))for(var l=0;l<r.length;l++)this.addFile(new o(this,r[l]));else this.addFile(new o(this,r,a,d));return this}),e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(8),n=t(2),h=t(71),o=t(7),r=t(49),a=t(242),d=new s({Extends:r,initialize:function(f,v,g,p,m,y){var T,C;if(o(v)){var S=v;v=n(S,"key"),T=new h(f,{key:v,url:n(S,"textureURL"),extension:n(S,"textureExtension","png"),normalMap:n(S,"normalMap"),xhrSettings:n(S,"textureXhrSettings")}),C=new a(f,{key:v,url:n(S,"atlasURL"),extension:n(S,"atlasExtension","txt"),xhrSettings:n(S,"atlasXhrSettings")})}else T=new h(f,v,g,m),C=new a(f,v,p,y);T.linkFile?r.call(this,f,"unityatlas",v,[T,C,T.linkFile]):r.call(this,f,"unityatlas",v,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(l.key,l.data,f.data,v),f.pendingDestroy(),this.complete=!0}}});u.register("unityAtlas",function(l,f,v,g,p){var m;if(Array.isArray(l))for(var y=0;y<l.length;y++)m=new d(this,l[y]),this.addFile(m.files);else m=new d(this,l,f,v,g,p),this.addFile(m.files);return this}),e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(23),h=t(8),o=t(155),r=t(2),a=t(7),d=new s({Extends:n,initialize:function(f,v,g,p,m,y,T){p===void 0&&(p="loadeddata"),m===void 0&&(m=!1),y===void 0&&(y=!1),p!=="loadeddata"&&p!=="canplay"&&p!=="canplaythrough"&&(p="loadeddata");var C={type:"video",cache:f.cacheManager.video,extension:g.type,responseType:"blob",key:v,url:g.url,xhrSettings:T,config:{loadEvent:p,asBlob:m,noAudio:y}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),n.call(this,f,C)},onProcess:function(){if(this.state=u.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var l=this.createVideoElement();this.data=l;var f=this;this.data.onloadeddata=function(){f.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(f.data),f.onProcessError()},n.createObjectURL(l,this.xhrLoader.response,""),l.load()},createVideoElement:function(){var l=document.createElement("video");return l.controls=!1,l.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(l.muted=!0,l.defaultMuted=!0,l.setAttribute("autoplay","autoplay")),l.setAttribute("playsinline","playsinline"),l.setAttribute("preload","auto"),l},onVideoLoadHandler:function(l){var f=l.target;f.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),f.removeEventListener("error",this.onErrorCallback,!0),this.data=f,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(l){var f=l.target;f&&(f.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),f.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var l=this.config.loadEvent;if(this.config.asBlob)n.prototype.load.call(this);else{this.percentComplete=0;var f=this.createVideoElement();f.addEventListener(l,this.onLoadCallback,!0),f.addEventListener("error",this.onErrorCallback,!0),f.src=o(this,this.loader.baseURL),f.load()}}});d.create=function(l,f,v,g,p,m,y){var T=l.systems.game;a(f)&&(v=r(f,"url",[]),g=r(f,"loadEvent","loadeddata"),p=r(f,"asBlob",!1),m=r(f,"noAudio",!1),y=r(f,"xhrSettings"),f=r(f,"key"));var C=d.getVideoURL(T,v);if(C)return new d(l,f,C,g,p,m,y)},d.getVideoURL=function(l,f){Array.isArray(f)||(f=[f]);for(var v=0;v<f.length;v++){var g=r(f[v],"url",f[v]);if(g.indexOf("blob:")===0)return{url:g,type:""};var p;if(g.indexOf("data:")===0?p=g.split(",")[0].match(/\/(.*?);/):p=g.match(/\.([a-zA-Z0-9]+)($|\?)/),p=r(f[v],"type",p?p[1]:"").toLowerCase(),l.device.video[p])return{url:g,type:p}}return null},h.register("video",function(l,f,v,g,p,m){var y;if(Array.isArray(l))for(var T=0;T<l.length;T++)y=d.create(this,l[T]),y&&this.addFile(y);else y=d.create(this,l,f,v,g,p,m),y&&this.addFile(y);return this}),e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(21),n=t(149),h=t(9),o=t(95),r=t(8),a=t(2),d=t(24),l=t(20),f=t(156),v=new s({Extends:h,initialize:function(p){h.call(this);var m=p.sys.game.config,y=p.sys.settings.loader;this.scene=p,this.systems=p.sys,this.cacheManager=p.sys.cache,this.textureManager=p.sys.textures,this.sceneManager=p.sys.game.scene,r.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(a(y,"baseURL",m.loaderBaseURL)),this.setPath(a(y,"path",m.loaderPath)),this.setPrefix(a(y,"prefix",m.loaderPrefix)),this.maxParallelDownloads=a(y,"maxParallelDownloads",m.loaderMaxParallelDownloads),this.xhr=f(a(y,"responseType",m.loaderResponseType),a(y,"async",m.loaderAsync),a(y,"user",m.loaderUser),a(y,"password",m.loaderPassword),a(y,"timeout",m.loaderTimeout),a(y,"withCredentials",m.loaderWithCredentials)),this.crossOrigin=a(y,"crossOrigin",m.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new n,this.inflight=new n,this.queue=new n,this._deleteQueue=new n,this.totalFailed=0,this.totalComplete=0,this.state=u.LOADER_IDLE,this.multiKeyIndex=0,p.sys.events.once(l.BOOT,this.boot,this),p.sys.events.on(l.START,this.pluginStart,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(l.SHUTDOWN,this.shutdown,this)},setBaseURL:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.baseURL=g,this},setPath:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.path=g,this},setPrefix:function(g){return g===void 0&&(g=""),this.prefix=g,this},setCORS:function(g){return this.crossOrigin=g,this},addFile:function(g){Array.isArray(g)||(g=[g]);for(var p=0;p<g.length;p++){var m=g[p];this.keyExists(m)||(this.list.set(m),this.emit(o.ADD,m.key,m.type,this,m),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(g){var p=g.hasCacheConflict();return p||this.list.iterate(function(m){if(m.type===g.type&&m.key===g.key)return p=!0,!1}),!p&&this.isLoading()&&(this.inflight.iterate(function(m){if(m.type===g.type&&m.key===g.key)return p=!0,!1}),this.queue.iterate(function(m){if(m.type===g.type&&m.key===g.key)return p=!0,!1})),p},addPack:function(g,p){p&&g.hasOwnProperty(p)&&(g={packKey:g[p]});var m=0,y=this.baseURL,T=this.path,C=this.prefix;for(var S in g)if(!!Object.prototype.hasOwnProperty.call(g,S)){var E=g[S],P=a(E,"baseURL",y),M=a(E,"path",T),A=a(E,"prefix",C),R=a(E,"files",null),O=a(E,"defaultType","void");if(Array.isArray(R)){this.setBaseURL(P),this.setPath(M),this.setPrefix(A);for(var F=0;F<R.length;F++){var I=R[F],G=I.hasOwnProperty("type")?I.type:O;this[G]&&(this[G](I),m++)}}}return this.setBaseURL(y),this.setPath(T),this.setPrefix(C),m>0},isLoading:function(){return this.state===u.LOADER_LOADING||this.state===u.LOADER_PROCESSING},isReady:function(){return this.state===u.LOADER_IDLE||this.state===u.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(o.START,this),this.list.size===0?this.loadComplete():(this.state=u.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(l.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(o.PROGRESS,this.progress)},update:function(){this.state===u.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(g){if((g.state===u.FILE_POPULATED||g.state===u.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(g),this.list.delete(g),g.crossOrigin||(g.crossOrigin=this.crossOrigin),g.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(g,p){!this.inflight||(this.inflight.delete(g),this.updateProgress(),p?(this.totalComplete++,this.queue.set(g),this.emit(o.FILE_LOAD,g),g.onProcess()):(this.totalFailed++,this._deleteQueue.set(g),this.emit(o.FILE_LOAD_ERROR,g),this.fileProcessComplete(g)))},fileProcessComplete:function(g){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(g.state===u.FILE_ERRORED?g.multiFile&&g.multiFile.onFileFailed(g):g.state===u.FILE_COMPLETE&&(g.multiFile?g.multiFile.isReadyToProcess()&&g.multiFile.addToCache():g.addToCache()),this.queue.delete(g),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(o.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=u.LOADER_COMPLETE,this.systems.events.off(l.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(o.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(g){this._deleteQueue.set(g)},saveJSON:function(g,p){return this.save(JSON.stringify(g),p)},save:function(g,p,m){p===void 0&&(p="file.json"),m===void 0&&(m="application/json");var y=new Blob([g],{type:m}),T=URL.createObjectURL(y),C=document.createElement("a");return C.download=p,C.textContent="Download "+p,C.href=T,C.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var g=this.systems.game.config,p=this.systems.settings.loader;this.setBaseURL(a(p,"baseURL",g.loaderBaseURL)),this.setPath(a(p,"path",g.loaderPath)),this.setPrefix(a(p,"prefix",g.loaderPrefix)),this.state=u.LOADER_IDLE},shutdown:function(){this.reset(),this.state=u.LOADER_SHUTDOWN,this.systems.events.off(l.UPDATE,this.update,this),this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=u.LOADER_DESTROYED,this.systems.events.off(l.UPDATE,this.update,this),this.systems.events.off(l.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});d.register("Loader",v,"load"),e.exports=v},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(62),u=t(17),n={ArcadePhysics:t(1367),Body:t(527),Collider:t(528),Components:t(243),Events:t(245),Factory:t(521),GetOverlapX:t(246),GetOverlapY:t(247),SeparateX:t(537),SeparateY:t(538),Group:t(524),Image:t(522),Sprite:t(157),StaticBody:t(539),StaticGroup:t(525),Tilemap:t(1391),World:t(526)};n=u(!1,n,s),e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(36),n=t(50),h=t(353),o=t(521),r=t(2),a=t(127),d=t(523),l=t(244),f=t(24),v=t(20),g=t(3),p=t(526),m=new s({initialize:function(T){this.scene=T,this.systems=T.sys,this.config=this.getConfig(),this.world,this.add,T.sys.events.once(v.BOOT,this.boot,this),T.sys.events.on(v.START,this.start,this)},boot:function(){this.world=new p(this.scene,this.config),this.add=new o(this.world),this.systems.events.once(v.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new p(this.scene,this.config),this.add=new o(this.world));var y=this.systems.events;r(this.config,"customUpdate",!1)||y.on(v.UPDATE,this.world.update,this.world),y.on(v.POST_UPDATE,this.world.postUpdate,this.world),y.once(v.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(v.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(v.UPDATE,this.world.update,this.world)},getConfig:function(){var y=this.systems.game.config.physics,T=this.systems.settings.physics,C=a(r(T,"arcade",{}),r(y,"arcade",{}));return C},overlap:function(y,T,C,S,E){return C===void 0&&(C=null),S===void 0&&(S=null),E===void 0&&(E=C),this.world.collideObjects(y,T,C,S,E,!0)},collide:function(y,T,C,S,E){return C===void 0&&(C=null),S===void 0&&(S=null),E===void 0&&(E=C),this.world.collideObjects(y,T,C,S,E,!1)},collideTiles:function(y,T,C,S,E){return this.world.collideTiles(y,T,C,S,E)},overlapTiles:function(y,T,C,S,E){return this.world.overlapTiles(y,T,C,S,E)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(y,T,C,S,E,P){S===void 0&&(S=60);var M=Math.atan2(C-y.y,T-y.x);return y.body.acceleration.setToPolar(M,S),E!==void 0&&P!==void 0&&y.body.maxVelocity.set(E,P),M},accelerateToObject:function(y,T,C,S,E){return this.accelerateTo(y,T.x,T.y,C,S,E)},closest:function(y,T){T||(T=this.world.bodies.entries);for(var C=Number.MAX_VALUE,S=null,E=y.x,P=y.y,M=T.length,A=0;A<M;A++){var R=T[A],O=R.body||R;if(!(y===R||y===O||y===O.gameObject||y===O.center)){var F=h(E,P,O.center.x,O.center.y);F<C&&(S=R,C=F)}}return S},furthest:function(y,T){T||(T=this.world.bodies.entries);for(var C=-1,S=null,E=y.x,P=y.y,M=T.length,A=0;A<M;A++){var R=T[A],O=R.body||R;if(!(y===R||y===O||y===O.gameObject||y===O.center)){var F=h(E,P,O.center.x,O.center.y);F>C&&(S=R,C=F)}}return S},moveTo:function(y,T,C,S,E){S===void 0&&(S=60),E===void 0&&(E=0);var P=Math.atan2(C-y.y,T-y.x);return E>0&&(S=n(y.x,y.y,T,C)/(E/1e3)),y.body.velocity.setToPolar(P,S),P},moveToObject:function(y,T,C,S){return this.moveTo(y,T.x,T.y,C,S)},velocityFromAngle:function(y,T,C){return T===void 0&&(T=60),C===void 0&&(C=new g),C.setToPolar(u(y),T)},velocityFromRotation:function(y,T,C){return T===void 0&&(T=60),C===void 0&&(C=new g),C.setToPolar(y,T)},overlapRect:function(y,T,C,S,E,P){return l(this.world,y,T,C,S,E,P)},overlapCirc:function(y,T,C,S,E){return d(this.world,y,T,C,S,E)},shutdown:function(){if(!!this.world){var y=this.systems.events;y.off(v.UPDATE,this.world.update,this.world),y.off(v.POST_UPDATE,this.world.postUpdate,this.world),y.off(v.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(v.START,this.start,this),this.scene=null,this.systems=null}});f.register("ArcadePhysics",m,"arcadePhysics"),e.exports=m},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setAcceleration:function(s,u){return this.body.acceleration.set(s,u),this},setAccelerationX:function(s){return this.body.acceleration.x=s,this},setAccelerationY:function(s){return this.body.acceleration.y=s,this}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setAngularVelocity:function(s){return this.body.angularVelocity=s,this},setAngularAcceleration:function(s){return this.body.angularAcceleration=s,this},setAngularDrag:function(s){return this.body.angularDrag=s,this}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setBounce:function(s,u){return this.body.bounce.set(s,u),this},setBounceX:function(s){return this.body.bounce.x=s,this},setBounceY:function(s){return this.body.bounce.y=s,this},setCollideWorldBounds:function(s,u,n){return this.body.setCollideWorldBounds(s,u,n),this}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setDebug:function(s,u,n){return this.debugShowBody=s,this.debugShowVelocity=u,this.debugBodyColor=n,this},setDebugBodyColor:function(s){return this.body.debugBodyColor=s,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(s){this.body.debugShowBody=s}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(s){this.body.debugShowVelocity=s}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(s){this.body.debugBodyColor=s}}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setDrag:function(s,u){return this.body.drag.set(s,u),this},setDragX:function(s){return this.body.drag.x=s,this},setDragY:function(s){return this.body.drag.y=s,this},setDamping:function(s){return this.body.useDamping=s,this}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={enableBody:function(s,u,n,h,o){return s&&this.body.reset(u,n),h&&(this.body.gameObject.active=!0),o&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(s,u){return s===void 0&&(s=!1),u===void 0&&(u=!1),this.body.stop(),this.body.enable=!1,s&&(this.body.gameObject.active=!1),u&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setFriction:function(s,u){return this.body.friction.set(s,u),this},setFrictionX:function(s){return this.body.friction.x=s,this},setFrictionY:function(s){return this.body.friction.y=s,this}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setGravity:function(s,u){return this.body.gravity.set(s,u),this},setGravityX:function(s){return this.body.gravity.x=s,this},setGravityY:function(s){return this.body.gravity.y=s,this}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setImmovable:function(s){return s===void 0&&(s=!0),this.body.immovable=s,this}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setMass:function(s){return this.body.mass=s,this}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setPushable:function(s){return s===void 0&&(s=!0),this.body.pushable=s,this}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setOffset:function(s,u){return this.body.setOffset(s,u),this},setSize:function(s,u,n){return this.body.setSize(s,u,n),this},setBodySize:function(s,u,n){return this.body.setSize(s,u,n),this},setCircle:function(s,u,n){return this.body.setCircle(s,u,n),this}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setVelocity:function(s,u){return this.body.setVelocity(s,u),this},setVelocityX:function(s){return this.body.setVelocityX(s),this},setVelocityY:function(s){return this.body.setVelocityY(s),this},setMaxVelocity:function(s,u){return this.body.maxVelocity.set(s,u),this}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collide"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="overlap"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="tilecollide"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="tileoverlap"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="worldbounds"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="worldstep"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t,s,u,n,h,o,r,a,d,l,f,v,g,p,m,y,T,C=function(R,O,F){t=R,s=O;var I=t.velocity.x,G=s.velocity.x;return u=t.pushable,d=t._dx<0,l=t._dx>0,f=t._dx===0,m=Math.abs(t.right-s.x)<=Math.abs(s.right-t.x),r=G-I*t.bounce.x,n=s.pushable,v=s._dx<0,g=s._dx>0,p=s._dx===0,y=!m,a=I-G*s.bounce.x,T=Math.abs(F),S()},S=function(){return l&&m&&s.blocked.right?(t.processX(-T,r,!1,!0),1):d&&y&&s.blocked.left?(t.processX(T,r,!0),1):g&&y&&t.blocked.right?(s.processX(-T,a,!1,!0),2):v&&m&&t.blocked.left?(s.processX(T,a,!0),2):0},E=function(){var R=t.velocity.x,O=s.velocity.x,F=Math.sqrt(O*O*s.mass/t.mass)*(O>0?1:-1),I=Math.sqrt(R*R*t.mass/s.mass)*(R>0?1:-1),G=(F+I)*.5;return F-=G,I-=G,h=G+F*t.bounce.x,o=G+I*s.bounce.x,d&&y?P(0):v&&m?P(1):l&&m?P(2):g&&y?P(3):!1},P=function(R){if(u&&n)T*=.5,R===0||R===3?(t.processX(T,h),s.processX(-T,o)):(t.processX(-T,h),s.processX(T,o));else if(u&&!n)R===0||R===3?t.processX(T,r,!0):t.processX(-T,r,!1,!0);else if(!u&&n)R===0||R===3?s.processX(-T,a,!1,!0):s.processX(T,a,!0);else{var O=T*.5;R===0?p?(t.processX(T,0,!0),s.processX(0,null,!1,!0)):g?(t.processX(O,0,!0),s.processX(-O,0,!1,!0)):(t.processX(O,s.velocity.x,!0),s.processX(-O,null,!1,!0)):R===1?f?(t.processX(0,null,!1,!0),s.processX(T,0,!0)):l?(t.processX(-O,0,!1,!0),s.processX(O,0,!0)):(t.processX(-O,null,!1,!0),s.processX(O,t.velocity.x,!0)):R===2?p?(t.processX(-T,0,!1,!0),s.processX(0,null,!0)):v?(t.processX(-O,0,!1,!0),s.processX(O,0,!0)):(t.processX(-O,s.velocity.x,!1,!0),s.processX(O,null,!0)):R===3&&(f?(t.processX(0,null,!0),s.processX(-T,0,!1,!0)):d?(t.processX(O,0,!0),s.processX(-O,0,!1,!0)):(t.processX(O,s.velocity.y,!0),s.processX(-O,null,!1,!0)))}return!0},M=function(R){R===1?s.velocity.x=0:m?s.processX(T,a,!0):s.processX(-T,a,!1,!0),t.moves&&(s.y+=(t.y-t.prev.y)*t.friction.y,s._dy=s.y-s.prev.y)},A=function(R){R===2?t.velocity.x=0:y?t.processX(T,r,!0):t.processX(-T,r,!1,!0),s.moves&&(t.y+=(s.y-s.prev.y)*s.friction.y,t._dy=t.y-t.prev.y)};e.exports={BlockCheck:S,Check:E,Set:C,Run:P,RunImmovableBody1:M,RunImmovableBody2:A}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t,s,u,n,h,o,r,a,d,l,f,v,g,p,m,y,T,C=function(R,O,F){t=R,s=O;var I=t.velocity.y,G=s.velocity.y;return u=t.pushable,d=t._dy<0,l=t._dy>0,f=t._dy===0,m=Math.abs(t.bottom-s.y)<=Math.abs(s.bottom-t.y),r=G-I*t.bounce.y,n=s.pushable,v=s._dy<0,g=s._dy>0,p=s._dy===0,y=!m,a=I-G*s.bounce.y,T=Math.abs(F),S()},S=function(){return l&&m&&s.blocked.down?(t.processY(-T,r,!1,!0),1):d&&y&&s.blocked.up?(t.processY(T,r,!0),1):g&&y&&t.blocked.down?(s.processY(-T,a,!1,!0),2):v&&m&&t.blocked.up?(s.processY(T,a,!0),2):0},E=function(){var R=t.velocity.y,O=s.velocity.y,F=Math.sqrt(O*O*s.mass/t.mass)*(O>0?1:-1),I=Math.sqrt(R*R*t.mass/s.mass)*(R>0?1:-1),G=(F+I)*.5;return F-=G,I-=G,h=G+F*t.bounce.y,o=G+I*s.bounce.y,d&&y?P(0):v&&m?P(1):l&&m?P(2):g&&y?P(3):!1},P=function(R){if(u&&n)T*=.5,R===0||R===3?(t.processY(T,h),s.processY(-T,o)):(t.processY(-T,h),s.processY(T,o));else if(u&&!n)R===0||R===3?t.processY(T,r,!0):t.processY(-T,r,!1,!0);else if(!u&&n)R===0||R===3?s.processY(-T,a,!1,!0):s.processY(T,a,!0);else{var O=T*.5;R===0?p?(t.processY(T,0,!0),s.processY(0,null,!1,!0)):g?(t.processY(O,0,!0),s.processY(-O,0,!1,!0)):(t.processY(O,s.velocity.y,!0),s.processY(-O,null,!1,!0)):R===1?f?(t.processY(0,null,!1,!0),s.processY(T,0,!0)):l?(t.processY(-O,0,!1,!0),s.processY(O,0,!0)):(t.processY(-O,null,!1,!0),s.processY(O,t.velocity.y,!0)):R===2?p?(t.processY(-T,0,!1,!0),s.processY(0,null,!0)):v?(t.processY(-O,0,!1,!0),s.processY(O,0,!0)):(t.processY(-O,s.velocity.y,!1,!0),s.processY(O,null,!0)):R===3&&(f?(t.processY(0,null,!0),s.processY(-T,0,!1,!0)):d?(t.processY(O,0,!0),s.processY(-O,0,!1,!0)):(t.processY(O,s.velocity.y,!0),s.processY(-O,null,!1,!0)))}return!0},M=function(R){R===1?s.velocity.y=0:m?s.processY(T,a,!0):s.processY(-T,a,!1,!0),t.moves&&(s.x+=(t.x-t.prev.x)*t.friction.x,s._dx=s.x-s.prev.x)},A=function(R){R===2?t.velocity.y=0:y?t.processY(T,r,!0):t.processY(-T,r,!1,!0),s.moves&&(t.x+=(s.x-s.prev.x)*s.friction.x,t._dx=t.x-t.prev.x)};e.exports={BlockCheck:S,Check:E,Set:C,Run:P,RunImmovableBody1:M,RunImmovableBody2:A}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={ProcessTileCallbacks:t(530),ProcessTileSeparationX:t(534),ProcessTileSeparationY:t(536),SeparateTile:t(532),TileCheckX:t(533),TileCheckY:t(535),TileIntersectsBody:t(248)};e.exports=s},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(3),n=new s({initialize:function(){this.boundsCenter=new u,this.centerDiff=new u},parseBody:function(h){if(h=h.hasOwnProperty("body")?h.body:h,!h.hasOwnProperty("bounds")||!h.hasOwnProperty("centerOfMass"))return!1;var o=this.boundsCenter,r=this.centerDiff,a=h.bounds.max.x-h.bounds.min.x,d=h.bounds.max.y-h.bounds.min.y,l=a*h.centerOfMass.x,f=d*h.centerOfMass.y;return o.set(a/2,d/2),r.set(l-o.x,f-o.y),!0},getTopLeft:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.boundsCenter,d=this.centerDiff;return new u(o+a.x+d.x,r+a.y+d.y)}return!1},getTopCenter:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.boundsCenter,d=this.centerDiff;return new u(o+d.x,r+a.y+d.y)}return!1},getTopRight:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.boundsCenter,d=this.centerDiff;return new u(o-(a.x-d.x),r+a.y+d.y)}return!1},getLeftCenter:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.boundsCenter,d=this.centerDiff;return new u(o+a.x+d.x,r+d.y)}return!1},getCenter:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.centerDiff;return new u(o+a.x,r+a.y)}return!1},getRightCenter:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.boundsCenter,d=this.centerDiff;return new u(o-(a.x-d.x),r+d.y)}return!1},getBottomLeft:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.boundsCenter,d=this.centerDiff;return new u(o+a.x+d.x,r-(a.y-d.y))}return!1},getBottomCenter:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.boundsCenter,d=this.centerDiff;return new u(o+d.x,r-(a.y-d.y))}return!1},getBottomRight:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.boundsCenter,d=this.centerDiff;return new u(o-(a.x-d.x),r-(a.y-d.y))}return!1}});e.exports=n},function(e,c){/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={decomp:R,quickDecomp:G,isSimple:F,removeCollinearPoints:z,removeDuplicatePoints:U,makeCCW:m};function t(B,L,D){D=D||0;var w=[0,0],N,V,Y,W,H,$,K;return N=B[1][1]-B[0][1],V=B[0][0]-B[1][0],Y=N*B[0][0]+V*B[0][1],W=L[1][1]-L[0][1],H=L[0][0]-L[1][0],$=W*L[0][0]+H*L[0][1],K=N*H-W*V,X(K,0,D)||(w[0]=(H*Y-V*$)/K,w[1]=(N*$-W*Y)/K),w}function s(B,L,D,w){var N=L[0]-B[0],V=L[1]-B[1],Y=w[0]-D[0],W=w[1]-D[1];if(Y*V-W*N==0)return!1;var H=(N*(D[1]-B[1])+V*(B[0]-D[0]))/(Y*V-W*N),$=(Y*(B[1]-D[1])+W*(D[0]-B[0]))/(W*N-Y*V);return H>=0&&H<=1&&$>=0&&$<=1}function u(B,L,D){return(L[0]-B[0])*(D[1]-B[1])-(D[0]-B[0])*(L[1]-B[1])}function n(B,L,D){return u(B,L,D)>0}function h(B,L,D){return u(B,L,D)>=0}function o(B,L,D){return u(B,L,D)<0}function r(B,L,D){return u(B,L,D)<=0}var a=[],d=[];function l(B,L,D,w){if(w){var N=a,V=d;N[0]=L[0]-B[0],N[1]=L[1]-B[1],V[0]=D[0]-L[0],V[1]=D[1]-L[1];var Y=N[0]*V[0]+N[1]*V[1],W=Math.sqrt(N[0]*N[0]+N[1]*N[1]),H=Math.sqrt(V[0]*V[0]+V[1]*V[1]),$=Math.acos(Y/(W*H));return $<w}else return u(B,L,D)===0}function f(B,L){var D=L[0]-B[0],w=L[1]-B[1];return D*D+w*w}function v(B,L){var D=B.length;return B[L<0?L%D+D:L%D]}function g(B){B.length=0}function p(B,L,D,w){for(var N=D;N<w;N++)B.push(L[N])}function m(B){for(var L=0,D=B,w=1;w<B.length;++w)(D[w][1]<D[L][1]||D[w][1]===D[L][1]&&D[w][0]>D[L][0])&&(L=w);return n(v(B,L-1),v(B,L),v(B,L+1))?!1:(y(B),!0)}function y(B){for(var L=[],D=B.length,w=0;w!==D;w++)L.push(B.pop());for(var w=0;w!==D;w++)B[w]=L[w]}function T(B,L){return o(v(B,L-1),v(B,L),v(B,L+1))}var C=[],S=[];function E(B,L,D){var w,N,V=C,Y=S;if(h(v(B,L+1),v(B,L),v(B,D))&&r(v(B,L-1),v(B,L),v(B,D)))return!1;N=f(v(B,L),v(B,D));for(var W=0;W!==B.length;++W)if(!((W+1)%B.length===L||W===L)&&h(v(B,L),v(B,D),v(B,W+1))&&r(v(B,L),v(B,D),v(B,W))&&(V[0]=v(B,L),V[1]=v(B,D),Y[0]=v(B,W),Y[1]=v(B,W+1),w=t(V,Y),f(v(B,L),w)<N))return!1;return!0}function P(B,L,D){for(var w=0;w!==B.length;++w)if(!(w===L||w===D||(w+1)%B.length===L||(w+1)%B.length===D)&&s(v(B,L),v(B,D),v(B,w),v(B,w+1)))return!1;return!0}function M(B,L,D,w){var N=w||[];if(g(N),L<D)for(var V=L;V<=D;V++)N.push(B[V]);else{for(var V=0;V<=D;V++)N.push(B[V]);for(var V=L;V<B.length;V++)N.push(B[V])}return N}function A(B){for(var L=[],D=[],w=[],N=[],V=Number.MAX_VALUE,Y=0;Y<B.length;++Y)if(T(B,Y)){for(var W=0;W<B.length;++W)if(E(B,Y,W)){D=A(M(B,Y,W,N)),w=A(M(B,W,Y,N));for(var H=0;H<w.length;H++)D.push(w[H]);D.length<V&&(L=D,V=D.length,L.push([v(B,Y),v(B,W)]))}}return L}function R(B){var L=A(B);return L.length>0?O(B,L):[B]}function O(B,L){if(L.length===0)return[B];if(L instanceof Array&&L.length&&L[0]instanceof Array&&L[0].length===2&&L[0][0]instanceof Array){for(var D=[B],w=0;w<L.length;w++)for(var N=L[w],V=0;V<D.length;V++){var Y=D[V],W=O(Y,N);if(W){D.splice(V,1),D.push(W[0],W[1]);break}}return D}else{var N=L,w=B.indexOf(N[0]),V=B.indexOf(N[1]);return w!==-1&&V!==-1?[M(B,w,V),M(B,V,w)]:!1}}function F(B){var L=B,D;for(D=0;D<L.length-1;D++)for(var w=0;w<D-1;w++)if(s(L[D],L[D+1],L[w],L[w+1]))return!1;for(D=1;D<L.length-2;D++)if(s(L[0],L[L.length-1],L[D],L[D+1]))return!1;return!0}function I(B,L,D,w,N){N=N||0;var V=L[1]-B[1],Y=B[0]-L[0],W=V*B[0]+Y*B[1],H=w[1]-D[1],$=D[0]-w[0],K=H*D[0]+$*D[1],Z=V*$-H*Y;return X(Z,0,N)?[0,0]:[($*W-Y*K)/Z,(V*K-H*W)/Z]}function G(B,L,D,w,N,V,Y){V=V||100,Y=Y||0,N=N||25,L=typeof L!="undefined"?L:[],D=D||[],w=w||[];var W=[0,0],H=[0,0],$=[0,0],K=0,Z=0,J=0,k=0,Q=0,q=0,at=0,it=[],_=[],j=B,ot=B;if(ot.length<3)return L;if(Y++,Y>V)return console.warn("quickDecomp: max level ("+V+") reached."),L;for(var tt=0;tt<B.length;++tt)if(T(j,tt)){D.push(j[tt]),K=Z=Number.MAX_VALUE;for(var rt=0;rt<B.length;++rt)n(v(j,tt-1),v(j,tt),v(j,rt))&&r(v(j,tt-1),v(j,tt),v(j,rt-1))&&($=I(v(j,tt-1),v(j,tt),v(j,rt),v(j,rt-1)),o(v(j,tt+1),v(j,tt),$)&&(J=f(j[tt],$),J<Z&&(Z=J,H=$,q=rt))),n(v(j,tt+1),v(j,tt),v(j,rt+1))&&r(v(j,tt+1),v(j,tt),v(j,rt))&&($=I(v(j,tt+1),v(j,tt),v(j,rt),v(j,rt+1)),n(v(j,tt-1),v(j,tt),$)&&(J=f(j[tt],$),J<K&&(K=J,W=$,Q=rt)));if(q===(Q+1)%B.length)$[0]=(H[0]+W[0])/2,$[1]=(H[1]+W[1])/2,w.push($),tt<Q?(p(it,j,tt,Q+1),it.push($),_.push($),q!==0&&p(_,j,q,j.length),p(_,j,0,tt+1)):(tt!==0&&p(it,j,tt,j.length),p(it,j,0,Q+1),it.push($),_.push($),p(_,j,q,tt+1));else{if(q>Q&&(Q+=B.length),k=Number.MAX_VALUE,Q<q)return L;for(var rt=q;rt<=Q;++rt)h(v(j,tt-1),v(j,tt),v(j,rt))&&r(v(j,tt+1),v(j,tt),v(j,rt))&&(J=f(v(j,tt),v(j,rt)),J<k&&P(j,tt,rt)&&(k=J,at=rt%B.length));tt<at?(p(it,j,tt,at+1),at!==0&&p(_,j,at,ot.length),p(_,j,0,tt+1)):(tt!==0&&p(it,j,tt,ot.length),p(it,j,0,at+1),p(_,j,at,tt+1))}return it.length<_.length?(G(it,L,D,w,N,V,Y),G(_,L,D,w,N,V,Y)):(G(_,L,D,w,N,V,Y),G(it,L,D,w,N,V,Y)),L}return L.push(B),L}function z(B,L){for(var D=0,w=B.length-1;B.length>3&&w>=0;--w)l(v(B,w-1),v(B,w),v(B,w+1),L)&&(B.splice(w%B.length,1),D++);return D}function U(B,L){for(var D=B.length-1;D>=1;--D)for(var w=B[D],N=D-1;N>=0;--N)if(b(w,B[N],L)){B.splice(D,1);continue}}function X(B,L,D){return D=D||0,Math.abs(B-L)<=D}function b(B,L,D){return X(B[0],L[0],D)&&X(B[1],L[1],D)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(0),n=t(591),h=t(128),o=t(592),r=t(1395),a=t(1396),d=t(1397),l=t(593),f=t(589),v=t(590),g=t(1398),p=t(64),m=new u({initialize:function(T){this.world=T,this.scene=T.scene,this.sys=T.scene.sys},rectangle:function(y,T,C,S,E){var P=s.rectangle(y,T,C,S,E);return this.world.add(P),P},trapezoid:function(y,T,C,S,E,P){var M=s.trapezoid(y,T,C,S,E,P);return this.world.add(M),M},circle:function(y,T,C,S,E){var P=s.circle(y,T,C,S,E);return this.world.add(P),P},polygon:function(y,T,C,S,E){var P=s.polygon(y,T,C,S,E);return this.world.add(P),P},fromVertices:function(y,T,C,S,E,P,M){typeof C=="string"&&(C=p.fromPath(C));var A=s.fromVertices(y,T,C,S,E,P,M);return this.world.add(A),A},fromPhysicsEditor:function(y,T,C,S,E){E===void 0&&(E=!0);var P=f.parseBody(y,T,C,S);return E&&!this.world.has(P)&&this.world.add(P),P},fromSVG:function(y,T,C,S,E,P){S===void 0&&(S=1),E===void 0&&(E={}),P===void 0&&(P=!0);for(var M=C.getElementsByTagName("path"),A=[],R=0;R<M.length;R++){var O=o.pathToVertices(M[R],30);S!==1&&p.scale(O,S,S),A.push(O)}var F=s.fromVertices(y,T,A,E);return P&&this.world.add(F),F},fromJSON:function(y,T,C,S,E){S===void 0&&(S={}),E===void 0&&(E=!0);var P=v.parseBody(y,T,C,S);return P&&E&&this.world.add(P),P},imageStack:function(y,T,C,S,E,P,M,A,R){M===void 0&&(M=0),A===void 0&&(A=0),R===void 0&&(R={});var O=this.world,F=this.sys.displayList;R.addToWorld=!1;var I=n.stack(C,S,E,P,M,A,function(G,z){var U=new a(O,G,z,y,T,R);return F.add(U),U.body});return O.add(I),I},stack:function(y,T,C,S,E,P,M){var A=n.stack(y,T,C,S,E,P,M);return this.world.add(A),A},pyramid:function(y,T,C,S,E,P,M){var A=n.pyramid(y,T,C,S,E,P,M);return this.world.add(A),A},chain:function(y,T,C,S,E,P){return n.chain(y,T,C,S,E,P)},mesh:function(y,T,C,S,E){return n.mesh(y,T,C,S,E)},newtonsCradle:function(y,T,C,S,E){var P=n.newtonsCradle(y,T,C,S,E);return this.world.add(P),P},car:function(y,T,C,S,E){var P=n.car(y,T,C,S,E);return this.world.add(P),P},softBody:function(y,T,C,S,E,P,M,A,R,O){var F=n.softBody(y,T,C,S,E,P,M,A,R,O);return this.world.add(F),F},joint:function(y,T,C,S,E){return this.constraint(y,T,C,S,E)},spring:function(y,T,C,S,E){return this.constraint(y,T,C,S,E)},constraint:function(y,T,C,S,E){S===void 0&&(S=1),E===void 0&&(E={}),E.bodyA=y.type==="body"?y:y.body,E.bodyB=T.type==="body"?T:T.body,isNaN(C)||(E.length=C),E.stiffness=S;var P=h.create(E);return this.world.add(P),P},worldConstraint:function(y,T,C,S){C===void 0&&(C=1),S===void 0&&(S={}),S.bodyB=y.type==="body"?y:y.body,isNaN(T)||(S.length=T),S.stiffness=C;var E=h.create(S);return this.world.add(E),E},mouseSpring:function(y){return this.pointerConstraint(y)},pointerConstraint:function(y){y===void 0&&(y={}),y.hasOwnProperty("render")||(y.render={visible:!1});var T=new g(this.scene,this.world,y);return this.world.add(T.constraint),T},image:function(y,T,C,S,E){var P=new a(this.world,y,T,C,S,E);return this.sys.displayList.add(P),P},tileBody:function(y,T){return new l(this.world,y,T)},sprite:function(y,T,C,S,E){var P=new d(this.world,y,T,C,S,E);return this.sys.displayList.add(P),this.sys.updateList.add(P),P},gameObject:function(y,T,C){return r(this.world,y,T,C)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=m},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(249),u=t(2),n=t(3);function h(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}var o=function(r,a,d,l){d===void 0&&(d={}),l===void 0&&(l=!0);var f=a.x,v=a.y;a.body={temp:!0,position:{x:f,y:v}};var g=[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity];if(g.forEach(function(m){for(var y in m)h(m[y])?Object.defineProperty(a,y,{get:m[y].get,set:m[y].set}):Object.defineProperty(a,y,{value:m[y]})}),a.world=r,a._tempVec2=new n(f,v),d.hasOwnProperty("type")&&d.type==="body")a.setExistingBody(d,l);else{var p=u(d,"shape",null);p||(p="rectangle"),d.addToWorld=l,a.setBody(p,d)}return a};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(249),n=t(15),h=t(2),o=t(125),r=t(167),a=t(3),d=new s({Extends:o,Mixins:[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity,r],initialize:function(f,v,g,p,m,y){n.call(this,f.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(p,m),this.setSizeToFrame(),this.setOrigin(),this.world=f,this._tempVec2=new a(v,g);var T=h(y,"shape",null);T?this.setBody(T,y):this.setRectangle(this.width,this.height,y),this.setPosition(v,g),this.initPipeline()}});e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(164),u=t(0),n=t(249),h=t(15),o=t(2),r=t(167),a=t(73),d=t(3),l=new u({Extends:a,Mixins:[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity,r],initialize:function(v,g,p,m,y,T){h.call(this,v.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new s(this),this.setTexture(m,y),this.setSizeToFrame(),this.setOrigin(),this.world=v,this._tempVec2=new d(g,p);var C=o(T,"shape",null);C?this.setBody(C,T):this.setRectangle(this.width,this.height,T),this.setPosition(g,p),this.initPipeline()}});e.exports=l},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(84),u=t(0),n=t(118),h=t(128),o=t(273),r=t(272),a=t(51),d=t(127),l=t(165),f=t(3),v=t(64),g=new u({initialize:function(m,y,T){T===void 0&&(T={});var C={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=m,this.world=y,this.camera=null,this.pointer=null,this.active=!0,this.position=new f,this.body=null,this.part=null,this.constraint=h.create(d(T,C)),this.world.on(r.BEFORE_UPDATE,this.update,this),m.sys.input.on(a.POINTER_DOWN,this.onDown,this),m.sys.input.on(a.POINTER_UP,this.onUp,this)},onDown:function(p){this.pointer||(this.pointer=p,this.camera=p.camera)},onUp:function(p){p===this.pointer&&(this.pointer=null)},getBody:function(p){var m=this.position,y=this.constraint;this.camera.getWorldPoint(p.x,p.y,m);for(var T=n.allBodies(this.world.localWorld),C=0;C<T.length;C++){var S=T[C];if(!S.ignorePointer&&s.contains(S.bounds,m)&&o.canCollide(S.collisionFilter,y.collisionFilter)&&this.hitTestBody(S,m))return this.world.emit(r.DRAG_START,S,this.part,this),!0}return!1},hitTestBody:function(p,m){for(var y=this.constraint,T=p.parts.length,C=T>1?1:0,S=C;S<T;S++){var E=p.parts[S];if(v.contains(E.vertices,m))return y.pointA=m,y.pointB={x:m.x-p.position.x,y:m.y-p.position.y},y.bodyB=p,y.angleB=p.angle,l.set(p,!1),this.part=E,this.body=p,!0}return!1},update:function(){var p=this.pointer,m=this.body;if(!this.active||!p){m&&this.stopDrag();return}if(!p.isDown&&m){this.stopDrag();return}else if(p.isDown){if(!m&&!this.getBody(p))return;m=this.body;var y=this.position,T=this.constraint;this.camera.getWorldPoint(p.x,p.y,y),T.pointA.x=y.x,T.pointA.y=y.y,l.set(m,!1),this.world.emit(r.DRAG,m,this)}},stopDrag:function(){var p=this.body,m=this.constraint;m.bodyB=null,m.pointB=null,this.pointer=null,this.body=null,this.part=null,p&&this.world.emit(r.DRAG_END,p,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(r.BEFORE_UPDATE,this.update),this.scene.sys.input.off(a.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(a.POINTER_UP,this.onUp,this)}});e.exports=g},function(e,c,t){var s={};e.exports=s;var u=t(595),n=t(32);(function(){s.name="matter-js",s.version="0.14.2",s.uses=[],s.used=[],s.use=function(){u.use(s,Array.prototype.slice.call(arguments))},s.before=function(h,o){return h=h.replace(/^Matter./,""),n.chainPathBefore(s,h,o)},s.after=function(h,o){return h=h.replace(/^Matter./,""),n.chainPathAfter(s,h,o)}})()},function(e,c,t){var s={};e.exports=s;var u=t(83),n=t(274),h=t(84),o=t(86),r=t(64);(function(){s.collides=function(a,d){for(var l=[],f=0;f<d.length;f++){var v=d[f];if(a!==v&&h.overlaps(v.bounds,a.bounds))for(var g=v.parts.length===1?0:1;g<v.parts.length;g++){var p=v.parts[g];if(h.overlaps(p.bounds,a.bounds)){var m=n.collides(p,a);if(m.collided){l.push(m);break}}}}return l},s.ray=function(a,d,l,f){f=f||1e-100;for(var v=u.angle(d,l),g=u.magnitude(u.sub(d,l)),p=(l.x+d.x)*.5,m=(l.y+d.y)*.5,y=o.rectangle(p,m,g,f,{angle:v}),T=s.collides(y,a),C=0;C<T.length;C+=1){var S=T[C];S.body=S.bodyB=S.bodyA}return T},s.region=function(a,d,l){for(var f=[],v=0;v<a.length;v++){var g=a[v],p=h.overlaps(g.bounds,d);(p&&!l||!p&&l)&&f.push(g)}return f},s.point=function(a,d){for(var l=[],f=0;f<a.length;f++){var v=a[f];if(h.contains(v.bounds,d))for(var g=v.parts.length===1?0:1;g<v.parts.length;g++){var p=v.parts[g];if(h.contains(p.bounds,d)&&r.contains(p.vertices,d)){l.push(v);break}}}return l}})()},function(e,c,t){var s={};e.exports=s;var u=t(596),n=t(165),h=t(599),o=t(598),r=t(1523),a=t(597),d=t(166),l=t(118),f=t(128),v=t(32),g=t(41);(function(){s.create=function(p,m){m=v.isElement(p)?m:p,p=v.isElement(p)?p:null,m=m||{},(p||m.render)&&v.warn("Engine.create: engine.render is deprecated (see docs)");var y={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:a}},T=v.extend(y,m);return T.world=m.world||u.create(T.world),T.pairs=o.create(),T.broadphase=T.broadphase.controller.create(T.broadphase),T.metrics=T.metrics||{extended:!1},T.metrics=r.create(T.metrics),T},s.update=function(p,m,y){m=m||1e3/60,y=y||1;var T=p.world,C=p.timing,S=p.broadphase,E=[],P;C.timestamp+=m*C.timeScale;var M={timestamp:C.timestamp};d.trigger(p,"beforeUpdate",M);var A=l.allBodies(T),R=l.allConstraints(T);for(r.reset(p.metrics),p.enableSleeping&&n.update(A,C.timeScale),s._bodiesApplyGravity(A,T.gravity),s._bodiesUpdate(A,m,C.timeScale,y,T.bounds),f.preSolveAll(A),P=0;P<p.constraintIterations;P++)f.solveAll(R,C.timeScale);f.postSolveAll(A),S.controller?(T.isModified&&S.controller.clear(S),S.controller.update(S,A,p,T.isModified),E=S.pairsList):E=A,T.isModified&&l.setModified(T,!1,!1,!0);var O=S.detector(E,p),F=p.pairs,I=C.timestamp;for(o.update(F,O,I),o.removeOld(F,I),p.enableSleeping&&n.afterCollisions(F.list,C.timeScale),F.collisionStart.length>0&&d.trigger(p,"collisionStart",{pairs:F.collisionStart}),h.preSolvePosition(F.list),P=0;P<p.positionIterations;P++)h.solvePosition(F.list,A,C.timeScale);for(h.postSolvePosition(A),f.preSolveAll(A),P=0;P<p.constraintIterations;P++)f.solveAll(R,C.timeScale);for(f.postSolveAll(A),h.preSolveVelocity(F.list),P=0;P<p.velocityIterations;P++)h.solveVelocity(F.list,C.timeScale);return F.collisionActive.length>0&&d.trigger(p,"collisionActive",{pairs:F.collisionActive}),F.collisionEnd.length>0&&d.trigger(p,"collisionEnd",{pairs:F.collisionEnd}),r.update(p.metrics,p),s._bodiesClearForces(A),d.trigger(p,"afterUpdate",M),p},s.merge=function(p,m){if(v.extend(p,m),m.world){p.world=m.world,s.clear(p);for(var y=l.allBodies(p.world),T=0;T<y.length;T++){var C=y[T];n.set(C,!1),C.id=v.nextId()}}},s.clear=function(p){var m=p.world;o.clear(p.pairs);var y=p.broadphase;if(y.controller){var T=l.allBodies(m);y.controller.clear(y),y.controller.update(y,T,p,!0)}},s._bodiesClearForces=function(p){for(var m=0;m<p.length;m++){var y=p[m];y.force.x=0,y.force.y=0,y.torque=0}},s._bodiesApplyGravity=function(p,m){var y=typeof m.scale!="undefined"?m.scale:.001;if(!(m.x===0&&m.y===0||y===0))for(var T=0;T<p.length;T++){var C=p[T];C.ignoreGravity||C.isStatic||C.isSleeping||(C.force.x+=C.mass*m.x*y*C.gravityScale.x,C.force.y+=C.mass*m.y*y*C.gravityScale.y)}},s._bodiesUpdate=function(p,m,y,T,C){for(var S=0;S<p.length;S++){var E=p[S];E.isStatic||E.isSleeping||g.update(E,m,y,T)}}})()},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(41),n=t(0),h=t(32),o=t(118),r=t(1401),a=t(9),d=t(272),l=t(2),f=t(6),v=t(41),g=t(166),p=t(593),m=t(596),y=t(83),T=new n({Extends:a,initialize:function(S,E){a.call(this),this.scene=S,this.engine=r.create(E),this.localWorld=this.engine.world;var P=f(E,"gravity",null);P?this.setGravity(P.x,P.y,P.scale):P===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=f(E,"enabled",!0),this.correction=f(E,"correction",1),this.getDelta=f(E,"getDelta",this.update60Hz);var M=l(E,"runner",{}),A=l(M,"fps",!1),R=l(M,"fps",60),O=l(M,"delta",1e3/R),F=l(M,"deltaMin",1e3/R),I=l(M,"deltaMax",1e3/(R*.5));A||(R=1e3/O),this.runner={fps:R,correction:l(M,"correction",1),deltaSampleSize:l(M,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:l(M,"isFixed",!1),delta:O,deltaMin:F,deltaMax:I},this.autoUpdate=f(E,"autoUpdate",!0);var G=f(E,"debug",!1);if(this.drawDebug=typeof G=="object"?!0:G,this.debugGraphic,this.debugConfig={showAxes:l(G,"showAxes",!1),showAngleIndicator:l(G,"showAngleIndicator",!1),angleColor:l(G,"angleColor",15208787),showBroadphase:l(G,"showBroadphase",!1),broadphaseColor:l(G,"broadphaseColor",16757760),showBounds:l(G,"showBounds",!1),boundsColor:l(G,"boundsColor",16777215),showVelocity:l(G,"showVelocity",!1),velocityColor:l(G,"velocityColor",44783),showCollisions:l(G,"showCollisions",!1),collisionColor:l(G,"collisionColor",16094476),showSeparations:l(G,"showSeparations",!1),separationColor:l(G,"separationColor",16753920),showBody:l(G,"showBody",!0),showStaticBody:l(G,"showStaticBody",!0),showInternalEdges:l(G,"showInternalEdges",!1),renderFill:l(G,"renderFill",!1),renderLine:l(G,"renderLine",!0),fillColor:l(G,"fillColor",1075465),fillOpacity:l(G,"fillOpacity",1),lineColor:l(G,"lineColor",2678297),lineOpacity:l(G,"lineOpacity",1),lineThickness:l(G,"lineThickness",1),staticFillColor:l(G,"staticFillColor",857979),staticLineColor:l(G,"staticLineColor",1255396),showSleeping:l(G,"showSleeping",!1),staticBodySleepOpacity:l(G,"staticBodySleepOpacity",.7),sleepFillColor:l(G,"sleepFillColor",4605510),sleepLineColor:l(G,"sleepLineColor",10066585),showSensors:l(G,"showSensors",!0),sensorFillColor:l(G,"sensorFillColor",857979),sensorLineColor:l(G,"sensorLineColor",1255396),showPositions:l(G,"showPositions",!0),positionSize:l(G,"positionSize",4),positionColor:l(G,"positionColor",14697178),showJoint:l(G,"showJoint",!0),jointColor:l(G,"jointColor",14737474),jointLineOpacity:l(G,"jointLineOpacity",1),jointLineThickness:l(G,"jointLineThickness",2),pinSize:l(G,"pinSize",4),pinColor:l(G,"pinColor",4382944),springColor:l(G,"springColor",14697184),anchorColor:l(G,"anchorColor",15724527),anchorSize:l(G,"anchorSize",4),showConvexHulls:l(G,"showConvexHulls",!1),hullColor:l(G,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),l(E,"setBounds",!1)){var z=E.setBounds;if(typeof z=="boolean")this.setBounds();else{var U=l(z,"x",0),X=l(z,"y",0),b=l(z,"width",S.sys.scale.width),B=l(z,"height",S.sys.scale.height),L=l(z,"thickness",64),D=l(z,"left",!0),w=l(z,"right",!0),N=l(z,"top",!0),V=l(z,"bottom",!0);this.setBounds(U,X,b,B,L,D,w,N,V)}}},setCompositeRenderStyle:function(C){var S=C.bodies,E=C.constraints,P=C.composites,M,A,R;for(M=0;M<S.length;M++)A=S[M],R=A.render,this.setBodyRenderStyle(A,R.lineColor,R.lineOpacity,R.lineThickness,R.fillColor,R.fillOpacity);for(M=0;M<E.length;M++)A=E[M],R=A.render,this.setConstraintRenderStyle(A,R.lineColor,R.lineOpacity,R.lineThickness,R.pinSize,R.anchorColor,R.anchorSize);for(M=0;M<P.length;M++)A=P[M],this.setCompositeRenderStyle(A);return this},setBodyRenderStyle:function(C,S,E,P,M,A){var R=C.render,O=this.debugConfig;return R?(S==null&&(S=C.isStatic?O.staticLineColor:O.lineColor),E==null&&(E=O.lineOpacity),P==null&&(P=O.lineThickness),M==null&&(M=C.isStatic?O.staticFillColor:O.fillColor),A==null&&(A=O.fillOpacity),S!==!1&&(R.lineColor=S),E!==!1&&(R.lineOpacity=E),P!==!1&&(R.lineThickness=P),M!==!1&&(R.fillColor=M),A!==!1&&(R.fillOpacity=A),this):this},setConstraintRenderStyle:function(C,S,E,P,M,A,R){var O=C.render,F=this.debugConfig;if(!O)return this;if(S==null){var I=O.type;I==="line"?S=F.jointColor:I==="pin"?S=F.pinColor:I==="spring"&&(S=F.springColor)}return E==null&&(E=F.jointLineOpacity),P==null&&(P=F.jointLineThickness),M==null&&(M=F.pinSize),A==null&&(A=F.anchorColor),R==null&&(R=F.anchorSize),S!==!1&&(O.lineColor=S),E!==!1&&(O.lineOpacity=E),P!==!1&&(O.lineThickness=P),M!==!1&&(O.pinSize=M),A!==!1&&(O.anchorColor=A),R!==!1&&(O.anchorSize=R),this},setEventsProxy:function(){var C=this,S=this.engine,E=this.localWorld;this.drawDebug&&(g.on(E,"compositeModified",function(P){C.setCompositeRenderStyle(P)}),g.on(E,"beforeAdd",function(P){for(var M=[].concat(P.object),A=0;A<M.length;A++){var R=M[A],O=R.render;R.type==="body"?C.setBodyRenderStyle(R,O.lineColor,O.lineOpacity,O.lineThickness,O.fillColor,O.fillOpacity):R.type==="composite"?C.setCompositeRenderStyle(R):R.type==="constraint"&&C.setConstraintRenderStyle(R,O.lineColor,O.lineOpacity,O.lineThickness,O.pinSize,O.anchorColor,O.anchorSize)}})),g.on(E,"beforeAdd",function(P){C.emit(d.BEFORE_ADD,P)}),g.on(E,"afterAdd",function(P){C.emit(d.AFTER_ADD,P)}),g.on(E,"beforeRemove",function(P){C.emit(d.BEFORE_REMOVE,P)}),g.on(E,"afterRemove",function(P){C.emit(d.AFTER_REMOVE,P)}),g.on(S,"beforeUpdate",function(P){C.emit(d.BEFORE_UPDATE,P)}),g.on(S,"afterUpdate",function(P){C.emit(d.AFTER_UPDATE,P)}),g.on(S,"collisionStart",function(P){var M=P.pairs,A,R;M.length>0&&(A=M[0].bodyA,R=M[0].bodyB),C.emit(d.COLLISION_START,P,A,R)}),g.on(S,"collisionActive",function(P){var M=P.pairs,A,R;M.length>0&&(A=M[0].bodyA,R=M[0].bodyB),C.emit(d.COLLISION_ACTIVE,P,A,R)}),g.on(S,"collisionEnd",function(P){var M=P.pairs,A,R;M.length>0&&(A=M[0].bodyA,R=M[0].bodyB),C.emit(d.COLLISION_END,P,A,R)})},setBounds:function(C,S,E,P,M,A,R,O,F){return C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=this.scene.sys.scale.width),P===void 0&&(P=this.scene.sys.scale.height),M===void 0&&(M=64),A===void 0&&(A=!0),R===void 0&&(R=!0),O===void 0&&(O=!0),F===void 0&&(F=!0),this.updateWall(A,"left",C-M,S-M,M,P+M*2),this.updateWall(R,"right",C+E,S-M,M,P+M*2),this.updateWall(O,"top",C,S-M,E,M),this.updateWall(F,"bottom",C,S+P,E,M),this},updateWall:function(C,S,E,P,M,A){var R=this.walls[S];C?(R&&m.remove(this.localWorld,R),E+=M/2,P+=A/2,this.walls[S]=this.create(E,P,M,A,{isStatic:!0,friction:0,frictionStatic:0})):(R&&m.remove(this.localWorld,R),this.walls[S]=null)},createDebugGraphic:function(){var C=this.scene.sys.add.graphics({x:0,y:0});return C.setDepth(Number.MAX_VALUE),this.debugGraphic=C,this.drawDebug=!0,C},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(C,S,E){return C===void 0&&(C=0),S===void 0&&(S=1),this.localWorld.gravity.x=C,this.localWorld.gravity.y=S,E!==void 0&&(this.localWorld.gravity.scale=E),this},create:function(C,S,E,P,M){var A=s.rectangle(C,S,E,P,M);return m.add(this.localWorld,A),A},add:function(C){return m.add(this.localWorld,C),this},remove:function(C,S){Array.isArray(C)||(C=[C]);for(var E=0;E<C.length;E++){var P=C[E],M=P.body?P.body:P;o.remove(this.localWorld,M,S)}return this},removeConstraint:function(C,S){return o.remove(this.localWorld,C,S),this},convertTilemapLayer:function(C,S){var E=C.layer,P=C.getTilesWithin(0,0,E.width,E.height,{isColliding:!0});return this.convertTiles(P,S),this},convertTiles:function(C,S){if(C.length===0)return this;for(var E=0;E<C.length;E++)new p(this,C[E],S);return this},nextGroup:function(C){return v.nextGroup(C)},nextCategory:function(){return v.nextCategory()},pause:function(){return this.enabled=!1,this.emit(d.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(d.RESUME),this},update:function(C,S){if(!(!this.enabled||!this.autoUpdate)){var E=this.engine,P=this.runner,M=E.timing,A=this.correction;P.isFixed?S=this.getDelta(C,S):(S=C-P.timePrev||P.delta,P.timePrev=C,P.deltaHistory.push(S),P.deltaHistory=P.deltaHistory.slice(-P.deltaSampleSize),S=Math.min.apply(null,P.deltaHistory),S=S<P.deltaMin?P.deltaMin:S,S=S>P.deltaMax?P.deltaMax:S,A=S/P.delta,P.delta=S),P.timeScalePrev!==0&&(A*=M.timeScale/P.timeScalePrev),M.timeScale===0&&(A=0),P.timeScalePrev=M.timeScale,P.correction=A,P.frameCounter+=1,C-P.counterTimestamp>=1e3&&(P.fps=P.frameCounter*((C-P.counterTimestamp)/1e3),P.counterTimestamp=C,P.frameCounter=0),r.update(E,S,A)}},step:function(C,S){r.update(this.engine,C,S)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(C){var S=C.hasOwnProperty("body")?C.body:C;return o.get(this.localWorld,S.id,S.type)!==null},getAllBodies:function(){return o.allBodies(this.localWorld)},getAllConstraints:function(){return o.allConstraints(this.localWorld)},getAllComposites:function(){return o.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var C=this.debugConfig,S=this.engine,E=this.debugGraphic,P=o.allBodies(this.localWorld);this.debugGraphic.clear(),C.showBroadphase&&S.broadphase.controller&&this.renderGrid(S.broadphase,E,C.broadphaseColor,.5),C.showBounds&&this.renderBodyBounds(P,E,C.boundsColor,.5),(C.showBody||C.showStaticBody)&&this.renderBodies(P),C.showJoint&&this.renderJoints(),(C.showAxes||C.showAngleIndicator)&&this.renderBodyAxes(P,E,C.showAxes,C.angleColor,.5),C.showVelocity&&this.renderBodyVelocity(P,E,C.velocityColor,1,2),C.showSeparations&&this.renderSeparations(S.pairs.list,E,C.separationColor),C.showCollisions&&this.renderCollisions(S.pairs.list,E,C.collisionColor)}},renderGrid:function(C,S,E,P){S.lineStyle(1,E,P);for(var M=h.keys(C.buckets),A=0;A<M.length;A++){var R=M[A];if(!(C.buckets[R].length<2)){var O=R.split(/C|R/);S.strokeRect(parseInt(O[1],10)*C.bucketWidth,parseInt(O[2],10)*C.bucketHeight,C.bucketWidth,C.bucketHeight)}}return this},renderSeparations:function(C,S,E){S.lineStyle(1,E,1);for(var P=0;P<C.length;P++){var M=C[P];if(!!M.isActive){var A=M.collision,R=A.bodyA,O=A.bodyB,F=R.position,I=O.position,G=A.penetration,z=!R.isStatic&&!O.isStatic?4:1;O.isStatic&&(z=0),S.lineBetween(I.x,I.y,I.x-G.x*z,I.y-G.y*z),z=!R.isStatic&&!O.isStatic?4:1,R.isStatic&&(z=0),S.lineBetween(F.x,F.y,F.x-G.x*z,F.y-G.y*z)}}return this},renderCollisions:function(C,S,E){S.lineStyle(1,E,.5),S.fillStyle(E,1);var P,M;for(P=0;P<C.length;P++)if(M=C[P],!!M.isActive)for(var A=0;A<M.activeContacts.length;A++){var R=M.activeContacts[A],O=R.vertex;S.fillRect(O.x-2,O.y-2,5,5)}for(P=0;P<C.length;P++)if(M=C[P],!!M.isActive){var F=M.collision,I=M.activeContacts;if(I.length>0){var G=I[0].vertex.x,z=I[0].vertex.y;I.length===2&&(G=(I[0].vertex.x+I[1].vertex.x)/2,z=(I[0].vertex.y+I[1].vertex.y)/2),F.bodyB===F.supports[0].body||F.bodyA.isStatic?S.lineBetween(G-F.normal.x*8,z-F.normal.y*8,G,z):S.lineBetween(G+F.normal.x*8,z+F.normal.y*8,G,z)}}return this},renderBodyBounds:function(C,S,E,P){S.lineStyle(1,E,P);for(var M=0;M<C.length;M++){var A=C[M];if(!!A.render.visible){var R=A.bounds;if(R)S.strokeRect(R.min.x,R.min.y,R.max.x-R.min.x,R.max.y-R.min.y);else for(var O=A.parts,F=O.length>1?1:0;F<O.length;F++){var I=O[F];S.strokeRect(I.bounds.min.x,I.bounds.min.y,I.bounds.max.x-I.bounds.min.x,I.bounds.max.y-I.bounds.min.y)}}}return this},renderBodyAxes:function(C,S,E,P,M){S.lineStyle(1,P,M);for(var A=0;A<C.length;A++){var R=C[A],O=R.parts;if(!!R.render.visible){var F,I,G;if(E)for(I=O.length>1?1:0;I<O.length;I++)for(F=O[I],G=0;G<F.axes.length;G++){var z=F.axes[G];S.lineBetween(F.position.x,F.position.y,F.position.x+z.x*20,F.position.y+z.y*20)}else for(I=O.length>1?1:0;I<O.length;I++)for(F=O[I],G=0;G<F.axes.length;G++)S.lineBetween(F.position.x,F.position.y,(F.vertices[0].x+F.vertices[F.vertices.length-1].x)/2,(F.vertices[0].y+F.vertices[F.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(C,S,E,P,M){S.lineStyle(M,E,P);for(var A=0;A<C.length;A++){var R=C[A];!R.render.visible||S.lineBetween(R.position.x,R.position.y,R.position.x+(R.position.x-R.positionPrev.x)*2,R.position.y+(R.position.y-R.positionPrev.y)*2)}return this},renderBodies:function(C){for(var S=this.debugGraphic,E=this.debugConfig,P=E.showBody,M=E.showStaticBody,A=E.showSleeping,R=E.showInternalEdges,O=E.showConvexHulls,F=E.renderFill,I=E.renderLine,G=E.staticBodySleepOpacity,z=E.sleepFillColor,U=E.sleepLineColor,X=E.hullColor,b=0;b<C.length;b++){var B=C[b];if(!!B.render.visible&&!(!M&&B.isStatic||!P&&!B.isStatic)){var L=B.render.lineColor,D=B.render.lineOpacity,w=B.render.lineThickness,N=B.render.fillColor,V=B.render.fillOpacity;A&&B.isSleeping&&(B.isStatic?(D*=G,V*=G):(L=U,N=z)),F||(N=null),I||(L=null),this.renderBody(B,S,R,L,D,w,N,V);var Y=B.parts.length;O&&Y>1&&this.renderConvexHull(B,S,X,w)}}},renderBody:function(C,S,E,P,M,A,R,O){P===void 0&&(P=null),M===void 0&&(M=null),A===void 0&&(A=1),R===void 0&&(R=null),O===void 0&&(O=null);for(var F=this.debugConfig,I=F.sensorFillColor,G=F.sensorLineColor,z=C.parts,U=z.length,X=U>1?1:0;X<U;X++){var b=z[X],B=b.render,L=B.opacity;if(!(!B.visible||L===0||b.isSensor&&!F.showSensors)){var D=b.circleRadius;if(S.beginPath(),b.isSensor?(R!==null&&S.fillStyle(I,O*L),P!==null&&S.lineStyle(A,G,M*L)):(R!==null&&S.fillStyle(R,O*L),P!==null&&S.lineStyle(A,P,M*L)),D)S.arc(b.position.x,b.position.y,D,0,2*Math.PI);else{var w=b.vertices,N=w.length;S.moveTo(w[0].x,w[0].y);for(var V=1;V<N;V++){var Y=w[V];if(!w[V-1].isInternal||E?S.lineTo(Y.x,Y.y):S.moveTo(Y.x,Y.y),V<N&&Y.isInternal&&!E){var W=(V+1)%N;S.moveTo(w[W].x,w[W].y)}}S.closePath()}R!==null&&S.fillPath(),P!==null&&S.strokePath()}}if(F.showPositions&&!C.isStatic){var H=C.position.x,$=C.position.y,K=Math.ceil(F.positionSize/2);S.fillStyle(F.positionColor,1),S.fillRect(H-K,$-K,F.positionSize,F.positionSize)}return this},renderConvexHull:function(C,S,E,P){P===void 0&&(P=1);var M=C.parts,A=M.length;if(A>1){var R=C.vertices;S.lineStyle(P,E),S.beginPath(),S.moveTo(R[0].x,R[0].y);for(var O=1;O<R.length;O++)S.lineTo(R[O].x,R[O].y);S.lineTo(R[0].x,R[0].y),S.strokePath()}return this},renderJoints:function(){for(var C=this.debugGraphic,S=o.allConstraints(this.localWorld),E=0;E<S.length;E++){var P=S[E].render,M=P.lineColor,A=P.lineOpacity,R=P.lineThickness,O=P.pinSize,F=P.anchorColor,I=P.anchorSize;this.renderConstraint(S[E],C,M,A,R,O,F,I)}},renderConstraint:function(C,S,E,P,M,A,R,O){var F=C.render;if(!F.visible||!C.pointA||!C.pointB)return this;S.lineStyle(M,E,P);var I=C.bodyA,G=C.bodyB,z,U;if(I?z=y.add(I.position,C.pointA):z=C.pointA,F.type==="pin")S.strokeCircle(z.x,z.y,A);else{if(G?U=y.add(G.position,C.pointB):U=C.pointB,S.beginPath(),S.moveTo(z.x,z.y),F.type==="spring")for(var X=y.sub(U,z),b=y.perp(y.normalise(X)),B=Math.ceil(h.clamp(C.length/5,12,20)),L,D=1;D<B;D+=1)L=D%2==0?1:-1,S.lineTo(z.x+X.x*(D/B)+b.x*L*4,z.y+X.y*(D/B)+b.y*L*4);S.lineTo(U.x,U.y)}return S.strokePath(),F.anchors&&O>0&&(S.fillStyle(R),S.fillCircle(z.x,z.y,O),S.fillCircle(U.x,U.y,O)),this},resetCollisionIDs:function(){return u._nextCollidingGroupId=1,u._nextNonCollidingGroupId=-1,u._nextCategory=1,this},shutdown:function(){g.off(this.engine),this.removeAllListeners(),m.clear(this.localWorld,!1),r.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});e.exports=T},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BasePlugin:t(540),DefaultPlugins:t(197),PluginCache:t(24),PluginManager:t(414),ScenePlugin:t(1404)}},function(e,c,t){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var s=t(540),u=t(0),n=t(20),h=new u({Extends:s,initialize:function(r,a,d){s.call(this,a),this.scene=r,this.systems=r.sys,this.pluginKey=d,r.sys.events.once(n.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Canvas:t(1406),Events:t(91),Snapshot:t(1407),WebGL:t(1408)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CanvasRenderer:t(368),GetBlendModes:t(370),SetTransform:t(30)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Canvas:t(369),WebGL:t(383)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(107),u=t(17),n={PipelineManager:t(372),Pipelines:t(1409),RenderTarget:t(141),Utils:t(12),WebGLPipeline:t(58),WebGLRenderer:t(371),WebGLShader:t(375)};n=u(!1,n,s),e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(92),u=t(17),n={BitmapMaskPipeline:t(373),Events:t(374),GraphicsPipeline:t(376),LightPipeline:t(377),MultiPipeline:t(108),PointLightPipeline:t(378),PostFXPipeline:t(1410),RopePipeline:t(379),SinglePipeline:t(380),UtilityPipeline:t(381)};n=u(!1,n,s),e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(198),n=t(2),h=t(1411),o=t(382),r=t(58),a=new s({Extends:r,initialize:function(l){l.renderTarget=n(l,"renderTarget",1),l.fragShader=n(l,"fragShader",h),l.vertShader=n(l,"vertShader",o),l.attributes=n(l,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),l.batchSize=1,l.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],r.call(this,l),this.isPostFX=!0,this.gameObject,this.colorMatrix=new u,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){r.prototype.boot.call(this);var d=this.manager.UTILITY_PIPELINE;this.fullFrame1=d.fullFrame1,this.fullFrame2=d.fullFrame2,this.halfFrame1=d.halfFrame1,this.halfFrame2=d.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(d){this.bindAndDraw(d)},copyFrame:function(d,l,f,v,g){this.manager.copyFrame(d,l,f,v,g)},copyToGame:function(d){this.manager.copyToGame(d)},drawFrame:function(d,l,f){this.manager.drawFrame(d,l,f,this.colorMatrix)},blendFrames:function(d,l,f,v,g){this.manager.blendFrames(d,l,f,v,g)},blendFramesAdditive:function(d,l,f,v,g){this.manager.blendFramesAdditive(d,l,f,v,g)},clearFrame:function(d,l){this.manager.clearFrame(d,l)},blitFrame:function(d,l,f,v,g,p){this.manager.blitFrame(d,l,f,v,g,p)},copyFrameRect:function(d,l,f,v,g,p,m,y){this.manager.copyFrameRect(d,l,f,v,g,p,m,y)},bindAndDraw:function(d,l,f,v,g){f===void 0&&(f=!0),v===void 0&&(v=!0);var p=this.gl,m=this.renderer;this.bind(g),this.set1i("uMainSampler",0),l?(p.viewport(0,0,l.width,l.height),p.bindFramebuffer(p.FRAMEBUFFER,l.framebuffer),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,l.texture,0),f&&(v?p.clearColor(0,0,0,0):p.clearColor(0,0,0,1),p.clear(p.COLOR_BUFFER_BIT))):(m.popFramebuffer(!1,!1,!1),m.currentFramebuffer||p.viewport(0,0,m.width,m.height)),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,d.texture),p.bufferData(p.ARRAY_BUFFER,this.vertexData,p.STATIC_DRAW),p.drawArrays(p.TRIANGLES,0,6),l?(p.bindTexture(p.TEXTURE_2D,null),p.bindFramebuffer(p.FRAMEBUFFER,null)):m.resetTextures()}});e.exports=a},function(e,c){e.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17),u=t(201),n={Center:t(403),Events:t(104),Orientation:t(404),ScaleManager:t(415),ScaleModes:t(405),Zoom:t(406)};n=s(!1,n,u.CENTER),n=s(!1,n,u.ORIENTATION),n=s(!1,n,u.SCALE_MODE),n=s(!1,n,u.ZOOM),e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(144),u=t(17),n={Events:t(20),GetPhysicsPlugins:t(419),GetScenePlugins:t(420),SceneManager:t(417),ScenePlugin:t(1414),Settings:t(421),Systems:t(204)};n=u(!1,n,s),e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(18),u=t(0),n=t(20),h=t(2),o=t(24),r=new u({initialize:function(d){this.scene=d,this.systems=d.sys,this.settings=d.sys.settings,this.key=d.sys.settings.key,this.manager=d.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,d.sys.events.once(n.BOOT,this.boot,this),d.sys.events.on(n.START,this.pluginStart,this)},boot:function(){this.systems.events.once(n.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(n.SHUTDOWN,this.shutdown,this)},start:function(a,d){return a===void 0&&(a=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",a,d),this},restart:function(a){var d=this.key;return this.manager.queueOp("stop",d),this.manager.queueOp("start",d,a),this},transition:function(a){a===void 0&&(a={});var d=h(a,"target",!1),l=this.manager.getScene(d);if(!d||!this.checkValidTransition(l))return!1;var f=h(a,"duration",1e3);this._elapsed=0,this._target=l,this._duration=f,this._willSleep=h(a,"sleep",!1),this._willRemove=h(a,"remove",!1);var v=h(a,"onUpdate",null);v&&(this._onUpdate=v,this._onUpdateScope=h(a,"onUpdateScope",this.scene));var g=h(a,"allowInput",!1);this.settings.transitionAllowInput=g;var p=l.sys.settings;return p.isTransition=!0,p.transitionFrom=this.scene,p.transitionDuration=f,p.transitionAllowInput=g,h(a,"moveAbove",!1)?this.manager.moveAbove(this.key,d):h(a,"moveBelow",!1)&&this.manager.moveBelow(this.key,d),l.sys.isSleeping()?l.sys.wake(h(a,"data")):this.manager.start(d,h(a,"data")),this.systems.events.emit(n.TRANSITION_OUT,l,f),this.systems.events.on(n.UPDATE,this.step,this),!0},checkValidTransition:function(a){return!(!a||a.sys.isActive()||a.sys.isTransitioning()||a===this.scene||this.systems.isTransitioning())},step:function(a,d){this._elapsed+=d,this.transitionProgress=s(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var a=this._target.sys,d=this._target.sys.settings;this.systems.events.off(n.UPDATE,this.step,this),a.events.emit(n.TRANSITION_COMPLETE,this.scene),d.isTransition=!1,d.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(a,d,l,f){return this.manager.add(a,d,l,f)},launch:function(a,d){return a&&a!==this.key&&this.manager.queueOp("start",a,d),this},run:function(a,d){return a&&a!==this.key&&this.manager.queueOp("run",a,d),this},pause:function(a,d){return a===void 0&&(a=this.key),this.manager.queueOp("pause",a,d),this},resume:function(a,d){return a===void 0&&(a=this.key),this.manager.queueOp("resume",a,d),this},sleep:function(a,d){return a===void 0&&(a=this.key),this.manager.queueOp("sleep",a,d),this},wake:function(a,d){return a===void 0&&(a=this.key),this.manager.queueOp("wake",a,d),this},switch:function(a){return a!==this.key&&this.manager.queueOp("switch",this.key,a),this},stop:function(a,d){return a===void 0&&(a=this.key),this.manager.queueOp("stop",a,d),this},setActive:function(a,d,l){d===void 0&&(d=this.key);var f=this.manager.getScene(d);return f&&f.sys.setActive(a,l),this},setVisible:function(a,d){d===void 0&&(d=this.key);var l=this.manager.getScene(d);return l&&l.sys.setVisible(a),this},isSleeping:function(a){return a===void 0&&(a=this.key),this.manager.isSleeping(a)},isActive:function(a){return a===void 0&&(a=this.key),this.manager.isActive(a)},isPaused:function(a){return a===void 0&&(a=this.key),this.manager.isPaused(a)},isVisible:function(a){return a===void 0&&(a=this.key),this.manager.isVisible(a)},swapPosition:function(a,d){return d===void 0&&(d=this.key),a!==d&&this.manager.swapPosition(a,d),this},moveAbove:function(a,d){return d===void 0&&(d=this.key),a!==d&&this.manager.moveAbove(a,d),this},moveBelow:function(a,d){return d===void 0&&(d=this.key),a!==d&&this.manager.moveBelow(a,d),this},remove:function(a){return a===void 0&&(a=this.key),this.manager.remove(a),this},moveUp:function(a){return a===void 0&&(a=this.key),this.manager.moveUp(a),this},moveDown:function(a){return a===void 0&&(a=this.key),this.manager.moveDown(a),this},bringToTop:function(a){return a===void 0&&(a=this.key),this.manager.bringToTop(a),this},sendToBack:function(a){return a===void 0&&(a=this.key),this.manager.sendToBack(a),this},get:function(a){return this.manager.getScene(a)},getIndex:function(a){return a===void 0&&(a=this.key),this.manager.getIndex(a)},shutdown:function(){var a=this.systems.events;a.off(n.SHUTDOWN,this.shutdown,this),a.off(n.POST_UPDATE,this.step,this),a.off(n.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});o.register("ScenePlugin",r,"scenePlugin"),e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Events:t(438),List:t(110),Map:t(102),ProcessQueue:t(211),RTree:t(531),Set:t(149),Size:t(416)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17),u=t(1417),n={CanvasTexture:t(423),Events:t(106),FilterMode:u,Frame:t(109),Parsers:t(425),Texture:t(206),TextureManager:t(422),TextureSource:t(424)};n=s(!1,n,u),e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={LINEAR:0,NEAREST:1};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(17),u=t(1419),n={Components:t(251),Parsers:t(1452),Formats:t(40),ImageCollection:t(576),ParseToTilemap:t(262),Tile:t(85),Tilemap:t(580),TilemapCreator:t(1459),TilemapFactory:t(1460),Tileset:t(122),TilemapLayer:t(581),Orientation:t(29),LayerData:t(120),MapData:t(121),ObjectLayer:t(572)};n=s(!1,n,u.ORIENTATION),e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={ORIENTATION:t(29)};e.exports=s},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(63),n=function(h,o,r,a,d,l,f,v){f===void 0&&(f=!0),h<0&&(h=0),o<0&&(o=0);for(var g=s(h,o,r,a,null,v),p=d-h,m=l-o,y=0;y<g.length;y++){var T=g[y].x+p,C=g[y].y+m;T>=0&&T<v.width&&C>=0&&C<v.height&&v.data[C][T]&&v.data[C][T].copy(g[y])}f&&u(d-1,l-1,r+2,a+2,v)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(542),n=function(h,o,r,a,d,l){r||(r={}),Array.isArray(h)||(h=[h]);var f=l.tilemapLayer;a||(a=f.scene),d||(d=a.cameras.main);var v=s(0,0,l.width,l.height,null,l),g=[],p;for(p=0;p<v.length;p++){var m=v[p];if(h.indexOf(m.index)!==-1){var y=f.tileToWorldXY(m.x,m.y,void 0,d,l);r.x=y.x,r.y=y.y,g.push(a.make.sprite(r))}}if(typeof o=="number")for(p=0;p<h.length;p++)u(h[p],o,0,0,l.width,l.height,l);else if(Array.isArray(o))for(p=0;p<h.length;p++)u(h[p],o[p],0,0,l.width,l.height,l);return g};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(63),n=t(72),h=function(o,r,a,d,l,f,v){for(var g=v.collideIndexes.indexOf(o)!==-1,p=s(r,a,d,l,null,v),m=0;m<p.length;m++)p[m].index=o,n(p[m],g);f&&u(r-1,a-1,d+2,l+2,v)};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,h,o,r,a,d,l,f){var v=s(o,r,a,d,l,f);return v.filter(n,h)};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){u===void 0&&(u=0),n===void 0&&(n=!1);var o=0,r,a,d;if(n){for(a=h.height-1;a>=0;a--)for(r=h.width-1;r>=0;r--)if(d=h.data[a][r],d&&d.index===s){if(o===u)return d;o+=1}}else for(a=0;a<h.height;a++)for(r=0;r<h.width;r++)if(d=h.data[a][r],d&&d.index===s){if(o===u)return d;o+=1}return null};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,h,o,r,a,d,l,f){var v=s(o,r,a,d,l,f);return v.find(n,h)||null};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,h,o,r,a,d,l,f){var v=s(o,r,a,d,l,f);v.forEach(n,h)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(544),n=t(545),h=t(547),o=t(1),r=t(548),a=function(d){return d===s.ORTHOGONAL?u:d===s.HEXAGONAL?n:d===s.STAGGERED?r:d===s.ISOMETRIC?h:o};e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(158),u=t(3),n=new u,h=function(o,r,a,d,l){return l.tilemapLayer.worldToTileXY(o,r,!0,n,d),s(n.x,n.y,a,l)};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(483),u=t(26),n=t(484),h=t(1),o=t(3),r=function(v,g){return n.RectangleToTriangle(g,v)},a=new o,d=new o,l=new o,f=function(v,g,p,m){if(v===void 0)return[];var y=h;v instanceof s.Circle?y=n.CircleToRectangle:v instanceof s.Rectangle?y=n.RectangleToRectangle:v instanceof s.Triangle?y=r:v instanceof s.Line&&(y=n.LineToRectangle),m.tilemapLayer.worldToTileXY(v.left,v.top,!0,d,p);var T=d.x,C=d.y;m.tilemapLayer.worldToTileXY(v.right,v.bottom,!0,l,p);var S=Math.ceil(l.x),E=Math.ceil(l.y),P=Math.max(S-T,1),M=Math.max(E-C,1),A=u(T,C,P,M,g,m),R=m.tileWidth,O=m.tileHeight;m.tilemapLayer&&(R*=m.tilemapLayer.scaleX,O*=m.tilemapLayer.scaleY);for(var F=[],I=new s.Rectangle(0,0,R,O),G=0;G<A.length;G++){var z=A[G];m.tilemapLayer.tileToWorldXY(z.x,z.y,a,p),I.x=a.x,I.y=a.y,y(v,I)&&F.push(z)}return F};e.exports=f},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(1),n=t(253),h=function(o){return o===s.ORTHOGONAL?n:u};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(550),n=t(551),h=t(1),o=t(552),r=t(553),a=function(d){return d===s.ORTHOGONAL?r:d===s.ISOMETRIC?n:d===s.HEXAGONAL?u:d===s.STAGGERED?o:h};e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(554),n=t(1),h=t(555),o=t(254),r=function(a){return a===s.ORTHOGONAL?o:a===s.HEXAGONAL?u:a===s.STAGGERED?h:n};e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(1),n=t(255),h=function(o){return o===s.ORTHOGONAL?n:u};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(556),n=t(557),h=t(1),o=t(558),r=t(559),a=function(d){return d===s.ORTHOGONAL?r:d===s.ISOMETRIC?n:d===s.HEXAGONAL?u:d===s.STAGGERED?o:h};e.exports=a},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(29),u=t(560),n=t(1),h=t(561),o=t(256),r=function(a){return a===s.ORTHOGONAL?o:a===s.HEXAGONAL?u:a===s.STAGGERED?h:n};e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(562),u=t(3),n=new u,h=function(o,r,a,d){d.tilemapLayer.worldToTileXY(o,r,!0,n,a);var l=n.x,f=n.y;return s(l,f,d)};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(257),u=t(3),n=new u,h=function(o,r,a,d,l,f){return f.tilemapLayer.worldToTileXY(r,a,!0,n,l,f),s(o,n.x,n.y,d,f)};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(63),u=t(257),n=function(h,o,r,a,d){if(a===void 0&&(a=!0),!Array.isArray(h))return null;Array.isArray(h[0])||(h=[h]);for(var l=h.length,f=h[0].length,v=0;v<l;v++)for(var g=0;g<f;g++){var p=h[v][g];u(p,o+g,r+v,!1,d)}a&&s(o-1,r-1,f+2,l+2,d)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(210),n=function(h,o,r,a,d,l){var f,v=s(h,o,r,a,{},l);if(!d)for(d=[],f=0;f<v.length;f++)d.indexOf(v[f].index)===-1&&d.push(v[f].index);for(f=0;f<v.length;f++)v[f].index=u(d)};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(563),u=t(3),n=new u,h=function(o,r,a,d,l,f){return f.tilemapLayer.worldToTileXY(o,r,!0,n,l,f),s(n.x,n.y,a,d,f)};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(397),n=new u(105,210,231,150),h=new u(243,134,48,200),o=new u(40,39,37,150),r=function(a,d,l){d===void 0&&(d={});var f=d.tileColor!==void 0?d.tileColor:n,v=d.collidingTileColor!==void 0?d.collidingTileColor:h,g=d.faceColor!==void 0?d.faceColor:o,p=s(0,0,l.width,l.height,null,l);a.translateCanvas(l.tilemapLayer.x,l.tilemapLayer.y),a.scaleCanvas(l.tilemapLayer.scaleX,l.tilemapLayer.scaleY);for(var m=0;m<p.length;m++){var y=p[m],T=y.width,C=y.height,S=y.pixelX,E=y.pixelY,P=y.collides?v:f;P!==null&&(a.fillStyle(P.color,P.alpha/255),a.fillRect(S,E,T,C)),S+=1,E+=1,T-=2,C-=2,g!==null&&(a.lineStyle(1,g.color,g.alpha/255),y.faceTop&&a.lineBetween(S,E,S+T,E),y.faceRight&&a.lineBetween(S+T,E,S+T,E+C),y.faceBottom&&a.lineBetween(S,E+C,S+T,E+C),y.faceLeft&&a.lineBetween(S,E,S,E+C))}};e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72),u=t(63),n=t(160),h=function(o,r,a,d,l){r===void 0&&(r=!0),a===void 0&&(a=!0),l===void 0&&(l=!0),Array.isArray(o)||(o=[o]);for(var f=0;f<o.length;f++)n(o[f],r,d);if(l)for(var v=0;v<d.height;v++)for(var g=0;g<d.width;g++){var p=d.data[v][g];p&&o.indexOf(p.index)!==-1&&s(p,r)}a&&u(0,0,d.width,d.height,d)};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72),u=t(63),n=t(160),h=function(o,r,a,d,l,f){if(a===void 0&&(a=!0),d===void 0&&(d=!0),f===void 0&&(f=!0),!(o>r)){for(var v=o;v<=r;v++)n(v,a,l);if(f)for(var g=0;g<l.height;g++)for(var p=0;p<l.width;p++){var m=l.data[g][p];m&&m.index>=o&&m.index<=r&&s(m,a)}d&&u(0,0,l.width,l.height,l)}};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72),u=t(63),n=t(160),h=function(o,r,a,d){r===void 0&&(r=!0),a===void 0&&(a=!0),Array.isArray(o)||(o=[o]);for(var l=0;l<d.height;l++)for(var f=0;f<d.width;f++){var v=d.data[l][f];v&&o.indexOf(v.index)===-1&&(s(v,r),n(v.index,r,d))}a&&u(0,0,d.width,d.height,d)};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72),u=t(63),n=t(126),h=function(o,r,a,d){r===void 0&&(r=!0),a===void 0&&(a=!0);for(var l=0;l<d.height;l++)for(var f=0;f<d.width;f++){var v=d.data[l][f];if(!!v){for(var g in o)if(!!n(v.properties,g)){var p=o[g];Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++)v.properties[g]===p[m]&&s(v,r)}}}a&&u(0,0,d.width,d.height,d)};e.exports=h},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(72),u=t(63),n=function(h,o,r){h===void 0&&(h=!0),o===void 0&&(o=!0);for(var a=0;a<r.height;a++)for(var d=0;d<r.width;d++){var l=r.data[a][d];if(!!l){var f=l.getCollisionGroup();f&&f.objects&&f.objects.length>0&&s(l,h)}}o&&u(0,0,r.width,r.height,r)};e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u,n,h){if(typeof s=="number")h.callbacks[s]=u!==null?{callback:u,callbackContext:n}:void 0;else for(var o=0,r=s.length;o<r;o++)h.callbacks[s[o]]=u!==null?{callback:u,callbackContext:n}:void 0};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,h,o,r,a,d,l){for(var f=s(n,h,o,r,null,l),v=0;v<f.length;v++)f[v].setCollisionCallback(a,d)};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=t(131),n=function(h,o,r,a,d){var l=s(h,o,r,a,null,d),f=l.map(function(g){return g.index});u(f);for(var v=0;v<l.length;v++)l[v].index=f[v]};e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,h,o,r,a,d,l){for(var f=s(o,r,a,d,null,l),v=0;v<f.length;v++)f[v]&&(f[v].index===n?f[v].index=h:f[v].index===h&&(f[v].index=n))};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(26),u=function(n,h,o,r,a,d){if(!!a){var l,f=s(n,h,o,r,null,d),v=0;for(l=0;l<a.length;l++)v+=a[l].weight;if(!(v<=0))for(l=0;l<f.length;l++){for(var g=Math.random()*v,p=0,m=-1,y=0;y<a.length;y++)if(p+=a[y].weight,g<=p){var T=a[y].index;m=Array.isArray(T)?T[Math.floor(Math.random()*T.length)]:T;break}f[l].index=m}}};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={FromOrientationString:t(258),Parse:t(564),Parse2DArray:t(259),ParseCSV:t(565),Impact:t(1454),Tiled:t(1455)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){for(var n=0;n<s.length;n++){var h=s[n],o=n;if(h.name&&h.name!==""&&(o=h.name),Array.isArray(h.wangtiles)&&h.wangtiles.length>0){var r={},a={},d,l,f;if(Array.isArray(h.edgecolors))for(d=0;d<h.edgecolors.length;d++)f=1+d,l=h.edgecolors[d],l.name!==""&&(r[f]=l.name);if(Array.isArray(h.cornercolors))for(d=0;d<h.cornercolors.length;d++)f=1+d,l=h.cornercolors[d],l.name!==""&&(a[f]=l.name);if(Array.isArray(h.colors))for(d=0;d<h.colors.length;d++)l=h.colors[d],f=1+d,l.name!==""&&(r[f]=a[f]=l.name);for(var v=[r,a,r,a,r,a,r,a],g=0;g<h.wangtiles.length;g++){var p=h.wangtiles[g],m=u[p.tileid]||(u[p.tileid]={});m=m.wangid||(m.wangid={});for(var y=[],T=0;T<Math.min(v.length,p.wangid.length);T++){if(l=p.wangid[T],l===0){y.push(void 0);continue}var C=v[T][l];if(C!==void 0){y.push(C);continue}y.push(l)}m[o]=y}}}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ParseTileLayers:t(578),ParseTilesets:t(579),ParseWeltmeister:t(577)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AssignTileProperties:t(567),Base64Decode:t(574),BuildTilesetIndex:t(568),CreateGroupLayer:t(161),ParseGID:t(261),ParseImageLayers:t(569),ParseJSONTiled:t(566),ParseObject:t(260),ParseObjectLayers:t(570),ParseTileLayers:t(573),ParseTilesets:t(575)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(1),u=t(1);s=t(1457),u=t(1458),e.exports={renderWebGL:s,renderCanvas:u}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(12),u=function(n,h,o){var r=h.cull(o),a=r.length,d=o.alpha*h.alpha;if(!(a===0||d<=0)){var l=h.gidMap,f=n.pipelines.set(h.pipeline,h),v=s.getTintAppendFloatAlpha,g=h.scrollFactorX,p=h.scrollFactorY,m=h.x,y=h.y,T=h.scaleX,C=h.scaleY;n.pipelines.preBatch(h);for(var S=0;S<a;S++){var E=r[S],P=l[E.index];if(!!P){var M=P.getTileTextureCoordinates(E.index);if(M!==null){var A=P.glTexture,R=f.setTexture2D(A,h),O=P.tileWidth,F=P.tileHeight,I=M.x,G=M.y,z=P.tileWidth*.5,U=P.tileHeight*.5,X=v(E.tint,d*E.alpha);f.batchTexture(h,A,A.width,A.height,m+(z+E.pixelX)*T,y+(U+E.pixelY)*C,E.width,E.height,T,C,E.rotation,E.flipX,E.flipY,g,p,z,U,I,G,O,F,X,X,X,X,!1,0,0,o,null,!0,R)}}}n.pipelines.postBatch(h)}};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(25),u=new s,n=new s,h=new s,o=function(r,a,d,l){var f=a.cull(d),v=f.length,g=d.alpha*a.alpha;if(!(v===0||g<=0)){var p=u,m=n,y=h;m.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),p.copyFrom(d.matrix);var T=r.currentContext,C=a.gidMap;T.save(),l?(p.multiplyWithOffset(l,-d.scrollX*a.scrollFactorX,-d.scrollY*a.scrollFactorY),m.e=a.x,m.f=a.y,p.multiply(m,y),y.copyToContext(T)):(m.e-=d.scrollX*a.scrollFactorX,m.f-=d.scrollY*a.scrollFactorY,m.copyToContext(T)),(!r.antialias||a.scaleX>1||a.scaleY>1)&&(T.imageSmoothingEnabled=!1);for(var S=0;S<v;S++){var E=f[S],P=C[E.index];if(!!P){var M=P.image.getSourceImage(),A=P.getTileTextureCoordinates(E.index);if(A!==null){var R=P.tileWidth,O=P.tileHeight,F=R*.5,I=O*.5;T.save(),T.translate(E.pixelX+F,E.pixelY+I),E.rotation!==0&&T.rotate(E.rotation),(E.flipX||E.flipY)&&T.scale(E.flipX?-1:1,E.flipY?-1:1),T.globalAlpha=g*E.alpha,T.drawImage(M,A.x,A.y,R,O,-F,-I,R,O),T.restore()}}}T.restore()}};e.exports=o},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(16),u=t(262);s.register("tilemap",function(n){var h=n!==void 0?n:{};return u(this.scene,h.key,h.tileWidth,h.tileHeight,h.width,h.height,h.data,h.insertNull)})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(5),u=t(262);s.register("tilemap",function(n,h,o,r,a,d,l){return n===null&&(n=void 0),h===null&&(h=void 0),o===null&&(o=void 0),r===null&&(r=void 0),a===null&&(a=void 0),u(this.scene,n,h,o,r,a,d,l)})},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Clock:t(1462),TimerEvent:t(582)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(0),u=t(24),n=t(20),h=t(582),o=t(93),r=new s({initialize:function(d){this.scene=d,this.systems=d.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],d.sys.events.once(n.BOOT,this.boot,this),d.sys.events.on(n.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){var a=this.systems.events;a.on(n.PRE_UPDATE,this.preUpdate,this),a.on(n.UPDATE,this.update,this),a.once(n.SHUTDOWN,this.shutdown,this)},addEvent:function(a){var d;return a instanceof h?(d=a,this.removeEvent(d),d.elapsed=d.startAt,d.hasDispatched=!1,d.repeatCount=d.repeat===-1||d.loop?999999999999:d.repeat):d=new h(a),this._pendingInsertion.push(d),d},delayedCall:function(a,d,l,f){return this.addEvent({delay:a,callback:d,args:l,callbackScope:f})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(a){Array.isArray(a)||(a=[a]);for(var d=0;d<a.length;d++){var l=a[d];o(this._pendingRemoval,l),o(this._pendingInsertion,l),o(this._active,l)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var a=this._pendingRemoval.length,d=this._pendingInsertion.length;if(!(a===0&&d===0)){var l,f;for(l=0;l<a;l++){f=this._pendingRemoval[l];var v=this._active.indexOf(f);v>-1&&this._active.splice(v,1),f.destroy()}for(l=0;l<d;l++)f=this._pendingInsertion[l],this._active.push(f);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(a,d){if(this.now=a,!this.paused){d*=this.timeScale;for(var l=0;l<this._active.length;l++){var f=this._active[l];if(!f.paused&&(f.elapsed+=d*f.timeScale,f.elapsed>=f.delay)){var v=f.elapsed-f.delay;f.elapsed=f.delay,!f.hasDispatched&&f.callback&&(f.hasDispatched=!0,f.callback.apply(f.callbackScope,f.args)),f.repeatCount>0?(f.repeatCount--,f.elapsed=v,f.hasDispatched=!1):this._pendingRemoval.push(f)}}}},shutdown:function(){var a;for(a=0;a<this._pendingInsertion.length;a++)this._pendingInsertion[a].destroy();for(a=0;a<this._active.length;a++)this._active[a].destroy();for(a=0;a<this._pendingRemoval.length;a++)this._pendingRemoval[a].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var d=this.systems.events;d.off(n.PRE_UPDATE,this.preUpdate,this),d.off(n.UPDATE,this.update,this),d.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});u.register("Clock",r,"time"),e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(100),u=t(17),n={Builders:t(1464),Events:t(267),TweenManager:t(1480),Tween:t(266),TweenData:t(268),Timeline:t(588)};n=u(!1,n,s),e.exports=n},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GetBoolean:t(99),GetEaseFunction:t(80),GetNewValue:t(162),GetProps:t(583),GetTargets:t(263),GetTweens:t(584),GetValueOp:t(264),NumberTweenBuilder:t(585),StaggerBuilder:t(586),TimelineBuilder:t(587),TweenBuilder:t(163)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="active"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="repeat"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,c){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="yoyo"},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(93),u=t(0),n=t(585),h=t(24),o=t(20),r=t(586),a=t(587),d=t(100),l=t(163),f=new u({initialize:function(g){this.scene=g,this.systems=g.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,g.sys.events.once(o.BOOT,this.boot,this),g.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var v=this.systems.events;v.on(o.PRE_UPDATE,this.preUpdate,this),v.on(o.UPDATE,this.update,this),v.once(o.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(v){return a(this,v)},timeline:function(v){var g=a(this,v);return g.paused||(this._add.push(g),this._toProcess++),g},create:function(v){return l(this,v)},add:function(v){var g=l(this,v);return this._add.push(g),this._toProcess++,g},existing:function(v){return this._add.push(v),this._toProcess++,this},addCounter:function(v){var g=n(this,v);return this._add.push(g),this._toProcess++,g},stagger:function(v,g){return r(v,g)},preUpdate:function(){if(this._toProcess!==0){var v=this._destroy,g=this._active,p=this._pending,m,y;for(m=0;m<v.length;m++){y=v[m];var T=g.indexOf(y);T===-1?(T=p.indexOf(y),T>-1&&(y.state=d.REMOVED,p.splice(T,1))):(y.state=d.REMOVED,g.splice(T,1))}for(v.length=0,v=this._add,m=0;m<v.length;m++)y=v[m],y.state===d.PENDING_ADD&&(y.init()?(y.play(),this._active.push(y)):this._pending.push(y));v.length=0,this._toProcess=0}},update:function(v,g){var p=this._active,m;g*=this.timeScale;for(var y=0;y<p.length;y++)m=p[y],m.update(v,g)&&(this._destroy.push(m),this._toProcess++)},remove:function(v){return s(this._add,v),s(this._pending,v),s(this._active,v),s(this._destroy,v),v.state=d.REMOVED,this},makeActive:function(v){if(this._add.indexOf(v)!==-1||this._active.indexOf(v)!==-1)return this;var g=this._pending.indexOf(v);return g!==-1&&this._pending.splice(g,1),this._add.push(v),v.state=d.PENDING_ADD,this._toProcess++,this},each:function(v,g){for(var p=[null],m=1;m<arguments.length;m++)p.push(arguments[m]);for(var y in this.list)p[0]=this.list[y],v.apply(g,p)},getAllTweens:function(){for(var v=this._active,g=[],p=0;p<v.length;p++)g.push(v[p]);return g},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(v,g){g===void 0&&(g=!1);var p=this._active,m,y=[],T,C;for(Array.isArray(v)||(v=[v]),T=0;T<p.length;T++)for(m=p[T],C=0;C<v.length;C++)m.hasTarget(v[C])&&y.push(m);if(g)for(p=this._pending,T=0;T<p.length;T++)for(m=p[T],C=0;C<v.length;C++)m.hasTarget(v[C])&&y.push(m);return y},isTweening:function(v){for(var g=this._active,p,m=0;m<g.length;m++)if(p=g[m],p.hasTarget(v)&&p.isPlaying())return!0;return!1},killAll:function(){for(var v=this.getAllTweens(),g=0;g<v.length;g++)v[g].stop();return this},killTweensOf:function(v){for(var g=this.getTweensOf(v),p=0;p<g.length;p++)g[p].stop();return this},pauseAll:function(){for(var v=this._active,g=0;g<v.length;g++)v[g].pause();return this},resumeAll:function(){for(var v=this._active,g=0;g<v.length;g++)v[g].resume();return this},setGlobalTimeScale:function(v){return this.timeScale=v,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var v=this.systems.events;v.off(o.PRE_UPDATE,this.preUpdate,this),v.off(o.UPDATE,this.update,this),v.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});h.register("TweenManager",f,"tweens"),e.exports=f},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Array:t(208),Base64:t(1482),Objects:t(1484),String:t(1488),NOOP:t(1)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ArrayBufferToBase64:t(1483),Base64ToArrayBuffer:t(433)}},function(e,c){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(u,n){for(var h=new Uint8Array(u),o=h.length,r=n?"data:"+n+";base64,":"",a=0;a<o;a+=3)r+=t[h[a]>>2],r+=t[(h[a]&3)<<4|h[a+1]>>4],r+=t[(h[a+1]&15)<<2|h[a+2]>>6],r+=t[h[a+2]&63];return o%3==2?r=r.substring(0,r.length-1)+"=":o%3==1&&(r=r.substring(0,r.length-2)+"=="),r};e.exports=s},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Clone:t(77),DeepCopy:t(175),Extend:t(17),GetAdvancedValue:t(13),GetFastValue:t(2),GetMinMaxValue:t(1485),GetValue:t(6),HasAll:t(1486),HasAny:t(455),HasValue:t(126),IsPlainObject:t(7),Merge:t(127),MergeRight:t(1487),Pick:t(571),SetValue:t(478)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(6),u=t(18),n=function(h,o,r,a,d){d===void 0&&(d=r);var l=s(h,o,d);return u(l,r,a)};e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){for(var n=0;n<u.length;n++)if(!s.hasOwnProperty(u[n]))return!1;return!0};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(77),u=function(n,h){var o=s(n);for(var r in h)o.hasOwnProperty(r)&&(o[r]=h[r]);return o};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Format:t(1489),Pad:t(186),RemoveAt:t(1490),Reverse:t(1491),UppercaseFirst:t(205),UUID:t(222)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return s.replace(/%([0-9]+)/g,function(n,h){return u[Number(h)-1]})};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s,u){return u===0?s.slice(1):s.slice(0,u-1)+s.slice(u)};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(s){return s.split("").reverse().join("")};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={SoundManagerCreator:t(426),Events:t(70),BaseSound:t(146),BaseSoundManager:t(145),WebAudioSound:t(434),WebAudioSoundManager:t(432),HTML5AudioSound:t(429),HTML5AudioSoundManager:t(427),NoAudioSound:t(431),NoAudioSoundManager:t(430)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Arcade:t(1366),Matter:t(1494)}},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BodyBounds:t(1392),Components:t(249),Events:t(272),Factory:t(1394),MatterGameObject:t(1395),Image:t(1396),Matter:t(594),MatterPhysics:t(1524),PolyDecomp:t(1393),Sprite:t(1397),TileBody:t(593),PhysicsEditorParser:t(589),PhysicsJSONParser:t(590),PointerConstraint:t(1398),World:t(1402)}},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setBounce:function(s){return this.body.restitution=s,this}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setCollisionCategory:function(s){return this.body.collisionFilter.category=s,this},setCollisionGroup:function(s){return this.body.collisionFilter.group=s,this},setCollidesWith:function(s){var u=0;if(!Array.isArray(s))u=s;else for(var n=0;n<s.length;n++)u|=s[n];return this.body.collisionFilter.mask=u,this},setOnCollide:function(s){return this.body.onCollideCallback=s,this},setOnCollideEnd:function(s){return this.body.onCollideEndCallback=s,this},setOnCollideActive:function(s){return this.body.onCollideActiveCallback=s,this},setOnCollideWith:function(s,u){Array.isArray(s)||(s=[s]);for(var n=0;n<s.length;n++){var h=s[n].hasOwnProperty("body")?s[n].body:s[n];this.body.setOnCollideWith(h,u)}return this}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(41),u={applyForce:function(n){return this._tempVec2.set(this.body.position.x,this.body.position.y),s.applyForce(this.body,this._tempVec2,n),this},applyForceFrom:function(n,h){return s.applyForce(this.body,n,h),this},thrust:function(n){var h=this.body.angle;return this._tempVec2.set(n*Math.cos(h),n*Math.sin(h)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(n){var h=this.body.angle-Math.PI/2;return this._tempVec2.set(n*Math.cos(h),n*Math.sin(h)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(n){var h=this.body.angle+Math.PI/2;return this._tempVec2.set(n*Math.cos(h),n*Math.sin(h)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(n){var h=this.body.angle-Math.PI;return this._tempVec2.set(n*Math.cos(h),n*Math.sin(h)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};e.exports=u},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setFriction:function(s,u,n){return this.body.friction=s,u!==void 0&&(this.body.frictionAir=u),n!==void 0&&(this.body.frictionStatic=n),this},setFrictionAir:function(s){return this.body.frictionAir=s,this},setFrictionStatic:function(s){return this.body.frictionStatic=s,this}};e.exports=t},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setIgnoreGravity:function(s){return this.body.ignoreGravity=s,this}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(41),u=t(3),n={setMass:function(h){return s.setMass(this.body,h),this},setDensity:function(h){return s.setDensity(this.body,h),this},centerOfMass:{get:function(){return new u(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};e.exports=n},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setSensor:function(s){return this.body.isSensor=s,this},isSensor:function(){return this.body.isSensor}};e.exports=t},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(86),u=t(41),n=t(124),h=t(2),o=t(589),r=t(590),a=t(64),d={setRectangle:function(l,f,v){return this.setBody({type:"rectangle",width:l,height:f},v)},setCircle:function(l,f){return this.setBody({type:"circle",radius:l},f)},setPolygon:function(l,f,v){return this.setBody({type:"polygon",sides:f,radius:l},v)},setTrapezoid:function(l,f,v,g){return this.setBody({type:"trapezoid",width:l,height:f,slope:v},g)},setExistingBody:function(l,f){f===void 0&&(f=!0),this.body&&this.world.remove(this.body,!0),this.body=l;for(var v=0;v<l.parts.length;v++)l.parts[v].gameObject=this;var g=this;if(l.destroy=function(){g.world.remove(g.body,!0),g.body.gameObject=null},f&&(this.world.has(l)&&this.world.remove(l,!0),this.world.add(l)),this._originComponent){var p=l.render.sprite.xOffset,m=l.render.sprite.yOffset,y=l.centerOfMass.x,T=l.centerOfMass.y;if(n(y,.5)&&n(T,.5))this.setOrigin(p+.5,m+.5);else{var C=l.centerOffset.x,S=l.centerOffset.y;this.setOrigin(p+C/this.displayWidth,m+S/this.displayHeight)}}return this},setBody:function(l,f){if(!l)return this;var v;typeof l=="string"&&(l={type:l});var g=h(l,"type","rectangle"),p=h(l,"x",this._tempVec2.x),m=h(l,"y",this._tempVec2.y),y=h(l,"width",this.width),T=h(l,"height",this.height);switch(g){case"rectangle":v=s.rectangle(p,m,y,T,f);break;case"circle":var C=h(l,"radius",Math.max(y,T)/2),S=h(l,"maxSides",25);v=s.circle(p,m,C,f,S);break;case"trapezoid":var E=h(l,"slope",.5);v=s.trapezoid(p,m,y,T,E,f);break;case"polygon":var P=h(l,"sides",5),M=h(l,"radius",Math.max(y,T)/2);v=s.polygon(p,m,P,M,f);break;case"fromVertices":case"fromVerts":var A=h(l,"verts",null);if(A)if(typeof A=="string"&&(A=a.fromPath(A)),this.body&&!this.body.hasOwnProperty("temp"))u.setVertices(this.body,A),v=this.body;else{var R=h(l,"flagInternal",!1),O=h(l,"removeCollinear",.01),F=h(l,"minimumArea",10);v=s.fromVertices(p,m,A,f,R,O,F)}break;case"fromPhysicsEditor":v=o.parseBody(p,m,l,f);break;case"fromPhysicsTracer":v=r.parseBody(p,m,l,f);break}return v&&this.setExistingBody(v,l.addToWorld),this}};e.exports=d},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(272),u=t(165),n=t(166),h={setToSleep:function(){return u.set(this.body,!0),this},setAwake:function(){return u.set(this.body,!1),this},setSleepThreshold:function(o){return o===void 0&&(o=60),this.body.sleepThreshold=o,this},setSleepEvents:function(o,r){return this.setSleepStartEvent(o),this.setSleepEndEvent(r),this},setSleepStartEvent:function(o){if(o){var r=this.world;n.on(this.body,"sleepStart",function(a){r.emit(s.SLEEP_START,a,this)})}else n.off(this.body,"sleepStart");return this},setSleepEndEvent:function(o){if(o){var r=this.world;n.on(this.body,"sleepEnd",function(a){r.emit(s.SLEEP_END,a,this)})}else n.off(this.body,"sleepEnd");return this}};e.exports=h},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afteradd"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afterremove"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afterupdate"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeadd"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeremove"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeupdate"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionactive"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionend"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionstart"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleepend"},function(e,c){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleepstart"},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(41),u={setStatic:function(n){return s.setStatic(this.body,n),this},isStatic:function(){return this.body.isStatic}};e.exports=u},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(41),u=t(14),n=t(269),h=t(270),o=4,r={x:{get:function(){return this.body.position.x},set:function(a){this._tempVec2.set(a,this.y),s.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(a){this._tempVec2.set(this.x,a),s.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(a){var d=1/this._scaleX,l=1/this._scaleY;this._scaleX=a,this._scaleX===0?this.renderFlags&=~o:this.renderFlags|=o,s.scale(this.body,d,l),s.scale(this.body,a,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(a){var d=1/this._scaleX,l=1/this._scaleY;this._scaleY=a,this._scaleY===0?this.renderFlags&=~o:this.renderFlags|=o,s.scale(this.body,d,l),s.scale(this.body,this._scaleX,a)}},angle:{get:function(){return h(this.body.angle*u.RAD_TO_DEG)},set:function(a){this.rotation=h(a)*u.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(a){this._rotation=n(a),s.setAngle(this.body,this._rotation)}},setPosition:function(a,d){return a===void 0&&(a=0),d===void 0&&(d=a),this._tempVec2.set(a,d),s.setPosition(this.body,this._tempVec2),this},setRotation:function(a){return a===void 0&&(a=0),this._rotation=n(a),s.setAngle(this.body,a),this},setFixedRotation:function(){return s.setInertia(this.body,1/0),this},setAngle:function(a){return a===void 0&&(a=0),this.angle=a,s.setAngle(this.body,this.rotation),this},setScale:function(a,d,l){a===void 0&&(a=1),d===void 0&&(d=a);var f=1/this._scaleX,v=1/this._scaleY;return this._scaleX=a,this._scaleY=d,s.scale(this.body,f,v,l),s.scale(this.body,a,d,l),this}};e.exports=r},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(41),u={setAngularVelocity:function(n){return s.setAngularVelocity(this.body,n),this},setVelocityX:function(n){return this._tempVec2.set(n,this.body.velocity.y),s.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(n){return this._tempVec2.set(this.body.velocity.x,n),s.setVelocity(this.body,this._tempVec2),this},setVelocity:function(n,h){return this._tempVec2.set(n,h),s.setVelocity(this.body,this._tempVec2),this}};e.exports=u},function(e,c,t){var s={};e.exports=s;var u=t(118),n=t(32);(function(){s.create=function(h){var o={extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return n.extend(o,!1,h)},s.reset=function(h){h.extended&&(h.narrowDetections=0,h.narrowphaseTests=0,h.narrowReuse=0,h.narrowReuseCount=0,h.midphaseTests=0,h.broadphaseTests=0,h.narrowEff=0,h.midEff=0,h.broadEff=0,h.collisions=0,h.buckets=0,h.pairs=0,h.bodies=0)},s.update=function(h,o){if(h.extended){var r=o.world,a=u.allBodies(r);h.collisions=h.narrowDetections,h.pairs=o.pairs.list.length,h.bodies=a.length,h.midEff=(h.narrowDetections/(h.midphaseTests||1)).toFixed(2),h.narrowEff=(h.narrowDetections/(h.narrowphaseTests||1)).toFixed(2),h.broadEff=(1-h.broadphaseTests/(a.length||1)).toFixed(2),h.narrowReuse=(h.narrowReuseCount/(h.narrowphaseTests||1)).toFixed(2)}}})()},function(e,c,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=t(123),u=t(271),n=t(86),h=t(41),o=t(1392),r=t(84),a=t(0),d=t(118),l=t(591),f=t(128),v=t(273),g=t(50),p=t(1394),m=t(2),y=t(6),T=t(597),C=t(1525),S=t(1526),E=t(1399),P=t(1527),M=t(127),A=t(250),R=t(598),O=t(595),F=t(24),I=t(1400),G=t(599),z=t(274),U=t(20),X=t(592),b=t(83),B=t(64),L=t(1402),D=new a({initialize:function(N){this.scene=N,this.systems=N.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=h,this.composite=d,this.detector=v,this.grid=T,this.pair=A,this.pairs=R,this.query=I,this.resolver=G,this.sat=z,this.constraint=f,this.bodies=n,this.composites=l,this.axes=u,this.bounds=r,this.svg=X,this.vector=b,this.vertices=B,this.verts=B,this._tempVec2=b.create(),y(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),y(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),y(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),G._restingThresh=y(this.config,"restingThresh",4),G._restingThreshTangent=y(this.config,"restingThreshTangent",6),G._positionDampen=y(this.config,"positionDampen",.9),G._positionWarming=y(this.config,"positionWarming",.8),G._frictionNormalMultiplier=y(this.config,"frictionNormalMultiplier",5),N.sys.events.once(U.BOOT,this.boot,this),N.sys.events.on(U.START,this.start,this)},boot:function(){this.world=new L(this.scene,this.config),this.add=new p(this.world),this.bodyBounds=new o,this.systems.events.once(U.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new L(this.scene,this.config),this.add=new p(this.world));var w=this.systems.events;w.on(U.UPDATE,this.world.update,this.world),w.on(U.POST_UPDATE,this.world.postUpdate,this.world),w.once(U.SHUTDOWN,this.shutdown,this)},getConfig:function(){var w=this.systems.game.config.physics,N=this.systems.settings.physics,V=M(m(N,"matter",{}),m(w,"matter",{}));return V},enableAttractorPlugin:function(){return O.register(C),O.use(E,C),this},enableWrapPlugin:function(){return O.register(P),O.use(E,P),this},enableCollisionEventsPlugin:function(){return O.register(S),O.use(E,S),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(w,N){this.world.step(w,N)},containsPoint:function(w,N,V){w=this.getMatterBodies(w);var Y=b.create(N,V),W=I.point(w,Y);return W.length>0},intersectPoint:function(w,N,V){V=this.getMatterBodies(V);var Y=b.create(w,N),W=[],H=I.point(V,Y);return H.forEach(function($){W.indexOf($)===-1&&W.push($)}),W},intersectRect:function(w,N,V,Y,W,H){W===void 0&&(W=!1),H=this.getMatterBodies(H);var $={min:{x:w,y:N},max:{x:w+V,y:N+Y}},K=[],Z=I.region(H,$,W);return Z.forEach(function(J){K.indexOf(J)===-1&&K.push(J)}),K},intersectRay:function(w,N,V,Y,W,H){W===void 0&&(W=1),H=this.getMatterBodies(H);for(var $=[],K=I.ray(H,b.create(w,N),b.create(V,Y),W),Z=0;Z<K.length;Z++)$.push(K[Z].body);return $},intersectBody:function(w,N){N=this.getMatterBodies(N);for(var V=[],Y=I.collides(w,N),W=0;W<Y.length;W++){var H=Y[W];H.bodyA===w?V.push(H.bodyB):V.push(H.bodyA)}return V},overlap:function(w,N,V,Y,W){V===void 0&&(V=null),Y===void 0&&(Y=null),W===void 0&&(W=V),Array.isArray(w)||(w=[w]),w=this.getMatterBodies(w),N=this.getMatterBodies(N);for(var H=!1,$=0;$<w.length;$++)for(var K=w[$],Z=I.collides(K,N),J=0;J<Z.length;J++){var k=Z[J],Q=k.bodyA.id===K.id?k.bodyB:k.bodyA;if(!Y||Y.call(W,K,Q,k)){if(H=!0,V)V.call(W,K,Q,k);else if(!Y)return!0}}return H},setCollisionCategory:function(w,N){return w=this.getMatterBodies(w),w.forEach(function(V){V.collisionFilter.category=N}),this},setCollisionGroup:function(w,N){return w=this.getMatterBodies(w),w.forEach(function(V){V.collisionFilter.group=N}),this},setCollidesWith:function(w,N){w=this.getMatterBodies(w);var V=0;if(!Array.isArray(N))V=N;else for(var Y=0;Y<N.length;Y++)V|=N[Y];return w.forEach(function(W){W.collisionFilter.mask=V}),this},getMatterBodies:function(w){if(!w)return this.world.getAllBodies();Array.isArray(w)||(w=[w]);for(var N=[],V=0;V<w.length;V++){var Y=w[V].hasOwnProperty("body")?w[V].body:w[V];N.push(Y)}return N},setVelocity:function(w,N,V){w=this.getMatterBodies(w);var Y=this._tempVec2;return Y.x=N,Y.y=V,w.forEach(function(W){h.setVelocity(W,Y)}),this},setVelocityX:function(w,N){w=this.getMatterBodies(w);var V=this._tempVec2;return V.x=N,w.forEach(function(Y){V.y=Y.velocity.y,h.setVelocity(Y,V)}),this},setVelocityY:function(w,N){w=this.getMatterBodies(w);var V=this._tempVec2;return V.y=N,w.forEach(function(Y){V.x=Y.velocity.x,h.setVelocity(Y,V)}),this},setAngularVelocity:function(w,N){return w=this.getMatterBodies(w),w.forEach(function(V){h.setAngularVelocity(V,N)}),this},applyForce:function(w,N){w=this.getMatterBodies(w);var V=this._tempVec2;return w.forEach(function(Y){V.x=Y.position.x,V.y=Y.position.y,h.applyForce(Y,V,N)}),this},applyForceFromPosition:function(w,N,V,Y){w=this.getMatterBodies(w);var W=this._tempVec2;return w.forEach(function(H){Y===void 0&&(Y=H.angle),W.x=V*Math.cos(Y),W.y=V*Math.sin(Y),h.applyForce(H,N,W)}),this},applyForceFromAngle:function(w,N,V){w=this.getMatterBodies(w);var Y=this._tempVec2;return w.forEach(function(W){V===void 0&&(V=W.angle),Y.x=N*Math.cos(V),Y.y=N*Math.sin(V),h.applyForce(W,{x:W.position.x,y:W.position.y},Y)}),this},getConstraintLength:function(w){var N=w.pointA.x,V=w.pointA.y,Y=w.pointB.x,W=w.pointB.y;return w.bodyA&&(N+=w.bodyA.position.x,V+=w.bodyA.position.y),w.bodyB&&(Y+=w.bodyB.position.x,W+=w.bodyB.position.y),g(N,V,Y,W)},alignBody:function(w,N,V,Y){w=w.hasOwnProperty("body")?w.body:w;var W;switch(Y){case s.TOP_LEFT:case s.LEFT_TOP:W=this.bodyBounds.getTopLeft(w,N,V);break;case s.TOP_CENTER:W=this.bodyBounds.getTopCenter(w,N,V);break;case s.TOP_RIGHT:case s.RIGHT_TOP:W=this.bodyBounds.getTopRight(w,N,V);break;case s.LEFT_CENTER:W=this.bodyBounds.getLeftCenter(w,N,V);break;case s.CENTER:W=this.bodyBounds.getCenter(w,N,V);break;case s.RIGHT_CENTER:W=this.bodyBounds.getRightCenter(w,N,V);break;case s.LEFT_BOTTOM:case s.BOTTOM_LEFT:W=this.bodyBounds.getBottomLeft(w,N,V);break;case s.BOTTOM_CENTER:W=this.bodyBounds.getBottomCenter(w,N,V);break;case s.BOTTOM_RIGHT:case s.RIGHT_BOTTOM:W=this.bodyBounds.getBottomRight(w,N,V);break}return W&&h.setPosition(w,W),this},shutdown:function(){var w=this.systems.events;this.world&&(w.off(U.UPDATE,this.world.update,this.world),w.off(U.POST_UPDATE,this.world.postUpdate,this.world)),w.off(U.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(U.START,this.start,this),this.scene=null,this.systems=null}});F.register("MatterPhysics",D,"matterPhysics"),e.exports=D},function(e,c,t){var s=t(594),u={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(n){n.after("Body.create",function(){u.Body.init(this)}),n.before("Engine.update",function(h){u.Engine.update(h)})},Body:{init:function(n){n.plugin.attractors=n.plugin.attractors||[]}},Engine:{update:function(n){for(var h=s.Composite.allBodies(n.world),o=0;o<h.length;o++){var r=h[o],a=r.plugin.attractors;if(a&&a.length>0)for(var d=0;d<h.length;d++){var l=h[d];if(o!==d)for(var f=0;f<a.length;f++){var v=a[f],g=v;s.Common.isFunction(v)&&(g=v(r,l)),g&&s.Body.applyForce(l,l.position,g)}}}}},Attractors:{gravityConstant:.001,gravity:function(n,h){var o=s.Vector.sub(h.position,n.position),r=s.Vector.magnitudeSquared(o)||1e-4,a=s.Vector.normalise(o),d=-u.Attractors.gravityConstant*(n.mass*h.mass/r),l=s.Vector.mult(a,d);s.Body.applyForce(n,n.position,s.Vector.neg(l)),s.Body.applyForce(h,h.position,l)}}};e.exports=u},function(e,c){/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(s){s.after("Engine.create",function(){s.Events.on(this,"collisionStart",function(u){u.pairs.map(function(n){var h=n.bodyA,o=n.bodyB;h.gameObject&&h.gameObject.emit("collide",h,o,n),o.gameObject&&o.gameObject.emit("collide",o,h,n),s.Events.trigger(h,"onCollide",{pair:n}),s.Events.trigger(o,"onCollide",{pair:n}),h.onCollideCallback&&h.onCollideCallback(n),o.onCollideCallback&&o.onCollideCallback(n),h.onCollideWith[o.id]&&h.onCollideWith[o.id](o,n),o.onCollideWith[h.id]&&o.onCollideWith[h.id](h,n)})}),s.Events.on(this,"collisionActive",function(u){u.pairs.map(function(n){var h=n.bodyA,o=n.bodyB;h.gameObject&&h.gameObject.emit("collideActive",h,o,n),o.gameObject&&o.gameObject.emit("collideActive",o,h,n),s.Events.trigger(h,"onCollideActive",{pair:n}),s.Events.trigger(o,"onCollideActive",{pair:n}),h.onCollideActiveCallback&&h.onCollideActiveCallback(n),o.onCollideActiveCallback&&o.onCollideActiveCallback(n)})}),s.Events.on(this,"collisionEnd",function(u){u.pairs.map(function(n){var h=n.bodyA,o=n.bodyB;h.gameObject&&h.gameObject.emit("collideEnd",h,o,n),o.gameObject&&o.gameObject.emit("collideEnd",o,h,n),s.Events.trigger(h,"onCollideEnd",{pair:n}),s.Events.trigger(o,"onCollideEnd",{pair:n}),h.onCollideEndCallback&&h.onCollideEndCallback(n),o.onCollideEndCallback&&o.onCollideEndCallback(n)})})})}};e.exports=t},function(e,c,t){var s=t(594),u={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(n){n.after("Engine.update",function(){u.Engine.update(this)})},Engine:{update:function(n){for(var h=n.world,o=s.Composite.allBodies(h),r=s.Composite.allComposites(h),a=0;a<o.length;a+=1){var d=o[a];d.plugin.wrap&&u.Body.wrap(d,d.plugin.wrap)}for(a=0;a<r.length;a+=1){var l=r[a];l.plugin.wrap&&u.Composite.wrap(l,l.plugin.wrap)}}},Bounds:{wrap:function(n,h){var o=null,r=null;if(typeof h.min.x!="undefined"&&typeof h.max.x!="undefined"&&(n.min.x>h.max.x?o=h.min.x-n.max.x:n.max.x<h.min.x&&(o=h.max.x-n.min.x)),typeof h.min.y!="undefined"&&typeof h.max.y!="undefined"&&(n.min.y>h.max.y?r=h.min.y-n.max.y:n.max.y<h.min.y&&(r=h.max.y-n.min.y)),o!==null||r!==null)return{x:o||0,y:r||0}}},Body:{wrap:function(n,h){var o=u.Bounds.wrap(n.bounds,h);return o&&s.Body.translate(n,o),o}},Composite:{bounds:function(n){for(var h=s.Composite.allBodies(n),o=[],r=0;r<h.length;r+=1){var a=h[r];o.push(a.bounds.min,a.bounds.max)}return s.Bounds.create(o)},wrap:function(n,h){var o=u.Bounds.wrap(u.Composite.bounds(n),h);return o&&s.Composite.translate(n,o),o}}};e.exports=u},function(e,c,t){(function(s){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=t(33),n=t(17),h={Actions:t(275),Animations:t(723),BlendModes:t(35),Cache:t(735),Cameras:t(738),Core:t(806),Class:t(0),Create:t(888),Curves:t(894),Data:t(896),Display:t(898),DOM:t(917),Events:t(918),Game:t(920),GameObjects:t(1011),Geom:t(483),Input:t(1308),Loader:t(1338),Math:t(193),Physics:t(1493),Plugins:t(1403),Renderer:t(1405),Scale:t(1412),ScaleModes:t(168),Scene:t(418),Scenes:t(1413),Structs:t(1415),Textures:t(1416),Tilemaps:t(1418),Time:t(1461),Tweens:t(1463),Utils:t(1481)};h.Sound=t(1492),h=n(!1,h,u),e.exports=h,s.Phaser=h}).call(this,t(600))}])})})(wa);var uP=nf(wa.exports);class et{constructor(i){this.scene=i,this.displayList=i.sys.displayList,this.updateList=i.sys.updateList,i.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(i,e){et.prototype[i]=e}}var yn=function(x){var i,e,c;if(typeof x!="object"||x===null)return x;i=Array.isArray(x)?[]:{};for(c in x)e=x[c],i[c]=yn(e);return i},rf=function(x,i,e,c){Array.isArray(i)&&(c=e,e=i,i=void 0),i===void 0&&(i="__BASE"),e=yn(e),c=yn(c),this.textureKey=x,this.baseFrameName=i,this.columns.data=e,this.columns.count=e?e.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=c,this.rows.count=c?c.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var t=this.scene.textures.get(x);if(!t)return this.clear(),this;if(!e||!c)return this.clear(),this;for(var s=t.frames[i],u=s.width,n=0,h=0,o=e.length;h<o;h++)e[h]===void 0?n++:typeof e[h]=="number"?u-=e[h]:u-=e[h].width;for(var r=u/n,a=s.height,d=0,h=0,o=c.length;h<o;h++)c[h]===void 0?d++:typeof c[h]=="number"?a-=c[h]:a-=c[h].width;for(var l=a/d,f,v,g,p,m,y=0,T=0,C=0,S=c.length;C<S;C++){c[C]===void 0&&(c[C]=l),typeof c[C]=="number"&&(c[C]={height:c[C],stretch:C%2}),f=c[C],g=f.height,this.rows.stretch+=f.stretch|0,this.rows.minHeight+=f.stretch>0?0:g,y=0;for(var h=0,E=e.length;h<E;h++)e[h]===void 0&&(e[h]=r),typeof e[h]=="number"&&(e[h]={width:e[h],stretch:h%2}),v=e[h],p=v.width,C===0&&(this.columns.stretch+=v.stretch|0,this.columns.minWidth+=v.stretch>0?0:p),p>=1&&g>=1&&(m=this.getFrameNameCallback(h,C,i),m&&t.add(m,0,y+s.cutX,T+s.cutY,p,g)),y+=p;T+=g}return this.updateTexture(),this},Na=function(x,i,e){return e===void 0&&(e="image"),x[i]||(x[i]=x.scene.make[e]({add:!1,origin:{x:0,y:0}}),x.once("destroy",function(){x[i]&&(x[i].destroy(),x[i]=void 0)})),x[i]},af=function(){if(this.clear(),this.textureKey===void 0)return this;var x=this.scene.textures.get(this.textureKey);if(!x)return this;var i=this.columns.minWidth*this.maxFixedPartScaleX,e=this.rows.minHeight*this.maxFixedPartScaleY,c=this.width-i,t=this.height-e,s=c>=0?this.maxFixedPartScaleX:this.width/i,u=t>=0?this.maxFixedPartScaleY:this.height/e;if(this.preserveRatio){var n=Math.min(s,u);if(s>n){var h=(s-n)*i;c>=0?c+=h:c=h,s=n}if(u>n){var o=(u-n)*e;t>=0?t+=o:t=o,u=n}}this.columns.scale=s,this.rows.scale=u;var r;c>0?r=this.columns.stretch>0?c/this.columns.stretch:0:r=0;var a;t>0?a=this.rows.stretch>0?t/this.rows.stretch:0:a=0;for(var d,l,f,v,g,p=0,m=0,y,T,C=0,S=this.rows.count;C<S;C++){f=this.rows.data[C],g=f.stretch===0?f.height*u:a*f.stretch,p=0;for(var E=0,P=this.columns.count;E<P;E++)l=this.columns.data[E],v=l.stretch===0?l.width*s:r*l.stretch,d=this.getFrameNameCallback(E,C,this.baseFrameName),d&&v>0&&g>0&&x.has(d)&&(f.stretch===0&&l.stretch===0||this.getStretchMode(E,C)===0?T=0:T=1,T===0?(y=Na(this,"_image","image"),y.setTexture(this.textureKey,d).setDisplaySize(v,g)):(y=Na(this,"_tileSprite","tileSprite"),y.setTexture(this.textureKey,d).setSize(v,g))),y&&(this.draw(y,p,m),y=void 0),p+=v;m+=g}};const of=Phaser.Utils.Objects.IsPlainObject,za=Phaser.Utils.Objects.GetValue;var hf=function(x){return of(x)?(this.stretchMode.edge=Tn(za(x,"edge",0)),this.stretchMode.internal=Tn(za(x,"internal",0))):(x=Tn(x),this.stretchMode.edge=x,this.stretchMode.internal=x),this},Tn=function(x){return typeof x=="string"&&(x=lf[x]),x};const lf={scale:0,repeat:1};var uf=function(x,i){return x===0||x===this.columns.count-1||i===0||i===this.rows.count-1},ff=function(x,i){return uf.call(this,x,i)?this.stretchMode.edge:this.stretchMode.internal},df=function(x){return x==null&&(x=!0),this.preserveRatio=x,this},vf=function(x,i){return i===void 0&&(i=x),this.maxFixedPartScaleX=x,this.maxFixedPartScaleY=i,this},cf={setTexture:rf,updateTexture:af,setStretchMode:hf,getStretchMode:ff,setPreserveRatio:df,setMaxFixedPartScale:vf};const pf="__BASE";var gf=function(x,i,e){return e===pf?`${x},${i}`:`${e}_${x},${i}`};const xf=Phaser.GameObjects.RenderTexture,Di=Phaser.Utils.Objects.IsPlainObject,ft=Phaser.Utils.Objects.GetValue;class Cn extends xf{constructor(i,e,c,t,s,u,n,h,o,r){Di(e)?(r=e,e=ft(r,"x",0),c=ft(r,"y",0),t=ft(r,"width",1),s=ft(r,"height",1),u=ft(r,"key",void 0),n=ft(r,"baseFrame",void 0),h=ft(r,"columns",void 0),o=ft(r,"rows",void 0)):Di(t)?(r=t,t=ft(r,"width",1),s=ft(r,"height",1),u=ft(r,"key",void 0),n=ft(r,"baseFrame",void 0),h=ft(r,"columns",void 0),o=ft(r,"rows",void 0)):Di(u)?(r=u,u=ft(r,"key",void 0),n=ft(r,"baseFrame",void 0),h=ft(r,"columns",void 0),o=ft(r,"rows",void 0)):Di(n)?(r=n,n=ft(r,"baseFrame",void 0),h=ft(r,"columns",void 0),o=ft(r,"rows",void 0)):Array.isArray(n)?(r=o,o=h,h=n,n=ft(r,"baseFrame",void 0)):Di(h)&&(r=h,h=ft(r,"columns",void 0),o=ft(r,"rows",void 0));super(i,e,c,t,s);this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setOrigin(.5,.5),this.setGetFrameNameCallback(ft(r,"getFrameNameCallback",void 0)),this.setStretchMode(ft(r,"stretchMode",0)),this.setPreserveRatio(ft(r,"preserveRatio",!0));var a=ft(r,"maxFixedPartScale",1),d=ft(r,"maxFixedPartScaleX",a),l=ft(r,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(d,l),this.setTexture(u,n,h,o)}setGetFrameNameCallback(i){return i===void 0&&(i=gf),this.getFrameNameCallback=i,this}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(i,e){return this.width===i&&this.height===e?this:(super.resize(i,e),this.updateTexture(),this)}}Object.assign(Cn.prototype,cf);var Va=function(x){return x==null||x===""||x.length===0},mf=function(x,i,e){var c=x;if(!Va(i)){typeof i=="string"&&(i=i.split("."));for(var t,s=0,u=i.length;s<u;s++){if(t=i[s],c[t]==null||typeof c[t]!="object"){var n;s===u-1?e===void 0?n={}:n=e:n={},c[t]=n}c=c[t]}}return c},st=function(x,i,e){if(typeof x=="object"){if(Va(i)){if(e==null)return;typeof e=="object"&&(x=e)}else{typeof i=="string"&&(i=i.split("."));var c=i.pop(),t=mf(x,i);t[c]=e}return x}};et.register("ninePatch",function(x,i,e,c,t,s,u,n){var h=new Cn(this.scene,x,i,e,c,t,s,u,n);return this.scene.add.existing(h),h});st(window,"RexPlugins.UI.NinePatch",Cn);const hi=Phaser.Utils.Objects.GetValue;class Ya{constructor(i,e,c,t,s){this.cornerRadius={},this._width=0,this._height=0,this.setTo(i,e,c,t,s)}setTo(i,e,c,t,s){return this.setPosition(i,e),this.setRadius(s),this.setSize(c,t),this}setPosition(i,e){return i===void 0&&(i=0),e===void 0&&(e=i),this.x=i,this.y=e,this}setRadius(i){i===void 0&&(i=0);var e,c;typeof i=="number"?(e=i,c=i):(e=hi(i,"x",0),c=hi(i,"y",0));var t=this.cornerRadius;return t.tl=us(hi(i,"tl",void 0),e,c),t.tr=us(hi(i,"tr",void 0),e,c),t.bl=us(hi(i,"bl",void 0),e,c),t.br=us(hi(i,"br",void 0),e,c),this}setSize(i,e){return this.width=i,this.height=e,this}get minWidth(){var i=this.cornerRadius;return Math.max(i.tl.x+i.tr.x,i.bl.x+i.br.x)}get minHeight(){var i=this.cornerRadius;return Math.max(i.tl.y+i.bl.y,i.tr.y+i.br.y)}get width(){return this._width}set width(i){i==null&&(i=0),this._width=Math.max(i,this.minWidth)}get height(){return this._height}set height(i){i==null&&(i=0),this._height=Math.max(i,this.minHeight)}get radius(){var i=this.cornerRadius,e=Math.max(i.tl.x,i.tl.y,i.tr.x,i.tr.y,i.bl.x,i.bl.y,i.br.x,i.br.y);return e}}var us=function(x,i,e){return x===void 0?{x:i,y:e}:typeof x=="number"?{x,y:x}:x},li=function(x,i,e){var c=e.length;if(c>=2){var t=e[c-2],s=e[c-1];if(x===t&&i===s)return e}return e.push(x,i),e};const Ua=Phaser.Math.DegToRad;var ui=function(x,i,e,c,t,s,u,n,h){u&&s>t?s-=360:!u&&s<t&&(s+=360);var o=s-t,r=Ua(o)/n;t=Ua(t);for(var a=0;a<=n;a++){var d=t+r*a,l=x+e*Math.cos(d),f=i+c*Math.sin(d);li(l,f,h)}return h},yf=Phaser.Renderer.WebGL.Utils,Xa=function(x,i,e,c,t,s){for(var u=yf.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*c),n=e.pathData,h=e.pathIndexes,o=0;o<h.length;o+=3){var r=h[o]*2,a=h[o+1]*2,d=h[o+2]*2,l=n[r+0]-t,f=n[r+1]-s,v=n[a+0]-t,g=n[a+1]-s,p=n[d+0]-t,m=n[d+1]-s,y=i.getX(l,f),T=i.getY(l,f),C=i.getX(v,g),S=i.getY(v,g),E=i.getX(p,m),P=i.getY(p,m);x.batchTri(e,y,T,C,S,E,P,0,0,1,1,u,u,u,2)}},Tf=Phaser.Renderer.WebGL.Utils,fs=function(x,i,e,c,t){var s=x.strokeTint,u=Tf.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*e);s.TL=u,s.TR=u,s.BL=u,s.BR=u;var n=i.pathData,h=n.length-1,o=i.lineWidth,r=o/2,a=n[0]-c,d=n[1]-t;i.closePath||(h-=2);for(var l=2;l<h;l+=2){var f=n[l]-c,v=n[l+1]-t;x.batchLine(a,d,f,v,r,r,o,l-2,i.closePath?l===h-1:!1),a=f,d=v}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const Sn=Phaser.GameObjects.Components.TransformMatrix;var Wa=new Sn,ba=new Sn,Ha=new Sn,Cf={camera:Wa,sprite:ba,calc:Ha},$a=function(x,i,e){var c=Wa,t=ba,s=Ha;return t.applyITRS(x.x,x.y,x.rotation,x.scaleX,x.scaleY),c.copyFrom(i.matrix),e?(c.multiplyWithOffset(e,-i.scrollX*x.scrollFactorX,-i.scrollY*x.scrollFactorY),t.e=x.x,t.f=x.y):(t.e-=i.scrollX*x.scrollFactorX,t.f-=i.scrollY*x.scrollFactorY),c.multiply(t,s),Cf},Sf=function(x,i,e,c){i.dirty&&(i.updateData(),i.dirty=!1),e.addToRenderList(i);var t=x.pipelines.set(i.pipeline),s=$a(i,e,c),u=t.calcMatrix.copyFrom(s.calc),n=i._displayOriginX,h=i._displayOriginY,o=e.alpha*i.alpha;x.pipelines.preBatch(i),i.isFilled&&Xa(t,u,i,o,n,h),i.isStroked&&fs(t,i,o,n,h),x.pipelines.postBatch(i)},Gi=function(x,i,e,c){var t=e||i.fillColor,s=c||i.fillAlpha,u=(t&16711680)>>>16,n=(t&65280)>>>8,h=t&255;x.fillStyle="rgba("+u+","+n+","+h+","+s+")"},wi=function(x,i,e,c){var t=e||i.strokeColor,s=c||i.strokeAlpha,u=(t&16711680)>>>16,n=(t&65280)>>>8,h=t&255;x.strokeStyle="rgba("+u+","+n+","+h+","+s+")",x.lineWidth=i.lineWidth};const Ef=Phaser.Renderer.Canvas.SetTransform;var Pf=function(x,i,e,c){i.dirty&&(i.updateData(),i.dirty=!1),e.addToRenderList(i);var t=x.currentContext;if(Ef(x,t,i,e,c)){var s=i._displayOriginX,u=i._displayOriginY,n=i.pathData,h=n.length-1,o=n[0]-s,r=n[1]-u;t.beginPath(),t.moveTo(o,r),i.closePath||(h-=2);for(var a=2;a<h;a+=2){var d=n[a]-s,l=n[a+1]-u;t.lineTo(d,l)}t.closePath(),i.isFilled&&(Gi(t,i),t.fill()),i.isStroked&&(wi(t,i),t.stroke()),t.restore()}},Mf={renderWebGL:Sf,renderCanvas:Pf};const Rf=Phaser.GameObjects.Shape,Ka=Phaser.Utils.Objects.GetValue,Af=Phaser.Geom.Polygon.Earcut;class En extends Rf{constructor(i,e,c,t,s,u,n,h){e===void 0&&(e=0),c===void 0&&(c=0);var o=new Ya;super(i,"rexRoundRectangleShape",o);var r=Ka(u,"radius",u);o.setTo(0,0,t,s,r);var a=Ka(u,"iteration",void 0);this.setIteration(a),this.setPosition(e,c),n!==void 0&&this.setFillStyle(n,h),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var i=this.geom,e=this.pathData;e.length=0;var c=i.cornerRadius,t,s=this.iteration+1;if(t=c.br,ds(t)){var u=i.width-t.x,n=i.height-t.y;ui(u,n,t.x,t.y,0,90,!1,s,e)}else li(i.width,i.height,e);if(t=c.bl,ds(t)){var u=t.x,n=i.height-t.y;ui(u,n,t.x,t.y,90,180,!1,s,e)}else li(0,i.height,e);if(t=c.tl,ds(t)){var u=t.x,n=t.y;ui(u,n,t.x,t.y,180,270,!1,s,e)}else li(0,0,e);if(t=c.tr,ds(t)){var u=i.width-t.x,n=t.y;ui(u,n,t.x,t.y,270,360,!1,s,e)}else li(i.width,0,e);return e.push(e[0],e[1]),this.pathIndexes=Af(e),this}get width(){return this.geom.width}set width(i){this.resize(i,this.height)}get height(){return this.geom.height}set height(i){this.resize(this.width,i)}resize(i,e){if(e===void 0&&(e=i),this.geom.width===i&&this.geom.height===e)return this;this.geom.height=e,this.geom.width=i,this.updateDisplayOrigin(),this.dirty=!0;var c=this.input;return c&&!c.customHitArea&&(c.hitArea.width=i,c.hitArea.height=e),this}get iteration(){return this._iteration}set iteration(i){if(this._iteration===void 0){this._iteration=i;return}this._iteration!==i&&(this._iteration=i,this.dirty=!0)}setIteration(i){return i===void 0&&(i=6),this.iteration=i,this}get radius(){return this.geom.radius}set radius(i){this.geom.setRadius(i),this.updateDisplayOrigin(),this.dirty=!0}setRadius(i){return i===void 0&&(i=0),this.radius=i,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(i){this.radius=i}setCornerRadius(i){return this.setRadius(i)}}var ds=function(x){return x.x!==0&&x.y!==0};Object.assign(En.prototype,Mf);et.register("roundRectangle",function(x,i,e,c,t,s,u){var n=new En(this.scene,x,i,e,c,t,s,u);return this.scene.add.existing(n),n});st(window,"RexPlugins.UI.RoundRectangle",En);const Of=Phaser.Renderer.WebGL.Utils;var Lf=function(x,i,e,c){if(i.dirty&&(i.updateTexture(),i.dirty=!1),!(i.width===0||i.height===0)){e.addToRenderList(i);var t=i.frame,s=t.width,u=t.height,n=Of.getTintAppendFloatAlpha,h=x.pipelines.set(i.pipeline,i),o=h.setTexture2D(t.glTexture,i);x.pipelines.preBatch(i),h.batchTexture(i,t.glTexture,s,u,i.x,i.y,s/i.resolution,u/i.resolution,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,s,u,n(i.tintTopLeft,e.alpha*i._alphaTL),n(i.tintTopRight,e.alpha*i._alphaTR),n(i.tintBottomLeft,e.alpha*i._alphaBL),n(i.tintBottomRight,e.alpha*i._alphaBR),i.tintFill,0,0,e,c,!1,o),x.pipelines.postBatch(i)}},Ff=function(x,i,e,c){i.dirty&&(i.updateTexture(),i.dirty=!1),!(i.width===0||i.height===0)&&(e.addToRenderList(i),x.batchSprite(i,i.frame,e,c))},If={renderWebGL:Lf,renderCanvas:Ff};const Bf=Phaser.Display.Color;var Df={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(x){return this.context.fillStyle=x,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},loadFromURL(x,i){var e=this,c=new Image;return c.onload=function(){e.width!==c.width||e.height!==c.height?e.resize(c.width,c.height):e.clear(),e.context.drawImage(c,0,0),e.updateTexture(),i&&i(),c.onload=null,c.src="",c.remove()},c.src=x,this},loadFromURLPromise(x){var i=this;return new Promise(function(e,c){i.loadFromURL(x,e)})},getDataURL(x,i){return this.canvas.toDataURL(x,i)},getPixel(x,i,e){e===void 0&&(e=new Bf);var c=this.context.getImageData(x,i,1,1);return e.setTo(c.data[0],c.data[1],c.data[2],c.data[3]),e},setPixel(x,i,e,c,t,s){if(typeof e!="number"){var u=e;e=u.red,c=u.green,t=u.blue,s=u.alpha}s===void 0&&(s=e!==0||c!==0||t!==0?255:0);var n=this.context.createImageData(1,1);return n.data[0]=e,n.data[1]=c,n.data[2]=t,n.data[3]=s,this.context.putImageData(n,x,i),this.dirty=!0,this}},Gf={updateTexture(x,i){x&&(i?x.call(i,this.canvas,this.context):x(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=this.width,e.hitArea.height=this.height),this},generateTexture(x,i,e,c,t){var s=this.canvas,u=this.scene.sys,n=u.game.renderer,h;i===void 0&&(i=0),e===void 0&&(e=0),c===void 0?c=s.width:c*=this.resolution,t===void 0?t=s.height:t*=this.resolution,u.textures.exists(x)?h=u.textures.get(x):h=u.textures.createCanvas(x,c,t);var o=h.getSourceImage();o.width!==c&&(o.width=c),o.height!==t&&(o.height=t);var r=o.getContext("2d");return r.clearRect(0,0,c,t),r.drawImage(s,i,e,c,t),n.gl&&h&&n.canvasToTexture(o,h.source[0].glTexture,!0,0),this},loadTexture(x,i){var e=this.scene.textures.getFrame(x,i);return e?(this.width!==e.cutWidth||this.height!==e.cutHeight?this.resize(e.cutWidth,e.cutHeight):this.clear(),this.context.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this):this}};const Za=Phaser.Display.Canvas.CanvasPool,wf=Phaser.GameObjects.GameObject;class Ie extends wf{constructor(i,e,c,t,s){e===void 0&&(e=0),c===void 0&&(c=0),t===void 0&&(t=1),s===void 0&&(s=1);super(i,"rexCanvas");this.renderer=i.sys.game.renderer,this.resolution=1,this._width=t,this._height=s,t=Math.max(Math.ceil(t*this.resolution),1),s=Math.max(Math.ceil(s*this.resolution),1),this.canvas=Za.create(this,t,s),this.context=this.canvas.getContext("2d"),this.dirty=!1,this.setPosition(e,c),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=i.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0,i.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),Za.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(i){this.setSize(i,this._height)}get height(){return this._height}set height(i){this.setSize(this._width,i)}setSize(i,e){return this._width===i&&this._height===e?this:(this._width=i,this._height=e,this.updateDisplayOrigin(),i=Math.max(Math.ceil(i*this.resolution),1),e=Math.max(Math.ceil(e*this.resolution),1),this.canvas.width=i,this.canvas.height=e,this.frame.setSize(i,e),this.dirty=!0,this)}get displayWidth(){return this.scaleX*this._width}set displayWidth(i){this.scaleX=i/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(i){this.scaleY=i/this._height}setDisplaySize(i,e){return this.displayWidth=i,this.displayHeight=e,this}getCanvas(i){return i||(this.dirty=!0),this.canvas}getContext(i){return i||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(i,e){return this.setSize(i,e),this}}const Ht=Phaser.GameObjects.Components;Phaser.Class.mixin(Ie,[Ht.Alpha,Ht.BlendMode,Ht.Crop,Ht.Depth,Ht.Flip,Ht.GetBounds,Ht.Mask,Ht.Origin,Ht.Pipeline,Ht.ScrollFactor,Ht.Tint,Ht.Transform,Ht.Visible,If,Df,Gf]);const Nf=Phaser.Utils.String.Pad;var ht=function(x,i,e){if(x==null)return x;switch(typeof x){case"string":return x;case"number":return`#${Nf(Math.floor(x).toString(16),6,"0",1)}`;case"function":return x(i,e);case"object":return x.hasOwnProperty("r")?x.hasOwnProperty("a")?`rgba(${x.r},${x.g},${x.b},${x.a})`:`rgb(${x.r},${x.g},${x.b})`:x.hasOwnProperty("h")?x.hasOwnProperty("a")?`hsla(${x.h},${x.s},${x.l},${x.a})`:`hsl(${x.h},${x.s},${x.l})`:x;default:return x}};const vs=Phaser.Math.DegToRad,Ja=vs(0),Qa=vs(90),ja=vs(180),ka=vs(270);var qa=function(x,i,e,c,t,s,u){var n=new Ya(i,e,c,t,s),h=n.minWidth,o=n.minHeight,r=c>=h?1:c/h,a=t>=o?1:t/o,d=n.cornerRadius,l,f,v,g,p;x.save(),x.beginPath(),x.translate(i,e),l=d.br,f=l.x*r,v=l.y*a,g=c-f,p=t-v,x.moveTo(c,p),f>0&&v>0?cs(x,g,p,f,v,Ja,Qa,u):(x.lineTo(c,t),x.lineTo(g,t)),l=d.bl,f=l.x*r,v=l.y*a,g=f,p=t-v,x.lineTo(f,t),f>0&&v>0?cs(x,g,p,f,v,Qa,ja,u):(x.lineTo(0,t),x.lineTo(0,p)),l=d.tl,f=l.x*r,v=l.y*a,g=f,p=v,x.lineTo(0,p),f>0&&v>0?cs(x,g,p,f,v,ja,ka,u):(x.lineTo(0,0),x.lineTo(g,0)),l=d.tr,f=l.x*r,v=l.y*a,g=c-f,p=v,x.lineTo(g,0),f>0&&v>0?cs(x,g,p,f,v,ka,Ja,u):(x.lineTo(c,0),x.lineTo(c,p)),x.closePath(),x.restore()},cs=function(x,i,e,c,t,s,u,n){if(n==null)x.ellipse(i,e,c,t,0,s,u);else{n+=1;for(var h,o,r,a=(u-s)/n,d=0;d<=n;d++)r=s+a*d,h=i+c*Math.cos(r),o=e+t*Math.sin(r),x.lineTo(h,o)}},zf=function(x,i,e,c,t,s,u,n,h,o,r,a,d){if(qa(i,e,c,t,s,u,d),n!=null){if(r!=null){var l;a?l=i.createLinearGradient(0,0,t,0):l=i.createLinearGradient(0,0,0,s),l.addColorStop(0,n),l.addColorStop(1,r),n=l}i.fillStyle=n,i.fill()}h!=null&&o>0&&(i.strokeStyle=h,i.lineWidth=o,i.stroke())},Pn=function(x,i,e,c,t,s,u,n){if(!(i==null&&e==null)){var h=x.canvas.width,o=x.canvas.height;e==null&&(c=0);var r=c/2;h-=c,o-=c,zf(x.canvas,x.context,r,r,h,o,t,i,e,c,s,u,n)}},Vf=function(){Pn(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const _a=Phaser.Utils.Objects.GetValue;class to extends Ie{constructor(i,e,c,t,s,u,n,h,o,r,a){super(i,e,c,t,s);this.type="rexRoundRectangleCanvas";var d=_a(u,"radius",u),l=_a(u,"iteration",void 0);this.setRadius(d),this.setIteration(l),this.setFillStyle(n,r,a),this.setStrokeStyle(h,o)}get radius(){return this._radius}set radius(i){this.dirty|=this._radius!=i,this._radius=i}setRadius(i){return this.radius=i,this}get iteration(){return this._iteration}set iteration(i){this.dirty|=this._iteration!=i,this._iteration=i}setIteration(i){return this.iteration=i,this}get fillStyle(){return this._fillStyle}set fillStyle(i){i=ht(i,this.canvas,this.context),this.dirty|=this._fillStyle!=i,this._fillStyle=i}get fillColor2(){return this._fillColor2}set fillColor2(i){i=ht(i,this.canvas,this.context),this.dirty|=this._fillColor2!=i,this._fillColor2=i}get isHorizontalGradient(){return this._fillStyle}set isHorizontalGradient(i){this.dirty|=this._isHorizontalGradient!=i,this._isHorizontalGradient=i}setFillStyle(i,e,c){return c===void 0&&(c=!0),this.fillStyle=i,this.fillColor2=e,this.isHorizontalGradient=c,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(i){i=ht(i,this.canvas,this.context),this.dirty|=this._strokeStyle!=i,this._strokeStyle=i}get lineWidth(){return this._lineWidth}set lineWidth(i){this.dirty|=this._lineWidth!=i,this._lineWidth=i}setStrokeStyle(i,e){return this.strokeStyle=i,this.lineWidth=e,this}updateTexture(){return this.clear(),Vf.call(this),super.updateTexture(),this}}et.register("roundRectangleCanvas",function(x,i,e,c,t,s,u,n,h,o){var r=new to(this.scene,x,i,e,c,t,s,u,n,h,o);return this.scene.add.existing(r),r});st(window,"RexPlugins.UI.RoundRectangleCanvas",to);/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Yf=Phaser.Renderer.WebGL.Utils,Uf=function(x,i,e,c){if(!(i.width===0||i.height===0)){e.addToRenderList(i);var t=i.frame,s=t.width,u=t.height,n=Yf.getTintAppendFloatAlpha,h=x.pipelines.set(i.pipeline,i),o=h.setTexture2D(t.glTexture,i);x.pipelines.preBatch(i),h.batchTexture(i,t.glTexture,s,u,i.x,i.y,s/i.style.resolution,u/i.style.resolution,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,s,u,n(i.tintTopLeft,e.alpha*i._alphaTL),n(i.tintTopRight,e.alpha*i._alphaTR),n(i.tintBottomLeft,e.alpha*i._alphaBL),n(i.tintBottomRight,e.alpha*i._alphaBR),i.tintFill,0,0,e,c,!1,o),x.pipelines.postBatch(i)}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Xf=function(x,i,e,c){i.width===0||i.height===0||(e.addToRenderList(i),x.batchSprite(i,i.frame,e,c))},Wf={renderWebGL:Uf,renderCanvas:Xf};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const ps=Phaser.Display.Canvas.CanvasPool;var eo=function(x){var i=ps.create(this),e=i.getContext("2d");x.syncFont(i,e);var c=e.measureText(x.testString);if("actualBoundingBoxAscent"in c){var t=c.actualBoundingBoxAscent,s=c.actualBoundingBoxDescent,o={ascent:t,descent:s,fontSize:t+s};return ps.remove(i),o}var u=Math.ceil(c.width*x.baselineX),n=u,h=2*n;n=n*x.baselineY|0,i.width=u,i.height=h,e.fillStyle="#f00",e.fillRect(0,0,u,h),e.font=x._font,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText(x.testString,0,n);var o={ascent:0,descent:0,fontSize:0};if(!e.getImageData(0,0,u,h))return o.ascent=n,o.descent=n+6,o.fontSize=o.ascent+o.descent,ps.remove(i),o;var r=e.getImageData(0,0,u,h).data,a=r.length,d=u*4,l,f,v=0,g=!1;for(l=0;l<n;l++){for(f=0;f<d;f+=4)if(r[v+f]!==255){g=!0;break}if(!g)v+=d;else break}for(o.ascent=n-l,v=a-d,g=!1,l=h;l>n;l--){for(f=0;f<d;f+=4)if(r[v+f]!==255){g=!0;break}if(!g)v-=d;else break}return o.descent=l-n,o.fontSize=o.ascent+o.descent,ps.remove(i),o},Et={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/};const bf=Phaser.Utils.Objects.GetAdvancedValue,Yt=Phaser.Utils.Objects.GetValue;var Mn={backgroundColor:["backgroundColor",null,ht],backgroundColor2:["backgroundColor2",null,ht],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,ht],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",ht],stroke:["stroke","#fff",ht],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",ht],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",ht],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};class Rn{constructor(i,e){this.parent=i,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(e,!1,!0);var c=Yt(e,"metrics",!1);c?this.metrics={ascent:Yt(c,"ascent",0),descent:Yt(c,"descent",0),fontSize:Yt(c,"fontSize",0)}:this.metrics=eo(this)}get canvas(){return this.parent.canvasText.canvas}get context(){return this.parent.canvasText.context}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==Et.NO_WRAP&&this.wrapWidth===0}setStyle(i,e,c){if(e===void 0&&(e=!0),c===void 0&&(c=!1),i&&i.hasOwnProperty("wrap")){var t=i.wrap;if(t.hasOwnProperty("mode")){var s=t.mode;typeof s=="string"&&(t.mode=io[s])}else t.hasOwnProperty("width")&&(t.mode=1)}i&&i.rtl&&c&&!i.hasOwnProperty("halign")&&(i.halign="right"),i&&i.hasOwnProperty("fontSize")&&typeof i.fontSize=="number"&&(i.fontSize=i.fontSize.toString()+"px");for(var u in Mn){var n=Mn[u],h=n[0],o=c?n[1]:this[u],r=n[2];if(u==="wrapCallback"||u==="wrapCallbackScope")this[u]=Yt(i,h,o);else{var a=bf(i,h,o);r&&(a=r(a)),this[u]=a}}var d=Yt(i,"font",null);d===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=d;var l=Yt(i,"fill",null);l!==null&&(this.color=ht(l));var f=Yt(i,"images",void 0);return f&&this.parent.addImage(f),e?this.update(!0):this.parent}syncFont(i,e){e.font=this._font}syncStyle(i,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"}syncShadow(i,e){e?(i.shadowOffsetX=this.shadowOffsetX,i.shadowOffsetY=this.shadowOffsetY,i.shadowColor=this.shadowColor,i.shadowBlur=this.shadowBlur):(i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowColor=0,i.shadowBlur=0)}update(i){return i&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=eo(this)),this.parent.updateText(i)}buildFont(){var i=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return i!==this._font&&(this._font=i),this}setFont(i){return typeof i=="string"?(this.fontFamily=i,this.fontSize="",this.fontStyle=""):(this.fontFamily=Yt(i,"fontFamily","Courier"),this.fontSize=Yt(i,"fontSize","16px"),this.fontStyle=Yt(i,"fontStyle","")),this.update(!0)}setFontFamily(i){return this.fontFamily=i,this.update(!0)}setFontStyle(i){return this.fontStyle=i,this.update(!0)}setFontSize(i){return typeof i=="number"&&(i=i.toString()+"px"),this.fontSize=i,this.update(!0)}setTestString(i){return this.testString=i,this.update(!0)}setFixedSize(i,e){return this.fixedWidth=i,this.fixedHeight=e,i&&(this.parent.width=i),e&&(this.parent.height=e),this.update(this.isWrapFitMode)}setResolution(i){return this.resolution=i,this.update(!1)}setLineSpacing(i){return this.lineSpacing=i,this.update(!1)}setXOffset(i){return this.xOffset=i,this.update(!1)}setBackgroundColor(i,e,c){return c===void 0&&(c=!0),this.backgroundColor=ht(i,this.canvas,this.context),this.backgroundColor2=ht(e,this.canvas,this.context),this.backgroundHorizontalGradient=c,this.update(!1)}setBackgroundStrokeColor(i,e){return this.backgroundStrokeColor=ht(i,this.canvas,this.context),this.backgroundStrokeLineWidth=e,this.update(!1)}setBackgroundCornerRadius(i,e){return this.backgroundCornerRadius=i,this.backgroundCornerIteration=e,this.update(!1)}setFill(i){return this.color=ht(i,this.canvas,this.context),this.update(!1)}setColor(i){return this.color=ht(i,this.canvas,this.context),this.update(!1)}setStroke(i,e){return i===void 0?this.strokeThickness=0:(e===void 0&&(e=this.strokeThickness),this.stroke=ht(i,this.canvas,this.context),this.strokeThickness=e),this.update(!0)}setShadow(i,e,c,t,s,u){return i===void 0&&(i=0),e===void 0&&(e=0),c===void 0&&(c="#000"),t===void 0&&(t=0),s===void 0&&(s=!1),u===void 0&&(u=!0),this.shadowOffsetX=i,this.shadowOffsetY=e,this.shadowColor=ht(c,this.canvas,this.context),this.shadowBlur=t,this.shadowStroke=s,this.shadowFill=u,this.update(!1)}setShadowOffset(i,e){return i===void 0&&(i=0),e===void 0&&(e=i),this.shadowOffsetX=i,this.shadowOffsetY=e,this.update(!1)}setShadowColor(i){return i===void 0&&(i="#000"),this.shadowColor=ht(i,this.canvas,this.context),this.update(!1)}setShadowBlur(i){return i===void 0&&(i=0),this.shadowBlur=i,this.update(!1)}setShadowStroke(i){return this.shadowStroke=i,this.update(!1)}setShadowFill(i){return this.shadowFill=i,this.update(!1)}setUnderline(i,e,c){return i===void 0&&(i="#000"),e===void 0&&(e=0),c===void 0&&(c=0),this.underlineColor=ht(i,this.canvas,this.context),this.underlineThickness=e,this.underlineOffset=c,this.update(!1)}setUnderlineColor(i){return i===void 0&&(i="#000"),this.underlineColor=ht(i,this.canvas,this.context),this.update(!1)}setUnderlineThickness(i){return i===void 0&&(i=0),this.underlineThickness=i,this.update(!1)}setUnderlineOffset(i){return i===void 0&&(i=0),this.underlineOffset=i,this.update(!1)}setWrapMode(i){return typeof i=="string"&&(i=io[i.toLowerCase()]||0),this.wrapMode=i,this.update(!0)}setWrapWidth(i){return this.wrapWidth=i,this.update(!1)}setAlign(i,e){return i===void 0&&(i="left"),e===void 0&&(e="top"),this.halign=i,this.valign=e,this.update(!1)}setHAlign(i){return i===void 0&&(i="left"),this.halign=i,this.update(!1)}setVAlign(i){return i===void 0&&(i="top"),this.valign=i,this.update(!1)}setMaxLines(i){return i===void 0&&(i=0),this.maxLines=i,this.update(!1)}getTextMetrics(){var i=this.metrics;return{ascent:i.ascent,descent:i.descent,fontSize:i.fontSize}}setTextMetrics(i,e){return this.metrics.ascent=i.ascent,this.metrics.descent=i.descent,this.metrics.fontSize=i.fontSize,typeof e=="string"?(this.fontFamily=e,this.fontSize="",this.fontStyle=""):(this.fontFamily=Yt(e,"fontFamily",this.fontFamily),this.fontSize=Yt(e,"fontSize",this.fontSize),this.fontStyle=Yt(e,"fontStyle",this.fontStyle)),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var i={};for(var e in Mn)i[e]=this[e];return i.metrics=this.getTextMetrics(),i}destroy(){this.parent=void 0}}const io={none:Et.NO_WRAP,word:Et.WORD_WRAP,char:Et.CHAR_WRAP,character:Et.CHAR_WRAP},An=Phaser.Display.Canvas.CanvasPool;var Hf=function(x,i,e){e===void 0&&(e={});var c=An.create(this),t=c.getContext("2d");x.syncFont(c,t);var s=t.measureText(i),u=Math.ceil(s.width*x.baselineX),n=u,h=2*n;if(n=n*x.baselineY|0,c.width=u,c.height=h,t.fillStyle="#f00",t.fillRect(0,0,u,h),t.font=x._font,t.textBaseline="alphabetic",t.fillStyle="#000",t.fillText(x.testString,0,n),e.left=0,u===0||h===0||!t.getImageData(0,0,u,h))return An.remove(c),e;for(var o=t.getImageData(0,0,u,h).data,r=!1,a=0;a<u;a++){for(var d=0;d<h;d++){var l=(d*u+a)*4;if(o[l]!==255){e.left=a,r=!0;break}}if(r)break}return An.remove(c),e},$f={draw(x,i,e,c){var t=this.penManager;this.hitAreaManager.clear();var s=this.context;s.save();var u=this.defaultStyle;this.clear(),Pn(this,u.backgroundColor,u.backgroundStrokeColor,u.backgroundStrokeLineWidth,u.backgroundCornerRadius,u.backgroundColor2,u.backgroundHorizontalGradient,u.backgroundCornerIteration),x+=this.startXOffset,i+=this.startYOffset;var n=u.halign,h=u.valign,o,r=u.lineHeight,a=t.lines,d=a.length,l=u.maxLines,f,v,g;l>0&&d>l?(f=l,h==="center"?v=Math.floor((d-f)/2):h==="bottom"?v=d-f:v=0):(f=d,v=0),g=v+f;var p,m,y=this.rtl,T=y?this.parent.width:void 0;h==="center"?m=Math.max((c-f*r)/2,0):h==="bottom"?m=Math.max(c-f*r-2,0):m=0,m+=i;for(var C=v;C<g;C++)if(o=t.getLineWidth(C),o!==0){for(var S=a[C],E=S.length,P=n,M=0;M<E;M++){var A=S[M].prop.align;if(A){P=A;break}}P==="center"?p=(e-o)/2:P==="right"?p=y?0:e-o:p=y?e-o:0,p+=x;for(var M=0;M<E;M++)this.drawPen(S[M],p,m,T)}s.restore()},drawPen(x,i,e,c){i+=x.x,e+=x.y+(x.prop.y||0),c!==void 0&&(i=c-i);var t=this.canvas,s=this.context;s.save();var u=this.parser.propToContextStyle(this.defaultStyle,x.prop);u.buildFont(),u.syncFont(t,s),u.syncStyle(t,s),u.underlineThickness>0&&x.width>0&&this.drawUnderline(i,e,x.width,u),x.isTextPen&&this.drawText(i,e,x.text,u),x.isImagePen&&this.drawImage(i,e,x.prop.img,u),s.restore(),x.hasAreaMarker&&x.width>0&&this.hitAreaManager.add(x.prop.area,i,e-this.startYOffset,x.width,this.defaultStyle.lineHeight)},clear(){var x=this.canvas;this.context.clearRect(0,0,x.width,x.height)},drawUnderline(x,i,e,c){i+=c.underlineOffset-c.underlineThickness/2,this.autoRound&&(x=Math.round(x),i=Math.round(i));var t=this.context,s=t.lineCap;t.lineCap="butt",t.strokeStyle=c.underlineColor,t.lineWidth=c.underlineThickness,t.beginPath(),t.moveTo(x,i),t.lineTo(x+e,i),t.stroke(),t.lineCap=s},drawText(x,i,e,c){this.autoRound&&(x=Math.round(x),i=Math.round(i));var t=this.context;c.stroke&&c.stroke!=="none"&&c.strokeThickness>0&&(c.syncShadow(t,c.shadowStroke),t.strokeText(e,x,i)),c.color&&c.color!=="none"&&(c.syncShadow(t,c.shadowFill),t.fillText(e,x,i))},drawImage(x,i,e,c){i-=this.startYOffset,this.parent.imageManager.draw(e,this.context,x,i,this.autoRound)}};class Be{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(i){return this.items.push(i),this}pushMultiple(i){return this.items.push.apply(this.items,i),i.length=0,this}clear(){return this.items.length=0,this}}const Ke=Phaser.Utils.Objects.GetValue,Kf=Et.NO_NEWLINE,so=Et.RAW_NEWLINE;class Zf{constructor(i){this.prop={},this.resetFromJSON(i)}resetFromJSON(i){this.text=Ke(i,"text",""),this.x=Ke(i,"x",0),this.y=Ke(i,"y",0),this.width=Ke(i,"width",0);var e=Ke(i,"prop",null);e===null&&(e={}),this.prop=e,this.newLineMode=Ke(i,"newLineMode",0),this.startIndex=Ke(i,"startIndex",0)}get plainText(){var i=this.text;return this.newLineMode===so&&(i+=`
`),i}get wrapText(){var i=this.text;return this.newLineMode!==Kf&&(i+=`
`),i}get rawTextLength(){var i=this.text.length;return this.newLineMode===so&&(i+=1),i}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}}var fi=function(x){if(Array.isArray(x))x.length=0;else for(var i in x)delete x[i]},di=function(x,i){var e=Array.isArray(x);if(i===void 0?i=e?[]:{}:fi(i),e){i.length=x.length;for(var c=0,t=x.length;c<t;c++)i[c]=x[c]}else for(var s in x)i[s]=x[s];return i},De=function(){};const gs=Phaser.Utils.Objects.GetFastValue,no=Et.NO_NEWLINE,Jf=Et.WRAPPED_NEWLINE;var Qf=new Be,jf=new Be;class On{constructor(i){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.PensPool=gs(i,"pensPool",Qf),this.LinesPool=gs(i,"linesPool",jf),this.tagToText=gs(i,"tagToText",De),this.tagToTextScope=gs(i,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var i=0,e=this.lines.length;i<e;i++)this.lines[i].length=0;this.PensPool.pushMultiple(this.pens),this.LinesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(i,e,c,t,s,u){var n=this.PensPool.pop();return n==null&&(n=new Zf),Ze.text=i,Ze.x=e,Ze.y=c,Ze.width=t,Ze.prop=s,Ze.newLineMode=u,n.resetFromJSON(Ze),this.addPen(n),this}addImagePen(i,e,c,t){return this.addTextPen("",i,e,c,t,no),this}addNewLinePen(){var i=this.lastPen,e=i?i.lastX:0,c=i?i.y:0,t=i?di(i.prop):null;return this.addTextPen("",e,c,0,t,Jf),this}addPen(i){var e=this.lastPen;e==null?i.startIndex=0:i.startIndex=e.endIndex,this.pens.push(i);var c=this.lastLine;c==null&&(c=this.LinesPool.pop()||[],this.lines.push(c)),c.push(i),i.newLineMode!==no&&(c=this.LinesPool.pop()||[],this.lines.push(c)),this.maxLinesWidth=void 0}clone(i){i==null&&(i=new On),i.clear();for(var e=0,c=this.lines.length;e<c;e++)for(var t=this.lines[e],s=0,u=t.length;s<u;s++){var n=t[s];i.addPen(n.text,n.x,n.y,n.width,di(n.prop),n.newLineMode)}return i}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(i){if(i>=this.lines.length)return this.getLineEndIndex(i);var e=this.lines[i];return e&&e[0]?e[0].startIndex:0}getLineEndIndex(i){i>=this.lines.length&&(i=this.lines.length-1);var e,c=!1,t;for(e=i;e>=0&&(t=this.lines[e],c=t!=null&&t.length>0,!c);e--);if(!c)return 0;var s=t[t.length-1];return s.endIndex}getLineWidth(i){var e=this.lines[i];if(!e)return 0;var c=e[e.length-1];if(c==null)return 0;var t=c.lastX;return t}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var i,e=0,c=0,t=this.lines.length;c<t;c++)i=this.getLineWidth(c),i>e&&(e=i);return this.maxLinesWidth=e,e}getLineWidths(){for(var i=[],e=0,c=this.lines.length;e<c;e++)i.push(this.getLineWidth(e));return i}get linesCount(){return this.lines.length}get plainText(){for(var i="",e=this.pens,c=0,t=e.length;c<t;c++)i+=e[c].plainText;return i}get rawTextLength(){for(var i=0,e=this.pens,c=0,t=this.pens.length;c<t;c++)i+=e[c].rawTextLength;return i}getSliceTagText(i,e,c){if(i===void 0&&(i=0),e===void 0){var t=this.lastPen;if(t==null)return"";e=t.endIndex}c===void 0&&(c=!1);for(var s="",u,n,h,o,r,a,d,l=0,f=this.pens.length;l<f&&(u=this.pens[l],o=u.endIndex,!(!(o<=i)&&(u=this.pens[l],n=c?u.wrapText:u.plainText,a=u.prop,h=u.startIndex,r=h>=i&&o<=e,r||(n=n.substring(i-h,e-h)),this.tagToTextScope?s+=this.tagToText.call(this.tagToTextScope,n,a,d):s+=this.tagToText(n,a,d),d=a,o>=e)));l++);return s}get length(){return this.lines.length}set length(i){this.clear()}}var Ze={};const kf=Phaser.Geom.Rectangle;var ro=new Be;class qf{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return ro.pushMultiple(this.hitAreas),this}add(i,e,c,t,s){var u=ro.pop();return u===null?u=new kf(e,c,t,s):u.setTo(e,c,t,s),u.key=i,this.hitAreas.push(u),this}getFirstHitArea(i,e){for(var c=this.hitAreas,t,s=0,u=c.length;s<u;s++)if(t=c[s],t.contains(i,e))return t;return null}drawBounds(i,e,c){e===void 0&&(e=16777215),c&&i.save().scaleCanvas(c.scaleX,c.scaleY).rotateCanvas(c.rotation).translateCanvas(c.x,c.y);for(var t=this.hitAreas,s,u=0,n=t.length;u<n;u++)s=t[u],i.lineStyle(1,e).strokeRect(s.x,s.y,s.width,s.height);return c&&i.restore(),this}}var _f=function(){this.parent.on("pointerdown",function(x,i,e,c){ao.call(this,"areadown",x,i,e)},this).on("pointerup",function(x,i,e,c){ao.call(this,"areaup",x,i,e)},this)},ao=function(x,i,e,c){var t=this.hitAreaManager.getFirstHitArea(e,c);if(t!==null){var s=t.key;this.parent.emit(`${x}-${s}`,i,e,c),this.parent.emit(x,s,i,e,c)}},Ln=new Be,td=function(x){!x||Ln.push(x)},ed=function(x){!x||Ln.pushMultiple(x)},Je=function(x,i,e){var c=Ln.pop();return c===null&&(c={}),c.text=x,c.width=i,c.newLineMode=e,c};const id=Et.NO_NEWLINE,sd=Et.RAW_NEWLINE,Fn=Et.WRAPPED_NEWLINE,oo=Et.NO_WRAP,nd=Et.WORD_WRAP,rd=Et.CHAR_WRAP,ad=Et.SPLITREGEXP;var ho=function(x,i,e,c,t){c<=0&&(e=oo);var s=[];if(!x||!x.length)return s;for(var u=e===oo,n=e===nd,h=x.split(ad),o,r,a,d=0,l=h.length;d<l;d++){if(o=h[d],a=d===l-1?id:sd,u){var f=i(o);s.push(Je(o,f,a));continue}if(r=d===0?c-t:c,o.length<=100){var f=i(o);if(f<=r){s.push(Je(o,f,a));continue}}var v,g;n?(v=o.split(" "),g=v[v.length-1]==="",g&&(v.length-=1)):v=o;for(var p,m,y,T="",C=0,S,E=n?i(" "):void 0,P=0,M=v.length;P<M;P++){if(p=v[P],m=i(p),y=P===M-1,n&&(!y||g)&&(p+=" ",m+=E),n&&m>c){T!==""?s.push(Je(T,C,Fn)):P===0&&t>0&&s.push(Je("",0,Fn)),s.push(...ho(p,i,rd,c,0));var A=s.pop();T=A.text,C=A.width,td(A),T===" "&&(T="",C=0);continue}S=C+m,S>r?(s.push(Je(T,C,Fn)),T=p,C=m,r=c):(T+=p,C=S),y&&s.push(Je(T,C,a))}}return s};const xs=Phaser.Utils.Objects.GetValue,od=Et.NO_WRAP,hd=Et.NO_NEWLINE;class lo{constructor(i){this.parent=i.parent,this.context=xs(i,"context",null),this.canvas=this.context.canvas,this.parser=xs(i,"parser",null),this.defaultStyle=xs(i,"style",null),this.autoRound=!0,this.pensPool=xs(i,"pensPool",null),this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new qf;var e=this.context;this.getTextWidth=function(c){return e.measureText(c).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}updatePenManager(i,e,c,t,s){if(s===void 0&&(s=this.penManager),s.clear(),i==="")return s;var u=this.parent.style;if(u.isWrapFitMode){var n=this.parent.padding;c=u.fixedWidth-n.left-n.right}for(var h=this.canvas,o=this.context,r=function(O){return o.measureText(O).width},a=0,d=0,l=u.wrapCallback,f=u.wrapCallbackScope,v=!0,g,p,m,y=this.parser.splitText(i),T,C,S=0,E=y.length;S<E;S++)if(T=this.parser.tagTextToProp(y[S],p),g=T.plainText,p=T.prop,p.img){var P=this.imageManager.getOuterWidth(p.img);c>0&&e!==od&&c<a+P&&(s.addNewLinePen(),d+=t,a=0),s.addImagePen(a,d,P,di(p)),a+=P}else if(g!==""){if(o.save(),m=this.parser.propToContextStyle(this.defaultStyle,p),m.buildFont(),m.syncFont(h,o),m.syncStyle(h,o),!l)C=ho(g,r,e,c,a);else{C=l.call(f,g,r,c,a),typeof C=="string"&&(C=C.split(`
`));for(var R,M=0,A=C.length;M<A;M++)R=C[M],typeof R=="string"?C[M]=Je(R,r(R),M<A-1?2:0):v=!1}for(var R,M=0,A=C.length;M<A;M++)R=C[M],s.addTextPen(R.text,a,d,R.width,di(p),R.newLineMode),R.newLineMode!==hd?(a=0,d+=t):a+=R.width;v&&ed(C),C=null,o.restore()}return s}get startXOffset(){var i=this.defaultStyle;return i.strokeThickness/2+i.xOffset}get startYOffset(){var i=this.defaultStyle;return i.strokeThickness/2+i.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var i=this.penManager.linesCount,e=this.defaultStyle.maxLines;return e>0&&i>e&&(i=e),i}get linesWidth(){return this.penManager.getMaxLineWidth()}get linesHeight(){var i=this.desplayLinesCount,e=this.defaultStyle.lineHeight*i;return i>0&&(e-=this.defaultStyle.lineSpacing),e}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new On({pensPool:this.pensPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(i,e,c){var t;if(i==null)t=this.penManager.plainText;else{var s=this.parser.splitText(i,1);t="";for(var u=0,n=s.length;u<n;u++)t+=s[u]}return(e!=null||c!=null)&&(e==null&&(e=0),c==null&&(c=t.length),t=t.substring(e,c)),t}getPenManager(i,e){if(i===void 0)return this.copyPenManager(e,this.penManager);e===void 0&&(e=this.newPenManager());var c=this.defaultStyle;return this.updatePenManager(i,c.wrapMode,c.wrapWidth,c.lineHeight,e),e}getText(i,e,c,t){if(i==null)return this.penManager.getSliceTagText(e,c,t);var s=this.tmpPenManager,u=this.defaultStyle;return this.updatePenManager(i,u.wrapMode,u.wrapWidth,u.lineHeight,s),s.getSliceTagText(e,c,t)}copyPenManager(i,e){return e===void 0&&(e=this.penManager),e.copy(i)}getTextWidth(i){return i===void 0&&(i=this.penManager),i.getMaxLineWidth()}getLastPen(i){return i===void 0&&(i=this.penManager),i.lastPen}}var ld={setInteractive:_f};Object.assign(lo.prototype,$f,ld);const In=Phaser.Utils.Objects.GetValue;var Bn=function(x,i){i===void 0&&(i={key:x}),i.hasOwnProperty("key")||(i.key=x);var e=i.key,c=i.frame,t=i.width,s=i.height;if(t===void 0||s===void 0){var u=this.textureManager.getFrame(e,c),n=u?u.cutWidth:0,h=u?u.cutHeight:0;t===void 0&&s===void 0?(t=n,s=h):t===void 0?t=n*(s/h):s===void 0&&(s=h*(t/n))}this.images[x]={key:e,frame:c,width:t,height:s,y:In(i,"y",0),left:In(i,"left",0),right:In(i,"right",0)}},ud=function(x,i,e,c,t){var s=this.get(x);e+=s.left,c+=s.y,t&&(e=Math.round(e),c=Math.round(c));var u=this.textureManager.getFrame(s.key,s.frame);i.drawImage(u.source.image,u.cutX,u.cutY,u.cutWidth,u.cutHeight,e,c,s.width,s.height)};class Dn{constructor(i){this.textureManager=i.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(i,e){if(typeof i=="string")Bn.call(this,i,e);else if(Array.isArray(i))for(var c=i,t=0,s=c.length;t<s;t++)Bn.call(this,c[t]);else{var c=i;for(var i in c)Bn.call(this,i,c[i])}return this}has(i){return this.images.hasOwnProperty(i)}remove(i){return this.has(i)&&delete this.images[i],this}get(i){return this.has(i)||this.textureManager.exists(i)&&this.add(i),this.images[i]}getOuterWidth(i){var e=this.get(i);return e?e.width+e.left+e.right:0}getFrame(i){var e=this.get(i);return e?this.textureManager.getFrame(e.key,e.frame):void 0}hasTexture(i){return!!this.getFrame(i)}}var fd={draw:ud};Object.assign(Dn.prototype,fd);const dd=Phaser.Utils.Objects.IsPlainObject,vd=Phaser.DOM.AddToDOM,uo=Phaser.Display.Canvas.CanvasPool,fo=Phaser.GameObjects.GameObject,he=Phaser.Utils.Objects.GetValue,cd=Phaser.DOM.RemoveFromDOM,pd=Et.SPLITREGEXP;var Gn={};class wn extends fo{constructor(i,e,c,t,s,u,n){if(dd(e)){var h=e;e=he(h,"x",0),c=he(h,"y",0),t=he(h,"text",""),s=he(h,"style","")}e===void 0&&(e=0),c===void 0&&(c=0);super(i,u);if(this.renderer=i.sys.game.renderer,this.setPosition(e,c),this.setOrigin(0,0),this.initPipeline(),this.canvas=uo.create(this),this.context=this.canvas.getContext("2d"),this._imageManager=void 0,s){if(s.hasOwnProperty("align")){var o=s.align;delete s.align,s.halign=o}s.hasOwnProperty("stroke")&&!s.hasOwnProperty("strokeThickness")&&(s.strokeThickness=1)}this.style=new Rn(this,s),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=i.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),Gn.hasOwnProperty(u)||(Gn[u]=new Be),this.canvasText=new lo({parent:this,context:this.context,parser:n,style:this.style,pensPool:Gn[u]}),this.initRTL(),s&&s.padding&&this.setPadding(s.padding),this.setText(t),i.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.style.rtl&&cd(this.canvas),this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),uo.remove(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0)}set text(i){this.setText(i)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",vd(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(i){return i==null&&(i=""),Array.isArray(i)&&(i=i.join(`
`)),i!==this._text&&(this._text=i.toString(),this.updateText()),this}appendText(i){return i==null?this:(Array.isArray(i)&&(i=i.join(`
`)),this.setText(this.text+i.toString()),this)}setStyle(i){return this.style.setStyle(i)}setFont(i){return this.style.setFont(i)}setFontFamily(i){return this.style.setFontFamily(i)}setFontSize(i){return this.style.setFontSize(i)}setFontStyle(i){return this.style.setFontStyle(i)}setTestString(i){return this.style.setTestString(i)}setFixedSize(i,e){return this.style.setFixedSize(i,e)}setBackgroundColor(i,e,c){return this.style.setBackgroundColor(i,e,c)}setBackgroundStrokeColor(i,e){return this.style.setBackgroundStrokeColor(i,e)}setBackgroundCornerRadius(i,e){return this.style.setBackgroundCornerRadius(i,e)}setFill(i){return this.style.setFill(i)}setColor(i){return this.style.setColor(i)}setStroke(i,e){return this.style.setStroke(i,e)}setShadow(i,e,c,t,s,u){return this.style.setShadow(i,e,c,t,s,u)}setShadowOffset(i,e){return this.style.setShadowOffset(i,e)}setShadowColor(i){return this.style.setShadowColor(i)}setShadowBlur(i){return this.style.setShadowBlur(i)}setShadowStroke(i){return this.style.setShadowStroke(i)}setShadowFill(i){return this.style.setShadowFill(i)}setWrapMode(i){return this.style.setWrapMode(i)}setWrapWidth(i){return this.style.setWrapWidth(i)}setAlign(i){return this.style.setHAlign(i)}setHAlign(i){return this.style.setHAlign(i)}setVAlign(i){return this.style.setVAlign(i)}setLineSpacing(i){return this.style.setLineSpacing(i)}setXOffset(i){return this.style.setXOffset(i)}setPadding(i,e,c,t){if(typeof i=="object"){var s=i,u=he(s,"x",null);u!==null?(i=u,c=u):(i=he(s,"left",0),c=he(s,"right",i));var n=he(s,"y",null);n!==null?(e=n,t=n):(e=he(s,"top",0),t=he(s,"bottom",e))}else i===void 0&&(i=0),e===void 0&&(e=i),c===void 0&&(c=i),t===void 0&&(t=e);return this.padding.left=i,this.padding.top=e,this.padding.right=c,this.padding.bottom=t,this.updateText(!1)}setMaxLines(i){return this.style.setMaxLines(i)}setResolution(i){return this.style.setResolution(i)}updateText(i){i===void 0&&(i=!0);var e=this.canvasText,c=this.style;i&&e.updatePenManager(this._text,c.wrapMode,c.wrapWidth,c.lineHeight);var t=this.padding,s,u;c.fixedWidth===0?(this.width=e.linesWidth+t.left+t.right,s=e.linesWidth):(this.width=c.fixedWidth,s=this.width-t.left-t.right,s<e.linesWidth&&(s=e.linesWidth)),c.fixedHeight===0?(this.height=e.linesHeight+t.top+t.bottom,u=e.linesHeight):(this.height=c.fixedHeight,u=this.height-t.top-t.bottom,u<e.linesHeight&&(u=e.linesHeight));var n=this.width,h=this.height;this.updateDisplayOrigin();var o=c.resolution;n*=o,h*=o,n=Math.max(Math.ceil(n),1),h=Math.max(Math.ceil(h),1);var r=this.canvas,a=this.context;r.width!==n||r.height!==h?(r.width=n,r.height=h,this.frame.setSize(n,h)):a.clearRect(0,0,n,h),a.save(),a.scale(o,o);var d=this.style.rtl?t.right:t.left,l=t.top;e.draw(d,l,s,u),a.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(r,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=this.width,f.hitArea.height=this.height),this}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(i,e){return this.style.setTextMetrics(i,e)}toJSON(){var i=Ft.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return i.data=e,i}setInteractive(i,e,c){return fo.prototype.setInteractive.call(this,i,e,c),this.canvasText.setInteractive(),this}getWrappedText(i,e,c){return i=this.canvasText.getText(i,e,c,!0),i.split(pd)}getPlainText(i,e,c){return this.canvasText.getPlainText(i,e,c)}getText(i,e,c,t){return t===void 0&&(t=!1),this.canvasText.getText(i,e,c,t)}getSubString(i,e,c){return this.getText(i,e,c)}copyPenManager(i){return this.canvasText.copyPenManager(i)}getPenManager(i,e){return this.canvasText.getPenManager(i,e)}setSize(i,e){return this.setFixedSize(i,e)}resize(i,e){return this.setFixedSize(i,e)}set lineSpacing(i){this.setLineSpacing(i)}get lineSpacing(){return this.style.lineSpacing}get imageManager(){return this._imageManager||(this._imageManager=new Dn(this.scene)),this._imageManager}addImage(i,e){return this.imageManager.add(i,e),this}drawAreaBounds(i,e){return this.canvasText.hitAreaManager.drawBounds(i,e,this),this}measureTextMargins(i,e){return Hf(this.style,i,e)}}const Ft=Phaser.GameObjects.Components;Phaser.Class.mixin(wn,[Ft.Alpha,Ft.BlendMode,Ft.ComputedSize,Ft.Crop,Ft.Depth,Ft.Flip,Ft.GetBounds,Ft.Mask,Ft.Origin,Ft.Pipeline,Ft.ScrollFactor,Ft.Tint,Ft.Transform,Ft.Visible,Wf]);var gd={plainText:null,prevProp:null},xd=new Rn,md={},yd={splitText:function(x,i){for(var e=[],c=0;;){var t=Nn.exec(x);if(!t){var s=x.length;return c<s&&e.push(x.substring(c,s)),e}var u=t[0],n=Nn.lastIndex-u.length;c<n&&e.push(x.substring(c,n)),i===void 0&&e.push(u),c=Nn.lastIndex}},tagTextToProp:function(x,i){var e,c;i==null&&(i={}),i.img&&ct(i,jt,"img"),Cd.test(x)?(ct(i,Ut,"b",!0),e=""):Sd.test(x)?(ct(i,jt,"b"),e=""):Ed.test(x)?(ct(i,Ut,"i",!0),e=""):Pd.test(x)?(ct(i,jt,"i"),e=""):vo.test(x)?(c=x.match(vo),ct(i,Ut,"size",`${c[1]}px`),e=""):Md.test(x)?(ct(i,jt,"size"),e=""):co.test(x)?(c=x.match(co),ct(i,Ut,"color",c[1]),e=""):Rd.test(x)?(ct(i,jt,"color"),e=""):po.test(x)?(c=x.match(po),ct(i,Ut,"u",!0),e=""):go.test(x)?(c=x.match(go),ct(i,Ut,"u",c[1]),e=""):Ad.test(x)?(ct(i,jt,"u"),e=""):Od.test(x)?(ct(i,Ut,"shadow",!0),e=""):Ld.test(x)?(ct(i,jt,"shadow"),e=""):Fd.test(x)?(ct(i,Ut,"stroke",!0),e=""):xo.test(x)?(c=x.match(xo),ct(i,Ut,"stroke",c[1]),e=""):Id.test(x)?(ct(i,jt,"stroke"),e=""):mo.test(x)?(c=x.match(mo),ct(i,Ut,"y",parseFloat(c[1])),e=""):Bd.test(x)?(ct(i,jt,"y"),e=""):yo.test(x)?(c=x.match(yo),ct(i,Ut,"img",c[1]),e=""):Dd.test(x)?(ct(i,jt,"img"),e=""):To.test(x)?(c=x.match(To),ct(i,Ut,"area",c[1]),e=""):Gd.test(x)?(ct(i,jt,"area"),e=""):Co.test(x)?(c=x.match(Co),ct(i,Ut,"align",c[1]),e=""):wd.test(x)?(ct(i,jt,"align"),e=""):e=x;var t=gd;return t.plainText=e,t.prop=i,t},propToContextStyle:function(x,i){var e=xd;if(i.hasOwnProperty("img"))e.image=i.img;else{if(e.image=null,i.hasOwnProperty("family")?e.fontFamily=i.family:e.fontFamily=x.fontFamily,i.hasOwnProperty("size")){var c=i.size;typeof c=="number"&&(c=`${c}px`),e.fontSize=c}else e.fontSize=x.fontSize;e.fontStyle=Td(i.b,i.i),i.hasOwnProperty("color")?e.color=i.color:e.color=x.color,i.hasOwnProperty("stroke")?i.stroke===!0?(e.stroke=x.stroke,e.strokeThickness=x.strokeThickness):(e.stroke=i.stroke,e.strokeThickness=x.strokeThickness):(e.stroke=x.stroke,e.strokeThickness=0)}return i.hasOwnProperty("shadow")?i.shadow===!0?(e.shadowColor=x.shadowColor,e.shadowOffsetX=x.shadowOffsetX,e.shadowOffsetY=x.shadowOffsetY,e.shadowBlur=x.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor=i.shadow,e.shadowOffsetX=x.shadowOffsetX,e.shadowOffsetY=x.shadowOffsetY,e.shadowBlur=x.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor="#000",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowStroke=!1,e.shadowFill=!1),i.hasOwnProperty("u")?i.u===!0?(e.underlineColor=x.underlineColor,e.underlineThickness=x.underlineThickness,e.underlineOffset=x.underlineOffset):(e.underlineColor=i.u,e.underlineThickness=x.underlineThickness,e.underlineOffset=x.underlineOffset):(e.underlineColor="#000",e.underlineThickness=0,e.underlineOffset=0),e},propToTagText:function(x,i,e){e==null&&(e=md);var c=[];for(var t in e)i.hasOwnProperty(t)||c.push(`[/${t}]`);for(var t in i){var s=i[t];if(e[t]!==s)switch(t){case"size":c.push(`[size=${s.replace("px","")}]`);break;case"color":case"stroke":case"y":case"img":case"area":case"align":c.push(`[${t}=${s}]`);break;case"u":s===!0?c.push("[u]"):c.push(`[u=${s}]`);break;default:c.push(`[${t}]`);break}}return c.push(x),c.join("")}},ct=function(x,i,e,c){return i===Ut?x[e]=c:x.hasOwnProperty(e)&&delete x[e],x},Td=function(x,i){return x&&i?"bold italic":x?"bold":i?"italic":""},Nn=/\[b\]|\[\/b\]|\[i\]|\[\/i\]|\[size=(\d+)\]|\[\/size\]|\[color=([a-z]+|#[0-9abcdef]+)\]|\[\/color\]|\[u\]|\[u=([a-z]+|#[0-9abcdef]+)\]|\[\/u\]|\[shadow\]|\[\/shadow\]|\[stroke\]|\[stroke=([a-z]+|#[0-9abcdef]+)\]|\[\/stroke\]|\[y=([-.0-9]+)\]|\[\/y\]|\[img=([^\]]+)\]|\[\/img\]|\[area=([^\]]+)\]|\[\/area\]|\[align=([^\]]+)\]|\[\/align\]/ig,Cd=/\[b\]/i,Sd=/\[\/b\]/i,Ed=/\[i\]/i,Pd=/\[\/i\]/i,vo=/\[size=(\d+)\]/i,Md=/\[\/size\]/i,co=/\[color=([a-z]+|#[0-9abcdef]+)\]/i,Rd=/\[\/color\]/i,po=/\[u\]/i,go=/\[u=([a-z]+|#[0-9abcdef]+)\]/i,Ad=/\[\/u\]/i,Od=/\[shadow\]/i,Ld=/\[\/shadow\]/i,Fd=/\[stroke\]/i,xo=/\[stroke=([a-z]+|#[0-9abcdef]+)\]/i,Id=/\[\/stroke\]/i,mo=/\[y=([-.0-9]+)\]/i,Bd=/\[\/y\]/i,yo=/\[img=([^\]]+)\]/i,Dd=/\[\/img\]/i,To=/\[area=([^\]]+)\]/i,Gd=/\[\/area\]/i,Co=/\[align=([^\]]+)\]/i,wd=/\[\/align\]/i;const jt=!1,Ut=!0;class So extends wn{constructor(i,e,c,t,s){super(i,e,c,t,s,"rexBBCodeText",yd)}}et.register("BBCodeText",function(x,i,e,c){var t=new So(this.scene,x,i,e,c);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.BBCodeText",So);var Nd={plainText:null,prevProp:null},zd=new Rn;class Vd{constructor(i){i===void 0&&(i={}),this.tags=i}addTag(i,e){this.tags[i]=e}splitText(i,e){for(var c=[],t=0;;){var s=zn.exec(i);if(!s){var u=i.length;return t<u&&c.push(i.substring(t,u)),c}var n=s[0],h=zn.lastIndex-n.length;if(t<h&&c.push(i.substring(t,h)),e===void 0)c.push(n);else if(e===1){if(Po.test(n)){var o=n.match(Mo);c.push(o[2])}else if(Ro.test(n)){var o=n.match(Ao);c.push(o[2])}}t=zn.lastIndex}}tagTextToProp(i,e){var c,t;if(Po.test(i)){var s=i.match(Mo);if(s!=null){var u=s[1],n=this.tags;n.hasOwnProperty(u)?t=n[u]:t={},t._class=u,c=s[2]}}else if(Ro.test(i)){var s=i.match(Ao);if(s!=null){var h=s[1];t=Yd(h),t._style=h,c=s[2]}}c==null&&(c=i),t==null&&(t={});var o=Nd;return o.plainText=c,o.prop=t,o}propToContextStyle(i,e){var c=zd;if(e.hasOwnProperty("img"))c.image=e.img;else{if(c.image=null,e.hasOwnProperty("family")||e.hasOwnProperty("fontFamily")||e.hasOwnProperty("font-family")){var t=e.hasOwnProperty("family")?e.family:e.hasOwnProperty("fontFamily")?e.fontFamily:e["font-family"];c.fontFamily=t}else c.fontFamily=i.fontFamily;if(e.hasOwnProperty("size")||e.hasOwnProperty("fontSize")||e.hasOwnProperty("font-size")){var s=e.hasOwnProperty("size")?e.size:e.hasOwnProperty("fontSize")?e.fontSize:e["font-size"];typeof s=="number"&&(s=`${s}px`),c.fontSize=s}else c.fontSize=i.fontSize;if(e.hasOwnProperty("style")||e.hasOwnProperty("fontStyle")||e.hasOwnProperty("font-style")){var u=e.hasOwnProperty("style")?e.style:e.hasOwnProperty("fontStyle")?e.fontStyle:e["font-style"];c.fontStyle=u}else c.fontStyle=i.fontStyle;if(e.hasOwnProperty("color")||e.hasOwnProperty("font-color")){var n=e.hasOwnProperty("color")?e.color:e["font-color"];c.color=n}else c.color=i.color;if(e.hasOwnProperty("stroke")){var h=e.stroke;c.stroke=h.hasOwnProperty("color")?h.color:i.stroke,c.strokeThickness=h.hasOwnProperty("thinkness")?h.thinkness:i.strokeThickness}else c.stroke=i.stroke,c.strokeThickness=i.strokeThickness}if(e.hasOwnProperty("shadow")){var o=e.shadow;c.shadowColor=o.hasOwnProperty("color")?o.color:i.shadowColor,c.shadowOffsetX=o.hasOwnProperty("offsetX")?o.offsetX:i.shadowOffsetX,c.shadowOffsetY=o.hasOwnProperty("offsetY")?o.offsetY:i.shadowOffsetY,c.shadowBlur=o.hasOwnProperty("blur")?o.blur:i.shadowBlur,c.shadowStroke=!0,c.shadowFill=!0}else c.shadowColor=i.shadowColor,c.shadowOffsetX=i.shadowOffsetX,c.shadowOffsetY=i.shadowOffsetY,c.shadowBlur=i.shadowBlur,c.shadowStroke=i.shadowStroke,c.shadowFill=i.shadowFill;if(e.hasOwnProperty("u")||e.hasOwnProperty("underline")){var r=e.hasOwnProperty("u")?e.u:e.underline;c.underlineColor=r.hasOwnProperty("color")?r.color:i.underlineColor,c.underlineThickness=r.hasOwnProperty("thinkness")?r.thinkness:i.underlineThickness,c.underlineOffset=r.hasOwnProperty("offset")?r.offset:i.underlineOffset}else c.underlineColor=i.underlineColor,c.underlineThickness=i.underlineThickness,c.underlineOffset=i.underlineOffset;return c}propToTagText(i,e,c){return e.hasOwnProperty("_class")?i===""&&this.isTextTag(e._class)?"":`<class='${e._class}'>${i}</class>`:e.hasOwnProperty("_style")?`<style='${e._style}'>${i}</style>`:i}destroy(){this.tags=void 0}isTextTag(i){var e=this.tags[i];return e?e.img==null:!1}}var Yd=function(x){x=x.split(";");for(var i={},e,c,t,s=0,u=x.length;s<u;s++)if(e=x[s].split(":"),c=e[0],t=e[1],!(Eo(c)||Eo(t))){switch(c){case"stroke":var n=t.split(" "),h=n.length;t={},h>=1&&(t.color=n[0]),h>=2&&(t.thinkness=parseInt(n[1].replace("px","")));break;case"shadow":var o=t.split(" "),h=o.length;t={},h>=1&&(t.color=o[0]),h>=2&&(t.offsetX=parseInt(o[1].replace("px",""))),h>=3&&(t.offsetY=parseInt(o[2].replace("px",""))),h>=4&&(t.blur=parseInt(o[3].replace("px","")));break;case"u":case"underline":var r=t.split(" "),h=r.length;t={},h>=1&&(t.color=r[0]),h>=2&&(t.thinkness=parseInt(r[1].replace("px",""))),h>=3&&(t.offset=parseInt(r[2].replace("px","")));break;case"y":t=parseFloat(t);break}i[c]=t}return i},Eo=function(x){return x=x.replace(Ud,""),x.length===0},zn=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,Po=/<\s*class=/i,Mo=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,Ro=/<\s*style=/i,Ao=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,Ud=/^\s+|\s+$/;const Xd=Phaser.Utils.Objects.GetValue;class Oo extends wn{constructor(i,e,c,t,s){var u=Xd(s,"tags",void 0),n=new Vd(u);super(i,e,c,t,s,"rexTagText",n);this.parser=n}addTag(i,e){return this.parser.addTag(i,e),this.updateText(!0)}addTags(i){for(var e in i)this.parser.addTag(e,i[e]);return this.updateText(!0)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}et.register("tagText",function(x,i,e,c){var t=new Oo(this.scene,x,i,e,c);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.TagText",Oo);const Wd=Phaser.GameObjects.Zone,bd=Phaser.Utils.Array.Add,Hd=Phaser.Utils.Array.Remove;class Ni extends Wd{constructor(i,e,c,t,s){e===void 0&&(e=0),c===void 0&&(c=0),t===void 0&&(t=1),s===void 0&&(s=1);super(i,e,c,t,s);this.children=[]}destroy(i){if(!!this.scene){if(i)for(var e,c=this.children.length-1;c>=0;c--)e=this.children[c],!e.parentContainer&&!e.displayList&&e.destroy(i);this.clear(!i),super.destroy(i)}}contains(i){return this.children.indexOf(i)!==-1}add(i){var e=this;return bd(this.children,i,0,function(c){c.once("destroy",e.onChildDestroy,e)},this),this}remove(i,e){var c=this;return Hd(this.children,i,function(t){t.off("destroy",c.onChildDestroy,c),e&&t.destroy()}),this}onChildDestroy(i,e){this.remove(i,!1)}clear(i){for(var e=this,c,t=0,s=this.children.length;t<s;t++)c=this.children[t],c.off("destroy",e.onChildDestroy,e),i&&c.destroy();return this.children.length=0,this}}const Lo=Phaser.GameObjects.Components;Phaser.Class.mixin(Ni,[Lo.Alpha,Lo.Flip]);var Qe=function(x){var i;return x.hasOwnProperty("rexContainer")&&(i=x.rexContainer.parent),i},Fo=function(x){for(var i=Qe(x);i;)x=i,i=Qe(i);return x};const $d=Phaser.Math.DegToRad,Kd=Phaser.Math.RadToDeg;var dt=function(x){if(!x.hasOwnProperty("rexContainer")){var i={parent:null,self:null,x:0,y:0,rotation:0,scaleX:0,scaleY:0,alpha:0,visible:!0,active:!0};Object.defineProperty(i,"angle",{get:function(){return Kd(this.rotation)},set:function(e){this.rotation=$d(e)}}),Object.defineProperty(i,"displayWidth",{get:function(){return x.width*this.scaleX},set:function(e){this.scaleX=e/x.width}}),Object.defineProperty(i,"displayHeight",{get:function(){return x.height*this.scaleY},set:function(e){this.scaleY=e/x.height}}),x.rexContainer=i}return x.rexContainer},Zd={setParent(x,i){i===void 0&&(i=this);var e=dt(x);return i?(e.parent=i,e.self=x):(e.parent=null,e.self=null),this},getParent(x){return x===void 0&&(x=this),Qe(x)},getTopmostParent(x){return x===void 0&&(x=this),Fo(x)}};const Io=Ni.prototype.add;var Bo=function(x){return this.setParent(x),this.resetChildState(x).updateChildVisible(x).updateChildActive(x).updateChildScrollFactor(x).updateChildMask(x),Io.call(this,x),this},Do=function(x){this.setParent(x);var i=dt(x);return i.x=x.x,i.y=x.y,i.rotation=x.rotation,i.scaleX=x.scaleX,i.scaleY=x.scaleY,i.alpha=x.alpha,i.visible=x.visible,i.active=x.active,this.updateChildPosition(x).updateChildAlpha(x).updateChildVisible(x).updateChildActive(x).updateChildScrollFactor(x).updateChildMask(x),Io.call(this,x),this},Jd={add(x){return Array.isArray(x)?this.addMultiple(x):Bo.call(this,x),this},addMultiple(x){for(var i=0,e=x.length;i<e;i++)Bo.call(this,x[i]);return this},addLocal(x){return Array.isArray(x)?this.addMultiple(x):Do.call(this,x),this},addLocalMultiple(x){for(var i=0,e=x.length;i<e;i++)Do.call(this,x[i]);return this}};const Qd=Ni.prototype.remove,jd=Ni.prototype.clear;var kd={remove(x,i){return Qe(x)!==this?this:(this.setParent(x,null),Qd.call(this,x,i),this)},clear(x){for(var i=0,e=this.children.length;i<e;i++)this.setParent(this.children[i],null);return jd.call(this,x),this}},qd={getLocalState(x){return dt(x)},resetChildState(x){return this.resetChildPositionState(x).resetChildVisibleState(x).resetChildAlphaState(x).resetChildActiveState(x),this},resetChildrenState(x){for(var i=0,e=x.length;i<e;i++)this.resetChildState(x[i]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}};const Go=Phaser.Math.RotateAround;var _d={worldToLocal(x){return x.x-=this.x,x.y-=this.y,Go(x,0,0,-this.rotation),x.x/=this.scaleX,x.y/=this.scaleY,x},localToWorld(x){return x.x*=this.scaleX,x.y*=this.scaleY,Go(x,0,0,this.rotation),x.x+=this.x,x.y+=this.y,x}},zi=function(x,i){return x===i?1:x/i},tv={updateChildPosition(x){x.isRexContainerLite&&(x.syncChildrenEnable=!1);var i=dt(x),e=i.parent;return x.x=i.x,x.y=i.y,e.localToWorld(x),x.scaleX=i.scaleX*e.scaleX,x.scaleY=i.scaleY*e.scaleY,x.rotation=i.rotation+e.rotation,x.isRexContainerLite&&(x.syncChildrenEnable=!0,x.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(x){var i=dt(x),e=i.parent;return i.x=x.x,i.y=x.y,e.worldToLocal(i),i.scaleX=zi(x.scaleX,e.scaleX),i.scaleY=zi(x.scaleY,e.scaleY),i.rotation=x.rotation-e.rotation,this},setChildPosition(x,i,e){return x.x=i,x.y=e,this.resetChildPositionState(x),this},setChildLocalPosition(x,i,e){var c=dt(x);return c.x=i,c.y=e,this.updateChildPosition(x),this},resetLocalPositionState(){var x=dt(this).parent;return x&&x.resetChildPositionState(this),this}},ev={updateChildRotation(x){var i=dt(x),e=i.parent;return x.rotation=e.rotation+i.rotation,this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(x){var i=dt(x),e=i.parent;return i.rotation=x.rotation-e.rotation,this},setChildRotation(x,i){return x.rotation=i,this.resetChildRotationState(x),this},setChildAngle(x,i){return x.angle=i,this.resetChildRotationState(x),this},setChildLocalRotation(x,i){var e=dt(x);return e.rotation=i,this.updateChildRotation(x),this},resetLocalRotationState(){var x=dt(this).parent;return x&&x.resetChildRotationState(this),this}},iv={updateChildScale(x){var i=dt(x),e=i.parent;return x.scaleX=e.scaleX*i.scaleX,x.scaleY=e.scaleY*i.scaleY,this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(x){var i=dt(x),e=i.parent;return i.scaleX=zi(x.scaleX,e.scaleX),i.scaleY=zi(x.scaleY,e.scaleY),this},setChildScale(x,i,e){return e===void 0&&(e=i),x.scaleX=i,x.scaleY=e,this.resetChildScaleState(x),this},setChildLocalScale(x,i,e){e===void 0&&(e=i);var c=dt(x);return c.scaleX=i,c.scaleY=e,this.updateChildScale(x),this},setChildDisplaySize(x,i,e){return x.setDisplaySize(i,e),this.resetChildScaleState(x),this},resetLocalScaleState(){var x=dt(this).parent;return x&&x.resetChildScaleState(this),this}},sv={updateChildVisible(x){var i=dt(x),e=i.parent,c=i.hasOwnProperty("maskVisible")?i.maskVisible:!0;return x.visible=e.visible&&i.visible&&c,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(x){var i=dt(x);return i.hasOwnProperty("maskVisible")&&delete i.maskVisible,i.visible=x.visible,this},setChildVisible(x,i){return this.setChildLocalVisible(x,i),this},setChildLocalVisible(x,i){i===void 0&&(i=!0);var e=dt(x);return e.visible=i,this.updateChildVisible(x),this},setChildMaskVisible(x,i){i===void 0&&(i=!0);var e=dt(x);return e.maskVisible=i,this.updateChildVisible(x),this},resetLocalVisibleState(){var x=dt(this).parent;return x&&x.resetChildVisibleState(this),this}},nv={updateChildAlpha(x){var i=dt(x),e=i.parent;return x.alpha=e.alpha*i.alpha,this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(x){var i=dt(x),e=i.parent;return i.alpha=zi(x.alpha,e.alpha),this},setChildAlpha(x,i){return x.alpha=i,this.resetChildAlphaState(x),this},setChildLocalAlpha(x,i){var e=dt(x);return e.alpha=i,this.updateChildAlpha(x),this},resetLocalAlphaState(){var x=dt(this).parent;return x&&x.resetChildAlphaState(this),this}},rv={updateChildActive(x){var i=dt(x),e=i.parent;return x.active=e.active&&i.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(x){var i=dt(x);return i.active=x.active,this},setChildActive(x,i){return x.active=i,this.resetChildActiveState(x),this},setChildLocalActive(x,i){i===void 0&&(i=!0);var e=dt(x);return e.active=i,this.updateChildActive(x),this},resetLocalActiveState(){var x=dt(this).parent;return x&&x.resetChildActiveState(this),this}},av={updateChildScrollFactor(x){var i=dt(x),e=i.parent;return x.setScrollFactor(e.scrollFactorX,e.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},ov={updateChildMask(x){if(this.mask==null)return this;var i=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return i!==x&&(x.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(x){return this.mask=x,this},clearMask(x){return x===void 0&&(x=!1),x&&this.mask&&this.mask.destroy(),this.mask=null,this}},ms=function(x,i){if(x.length===0)return x;i===void 0&&(i=!1);var e=x[0].scene,c=e.sys.displayList;return c.depthSort(),i?x.sort(function(t,s){return c.getIndex(s)-c.getIndex(t)}):x.sort(function(t,s){return c.getIndex(t)-c.getIndex(s)}),x},hv={setDepth(x,i){if(this.depth=x,!i&&this.children)for(var e=this.getAllChildren(),c=0,t=e.length;c<t;c++)e[c].depth=x;return this},swapDepth(x){var i=this.depth,e=x.depth;return this.setDepth(e),x.setDepth(i),this},incDepth(x){if(this.depth+=x,this.children)for(var i=this.getAllChildren(),e=0,c=i.length;e<c;e++)i[e].depth+=x;return this},moveDepthBelow(x){var i=x.scene.children,e=this.getAllChildren([this]);ms(e);for(var c=0,t=e.length;c<t;c++){var s=e[c];if(i.exists(s)){i.moveBelow(x,s);break}}return this},moveDepthAbove(x){var i=x.scene.children,e=this.getAllChildren([this]);ms(e,!0);for(var c=0,t=e.length;c<t;c++){var s=e[c];if(i.exists(s)){i.moveAbove(x,s);break}}return this}};const je=Phaser.Utils.Array;var lv={getChildren(x){if(!x)x=this.children;else for(var i=0,e=this.children.length;i<e;i++)x.push(this.children[i]);return x},getAllChildren(x){x===void 0&&(x=[]);for(var i=this.children,e,c=0,t=i.length;c<t;c++)e=i[c],x.push(e),e.hasOwnProperty("isRexContainerLite")&&x.push(...e.getAllChildren());return x},getAllVisibleChildren(x){x===void 0&&(x=[]);for(var i=this.children,e,c=0,t=i.length;c<t;c++)e=i[c],!!e.visible&&(x.push(e),e.hasOwnProperty("isRexContainerLite")&&x.push(...e.getAllVisibleChildren()));return x},contains(x){var i=Qe(x);return i?i===this?!0:this.contains(i):!1},getByName(x,i){if(i){for(var e=[this],c,t;e.length;){c=e.shift();for(var s=0,u=c.children.length;s<u;s++){if(t=c.children[s],t.name===x)return t;t.isRexContainerLite&&e.push(t)}}return null}else return je.GetFirst(this.children,"name",x)},getRandom(x,i){return je.GetRandom(this.children,x,i)},getFirst(x,i,e,c){return je.GetFirstElement(this.children,x,i,e,c)},getAll(x,i,e,c){return je.GetAll(this.children,x,i,e,c)},count(x,i,e,c){return je.CountAllMatching(this.children,x,i,e,c)},swap(x,i){return je.Swap(this.children,x,i),this},setAll(x,i,e,c){return je.SetAll(this.children,x,i,e,c),this}},kt=function(x){return Object.prototype.toString.call(x)==="[object Array]"},uv={tweenChild(x){var i=x.targets;kt(i)||(i=[i]);for(var e,c=[],t,s=0,u=i.length;s<u;s++)t=i[s],!!t.hasOwnProperty("rexContainer")&&(e=t.scene,c.push(t.rexContainer));if(!!e){x.targets=c;var n=e.tweens.add(x),h=function(o,r,a){if(!a.parent){e.tweens.remove(o);return}var d=a.parent,l=a.self;switch(r){case"x":case"y":d.updateChildPosition(l);break;case"angle":case"rotation":d.updateChildRotation(l);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":d.updateChildScale(l);break;case"alpha":d.updateChildAlpha(l);break}};return n.on("update",h),n}},tween(x){var i=this.scene;return x.targets||(x.targets=this),i.tweens.add(x)}},wo=function(x){var i=this.getAllChildren([this]);return ms(i),x.add(i),this},fv={addToLayer:wo,addToContainer:wo};const dv=Phaser.Math.RotateAround;var vv=function(x,i,e){e===void 0&&(e=i);var c={x:(i-x.originX)*x.displayWidth,y:(e-x.originY)*x.displayHeight};return dv(c,0,0,x.rotation),x.originX=i,x.originY=e,x.x=x.x+c.x,x.y=x.y+c.y,x},cv=function(x,i){this.syncChildrenEnable=!1,vv(this,x,i),this.syncChildrenEnable=!0;for(var e=this.getAllChildren(),c=0,t=e.length;c<t;c++)this.resetChildPositionState(e[c]);return this},No={changeOrigin:cv};Object.assign(No,Zd,Jd,kd,qd,_d,tv,ev,iv,sv,nv,rv,av,ov,hv,lv,uv,fv);class $t extends Ni{constructor(i,e,c,t,s,u){super(i,e,c,t,s);this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,u&&this.add(u)}destroy(i){!this.scene||(this.syncChildrenEnable=!1,super.destroy(i))}resize(i,e){return this.setSize(i,e),this}get x(){return this._x}set x(i){this._x!==i&&(this._x=i,this.syncPosition())}get y(){return this._y}set y(i){this._y!==i&&(this._y=i,this.syncPosition())}get rotation(){return super.rotation}set rotation(i){this.rotation!==i&&(super.rotation=i,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(i){this.scaleX!==i&&(super.scaleX=i,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(i){this.scaleY!==i&&(super.scaleY=i,this.syncPosition())}get visible(){return super.visible}set visible(i){super.visible!==i&&(super.visible=i,this.syncVisible())}get alpha(){return super.alpha}set alpha(i){super.alpha!==i&&(super.alpha=i,this.syncAlpha())}get active(){return this._active}set active(i){this._active!==i&&(this._active=i,this.syncActive())}get mask(){return this._mask}set mask(i){this._mask!==i&&(this._mask=i,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(i){this._scrollFactorX!==i&&(this._scrollFactorX=i,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(i){this._scrollFactorY!==i&&(this._scrollFactorY=i,this.syncScrollFactor())}get list(){return this.children}static GetParent(i){return Qe(i)}}Object.assign($t.prototype,No);et.register("container",function(x,i,e,c,t){var s=new $t(this.scene,x,i,e,c,t);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.Container",$t);et.register("canvas",function(x,i,e,c){var t=new Ie(this.scene,x,i,e,c);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.Canvas",Ie);const ys=Phaser.Utils.Objects.GetValue;class zo extends Ie{constructor(i,e,c,t,s,u){super(i,e,c);this.type="rexCircleMaskImage",this.setTexture(t,s,u)}setTexture(i,e,c){typeof e=="object"&&(c=e,e=void 0);var t,s;if(typeof c=="string"?(t=c,s=void 0):(t=ys(c,"maskType",0),s=ys(c,"backgroundColor",void 0)),t===void 0?t=0:typeof t=="string"&&(t=pv[t]),this._textureKey=i,this._frameName=e,t===null)return this.loadTexture(i,e),this.dirty=!0,this;var u=s!=null;u||this.loadTexture(i,e);var n=this.canvas,h=this.context,o=n.width,r=n.height;switch(h.save(),h.globalCompositeOperation=u?"source-over":"destination-in",h.beginPath(),t){case 2:var a=ys(c,"radius",0),d=ys(c,"iteration",void 0);qa(h,0,0,o,r,a,d);break;default:var l=Math.floor(o/2),f=Math.floor(r/2);t===0?h.arc(l,f,Math.min(l,f),0,2*Math.PI):h.ellipse(l,f,l,f,0,0,2*Math.PI);break}return u&&(h.fillStyle=s),h.fill(),h.restore(),u&&(h.save(),h.globalCompositeOperation="destination-atop",this.loadTexture(i,e),h.restore()),this.dirty=!0,this}}const pv={circle:0,ellipse:1,roundRectangle:2};et.register("circleMaskImage",function(x,i,e,c,t){var s=new zo(this.scene,x,i,e,c,t);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.CircleMaskImage",zo);/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Rt=function(x,i,e){if(!x||typeof x=="number")return e;if(x.hasOwnProperty(i))return x[i];if(i.indexOf(".")!==-1){for(var c=i.split("."),t=x,s=e,u=0;u<c.length;u++)if(t.hasOwnProperty(c[u]))s=t[c[u]],t=t[c[u]];else{s=e;break}return s}else return e},Vo={enableData(){return this.data===void 0&&(this.data={}),this},getData(x,i){return this.enableData(),x===void 0?this.data:Rt(this.data,x,i)},setData(x,i){if(this.enableData(),arguments.length===1){var e=x;for(x in e)this.data[x]=e[x]}else this.data[x]=i;return this},incData(x,i,e){return e===void 0&&(e=0),this.enableData(),this.setData(x,this.getData(x,e)+i),this},mulData(x,i,e){return e===void 0&&(e=0),this.enableData(),this.setData(x,this.getData(x,e)*i),this},clearData(){return this.data&&fi(this.data),this},resetData(x){if(this.clearData(),x){this.enableData();for(var i in x)this.data[i]=x[i]}return this},cloneData(){return this.data?di(this.data):{}}};const gv=Phaser.Math.DegToRad,xv=Phaser.Math.RadToDeg,Ts=Phaser.Utils.Objects.GetValue;class vi{constructor(i,e){this.setParent(i),this.type=e,this.setActive().setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setDrawBelowCallback().setDrawAboveCallback(),this.originX=0,this.offsetX=0,this.offsetY=0}setParent(i){return this.parent=i,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(i){return i&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(i){this.setDirty(this._active!=i),this._active=i}setActive(i){return i===void 0&&(i=!0),this.active=i,this}get visible(){return this._visible}set visible(i){this.setDirty(this._visible!=i),this._visible=i}setVisible(i){return i===void 0&&(i=!0),this.visible=i,this}get alpha(){return this._alpha}set alpha(i){this.setDirty(this._alpha!=i),this._alpha=i}setAlpha(i){return this.alpha=i,this}get x(){return this._x}set x(i){this.setDirty(this._x!=i),this._x=i}setX(i){return this.x=i,this}get y(){return this._y}set y(i){this.setDirty(this._y!=i),this._y=i}setY(i){return this.y=i,this}setPosition(i,e){return this.x=i,this.y=e,this}get rotation(){return this._rotation}set rotation(i){this.setDirty(this._rotation!=i),this._rotation=i}setRotation(i){return this.rotation=i,this}get angle(){return xv(this._rotation)}set angle(i){this.rotation=gv(i)}setAngle(i){return this.angle=i,this}get scaleX(){return this._scaleX}set scaleX(i){this.setDirty(this._scaleX!==i),this._scaleX=i}setScaleX(i){return this.scaleX=i,this}get width(){return 0}set width(i){}setWidth(i,e){return e===void 0&&(e=!1),this.width=i,e&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(i){this.setDirty(this._leftSpace!==i),this._leftSpace=i}setLeftSpace(i){return this.leftSpace=i,this}get rightSpace(){return this._rightSpace}set rightSpace(i){this.setDirty(this._rightSpace!==i),this._rightSpace=i}setRightSpace(i){return this.rightSpace=i,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(i){this.setDirty(this._scaleY!==i),this._scaleY=i}setScaleY(i){return this.scaleY=i,this}get height(){return 0}set height(i){}setHeight(i,e){return e===void 0&&(e=!1),this.height=i,e&&(this.scaleX=this.scaleY),this}setScale(i,e){return e===void 0&&(e=i),this.scaleX=i,this.scaleY=e,this}modifyPorperties(i){if(!i)return this;i.hasOwnProperty("x")&&this.setX(i.x),i.hasOwnProperty("y")&&this.setY(i.y),i.hasOwnProperty("rotation")?this.setRotation(i.rotation):i.hasOwnProperty("angle")&&this.setAngle(i.angle),i.hasOwnProperty("alpha")&&this.setAlpha(i.alpha);var e=Ts(i,"width",void 0),c=Ts(i,"height",void 0),t=Ts(i,"scaleX",void 0),s=Ts(i,"scaleY",void 0);return e!==void 0&&(c===void 0&&s===void 0?this.setWidth(e,!0):this.setWidth(e)),c!==void 0&&(e===void 0&&t===void 0?this.setHeight(c,!0):this.setHeight(c)),t!==void 0&&e===void 0&&this.setScaleX(t),s!==void 0&&c===void 0&&this.setScaleY(s),i.hasOwnProperty("leftSpace")&&this.setLeftSpace(i.leftSpace),i.hasOwnProperty("rightSpace")&&this.setLeftSpace(i.rightSpace),this}setOrigin(i){return this.originX=i,this}setDrawBelowCallback(i){return this.drawBelowCallback=i,this}setDrawAboveCallback(i){return this.drawAboveCallback=i,this}onFree(){this.setParent().setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setDrawBelowCallback().setDrawAboveCallback()}drawContent(){}draw(){var i=this.context;i.save();var e=this.x+this.leftSpace+this.offsetX-this.originX*this.width,c=this.y+this.offsetY;this.autoRound&&(e=Math.round(e),c=Math.round(c)),i.translate(e,c),i.globalAlpha=this.alpha,i.scale(this.scaleX,this.scaleY),i.rotate(this.rotation),this.drawBelowCallback&&this.drawBelowCallback.call(this),this.drawContent(),this.drawAboveCallback&&this.drawAboveCallback.call(this),i.restore()}}Object.assign(vi.prototype,Vo);const ke=Phaser.Utils.Objects.GetValue;class mv extends vi{constructor(i,e){super(i,"background");this.setColor(ke(e,"color",null),ke(e,"color2",null),ke(e,"horizontalGradient",!0)),this.setStroke(ke(e,"stroke",null),ke(e,"strokeThickness",2)),this.setCornerRadius(ke(e,"cornerRadius",0),ke(e,"cornerIteration",null))}set color(i){i=ht(i,this.canvas,this.context),this.setDirty(this._color!=i),this._color=i}get color(){return this._color}set color2(i){i=ht(i,this.canvas,this.context),this.setDirty(this._color2!=i),this._color2=i}get color2(){return this._color2}set horizontalGradient(i){this.setDirty(this._horizontalGradient!=i),this._horizontalGradient=i}get horizontalGradient(){return this._horizontalGradient}setColor(i,e,c){return c===void 0&&(c=!0),this.color=i,this.color2=e,this.horizontalGradient=c,this}set stroke(i){i=ht(i,this.canvas,this.context),this.setDirty(this._stroke!=i),this._stroke=i}get stroke(){return this._stroke}set strokeThickness(i){this.setDirty(this._strokeThickness!=i),this._strokeThickness=i}get strokeThickness(){return this._strokeThickness}setStroke(i,e){return this.stroke=i,this.strokeThickness=e,this}set cornerRadius(i){this.setDirty(this._cornerRadius!=i),this._cornerRadius=i}get cornerRadius(){return this._cornerRadius}set cornerIteration(i){this.setDirty(this._cornerIteration!=i),this._cornerIteration=i}get cornerIteration(){return this._cornerIteration}setCornerRadius(i,e){return this.cornerRadius=i,this.cornerIteration=e,this}drawContent(){Pn(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const Vi=Phaser.Utils.Objects.GetValue;class yv extends vi{constructor(i,e){super(i,"background");this.setColor(Vi(e,"color",null),Vi(e,"color2",null),Vi(e,"horizontalGradient",!0)),this.setStroke(Vi(e,"stroke",null),Vi(e,"strokeThickness",2))}set color(i){i=ht(i,this.canvas,this.context),this.setDirty(this._color!=i),this._color=i}get color(){return this._color}set color2(i){i=ht(i,this.canvas,this.context),this.setDirty(this._color2!=i),this._color2=i}get color2(){return this._color2}set horizontalGradient(i){this.setDirty(this._horizontalGradient!=i),this._horizontalGradient=i}get horizontalGradient(){return this._horizontalGradient}setColor(i,e,c){return c===void 0&&(c=!0),this.color=i,this.color2=e,this.horizontalGradient=c,this}set stroke(i){i=ht(i,this.canvas,this.context),this.setDirty(this._stroke!=i),this._stroke=i}get stroke(){return this._stroke}set strokeThickness(i){this.setDirty(this._strokeThickness!=i),this._strokeThickness=i}get strokeThickness(){return this._strokeThickness}setStroke(i,e){return this.stroke=i,this.strokeThickness=e,this}drawContent(){var i=this.parent.padding,e=i.left,c=i.top,t=this.parent.width-i.left-i.right,s=this.parent.height-i.top-i.bottom,u=this.context;if(this.color!=null){var n;if(this.color2!=null){var h;this.horizontalGradient?h=u.createLinearGradient(0,0,t,0):h=u.createLinearGradient(0,0,0,s),h.addColorStop(0,this.color),h.addColorStop(1,this.color2),n=h}else n=this.color;u.fillStyle=n,u.fillRect(e,c,t,s)}this.stroke!=null&&this.strokeThickness>0&&(u.strokeStyle=this.stroke,u.lineWidth=this.strokeThickness,u.strokeRect(e,c,t,s))}}var Cs=function(x,i,e){return i.hasOwnProperty(x)?i[x]:e[x]};const Kt=Phaser.Utils.Objects.GetValue;class Yo{constructor(i){this.set(i)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY}}set(i){this.setBold(Kt(i,"bold",!1)),this.setItalic(Kt(i,"italic",!1)),this.setFontSize(Kt(i,"fontSize","16px")),this.setFontFamily(Kt(i,"fontFamily","Courier")),this.setColor(Kt(i,"color","#fff")),this.setStrokeStyle(Kt(i,"stroke",null),Kt(i,"strokeThickness",0)),this.setShadow(Kt(i,"shadowColor",null),Kt(i,"shadowOffsetX",0),Kt(i,"shadowOffsetY",0),Kt(i,"shadowBlur",0)),this.setOffset(Kt(i,"offsetX",0),Kt(i,"offsetY",0))}modify(i){return i.hasOwnProperty("bold")&&this.setBold(i.bold),i.hasOwnProperty("italic")&&this.setItalic(i.italic),i.hasOwnProperty("fontSize")&&this.setFontSize(i.fontSize),i.hasOwnProperty("fontFamily")&&this.setFontFamily(i.fontFamily),i.hasOwnProperty("color")&&this.setColor(i.color),(i.hasOwnProperty("stroke")||i.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(Cs("stroke",i,this),Cs("strokeThickness",i,this)),i.hasOwnProperty("shadowColor")&&this.setShadowColor(i.shadowColor),(i.hasOwnProperty("shadowOffsetX")||i.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(Cs("shadowOffsetX",i,this),Cs("shadowOffsetY",i,this)),i.hasOwnProperty("shadowBlur")&&this.setShadowBlur(i.shaodwBlur),i.hasOwnProperty("offsetX")&&this.setOffsetX(i.offsetX),i.hasOwnProperty("offsetY")&&this.setOffsetY(i.offsetY),this}setBold(i){return i===void 0&&(i=!0),this.bold=i,this}setItalic(i){return i===void 0&&(i=!0),this.italic=i,this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(i){return typeof i=="number"&&(i=`${i}px`),this.fontSize=i,this}setFontFamily(i){return this.fontFamily=i,this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(i){return this.color=ht(i),this}get hasFill(){return this.color!=null}setStrokeStyle(i,e){return this.stroke=ht(i),e!==void 0&&(this.strokeThickness=e),this}setStrokeThickness(i){return this.strokeThickness=i,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(i){return this.shadowColor=ht(i),this}setShadowOffset(i,e){return i===void 0&&(i=0),e===void 0&&(e=0),this.shadowOffsetX=i,this.shadowOffsetY=e,this}setShadowBlur(i){return i===void 0&&(i=0),this.shaodwBlur=i,this}setShadow(i,e,c,t){return this.setShadowColor(i).setShadowOffset(e,c).setShadowBlur(t),this}setOffsetX(i){return i===void 0&&(i=0),this.offsetX=i,this}setOffsetY(i){return i===void 0&&(i=0),this.offsetY=i,this}setOffset(i,e){return this.setOffsetX(i).setOffsetY(e),this}syncFont(i){return i.font=this.font,this}syncStyle(i){i.textBaseline="alphabetic";var e=this.hasFill,c=this.hasStroke;return i.fillStyle=e?this.color:"#000",i.strokeStyle=c?this.stroke:"#000",i.lineWidth=c?this.strokeThickness:0,i.lineCap="round",i.lineJoin="round",this}syncShadow(i){i.shadowColor!=null?(i.shadowColor=this.shadowColor,i.shadowOffsetX=this.shadowOffsetX,i.shadowOffsetY=this.shadowOffsetY,i.shadowBlur=this.shadowBlur):(i.shadowColor=0,i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0)}getTextMetrics(i,e){return this.syncFont(i).syncStyle(i),i.measureText(e)}}const Ss=Phaser.Utils.Objects.GetValue;var Es=function(x,i){return i===void 0?x:x[i]},Ps=function(x,i,e){var c=typeof i;c==="string"?x[i]=e:c==="number"?(x.left=i,x.right=i,x.top=i,x.bottom=i):(x.left=Ss(i,"left",0),x.right=Ss(i,"right",0),x.top=Ss(i,"top",0),x.bottom=Ss(i,"bottom",0))},Tv=function(x,i){var e=this.padding,c=e.left,t=e.right,s=e.top,u=e.bottom;return Ps(this.padding,x,i),this.dirty=this.dirty||c!=this.padding.left||t!=this.padding.right||s!=this.padding.top||u!=this.padding.bottom,this},Cv=function(x){return Es(this.padding,x)},Sv=function(x){return this.textStyle.modify(x),this},Ev=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},Pv=function(){return this.setText(),this};const Yi="text",Vn="image",Yn="command";var Un=function(x){var i=x.type;return i===Yi||i===Vn},Uo=function(x){return x.type===Yi&&x.text===`
`},Mv=function(x){return x.type===Yn};class Rv extends vi{constructor(i,e,c){super(i,Yi);this.style=new Yo(c),this.setText(e)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(i){}get offsetY(){return this.style.offsetY}set offsetY(i){}modifyStyle(i){return this.setDirty(!0),this.style.modify(i),this}modifyPorperties(i){return i?(this.modifyStyle(i),super.modifyPorperties(i),this):this}setText(i){return this.setDirty(this.text!=i),this.text=i,this.updateTextSize(),this}updateTextSize(){if(this.text===`
`||this.text==="")this.textWidth=0,this.textHeight=0;else{var i=this.style.getTextMetrics(this.context,this.text);this.textWidth=i.width;var e,c;i.hasOwnProperty("actualBoundingBoxAscent")?(e=i.actualBoundingBoxAscent,c=i.actualBoundingBoxDescent):(e=0,c=0),this.textHeight=e+c}return this}get width(){return this.textWidth*this.scaleX}set width(i){this.textWidth>0?this.scaleX=i/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(i){this.textHeight>0?this.scaleY=i/this.textHeight:this.scaleY=1}drawContent(){var i=this.style,e=i.hasFill,c=i.hasStroke;if(!(!e&&!c)){var t=this.context;i.syncFont(t).syncStyle(t),c&&(i.syncShadow(t),t.strokeText(this.text,0,0)),e&&(i.syncShadow(t),t.fillText(this.text,0,0))}}draw(){if(!this.visible||this.text===""||this.text===`
`)return this;super.draw()}}var Ms=function(x,i){i&&this.textStyle.modify(i),this.lastAppendedChildren.length=0;for(var e=0,c=x.length;e<c;e++){var t=x.charAt(e),s=this.poolManager.allocate(Yi);s===null?s=new Rv(this,t,this.textStyle):s.setParent(this).setActive().modifyStyle(this.textStyle).setText(t),this.children.push(s),this.lastAppendedChildren.push(s)}return this},Av=function(x,i){return x===void 0&&(x=""),this.removeChildren(),Ms.call(this,x,i),this.dirty=!0,this};class Ov extends vi{constructor(i,e,c){super(i,Vn);this.setTexture(e,c)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(i){}get key(){return this._key}set key(i){this.setDirty(this._key!=i),this._key=i}get frame(){return this._frame}set frame(i){this.setDirty(this._frame!=i),this._frame=i}setTexture(i,e){return this.key=i,this.frame=e,this.frameObj=this.scene.textures.getFrame(i,e),this}get width(){return this.frameWidth*this.scaleX}set width(i){this.setDirty(this.width!==i),this.scaleX=i/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(i){this.setDirty(this.height!==i),this.scaleY=i/this.frameHeight}setHeight(i,e){return e===void 0&&(e=!1),this.height=i,e&&(this.scaleX=this.scaleY),this}drawContent(){var i=this.context,e=this.frameObj;i.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight)}draw(){if(!this.visible)return this;super.draw()}}var Xo=function(x,i,e){var c=this.poolManager.allocate(Vn);return c===null?c=new Ov(this,x,i):c.setParent(this).setActive().setTexture(x,i),c.modifyPorperties(e),this.lastAppendedChildren.length=0,this.children.push(c),this.lastAppendedChildren.push(c),this};class Lv extends vi{constructor(i,e,c,t,s){super(i,Yn);this.setName(e).setParameter(t).setCallback(c,s)}setName(i){return this.name=i,this}setParameter(i){return this.param=i,this}setCallback(i,e){return this.callback=i,this.scope=e,this}exec(){var i;return this.scope?i=this.callback.call(this.scope,this.param,this.name):i=this.callback(this.param,this.name),i}draw(){}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var lt=function(x,i,e,c){var t=this.poolManager.allocate(Yn);return t===null?t=new Lv(this,x,i,e,c):t.setParent(this).setActive().setName(x).setCallback(i,c).setParameter(e),this.lastAppendedChildren.length=0,this.children.push(t),this.lastAppendedChildren.push(t),this},Fv=function(x){return this.wrapConfig=x,this},Wo=function(x,i){if(!i)return x;x==null&&(x={});for(var e in i)x.hasOwnProperty(e)||(x[e]=i[e]);return x},Iv=function(x,i,e,c){c===void 0&&(c={word:[],width:0}),c.word.length=0;for(var t=x.length,s=i,u=c.word,n=0;s<t;){var h=x[s];if(h.type===Yi&&h.text!==" "&&h.text!==`
`)u.push(h),n+=h.outerWidth,s++;else{s===i&&(u.push(h),n+=h.outerWidth);break}if(e)break}return c.width=n,c};const bo={left:0,center:1,right:2},Ho={top:0,center:1,bottom:2};var Bv=function(x,i,e){var c=x.hAlign,t=x.vAlign;if(typeof c=="string"&&(c=bo[c],x.hAlign=c),typeof t=="string"&&(t=Ho[t],x.vAlign=t),c!==0)for(var s=x.lines,u=0,n=s.length;u<n;u++){var h=s[u],o=h.width,r=h.children,a;switch(c){case 1:a=(i-o)/2;break;case 2:a=i-o;break}for(var d=0,l=r.length;d<l;d++){var f=r[d];f.x+=a}}if(t!==0){var v=x.linesHeight,g;switch(t){case 1:g=(e-v)/2;break;case 2:g=e-v;break}for(var r=x.children,d=0,l=r.length;d<l;d++){var f=r[d];f.y+=g}}};const qt=Phaser.Utils.Objects.GetValue;var Dv=function(x){var i=qt(x,"start",0),e=qt(x,"padding.top",0),c=qt(x,"padding.bottom",0),t=qt(x,"lineHeight",void 0),s;if(t===void 0)if(s=qt(x,"maxLines",0),this.fixedHeight>0){var D=this.fixedHeight-this.padding.top-this.padding.bottom-e-c;t=D/s}else t=0;else if(this.fixedHeight>0){if(s=qt(x,"maxLines",void 0),s===void 0){var D=this.fixedHeight-this.padding.top-this.padding.bottom-e-c;s=Math.floor(D/t)}}else s=qt(x,"maxLines",0);var u=s===0,n=qt(x,"wrapWidth",void 0);n===void 0&&(this.fixedWidth>0?n=this.fixedWidth-this.padding.left-this.padding.right:n=1/0);for(var h=qt(x,"letterSpacing",0),o=qt(x,"hAlign",0),r=qt(x,"vAlign",0),a=qt(x,"charWrap",!1),d={start:i,isLastPage:!1,padding:{top:e,bottom:c},lineHeight:t,maxLines:s,wrapWidth:n,letterSpacing:h,hAlign:o,vAlign:r,charWrap:a,children:[],lines:[],maxLineWidth:0,linesHeight:0},l=this.children,f=0,v=l.length;f<v;f++)l[f].setActive(!1);n+=h;for(var g=this.padding.left,p=this.padding.top+t+e,m=g,y=p,T=n,C=i,S=l.length,E=d.children,P=d.lines,M=[],A=0,R=0,O;C<S;){var F=l[C];if(!Un(F)){C++,F.setActive(),E.push(F),M.push(F);continue}O=Iv(l,C,a,O);var I=O.word,G=I.length,z=O.width+G*h;C+=G;var U=Uo(I[0]);if(T<z||U){if(U){var X=I[0];X.setActive().setPosition(m,y),E.push(X),M.push(X)}if(m=g,y+=t,T=n,P.push({children:M,width:A}),R=Math.max(R,A),A=0,M=[],!u&&P.length===s)break;if(U)continue}T-=z,A+=z;for(var f=0,v=I.length;f<v;f++){var X=I[f];X.setActive().setPosition(m,y),E.push(X),M.push(X),m+=X.outerWidth+h}}M.length>0&&(P.push({children:M,width:A}),R=Math.max(R,A)),d.start+=E.length,d.isLastPage=d.start===S,d.maxLineWidth=R,d.linesHeight=P.length*t+e+c;var b=this.fixedWidth>0?this.fixedWidth:d.maxLineWidth+this.padding.left+this.padding.right,B=this.fixedHeight>0?this.fixedHeight:d.linesHeight+this.padding.top+this.padding.bottom,L=b-this.padding.left-this.padding.right,D=B-this.padding.top-this.padding.bottom-e-c;return Bv(d,L,D),this.setSize(b,B),d},Gv=function(x){return x=Wo(x,this.wrapConfig),Dv.call(this,x)},wv=function(x,i,e){var c=x.hAlign,t=x.vAlign;typeof c=="string"&&(c=bo[c],x.hAlign=c),typeof t=="string"&&(t=Ho[t],x.vAlign=t);var s=x.rtl,u=x.lines,n=x.lineWidth,h=x.linesWidth,o;switch(c){case 0:o=0;break;case 1:o=(i-h)/2;break;case 2:o=i-h;break}s&&(o+=n);for(var r=0,a=u.length;r<a;r++){var d=u[s?a-r-1:r],l=d.children,f=d.height,v;switch(t){case 0:v=0;break;case 1:v=(e-f)/2;break;case 2:v=e-f;break}for(var g=0,p=l.length;g<p;g++){var m=l[g];m.x+=o,m.y+=v}o+=n}};const At=Phaser.Utils.Objects.GetValue;var Nv=function(x){var i=At(x,"start",0),e=At(x,"padding.top",0),c=At(x,"padding.bottom",0),t=At(x,"padding.left",0),s=At(x,"padding.right",0),u=At(x,"lineWidth",void 0),n;if(u===void 0)if(n=At(x,"maxLines",0),this.fixedWidth>0){var L=this.fixedWidth-this.padding.left-this.padding.right-t-s;u=L/n}else u=0;else if(this.fixedWidth>0){if(n=At(x,"maxLines",void 0),n===void 0){var L=this.fixedWidth-this.padding.left-this.padding.right;n=Math.floor(L/u)}}else n=At(x,"maxLines",0);var h=n===0,o=At(x,"fixedChildHeight",void 0);if(o===void 0){var r=At(x,"charPerLine",void 0);if(r!==void 0){var D=this.fixedHeight-this.padding.top-this.padding.bottom-e-c;o=Math.floor(D/r)}}var a=At(x,"wrapHeight",void 0);a===void 0&&(this.fixedHeight>0?a=this.fixedHeight-this.padding.top-this.padding.bottom:a=1/0);for(var d=At(x,"letterSpacing",0),l=At(x,"rtl",!0),f=At(x,"hAlign",l?2:0),v=At(x,"vAlign",0),g={start:i,isLastPage:!1,padding:{top:e,bottom:c,left:t,right:s},lineWidth:u,maxLines:n,fixedChildHeight:o,wrapHeight:a,letterSpacing:d,hAlign:f,vAlign:v,rtl:l,children:[],lines:[],maxLineHeight:0,linesWidth:0},p=this.children,m=0,y=p.length;m<y;m++)p[m].setActive(!1);a+=d;for(var T=this.padding.left+t,C=this.padding.top+e,S=T,E=C,P=a,M=i,A=p.length,R=g.children,O=g.lines,F=[],I=0,G=0;M<A;){var z=p[M];if(M++,!Un(z)){z.setActive(),R.push(z),F.push(z);continue}var U=(o!==void 0?o:z.height)+d,X=Uo(z);if(P<U||X){if(X&&(z.setActive().setPosition(S,E).setOrigin(.5),R.push(z),F.push(z)),S=T,E=C,P=a,O.push({children:F,height:I}),G=Math.max(G,I),I=0,F=[],!h&&O.length===n)break;if(X)continue}P-=U,I+=U,z.setActive().setPosition(S,E).setOrigin(.5),R.push(z),F.push(z),E+=U}F.length>0&&(O.push({children:F,height:I}),G=Math.max(G,I)),g.start+=R.length,g.isLastPage=g.start===A,g.maxLineHeight=G,g.linesWidth=O.length*u+t+s;var b=this.fixedWidth>0?this.fixedWidth:g.linesWidth+this.padding.left+this.padding.right,B=this.fixedHeight>0?this.fixedHeight:g.maxLineHeight+this.padding.top+this.padding.bottom,L=b-this.padding.left-this.padding.right-t-s,D=B-this.padding.top-this.padding.bottom-e-c;return wv(g,L,D),this.setSize(b,B),g},zv=function(x){return x=Wo(x,this.wrapConfig),Nv.call(this,x)},Vv=function(){var x=this.fixedWidth>0?this.fixedWidth:this.width,i=this.fixedHeight>0?this.fixedHeight:this.height;this.setSize(x,i),this.background.active&&this.background.draw();for(var e,c=0,t=this.children.length;c<t;c++)e=this.children[c],e.active&&e.draw();this.innerBounds.active&&this.innerBounds.draw()},Yv=function(){return this.children},Uv=function(){return this.lastAppendedChildren};const Xv=Phaser.Utils.Array.GetAll;var Wv=function(){return Xv(this.children,"active",!0)},bv={setPadding:Tv,getPadding:Cv,modifyTextStyle:Sv,removeChildren:Ev,clearContent:Pv,setText:Av,appendText:Ms,appendImage:Xo,appendCommand:lt,setWrapConfig:Fv,runWordWrap:Gv,runVerticalWrap:zv,drawContent:Vv,getChildren:Yv,getLastAppendedChildren:Uv,getActiveChildren:Wv};const Hv=Phaser.Utils.Objects.GetFastValue;var $v={};class Kv{constructor(i){this.pools=Hv(i,"pools",$v)}free(i){if(!this.pools)return this;var e=i.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new Be),this.pools[e].push(i),i.onFree(),this}freeMultiple(i){if(!this.pools)return this;for(var e=0,c=i.length;e<c;e++)this.free(i[e]);return this}allocate(i){return!this.pools||!this.pools.hasOwnProperty(i)?null:this.pools[i].pop()}}const $o=Phaser.Utils.Objects.IsPlainObject,_t=Phaser.Utils.Objects.GetValue;class Ui extends Ie{constructor(i,e,c,t,s,u){$o(e)?(u=e,e=_t(u,"x",0),c=_t(u,"y",0),t=_t(u,"width",0),s=_t(u,"height",0)):$o(t)&&(u=t,t=_t(u,"width",0),s=_t(u,"height",0));var n=t===0?1:t,h=s===0?1:s;super(i,e,c,n,h);this.type="rexDynamicText",this.autoRound=!0,this.padding={},this.textStyle=new Yo(_t(u,"style",void 0)),this.background=new mv(this,_t(u,"background",void 0)),this.innerBounds=new yv(this,_t(u,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.poolManager=new Kv(u),this.setFixedSize(t,s),this.setPadding(_t(u,"padding",0)),this.setWrapConfig(_t(u,"wrap",void 0));var o=_t(u,"text",void 0);o&&this.setText(o)}setFixedSize(i,e){return i===void 0&&(i=0),e===void 0&&(e=0),i>0&&e>0?(this.fixedWidth!==i||this.fixedHeight!==e)&&(this.dirty=!0):this.dirty=!0,this.fixedWidth=i,this.fixedHeight=e,this}updateTexture(){return this.clear(),this.drawContent(),super.updateTexture(),this}}Object.assign(Ui.prototype,bv);et.register("dynamicText",function(x,i,e,c,t){var s=new Ui(this.scene,x,i,e,c,t);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.DynamicText",Ui);var ci={setEventEmitter(x,i){return i===void 0&&(i=Phaser.Events.EventEmitter),this._privateEE=x===!0||x===void 0,this._eventEmitter=this._privateEE?new i:x,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(x){return this._eventEmitter&&x&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},Ko=function(x){return x.replace(Zv,"\\$&").replace(Jv,"\\x2d")},Zv=/[|\\{}()[\]^$+*?.]/g,Jv=/-/g,Qv=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,Zo=function(x){return typeof x!="string"||(x===""?x=null:Qv.test(x)?x=parseFloat(x):x==="false"?x=!1:x==="true"&&(x=!0)),x},jv=function(x,i){if(x==null)return[];for(var e=x.split(","),c=0,t=e.length;c<t;c++)e[c]=i(e[c]);return e};const kv="[a-z0-9-_.]+",qv="[ #a-z-_.0-9,|&]+",_v=function(x){return x};class Jo{constructor(i){this.setEventEmitter(Rt(i,"eventEmitter",void 0)),this.setTagExpression(Rt(i,"regex.tag",kv)),this.setValueExpression(Rt(i,"regex.value",qv)),this.setValueConverter(Rt(i,"valueConvert",!0));var e=Rt(i,"delimiters","<>");this.setDelimiters(e[0],e[1]),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setTagExpression(i){return this.tagExpression=i,this}setValueExpression(i){return this.valueExpression=i,this}setValueConverter(i){return i===!0?i=Zo:i||(i=_v),this.valueConverter=i,this}setDelimiters(i,e){e===void 0&&(e=i[1],i=i[0]),this.delimiterLeft=i,this.delimiterRight=e,i=Ko(i),e=Ko(e);var c=`${i}(${this.tagExpression})(=(${this.valueExpression}))?${e}`,t=`${i}/(${this.tagExpression})${e}`;return this.reTagOn=RegExp(c,"i"),this.reTagOff=RegExp(t,"i"),this.reSplit=RegExp(`${c}|${t}`,"gi"),this}setSource(i){return this.source=i,this}resetIndex(i){return i===void 0&&(i=0),this.progressIndex=i,this.reSplit.lastIndex=i,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this}start(i){return this.setSource(i).restart(),this}restart(){this.resetIndex().next()}next(){this.isPaused&&this.onResume();var i=this.source,e=i.length;for(this.reSplit.lastIndex===0&&this.onStart();!this.isPaused;){var c=this.reSplit.exec(i);if(!c){this.progressIndex<e&&this.onContent(i.substring(this.progressIndex,e)),this.onComplete();return}var t=c[0],s=this.reSplit.lastIndex-t.length;this.progressIndex<s&&this.onContent(i.substring(this.progressIndex,s)),this.reTagOff.test(t)?this.onTagEnd(t):this.onTagStart(t),this.progressIndex=this.reSplit.lastIndex}}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}onContent(i){this.emit("content",i),this.lastContent=i}onTagStart(i){var e=i.match(this.reTagOn),c=e[1],t=jv(e[3],this.valueConverter);this.skipEventFlag=!1,this.emit(`+${c}`,...t),this.skipEventFlag||this.emit("+",c,...t),this.lastTagStart=c}onTagEnd(i){var e=i.match(this.reTagOff)[1];this.skipEventFlag=!1,this.emit(`-${e}`),this.skipEventFlag||this.emit("-",e),this.lastTagEnd=e}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.emit("complete",this),this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}}Object.assign(Jo.prototype,ci);const tc=Phaser.Utils.Objects.GetValue;var ec=function(x,i,e){var c=tc(e,"tags.color","color"),t;i.on("start",function(){t=x.textStyle.color}).on(`+${c}`,function(s){x.textStyle.setColor(s),i.skipEvent()}).on(`-${c}`,function(){x.textStyle.setColor(t),i.skipEvent()}).on("complete",function(){x.textStyle.setColor(t)})};const ic=Phaser.Utils.Objects.GetValue;var sc=function(x,i,e){var c=ic(e,"tags.stroke","stroke"),t;i.on("start",function(){t=x.textStyle.stroke,x.textStyle.setStrokeStyle(null)}).on(`+${c}`,function(s){s===void 0&&(s=t),x.textStyle.setStrokeStyle(s),i.skipEvent()}).on(`-${c}`,function(){x.textStyle.setStrokeStyle(null),i.skipEvent()}).on("complete",function(){x.textStyle.setStrokeStyle(t)})};const nc=Phaser.Utils.Objects.GetValue;var rc=function(x,i,e){var c=nc(e,"tags.b","b");i.on("start",function(){x.textStyle.setBold(!1)}).on(`+${c}`,function(){x.textStyle.setBold(!0),i.skipEvent()}).on(`-${c}`,function(){x.textStyle.setBold(!1),i.skipEvent()})};const ac=Phaser.Utils.Objects.GetValue;var oc=function(x,i,e){var c=ac(e,"tags.i","i");i.on("start",function(){x.textStyle.setItalic(!1)}).on(`+${c}`,function(){x.textStyle.setItalic(!0),i.skipEvent()}).on(`-${c}`,function(){x.textStyle.setItalic(!1),i.skipEvent()})};const hc=Phaser.Utils.Objects.GetValue;var lc=function(x,i,e){var c=hc(e,"tags.size","size"),t;i.on("start",function(){t=x.textStyle.fontSize}).on(`+${c}`,function(s){x.textStyle.setFontSize(s),i.skipEvent()}).on(`-${c}`,function(){x.textStyle.setFontSize(t),i.skipEvent()}).on("complete",function(){x.textStyle.setFontSize(t)})};const uc=Phaser.Utils.Objects.GetValue;var fc=function(x,i,e){var c=uc(e,"tags.y","y"),t;i.on("start",function(){t=x.textStyle.offsetY,x.textStyle.setOffsetY(0)}).on(`+${c}`,function(s){s===void 0&&(s=t),x.textStyle.setOffsetY(s),i.skipEvent()}).on(`-${c}`,function(){x.textStyle.setOffsetY(0),i.skipEvent()}).on("complete",function(){x.textStyle.setOffsetY(0)})};const dc=Phaser.Utils.Objects.GetValue;var vc=function(x,i,e){var c=dc(e,"tags.shadow","shadow"),t;i.on("start",function(){t=x.textStyle.shadowColor,x.textStyle.setShadowColor(null)}).on(`+${c}`,function(s){s===void 0&&(s=t),x.textStyle.setShadowColor(s),i.skipEvent()}).on(`-${c}`,function(){x.textStyle.setShadowColor(null),i.skipEvent()}).on("complete",function(){x.textStyle.setShadowColor(t)})};const cc=Phaser.Utils.Objects.GetValue;var pc=function(x,i,e){var c=cc(e,"tags.img","img");i.on(`+${c}`,function(t){var s=x.imageManager.get(t);Xo.call(x,s.key,s.frame,{width:s.width,hieght:s.height,leftSpace:s.left,rightSpace:s.right}),i.skipEvent()}).on(`-${c}`,function(){i.skipEvent()})};const gc=Phaser.Utils.Objects.GetValue;var xc=function(x,i,e){var c=gc(e,"tags.speed","speed"),t;i.on("start",function(){t=x.typeWriter.speed}).on(`+${c}`,function(s){Qo(x,s),i.skipEvent()}).on(`-${c}`,function(){Qo(x,t),i.skipEvent()}).on("complete",function(){x.typeWriter.speed=t})},mc=function(x){this.typeWriter.setSpeed(x)},Qo=function(x,i){lt.call(x,"speed",mc,i,x)};const yc=Phaser.Utils.Objects.GetValue;var Tc=function(x,i,e){var c=yc(e,"tags.se","se");i.on(`+${c}`,function(t,s){lt.call(x,"se",Cc,[t,s],x),i.skipEvent()}).on(`-${c}`,function(){i.skipEvent()})},Cc=function(x){if(!this.skipSoundEffect){var i=x[0],e=x[1];this.soundManager.playSoundEffect(i),e&&this.soundManager.fadeInSoundEffect(e)}};const Sc=Phaser.Utils.Objects.GetValue;var Ec=function(x,i,e){var c=Sc(e,"tags.se.fadein","se.fadein");i.on(`+${c}`,function(t){lt.call(x,"se.fadein",Pc,t,x),i.skipEvent()}).on(`-${c}`,function(){i.skipEvent()})},Pc=function(x){this.soundManager.fadeInSoundEffect(x)};const Mc=Phaser.Utils.Objects.GetValue;var Rc=function(x,i,e){var c=Mc(e,"tags.se.fadeout","se.fadeout");i.on(`+${c}`,function(t,s){s=s==="stop",lt.call(x,"se.fadeout",Ac,[t,s],x),i.skipEvent()}).on(`-${c}`,function(){i.skipEvent()})},Ac=function(x){this.soundManager.fadeOutSoundEffect(...x)};const Oc=Phaser.Utils.Objects.GetValue;var Lc=function(x,i,e){var c=Oc(e,"tags.se.volume","se.volume");i.on(`+${c}`,function(t){lt.call(x,"se.volume",Fc,t,x),i.skipEvent()}).on(`-${c}`,function(){i.skipEvent()})},Fc=function(x){this.soundManager.setSoundEffectVolume(x)};const Ic=Phaser.Utils.Objects.GetValue;var Bc=function(x,i,e){var c=Ic(e,"tags.bgm","bgm");i.on(`+${c}`,function(t,s){lt.call(x,"bgm",Dc,[t,s],x),i.skipEvent()}).on(`-${c}`,function(){lt.call(x,"bgm.stop",Gc,void 0,x),i.skipEvent()})},Dc=function(x){var i=x[0],e=x[1];this.soundManager.playBackgroundMusic(i),e&&this.soundManager.fadeInBackgroundMusic(e)},Gc=function(){this.soundManager.stopBackgroundMusic()};const wc=Phaser.Utils.Objects.GetValue;var Nc=function(x,i,e){var c=wc(e,"tags.bgm.fadein","bgm.fadein");i.on(`+${c}`,function(t){lt.call(x,"bgm.fadein",zc,t,x),i.skipEvent()}).on(`-${c}`,function(){i.skipEvent()})},zc=function(x){this.soundManager.fadeInBackgroundMusic(x)};const Vc=Phaser.Utils.Objects.GetValue;var Yc=function(x,i,e){var c=Vc(e,"tags.bgm.fadeout","bgm.fadeout");i.on(`+${c}`,function(t,s){lt.call(x,"bgm.fadeout",Uc,[t,s],x),i.skipEvent()}).on(`-${c}`,function(){i.skipEvent()})},Uc=function(x){this.soundManager.fadeOutBackgroundMusic(...x)};const Xc=Phaser.Utils.Objects.GetValue;var Wc=function(x,i,e){var c=Xc(e,"tags.bgm.cross","bgm.cross");i.on(`+${c}`,function(t,s){lt.call(x,"bgm.cross",bc,[t,s],x),i.skipEvent()}).on(`-${c}`,function(){i.skipEvent()})},bc=function(x){this.soundManager.crossFadeBackgroundMusic(...x)};const Hc=Phaser.Utils.Objects.GetValue;var $c=function(x,i,e){var c=Hc(e,"tags.bgm.pause","bgm.pause");i.on(`+${c}`,function(){lt.call(x,"bgm.pause",Kc,void 0,x),i.skipEvent()}).on(`-${c}`,function(){lt.call(x,"bgm.resume",Zc,void 0,x),i.skipEvent()})},Kc=function(){this.soundManager.pauseBackgroundMusic()},Zc=function(){this.soundManager.resumeBackgroundMusic()};const Jc=Phaser.Utils.Objects.GetValue;var Qc=function(x,i,e){var c=Jc(e,"tags.camera.fadein","camera.fadein");i.on(`+${c}`,function(t,s,u,n){lt.call(x,"camera.fadein",jc,[t,s,u,n],x),i.skipEvent()})},jc=function(x){this.camera.fadeIn(...x)};const kc=Phaser.Utils.Objects.GetValue;var qc=function(x,i,e){var c=kc(e,"tags.camera.fadeout","camera.fadeout");i.on(`+${c}`,function(t,s,u,n){lt.call(x,"camera.fadeout",_c,[t,s,u,n],x),i.skipEvent()})},_c=function(x){this.camera.fadeOut(...x)};const tp=Phaser.Utils.Objects.GetValue;var ep=function(x,i,e){var c=tp(e,"tags.camera.shake","camera.shake");i.on(`+${c}`,function(t,s){lt.call(x,"camera.shake",ip,[t,s],x),i.skipEvent()})},ip=function(x){this.camera.shake(...x)};const sp=Phaser.Utils.Objects.GetValue;var np=function(x,i,e){var c=sp(e,"tags.camera.flash","camera.flash");i.on(`+${c}`,function(t,s,u,n){lt.call(x,"camera.flash",rp,[t,s,u,n],x),i.skipEvent()})},rp=function(x){this.camera.flash(...x)};const ap=Phaser.Utils.Objects.GetValue;var op=function(x,i,e){var c=ap(e,"tags.camera.zoom","camera.zoom");i.on(`+${c}`,function(t){lt.call(x,"camera.zoom",hp,t,x),i.skipEvent()}).on(`+${c}.to`,function(t,s,u){lt.call(x,"camera.zoom.to",lp,[t,s,u],x),i.skipEvent()})},hp=function(x){this.camera.setZoom(x)},lp=function(x){this.camera.zoomTo(...x)};const up=Phaser.Utils.Objects.GetValue,jo=Phaser.Math.DegToRad;var fp=function(x,i,e){var c=up(e,"tags.camera.rotate","camera.rotate");i.on(`+${c}`,function(t){t=jo(t),lt.call(x,"camera.rotate",dp,t,x),i.skipEvent()}).on(`+${c}.to`,function(t,s,u){t=jo(t),lt.call(x,"camera.rotate.to",vp,[t,s,u],x),i.skipEvent()})},dp=function(x){this.camera.setRotation(x)},vp=function(x){var i=x[0],e=x[1],c=x[2];this.camera.rotateTo(i,!1,e,c)};const cp=Phaser.Utils.Objects.GetValue;var pp=function(x,i,e){var c=cp(e,"tags.camera.scroll","camera.scroll");i.on(`+${c}`,function(t,s){lt.call(x,"camera.scroll",gp,[t,s],x),i.skipEvent()}).on(`+${c}.to`,function(t,s,u,n){lt.call(x,"camera.scroll.to",xp,[t,s,u,n],x),i.skipEvent()})},gp=function(x){this.camera.setScroll(...x)},xp=function(x){var i=x[0],e=x[1],c=x[2],t=x[3],s=this.camera,u=s.scrollX,n=s.scrollY;s.setScroll(i,e),i+=s.centerX,e+=s.centerY,s.setScroll(u,n),s.pan(i,e,c,t)};const ko=Phaser.Utils.Objects.GetValue;var mp=function(x,i,e){var c=ko(e,"tags.wait","wait"),t=ko(e,"tags.click","click");i.on(`+${c}`,function(s){qo(x,s),i.skipEvent()}).on(`-${c}`,function(){i.skipEvent()}).on(`+${t}`,function(){qo(x,"click"),i.skipEvent()}).on(`-${t}`,function(){i.skipEvent()})},yp=function(x){this.typeWriter.wait(x)},qo=function(x,i){lt.call(x,"wait",yp,i,x)};const Tp=Phaser.Utils.Objects.GetValue;var _o=function(x,i){return x.length===2&&x[0]===i},Cp=function(x,i,e){var c=Tp(e,"sprite","sprite");!c||i.on("+",function(t,...s){if(!i.skipEventFlag){var u=t.split(".");if(_o(u,c)){var n=u[1];lt.call(x,"sprite.add",Sp,[n,...s],x)}else return;i.skipEvent()}}).on("-",function(t){if(!i.skipEventFlag){var s=t.split(".");if(_o(s,c)){var u=s[1];lt.call(x,"sprite.remove",Ep,u,x)}else return;i.skipEvent()}})},Sp=function(x){this.spriteManager.add(...x)},Ep=function(x){this.spriteManager.remove(x)};const Pp=Phaser.Utils.Objects.GetValue;var Mp=function(x,i,e){var c=Pp(e,"sprite","sprite");!c||i.on("-",function(t){if(!i.skipEventFlag){if(t===c)lt.call(x,"sprite.removeall",Rp,void 0,x);else return;i.skipEvent()}})},Rp=function(){this.spriteManager.removeAll()};const Ap=Phaser.Utils.Objects.GetValue;var Op=function(x,i){return x.length===3&&x[0]===i&&x[2]==="texture"},Lp=function(x,i,e){var c=Ap(e,"sprite","sprite");!c||i.on("+",function(t,s,u){if(!i.skipEventFlag){var n=t.split(".");if(Op(n,c)){var h=n[1];lt.call(x,"sprite.texture",Fp,[h,s,u],x)}else return;i.skipEvent()}})},Fp=function(x){this.spriteManager.setTexture(...x)};const Ip=Phaser.Utils.Objects.GetValue;var th=function(x,i){return x.length===3&&x[0]===i&&x[2]==="play"},Bp=function(x,i){return x.length===3&&x[0]===i&&x[2]==="stop"},Dp=function(x,i,e){var c=Ip(e,"sprite","sprite");!c||i.on("+",function(t){if(!i.skipEventFlag){var s=t.split("."),u;if(th(s,c))u=s[1];else return;var n=Array.prototype.slice.call(arguments,1);lt.call(x,"sprite.play",Gp,[u,n],x),i.skipEvent()}}).on("+",function(t){if(!i.skipEventFlag){var s=t.split("."),u;if(Bp(s,c))u=s[1];else return;lt.call(x,"sprite.stop",eh,u,x),i.skipEvent()}}).on("-",function(t){if(!i.skipEventFlag){var s=t.split("."),u;if(th(s,c))u=s[1];else return;lt.call(x,"sprite.stop",eh,u,x),i.skipEvent()}})},Gp=function(x){var i=x[0],e=x[1],c=e.shift();this.spriteManager.playAnimation(i,c),e.length>0&&this.spriteManager.chainAnimation(i,e)},eh=function(x){this.spriteManager.stopAnimation(x)};const wp=Phaser.Utils.Objects.GetValue;var Np=function(x,i){return x.length===3&&x[0]===i&&x[2]==="chain"},zp=function(x,i,e){var c=wp(e,"sprite","sprite");!c||i.on("+",function(t){if(!i.skipEventFlag){var s=t.split("."),u;if(Np(s,c))u=s[1];else return;var n=Array.prototype.slice.call(arguments,1);lt.call(x,"sprite.chain",Vp,[u,n],x),i.skipEvent()}})},Vp=function(x){this.spriteManager.chainAnimation(...x)};const Yp=Phaser.Utils.Objects.GetValue;var Up=function(x,i){return x.length===3&&x[0]===i&&x[2]==="pause"},Xp=function(x,i,e){var c=Yp(e,"sprite","sprite");!c||i.on("+",function(t){if(!i.skipEventFlag){var s=t.split("."),u;if(Up(s,c))u=s[1];else return;lt.call(x,"sprite.pause",Wp,u,x),i.skipEvent()}})},Wp=function(x){this.spriteManager.pauseAnimation(x)};const bp=Phaser.Utils.Objects.GetValue;var Hp=function(x,i){return x.length===3&&x[0]===i},$p=function(x,i,e){var c=bp(e,"sprite","sprite");!c||i.on("+",function(t,s){if(!i.skipEventFlag){var u=t.split("."),n,h;if(Hp(u,c))n=u[1],h=u[2];else return;lt.call(x,"sprite.set",Kp,[n,h,s],x),i.skipEvent()}})},Kp=function(x){this.spriteManager.setProperty(...x)};const Zp=Phaser.Utils.Objects.GetValue;var Jp={to:!0,yoyo:!0},Qp=function(x,i){return x.length===4&&x[0]===i&&Jp[x[3]]},jp=function(x,i,e){var c=Zp(e,"sprite","sprite");!c||i.on("+",function(t,s,u,n){if(!i.skipEventFlag){var h=t.split("."),o,r,a;if(Qp(h,c))o=h[1],r=h[2],a=h[3]==="yoyo";else return;lt.call(x,"sprite.ease",kp,[o,r,s,u,n,a],x),i.skipEvent()}})},kp=function(x){this.spriteManager.easeProperty(...x)},qp=function(x,i,e){i.on("start",function(){x.emit("parser.start",i)}).on("+",function(c,...t){if(!i.skipEventFlag){var s=`+${c}`;x.emit(`parser.${s}`,i,...t),ih(x,s,t)}}).on("-",function(c){if(!i.skipEventFlag){var t=`-${c}`;x.emit(`parser.${t}`,i),ih(x,t)}}).on("complete",function(){x.emit("parser.complete",i)})},_p=function(x,i){var e=`tag.${i}`;x==null?this.emit(e):this.emit(e,...x)},ih=function(x,i,e){lt.call(x,i,_p,e,x)};const tg=Phaser.Utils.Objects.GetValue;var eg=function(x,i,e){var c=tg(e,"tags.r","r");i.on(`+${c}`,function(){Ms.call(x,`
`),i.skipEvent()}).on(`-${c}`,function(){i.skipEvent()})},ig=function(x,i,e){i.on("content",function(c){Ms.call(x,c)})};const sh=[ec,sc,rc,oc,lc,fc,vc,pc,xc,Tc,Ec,Rc,Lc,Bc,Nc,Yc,Wc,$c,Qc,qc,ep,np,op,fp,pp,mp,Cp,Mp,Lp,Dp,zp,Xp,$p,jp,qp,eg,ig];var sg=function(x,i,e){for(var c=0,t=sh.length;c<t;c++)sh[c](x,i,e)},ng=function(x,i){for(var e=x.commentLineStart,c=i.split(`
`),t=0,s=c.length;t<s;t++){var u=c[t];u===""||(u.trim().length===0||e&&u.startsWith(e))&&(c[t]="")}return c.join("")};const rg=Phaser.Utils.Objects.GetValue;class ag extends Jo{constructor(i,e){e===void 0&&(e={}),e.hasOwnProperty("delimiters")||(e.delimiters="[]");super(e);sg(i,this,e),this.setCommentLineStartSymbol(rg(e,"comment","//"))}setCommentLineStartSymbol(i){return this.commentLineStart=i,this}start(i){return super.start(ng(this,i)),this}}var nh=function(x,i){return new Promise(function(e,c){x.once(i,function(){e()})})},It=function(x){return nh(x,"complete")},og=function(x){return this.children=x,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(x),this.typing(),It(this)};const hg="delay",rh="anim";var ah=function(x){x===void 0&&(x=0);var i=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var e=this.getNextChild();if(!e){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(Un(e)){var c=this.animationConfig;if(c.duration>0){var t=this.timeline.addTimer({name:rh,target:e,duration:c.duration,yoyo:c.yoyo,onStart:c.onStart,onProgress:c.onProgress,onComplete:c.onComplete});this.skipTypingAnimation&&t.seek(1)}else c.onStart&&c.onStart(e,0);this.textPlayer.emit("typing",e),i+=this.speed+x,x=0;var s=this.index===this.children.length;if(i>0&&!s){this.typingTimer=this.timeline.addTimer({name:hg,target:this,duration:i,onComplete:function(u,n,h){u.typingTimer=void 0,ah.call(u,h.remainder)}});break}}else Mv(e)&&e.exec()}this.inTypingProcessLoop=!1},lg=function(){return this.timeline.pause(),this},ug=function(){return this.timeline.resume(),this},fg=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},dg=function(x){return this.isTypingPaused?(x===void 0&&(x=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=x):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(x)),this):this};const le="_remove.wait",Xn="_remove.play",oh=[le,Xn];var Ge=function(x,i,e,c,t){return function(){x.emit(le,t),i.apply(c,e)}},hh=function(x,i,e,c,t){var s=Ge(x,e,c,t,"custom"),u=i?`wait.${i}`:"wait";x.emit(u,s)},vg=function(x,i,e,c,t){return x.typeWriter.timeline.delayCall(i,e,c,t)},cg=function(x,i,e,c,t){var s=Ge(x,e,c,t,"time"),u;x.once(le,function(){u&&(u.remove(),u=void 0)}),u=vg(x,i,s),x.emit("wait.time",i)},pg=function(x,i,e,c){var t=Ge(x,i,e,c,"click"),s=x.clickEE;x.once(le,function(){s.off("pointerdown",t,x)}),s.once("pointerdown",t,x),x.emit("wait.click")},lh=function(x,i,e,c,t){var s=Ge(x,e,c,t,"music");i&&(x.once(le,function(){i.off("complete",s,x)}),i.once("complete",s,x)),x.emit("wait.music",i),i||s()},gg=function(x){switch(x){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},xg=function(x,i,e,c,t){var s=Ge(x,e,c,t,`camera.${i}`),u=x.camera,n,h;switch(i){case"camera.fadein":n=u.fadeEffect,h="camerafadeincomplete";break;case"camera.fadeout":n=u.fadeEffect,h="camerafadeoutcomplete";break;case"camera.flash":n=u.flashEffect,h="cameraflashcomplete";break;case"camera.shake":n=u.shakeEffect,h="camerashakecomplete";break;case"camera.zoom":n=u.zoomEffect,h="camerazoomcomplete";break;case"camera.rotate":n=u.rotateToEffect,h="camerarotatecomplete";break;case"camera.scroll":n=u.panEffect,h="camerapancomplete";break}n.isRunning?(x.once(le,function(o){u.off(h,s,x)}),u.once(h,s,x),x.emit("wait.camera",i)):(x.emit("wait.camera",i),s())},mg=function(x,i,e,c,t){var s=Ge(x,e,c,t,"keydown"),u=`keydown-${i.toUpperCase()}`,n=x.scene.input.keyboard;x.once(le,function(){n.off(u,s,x)}),n.once(u,s,x),x.emit("wait.keydown",i)},yg=function(x){var i=x.split(".");return i[0]==="sprite"&&i.length<=3},Tg=function(x,i,e,c,t){var s=Ge(x,e,c,t),u=i.split("."),n=x.spriteManager;switch(u.length){case 1:n.isEmpty?(x.emit("wait.sprite"),s()):(x.once(le,function(l){n.off("empty",s,x)}),n.once("empty",s,x),x.emit("wait.sprite"));break;case 2:var h=u[1];if(n.has(h)){var o=x.spriteManager.get(h),r=o.sprite;x.once(le,function(){r.off("destroy",s,x)}),r.once("destroy",s,x),x.emit("wait.sprite",h)}else x.emit("wait.sprite",h),s();break;case 3:var h=u[1],a=u[2],d=x.spriteManager.getTweenTask(h,a);d?(x.once(le,function(){d.off("complete",s,x)}),d.once("complete",s,x),x.emit("wait.sprite",h,a)):(x.emit("wait.sprite",h,a),s());break}};const Cg=Phaser.Input.Keyboard.KeyCodes;var uh=function(x,i,e,c,t){typeof i=="string"&&i.length>1&&i.indexOf("|")!==-1?i=i.split("|"):i=[i];for(var s=0,u=i.length;s<u;s++){var n=i[s];if(n==null||n==="wait")hh(x,void 0,e,c,t);else if(typeof n=="number"||!isNaN(n))cg(x,parseFloat(n),e,c,t);else if(n==="click")pg(x,e,c,t);else if(n==="se"){var h=x.soundManager.getLastSoundEffect();lh(x,h,e,c,t)}else if(n==="bgm"){var h=x.soundManager.getBackgroundMusic();lh(x,h,e,c,t)}else Cg.hasOwnProperty(n.toUpperCase())?mg(x,n,e,c,t):gg(n)?xg(x,n,e,c,t):yg(n)?Tg(x,n,e,c,t):hh(x,n,e,c,t)}},Sg=function(x){return this.ignoreWait?this:(this.pauseTyping(),uh(this.textPlayer,x,this.resumeTyping,[],this),this)},Eg=function(x){return this.timeline.setTimeScale(x),this},Pg=function(x){return x===void 0&&(x=!0),this.ignoreWait=x,this},Mg=function(x){if(x===void 0&&(x=!0),this.skipTypingAnimation=x,x)for(var i=this.timeline.getTimers(rh),e=0,c=i.length;e<c;e++)i[e].seek(1);return this},Rg=function(x){if(x===void 0&&(x=!0),this.skipSoundEffect=x,x){var i=this.textPlayer._soundManager;i&&i.fadeOutAllSoundEffects(100,!0)}return this},Ag=function(){return this.typingTimer&&this.typingTimer.seek(1),this},Og={start:og,typing:ah,pause:lg,resume:ug,pauseTyping:fg,resumeTyping:dg,wait:Sg,setTimeScale:Eg,setIgnoreWait:Pg,setSkipTypingAnimation:Mg,setSkipSoundEffect:Rg,skipCurrentTypingDelay:Ag};const Lg=Phaser.Scene;var Rs=function(x){return x instanceof Lg},fh=function(x){if(x==null||typeof x!="object")return null;if(Rs(x))return x;if(x.scene&&Rs(x.scene))return x.scene;if(x.parent&&x.parent.scene&&Rs(x.parent.scene))return x.parent.scene};const Fg=Phaser.Utils.Objects.GetValue;class Zt{constructor(i,e){this.parent=i,this.scene=fh(i),this.isShutdown=!1,this.setEventEmitter(Fg(e,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(i){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(i){this.shutdown(i)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(i,e){this.destroy(e)}}Object.assign(Zt.prototype,ci);const Ig=Phaser.Utils.Objects.GetValue;class Wn extends Zt{constructor(i,e){super(i,e);this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(Ig(e,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(i){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(i))}setTickingMode(i){typeof i=="string"&&(i=Bg[i]),this.tickingMode=i}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(i){this._isRunning!==i&&(this._isRunning=i,this.tickingMode===1&&i!=this.tickingState&&(i?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const Bg={no:0,lazy:1,always:2},bn=Phaser.Utils.Objects.GetValue;class Dg extends Wn{constructor(i,e){super(i,e);this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.isRunning=bn(i,"isRunning",!1),this.timeScale=bn(i,"timeScale",1),this.now=bn(i,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(i){return i===void 0&&(i=0),this.delta=0,this.now=i,super.start(),this}seek(i){return this.now=i,this}setTimeScale(i){return this.timeScale=i,this}tick(i){return i*=this.timeScale,this.now+=i,this.delta=i,this.emit("update",this.now,this.delta),this}}class dh extends Dg{startTicking(){super.startTicking(),this.scene.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.events.off("update",this.update,this)}update(i,e){return!this.isRunning||this.timeScale===0?this:(this.tick(e),this)}}var Gg=function(x,i){return i===void 0&&(i=.5),x<=i?x=x/i:x=1-(x-i)/(1-i),x};const vh=Phaser.Math.Clamp;class wg{constructor(i,e){this.setTimeline(i).reset(e)}setTimeline(i){return this.timeline=i,this}setName(i){return this.name=i,this}setCallbacks(i,e,c,t){return this.target=i,this.onStart=e,this.onProgress=c,this.onComplete=t,this}setDuration(i,e){return e===void 0&&(e=!1),this.duration=i,this.remainder=i,this.t=0,this.yoyo=e,this}setPaused(i){return this.isPaused=i,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(i){return this.removed=i,this}remove(){return this.removed=!0,this}seek(i){return this.remainder=this.duration*(1-i),this}reset(i){return this.setName(i.name).setDuration(i.duration,i.yoyo).setCallbacks(i.target,i.onStart,i.onProgress,i.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var i=1-this.remainder/this.duration;return i=vh(i,0,1),this.yoyo&&(i=Gg(i)),i}setProgress(i){i=vh(i,0,1),this.remainder=this.duration*(1-i)}runCallback(i){!i||i(this.target,this.t,this)}update(i,e){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=e,this.t=this.getProgress(),this.runCallback(this.onProgress);var c=this.remainder<=0;return c&&this.runCallback(this.onComplete),c}}class Ng extends Be{allocate(){return this.pop()}free(i){i.onFree(),this.push(i)}freeMultiple(i){for(var e=0,c=i.length;e<c;e++)this.free(i[e]);return this}}const zg=Phaser.Utils.Objects.GetValue,Vg=new Ng;class Yg extends dh{constructor(i,e){super(i,e);this.addedTimers=[],this.timers=[],this.timerPool=zg(e,"pool",Vg)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(i){var e=this.timerPool.allocate();return e?e.setTimeline(this).reset(i):e=new wg(this,i),this.addedTimers.push(e),e.runCallback(e.onStart),this.isRunning||this.start(),e}delayCall(i,e,c,t){var s=this.addTimer({duration:i,onComplete:function(u,n,h){c===void 0&&(c=[]),c.push(h),e.apply(t,c)}});return s}getTimers(i){for(var e=[],c=[this.addedTimers,this.timers],t=0,s=c.length;t<s;t++)for(var u=c[t],n=0,h=u.length;n<h;n++){var o=u[n];o.name===i&&e.push(o)}return e}update(i,e){super.update(i,e),this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var c=[],t=0,s=this.timers.length;t<s;t++){var u=this.timers[t],n=u.update(this.now,this.delta);n?this.timerPool.free(u):c.push(u)}this.timers=c,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}const Hn=Phaser.Utils.Objects.GetValue;class ch{constructor(i,e){this.setEventEmitter(),this.textPlayer=i,this.isPageTyping=!1,this.timeline=new Yg(i),this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(Hn(e,"onTypingStart",Xg)),this.setSpeed(Hn(e,"speed",250)),this.setAnimationConfig(Hn(e,"animation",void 0))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.timeline.destroy(),this.timeline=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}setSpeed(i){return this.speed=i,this}setTypingStartCallback(i){return this.onTypeStart=i,this}setAnimationConfig(i){return i===void 0?i={}:i===!1&&(i={duration:0}),i.hasOwnProperty("duration")||(i.duration=1e3),i.hasOwnProperty("onStart")||(i.onStart=Ug),this.animationConfig=i,this}getNextChild(){var i=this.children[this.index];return this.index=Math.min(this.index+1,this.children.length),i}}var Ug=function(x){x.setVisible()},Xg=function(x){for(var i=0,e=x.length;i<e;i++)x[i].setVisible(!1)};Object.assign(ch.prototype,ci,Og);class Wg extends Wn{startTicking(){super.startTicking(),this.scene.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.events.off("update",this.update,this)}}const we=Phaser.Utils.Objects.GetValue,ph=Phaser.Math.Clamp;class bg{constructor(i){this.resetFromJSON(i)}resetFromJSON(i){this.state=we(i,"state",Xi),this.timeScale=we(i,"timeScale",1),this.delay=we(i,"delay",0),this.repeat=we(i,"repeat",0),this.repeatCounter=we(i,"repeatCounter",0),this.duration=we(i,"duration",0),this.nowTime=we(i,"nowTime",0),this.justRestart=we(i,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(i){return this.timeScale=i,this}setDelay(i){return i===void 0&&(i=0),this.delay=i,this}setDuration(i){return this.duration=i,this}setRepeat(i){return this.repeat=i,this}setRepeatInfinity(){return this.repeat=-1,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?gi:pi,this.repeatCounter=0,this}stop(){return this.state=Xi,this}update(i,e){this.state===Xi||this.state===As||e===0||this.timeScale===0||(this.nowTime+=e*this.timeScale,this.state=this.nowTime>=0?gi:pi,this.justRestart=!1,this.nowTime>=this.duration&&(this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration):(this.nowTime=this.duration,this.state=As)))}get t(){var i;switch(this.state){case Xi:case pi:i=0;break;case gi:i=this.nowTime/this.duration;break;case As:i=1;break}return ph(i,0,1)}set t(i){i=ph(i,-1,1),i<0?(this.state=pi,this.nowTime=-this.delay*i):(this.state=gi,this.nowTime=this.duration*i,i===1&&this.repeat!==0&&this.repeatCounter++)}get isIdle(){return this.state===Xi}get isDelay(){return this.state===pi}get isCountDown(){return this.state===gi}get isRunning(){return this.state===pi||this.state===gi}get isDone(){return this.state===As}get isOddIteration(){return(this.repeatCounter&1)==1}get isEvenIteration(){return(this.repeatCounter&1)==0}}const Xi=0,pi=1,gi=2,As=-1;class Hg extends Wg{constructor(i,e){super(i,e);this.timer=new bg}shutdown(i){this.isShutdown||(super.shutdown(i),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const Os=Phaser.Utils.Objects.GetValue,gh=Phaser.Utils.Objects.GetAdvancedValue,$g=Phaser.Tweens.Builders.GetEaseFunction;class xi extends Hg{resetFromJSON(i){return this.timer.resetFromJSON(Os(i,"timer")),this.setEnable(Os(i,"enable",!0)),this.setDelay(gh(i,"delay",0)),this.setDuration(gh(i,"duration",1e3)),this.setEase(Os(i,"ease","Linear")),this.setRepeat(Os(i,"repeat",0)),this}setEnable(i){return i==null&&(i=!0),this.enable=i,this}setDelay(i){return this.delay=i,this}setDuration(i){return this.duration=i,this}setEase(i){return i===void 0&&(i="Linear"),this.ease=i,this.easeFn=$g(i),this}setRepeat(i){return this.repeat=i,this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}update(i,e){if(!this.isRunning||!this.enable)return this;var c=this.parent;if(!c.active)return this;var t=this.timer;return t.update(i,e),t.isDelay||this.updateGameObject(c,t),this.emit("update",c,this),t.isDone&&this.complete(),this}updateGameObject(i,e){}}const xh=Phaser.Utils.Objects.GetValue,mh=Phaser.Utils.Objects.GetAdvancedValue,Kg=Phaser.Math.Linear;class yh extends xi{constructor(i,e,c){e.scene=i,e.active=!0;super(e,c);this.volume={},this.resetFromJSON(c)}resetFromJSON(i){return super.resetFromJSON(i),this.setMode(xh(i,"mode",0)),this.setEnable(xh(i,"enable",!0)),this.setVolumeRange(mh(i,"volume.start",this.parent.volume),mh(i,"volume.end",0)),this}setMode(i){return typeof i=="string"&&(i=Zg[i]),this.mode=i,this}setVolumeRange(i,e){return this.volume.start=i,this.volume.end=e,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(i,e){i.volume=Kg(this.volume.start,this.volume.end,e.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}}const Zg={stop:1,destroy:2};var Th=function(x,i,e,c,t){c===void 0&&(c=1),t===void 0&&(t=0);var s={mode:0,volume:{start:t,end:c},duration:e};typeof i=="string"&&(i=x.sound.add(i));var u;return i.hasOwnProperty("_fade")?(u=i._fade,u.stop().resetFromJSON(s)):(u=new yh(x,i,s),i._fade=u),u.start(),i.isPlaying||i.setVolume(t).play(),i},$n=function(x,i,e,c){c===void 0&&(c=!0);var t={mode:c?2:1,volume:{start:i.volume,end:0},duration:e},s;return i.hasOwnProperty("_fade")?(s=i._fade,s.stop().resetFromJSON(t)):(s=new yh(x,i,t),i._fade=s),s.start(),i.isPlaying||i.play(),i};const Kn=Phaser.Utils.Objects.GetValue,Ch=Phaser.Utils.Array.Remove;class Sh{constructor(i,e){this.scene=i,this.soundEffects=[],this.backgroundMusic=void 0,this.setBackgroundMusicLoopValue(Kn(e,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(Kn(e,"bgm.fade",500));var c=Kn(e,"bgm.initial",void 0);c&&this.setCurrentBackgroundMusic(c)}destroy(i){if(this.soundEffects.length&&!i)for(var e=this.soundEffects.length-1;e>=0;e--)this.soundEffects[e].destroy();this.soundEffects.length=0,this.backgroundMusic&&!i&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.scene=void 0}setBackgroundMusicLoopValue(i){return this.backgroundMusicLoopValue=i,this}setBackgroundMusicFadeTime(i){return this.backgroundMusicFadeTime=i,this}getSoundEffects(){return this.soundEffects}getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]}getBackgroundMusic(){return this.backgroundMusic}playSoundEffect(i){var e=this.scene.sound.add(i);return this.soundEffects.push(e),e.once("complete",function(){e.destroy(),!!this.scene&&Ch(this.soundEffects,e)},this).once("destroy",function(){!this.scene||Ch(this.soundEffects,e)},this).play(),this}setSoundEffectVolume(i){var e=this.getLastSoundEffect();return e&&e.setVolume(i),this}fadeInSoundEffect(i){var e=this.getLastSoundEffect();return e&&Th(this.scene,e,i),this}fadeOutSoundEffect(i,e){var c=this.getLastSoundEffect();return c&&$n(this.scene,c,i,e),this}fadeOutAllSoundEffects(i,e){for(var c=this.soundEffects.length-1;c>=0;c--)$n(this.scene,this.soundEffects[c],i,e);return this}setCurrentBackgroundMusic(i){this.backgroundMusic=i,i&&(i.setLoop(this.backgroundMusicLoopValue),i.once("complete",function(){this.backgroundMusic.destroy(),this.backgroundMusic=void 0},this).once("destroy",function(){this.backgroundMusic=void 0},this),i.isPlaying||i.play())}playBackgroundMusic(i){return this.backgroundMusic&&this.backgroundMusic.key===i?this:(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.scene.sound.add(i)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this)}pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this}resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this}stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this}fadeInBackgroundMusic(i){return this.backgroundMusic&&Th(this.scene,this.backgroundMusic,i),this}fadeOutBackgroundMusic(i,e){return this.backgroundMusic&&$n(this.scene,this.backgroundMusic,i,e),this}crossFadeBackgroundMusic(i,e){var c=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(e,!0).playBackgroundMusic(i).fadeInBackgroundMusic(e),this.backgroundMusicFadeTime=c,this}}class Jg{constructor(i,e,c){this.spriteManager=i,this.sprite=e.setName(c),this.tweens={},this.name=c}get scene(){return this.spriteManager.scene}destroy(){this.freeSprite().freeTweens(),this.spriteManager=void 0}freeSprite(){return this.sprite.destroy(),this.sprite=void 0,this}freeTweens(){var i=this.tweens;for(var e in i)i[e].remove(),delete i[e];return this}setProperty(i,e){return this.sprite[i]=e,this}easeProperty(i,e,c,t,s,u){var n=this.tweens;n.hasOwnProperty(i)&&n[i].remove();var h={targets:this.sprite,duration:c,ease:t,yoyo:s,onComplete:function(){n[i].remove(),delete n[i],u&&u()},onCompleteScope:this};return h[i]=e,n[i]=this.scene.tweens.add(h),this}setTexture(i,e){return this.sprite.setTexture(i,e),this}playAnimation(i){return this.sprite.play(i),this}stopAnimation(){return this.sprite.stop(),this}chainAnimation(i){return this.sprite.chain(i),this}pauseAnimation(){return this.sprite.anims.pause(),this}}var Qg=function(x){return x>>16&255},jg=function(x){return x>>8&255},kg=function(x){return x&255};const qg=~(255<<16)&16777215,_g=~(255<<8)&16777215,tx=~255&16777215;var ex=function(x,i){return(i&255)<<16|x&qg},ix=function(x,i){return(i&255)<<8|x&_g},sx=function(x,i){return i&255|x&tx},nx=function(x,i,e,c){return(i&255)<<16|(e&255)<<8|c&255},rx=function(x,i){return x.hasOwnProperty("tintR")||(i===void 0&&(i=16777215),Object.defineProperty(x,"tint",{get:function(){return x._tintRGB},set:function(e){e=Math.floor(e)&16777215,x.setTint(e),x._tintRGB!==e&&(x._tintRGB=e,x._tintR=Qg(e),x._tintG=jg(e),x._tintB=kg(e))}}),Object.defineProperty(x,"tintR",{get:function(){return x._tintR},set:function(e){e=Math.floor(e)&255,x._tintR!==e&&(x._tintR=e,x._tintRGB=ex(x._tintRGB,e),x.tint=x._tintRGB)}}),Object.defineProperty(x,"tintG",{get:function(){return x._tintG},set:function(e){e=Math.floor(e)&255,x._tintG!==e&&(x._tintG=e,x._tintRGB=ix(x._tintRGB,e),x.tint=x._tintRGB)}}),Object.defineProperty(x,"tintB",{get:function(){return x._tintB},set:function(e){e=Math.floor(e)&255,x._tintB!==e&&(x._tintB=e,x._tintRGB=sx(x._tintRGB,e),x.tint=x._tintRGB)}}),Object.defineProperty(x,"tintGray",{get:function(){return Math.floor((x._tintR+x._tintG+x._tintB)/3)},set:function(e){e=Math.floor(e)&255,(x._tintR!==e||x._tintG!==e||x._tintB!==e)&&(x._tintR=e,x._tintG=e,x._tintB=e,x._tintRGB=nx(x._tintRGB,e,e,e),x.tint=x._tintRGB)}}),x.tint=i),x},ax=function(x){for(var i in x)return!1;return!0};const Zn=Phaser.Utils.Objects.GetValue,ox=Phaser.Utils.Array.Remove;class Jn{constructor(i,e){this.scene=i,this.setEventEmitter(Zn(e,"eventEmitter",void 0)),this.setCreateCallback(Zn(e,"createCallback","sprite")),this.setSpriteFadeTime(Zn(e,"fade",500)),this.sprites={},this.removedSprites=[]}destroy(i){this.clear(!i),this.createCallback=void 0,this.scene=void 0}setCreateCallback(i){return i==="sprite"?this.createCallback=function(e,c,t){return e.add.sprite(0,0,c,t)}:i==="image"?this.createCallback=function(e,c,t){return e.add.image(0,0,c,t)}:this.createCallback=i,this}setSpriteFadeTime(i){return this.fadeTime=i,this}has(i){return this.sprites.hasOwnProperty(i)}get(i){return this.sprites[i]}getTweenTask(i,e){if(this.has(i)){var c=this.get(i).tweens;if(c.hasOwnProperty(e))return c[e]}return null}get isEmpty(){return ax(this.sprites)&&this.removedSprites.length===0}clear(i){i===void 0&&(i=!0);for(var e in this.sprites)i&&this.sprites[e].destroy(),delete this.sprites[e];return this.removedSprites.length=0,this}add(i,e,c){this.remove(i);var t;if(arguments.length===3)t=this.createCallback(this.scene,e,c);else{var s=Array.prototype.slice.call(arguments,1);t=this.createCallback(this.scene,...s)}this.fadeTime>0&&rx(t),t.once("destroy",function(){ox(this.removedSprites,t),this.isEmpty&&this.emit("empty")},this);var u=new Jg(this,t,i);return this.sprites[i]=u,this.fadeTime>0&&u.setProperty("tintGray",0).easeProperty("tintGray",255,this.fadeTime),this}setProperty(i,e,c){return this.has(i)?(this.get(i).setProperty(e,c),this):this}easeProperty(i,e,c,t,s,u,n){return this.has(i)?(t===void 0&&(t=1e3),s===void 0&&(s="Linear"),this.get(i).easeProperty(e,c,t,s,u,n),this):this}remove(i){if(!this.has(i))return this;var e=this.get(i);return delete this.sprites[i],this.removedSprites.push(e.sprite),this.fadeTime>0?e.easeProperty("tintGray",0,this.fadeTime,"Linear",!1,function(){e.destroy()}):e.destroy(),this}removeAll(){for(var i in this.sprites)this.remove(i);return this}setTexture(i,e,c){return this.has(i)?(this.get(i).setTexture(e,c),this):this}playAnimation(i,e){return this.has(i)||this.add(i),this.get(i).playAnimation(e),this}stopAnimation(i){return this.has(i)?(this.get(i).stopAnimation(),this):this}chainAnimation(i,e){return this.has(i)?(this.get(i).chainAnimation(e),this):this}pauseAnimation(i){return this.has(i)?(this.get(i).pauseAnimation(),this):this}}Object.assign(Jn.prototype,ci);var hx=function(x){return Rs(x)?this.clickEE=x.input:this.clickEE=x.setInteractive(),this},lx=function(x){return this.camera=x,this},ux=function(x){var i=this;x?typeof x=="function"?this.nextPageInput=function(e,c,t){var s=Ge(i,e,c,t);x.call(i,s)}:this.nextPageInput=function(e,c,t){uh(i,x,e,c,t)}:this.nextPageInput=null},fx=function(x,i){return this.imageManager.add(x,i),this},dx=function(x){return this.isPlaying?this:(this.removeChildren(),this.parser.start(x),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},vx=function(x){var i=It(this);return this.play(x),i};const cx=Phaser.Utils.Objects.GetValue;var Eh=function(){if(!this.isPlaying||this.isPageTyping)return this;var x=cx(this.wrapConfig,"callback",this.runWordWrap);typeof x=="string"&&(x=this[x]);var i=x.call(this,this.lastWrapResult);this.lastWrapResult=i,this.emit("page.start");var e=function(){this.emit(Xn),i.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.nextPageInput&&this.nextPageInput(Eh,[],this))};this.once(Xn,function(){this.typeWriter.off("complete",e,this)}),this.typeWriter.once("complete",e,this).start(i.children)},px=function(){return this.typeWriter.pause(),this},gx=function(){return this.typeWriter.resume(),this},xx=function(x){return this.typeWriter.setTimeScale(x),this},mx=function(x){return this.typeWriter.setIgnoreWait(x),this},yx=function(){if(!this.isPlaying||!this.isPageTyping)return this;var x=this.typeWriter.speed,i=this.typeWriter.ignoreWait,e=this.typeWriter.skipTypingAnimation,c=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setSpeed(x).setIgnoreWait(i).setSkipTypingAnimation(e).setSkipSoundEffect(c)},this).setSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this},Tx={setClickTarget:hx,setTargetCamera:lx,setNextPageInput:ux,addImage:fx,play:dx,playPromise:vx,typingNextPage:Eh,pause:px,resume:gx,setTimeScale:xx,setIgnoreWait:mx,showPage:yx},Cx=function(x){for(var i=0,e=oh.length;i<e;i++)x.emit(oh[i])};const Ph=Phaser.Utils.Objects.IsPlainObject,Ne=Phaser.Utils.Objects.GetValue;class Qn extends Ui{constructor(i,e,c,t,s,u){Ph(e)?u=e:Ph(t)&&(u=t),u===void 0&&(u={});var n=u.text;delete u.text;super(i,e,c,t,s,u);this.type="rexTextPlayer",this.parser=new ag(this,Ne(u,"parser",void 0)),this.typeWriter=new ch(this,Ne(u,"typing",void 0)),this._imageManager=void 0;var h=Ne(u,"images",void 0);h&&this.addImage(h),this._soundManager=void 0;var o=Ne(u,"sounds",void 0);o&&(this._soundManager=new Sh(this.scene,o)),this.setTargetCamera(Ne(u,"camera",this.scene.cameras.main)),this._spriteManager=void 0;var r=Ne(u,"sprites",void 0);r&&(this._spriteManager=new Jn(this.scene,r)),this.setClickTarget(Ne(u,"clickTarget",this)),this.setNextPageInput(Ne(u,"nextPageInput",null)),this.isPlaying=!1,n&&this.play(n)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new Dn(this.scene)),this._imageManager}get soundManager(){return this._soundManager===void 0&&(this._soundManager=new Sh(this.scene)),this._soundManager}get spriteManager(){return this._spriteManager===void 0&&(this._spriteManager=new Jn(this.scene)),this._spriteManager}destroy(i){!this.scene||(Cx(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(i),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(i),this._imageManager=void 0,this._soundManager&&this._soundManager.destroy(i),this._soundManager=void 0,this.camera=void 0,this._spriteManager&&this._spriteManager.destroy(i),this._spriteManager=void 0,this.clickEE=void 0,super.destroy(i))}get isPageTyping(){return this.typeWriter.isPageTyping}}Object.assign(Qn.prototype,Tx);et.register("textPlayer",function(x,i,e,c,t){var s=new Qn(this.scene,x,i,e,c,t);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.TextPlayer",Qn);var jn=function(x,i,e,c,t,s,u,n,h,o,r,a){o===void 0&&(o=0),r===void 0&&(r=2*Math.PI),a===void 0&&(a=!1),i.beginPath(),i.ellipse(e,c,t,s,0,o,r,a),u!=null&&(i.fillStyle=u,i.fill()),n!=null&&(i.strokeStyle=n,i.lineWidth=h,i.stroke())},Sx=function(x,i,e,c,t,s,u,n,h,o,r){h===void 0&&n!=null&&(h=2),o===void 0&&(o="start"),r===void 0&&(r="alphabetic"),i.font=s,i.textAlign=o,i.textBaseline=r,i.fillStyle=u,i.strokeStyle=n,i.lineWidth=h,i.lineCap="round",i.lineJoin="round",n!=null&&n!=="none"&&h>0&&i.strokeText(t,e,c),u!=null&&u!=="none"&&i.fillText(t,e,c)},Ex=function(){var x=this.radius,i=this.thickness*this.radius,e=this.radius-i/2,c=this.radius-i,t=this.canvas,s=this.context;if(this.trackColor&&i>0&&(s.save(),jn(t,s,x,x,e,e,void 0,this.trackColor,i),s.restore()),this.barColor&&e>0){var u,n,h;if(this.value===1)u=!1,n=0,h=2*Math.PI;else{u=this.anticlockwise,n=this.startAngle;var o=2*Math.PI*(u?1-this.value:this.value);h=o+n}s.save(),jn(t,s,x,x,e,e,void 0,this.barColor,i,n,h,u),s.restore()}if(this.centerColor&&c>0){var r;this.centerColor2?(r=this.context.createRadialGradient(x,x,0,x,x,c),r.addColorStop(0,this.centerColor),r.addColorStop(1,this.centerColor2)):r=this.centerColor,s.save(),jn(t,s,x,x,c,c,r),s.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(s.save(),Sx(t,s,x,x,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),s.restore())};const Wi=Phaser.Utils.Objects.GetValue,Px=Phaser.Math.Linear;class Mh extends xi{constructor(i,e){super(i,e);this.resetFromJSON(),this.boot()}start(i){if(this.timer.isRunning)return this;var e=this.parent;this.propertyKey=Wi(i,"key","value");var c=e[this.propertyKey];return this.fromValue=Wi(i,"from",c),this.toValue=Wi(i,"to",c),this.setEase(Wi(i,"ease",this.ease)),this.setDuration(Wi(i,"duration",this.duration)),this.timer.setDuration(this.duration),e[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(i,e){var c=e.t;c=this.easeFn(c),i[this.propertyKey]=Px(this.fromValue,this.toValue,c)}}var Mx=function(x){return this.easeValuePropName=x,this},Rx=function(x){return this.easeValueDuration=x,this},Ax=function(x){return this.easeFunction=x,this},Ox=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},Lx=function(x,i,e){return x==null?this:(i!==void 0&&(x=Percent(x,i,e)),this.easeValueTask===void 0&&(this.easeValueTask=new Mh(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:x,duration:this.easeValueDuration,ease:this.easeFunction}),this)},bi={setEaseValuePropName:Mx,setEaseValueDuration:Rx,setEaseValueFunction:Ax,stopEaseValue:Ox,easeValueTo:Lx};const gt=Phaser.Utils.Objects.GetValue,Fx=Phaser.Utils.Objects.IsPlainObject,Rh=Phaser.Math.Clamp,Ix=Phaser.Math.Linear,Ah=Phaser.Math.Percent,Bx=Phaser.Math.DegToRad(270);class kn extends Ie{constructor(i,e,c,t,s,u,n){Fx(e)&&(n=e,e=gt(n,"x",0),c=gt(n,"y",0),t=gt(n,"radius",1),s=gt(n,"barColor",void 0),u=gt(n,"value",0));var h=t*2;super(i,e,c,h,h);this.type="rexCircularProgressCanvas",this.eventEmitter=gt(n,"eventEmitter",this),this.setRadius(t),this.setTrackColor(gt(n,"trackColor",void 0)),this.setBarColor(s),this.setCenterColor(gt(n,"centerColor",void 0)),this.setThickness(gt(n,"thickness",.2)),this.setStartAngle(gt(n,"startAngle",Bx)),this.setAnticlockwise(gt(n,"anticlockwise",!1)),this.setTextColor(gt(n,"textColor",void 0)),this.setTextStrokeColor(gt(n,"textStrokeColor",void 0),gt(n,"textStrokeThickness",void 0));var o=gt(n,"textFont",void 0);o?this.setTextFont(o):this.setTextFont(gt(n,"textSize","16px"),gt(n,"textFamily","Courier"),gt(n,"textStyle","")),this.setTextFormatCallback(gt(n,"textFormatCallback",void 0),gt(n,"textFormatCallbackScope",void 0));var r=gt(n,"valuechangeCallback",null);if(r!==null){var a=gt(n,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",r,a)}this.setEaseValuePropName("value").setEaseValueDuration(gt(n,"easeValue.duration",0)).setEaseValueFunction(gt(n,"easeValue.ease","Linear")),this.setValue(u)}resize(i,e){return i=Math.floor(Math.min(i,e)),i===this.width?this:(super.resize(i,i),this.setRadius(i/2),this)}get value(){return this._value}set value(i){i=Rh(i,0,1);var e=this._value,c=e!=i;this.dirty=this.dirty||c,this._value=i,c&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(i,e,c){return i==null?this:(e!==void 0&&(i=Ah(i,e,c)),this.value=i,this)}addValue(i,e,c){return e!==void 0&&(i=Ah(i,e,c)),this.value+=i,this}getValue(i,e){var c=this.value;return i!==void 0&&(c=Ix(i,e,c)),c}get radius(){return this._radius}set radius(i){this.dirty=this.dirty||this._radius!=i,this._radius=i;var e=i*2;this.resize(e,e)}setRadius(i){return this.radius=i,this}get trackColor(){return this._trackColor}set trackColor(i){i=ht(i,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=i,this._trackColor=i}setTrackColor(i){return this.trackColor=i,this}get barColor(){return this._barColor}set barColor(i){i=ht(i,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=i,this._barColor=i}setBarColor(i){return this.barColor=i,this}get startAngle(){return this._startAngle}set startAngle(i){this.dirty=this.dirty||this._startAngle!=i,this._startAngle=i}setStartAngle(i){return this.startAngle=i,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(i){this.dirty=this.dirty||this._anticlockwise!=i,this._anticlockwise=i}setAnticlockwise(i){return i===void 0&&(i=!0),this.anticlockwise=i,this}get thickness(){return this._thickness}set thickness(i){i=Rh(i,0,1),this.dirty=this.dirty||this._thickness!=i,this._thickness=i}setThickness(i){return this.thickness=i,this}get centerColor(){return this._centerColor}set centerColor(i){i=ht(i,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=i,this._centerColor=i}get centerColor2(){return this._centerColor2}set centerColor2(i){i=ht(i,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=i,this._centerColor2=i}setCenterColor(i,e){return this.centerColor=i,this.centerColor2=e,this}get textColor(){return this._textColor}set textColor(i){i=ht(i,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=i,this._textColor=i}setTextColor(i){return this.textColor=i,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(i){i=ht(i,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=i,this._textStrokeColor=i}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(i){this.dirty=this.dirty||this._textStrokeThickness!=i,this._textStrokeThickness=i}setTextStrokeColor(i,e){return e===void 0&&(e=2),this.textStrokeColor=i,this.textStrokeThickness=e,this}get textFont(){return this._textFont}set textFont(i){this.dirty=this.dirty||this._textFont!=i,this._textFont=i}setTextFont(i,e,c){var t;return e===void 0?t=i:t=c+" "+i+" "+e,this.textFont=t,this}setTextFormatCallback(i,e){return this.textFormatCallback=i,this.textFormatCallbackScope=e,this}updateTexture(){return this.clear(),Ex.call(this),super.updateTexture(),this}getFormatText(i){i===void 0&&(i=this.value);var e;return this.textFormatCallbackScope?e=this.textFormatCallback(i):e=this.textFormatCallback.call(this.textFormatCallbackScope,i),e}}Object.assign(kn.prototype,bi);et.register("circularProgressCanvas",function(x,i,e,c,t,s){var u=new kn(this.scene,x,i,e,c,t,s);return this.scene.add.existing(u),u});st(window,"RexPlugins.UI.CircularProgressCanvas",kn);var Dx=function(x,i,e,c){i.updateData(),e.addToRenderList(i);var t=x.pipelines.set(i.pipeline),s=$a(i,e,c),u=t.calcMatrix.copyFrom(s.calc),n=i._displayOriginX,h=i._displayOriginY,o=e.alpha*i.alpha;x.pipelines.preBatch(i);for(var r=i.geom,a=0,d=r.length;a<d;a++)r[a].webglRender(t,u,o,n,h);x.pipelines.postBatch(i)};const Gx=Phaser.Renderer.Canvas.SetTransform;var wx=function(x,i,e,c){i.updateData(),e.addToRenderList(i);var t=x.currentContext;if(Gx(x,t,i,e,c)){for(var s=i._displayOriginX,u=i._displayOriginY,n=i.geom,h=0,o=n.length;h<o;h++)n[h].canvasRender(t,s,u);t.restore()}},Nx={renderWebGL:Dx,renderCanvas:wx};const zx=Phaser.GameObjects.Shape,Vx=Phaser.Utils.Array.Remove;class qn extends zx{constructor(i,e,c,t,s){e===void 0&&(e=0),c===void 0&&(c=0),t===void 0&&(t=0),s===void 0&&(s=t);super(i,"rexShapes",[]);this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(e,c),this.setSize(t,s),this.updateDisplayOrigin()}get width(){return this._width}set width(i){this.setSize(i,this._height)}get height(){return this._height}set height(i){this.setSize(this._width,i)}setDirty(i){return i===void 0&&(i=!0),this.dirty=i,this}setSize(i,e){this.isSizeChanged=this.isSizeChanged||this._width!==i||this._height!==e,this.dirty=this.dirty||this.isSizeChanged,this._width=i,this._height=e,this.updateDisplayOrigin();var c=this.input;return c&&!c.customHitArea&&(c.hitArea.width=i,c.hitArea.height=e),this}resize(i,e){return this.setSize(i,e),this}setFillStyle(i,e){return e===void 0&&(e=1),this.dirty=this.dirty||this.fillColor!==i||this.fillAlpha!==e,this.fillColor=i,this.fillAlpha=e,this}setStrokeStyle(i,e,c){return c===void 0&&(c=1),this.dirty=this.dirty||this.lineWidth!==i||this.strokeColor!==e||this.strokeAlpha!==c,this.lineWidth=i,this.strokeColor=e,this.strokeAlpha=c,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var i=this.geom,e=0,c=i.length;e<c;e++){var t=i[e];t.dirty&&t.updateData()}return this.dirty=!1,this.isSizeChanged=!1,this}clear(){return this.geom.length=0,fi(this.shapes),this}getShape(i){return this.shapes[i]}getShapes(){return this.geom}addShape(i){this.geom.push(i);var e=i.name;return e&&(this.shapes[e]=i),this.dirty=!0,this}deleteShape(i){var e=this.getShape(i);return e&&(delete this.shapes[i],Vx(this.geom,e)),this}}Object.assign(qn.prototype,Nx);var Yx=function(x,i){return x===void 0?this.isFilled=!1:(i===void 0&&(i=1),this.isFilled=!0,this.fillColor=x,this.fillAlpha=i),this},Ux=function(x,i,e){return x===void 0||i===void 0?this.isStroked=!1:(e===void 0&&(e=1),this.isStroked=!0,this.lineWidth=x,this.strokeColor=i,this.strokeAlpha=e),this},Xx={fillStyle:Yx,lineStyle:Ux},Wx=function(x,i){return this.data===void 0&&(this.data={}),this.data[x]=i,this},bx=function(x,i){return this.data===void 0&&(this.data={}),this.data.hasOwnProperty(x)||(this.data[x]=i),this.data[x]},Hx={setData:Wx,getData:bx};class Ls{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(i){return this.name=i,this}reset(){return this.fillStyle(),this.lineStyle(),this}webglRender(i,e,c,t,s){}canvasRender(i,e,c){}updateData(){}}Object.assign(Ls.prototype,Xx,Hx);const $x=Phaser.Geom.Polygon.Earcut;class Fs extends Ls{constructor(){super();this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=$x(this.pathData),this}webglRender(i,e,c,t,s){this.isFilled&&Xa(i,e,this,c,t,s),this.isStroked&&fs(i,this,c,t,s)}canvasRender(i,e,c){var t=this.pathData,s=t.length-1,u=t[0]-e,n=t[1]-c;i.beginPath(),i.moveTo(u,n),this.closePath||(s-=2);for(var h=2;h<s;h+=2){var o=t[h]-e,r=t[h+1]-c;i.lineTo(o,r)}this.closePath&&i.closePath(),this.isFilled&&(Gi(i,this),i.fill()),this.isStroked&&(wi(i,this),i.stroke())}}const Oh=Phaser.Math.DegToRad;class Is extends Fs{constructor(i,e,c,t,s,u,n,h){i===void 0&&(i=0),e===void 0&&(e=0),c===void 0&&(c=0),t===void 0&&(t=0),s===void 0&&(s=0),u===void 0&&(u=360),n===void 0&&(n=!1),h===void 0&&(h=!1);super();this.setCenterPosition(i,e),this.setRadius(c,t),this.setAngle(s,u,n),this.setPie(h),this.setIterations(32)}get x(){return this._x}set x(i){this.dirty=this.dirty||this._x!==i,this._x=i}get y(){return this._y}set y(i){this.dirty=this.dirty||this._y!==i,this._y=i}setCenterPosition(i,e){return e===void 0&&(e=i),this.x=i,this.y=e,this}get radiusX(){return this._radiusX}set radiusX(i){this.dirty=this.dirty||this._radiusX!==i,this._radiusX=i}get radiusY(){return this._radiusY}set radiusY(i){this.dirty=this.dirty||this._radiusY!==i,this._radiusY=i}setRadius(i,e){return e===void 0&&(e=i),this.radiusX=i,this.radiusY=e,this}get startAngle(){return this._startAngle}set startAngle(i){this.dirty=this.dirty||this._startAngle!==i,this._startAngle=i}get endAngle(){return this._endAngle}set endAngle(i){this.dirty=this.dirty||this._endAngle!==i,this._endAngle=i}get anticlockwise(){return this._anticlockwise}set anticlockwise(i){this.dirty=this.dirty||this._anticlockwise!==i,this._anticlockwise=i}setAngle(i,e,c){return c===void 0&&(c=!1),this.startAngle=i,this.endAngle=e,this.anticlockwise=c,this}get pie(){return this._pie}set pie(i){this.dirty=this.dirty||this._pie!==i,this._pie=i}setPie(i){return i===void 0&&(i=!0),this.pie=i,this}get iterations(){return this._iterations}set iterations(i){this.dirty=this.dirty||this._iterations!==i,this._iterations=i}setIterations(i){return this.iterations=i,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),ui(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(i,e,c){i.beginPath();var t=this.x-e,s=this.y-c,u=Oh(this.startAngle),n=Oh(this.endAngle);this.pie&&(i.moveTo(t,s),i.lineTo(t+Math.cos(u)*this.radiusX,s+Math.sin(u)*this.radiusY)),i.ellipse(t,s,this.radiusX,this.radiusY,0,u,n,this.anticlockwise),this.pie&&i.lineTo(t,s),this.isFilled&&(Gi(i,this),i.fill()),this.isStroked&&(wi(i,this),i.stroke())}}class _n extends Is{constructor(i,e,c){super(i,e,c,c,0,360)}}class Kx extends Fs{constructor(i){super();this.setCurve(i),this.setIterations(32)}get curve(){return this._curve}set curve(i){this.dirty=this.dirty||this._curve!==i,this._curve=i}setCurve(i){return this.curve=i,this}get iterations(){return this._iterations}set iterations(i){this.dirty=this.dirty||this._iterations!==i,this._iterations=i}setIterations(i){return this.iterations=i,this}updateData(){this.pathData.length=0;for(var i=this.curve.getPoints(this.iterations),e=0,c=i.length;e<c;e++)this.pathData.push(i[e].x,i[e].y);return this.pathData.push(i[0].x,i[0].y),super.updateData(),this}}class Zx extends Is{constructor(i,e,c,t){super(i,e,c,t,0,360)}}class Jx extends Fs{constructor(i,e,c,t){i===void 0&&(i=0),e===void 0&&(e=0),c===void 0&&(c=0),t===void 0&&(t=0);super();this.setP0(i,e),this.setP1(c,t)}get x0(){return this._x0}set x0(i){this.dirty=this.dirty||this._x0!==i,this._x0=i}get y0(){return this._y0}set y0(i){this.dirty=this.dirty||this._y0!==i,this._y0=i}setP0(i,e){return this.x0=i,this.y0=e,this}get x1(){return this._x1}set x1(i){this.dirty=this.dirty||this._x1!==i,this._x1=i}get y1(){return this._y1}set y1(i){this.dirty=this.dirty||this._y1!==i,this._y1=i}setP1(i,e){return this.x1=i,this.y1=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var Qx=function(x,i,e){return e.length=0,e.push(x,i),e};const Lh=Phaser.Math.Interpolation.QuadraticBezier;var Fh=function(x,i,e,c,t,s){for(var u=s.length,n=s[u-2],h=s[u-1],o=1,r=t-1;o<=r;o++){var a=o/r;s.push(Lh(a,n,x,e),Lh(a,h,i,c))}return s};const jx=Phaser.Math.RotateAround;var kx=function(x,i,e,c){for(var t={x:0,y:0},s=0,u=c.length-1;s<u;s+=2)t.x=c[s],t.y=c[s+1],jx(t,x,i,e),c[s]=t.x,c[s+1]=t.y;return c},qx=function(x,i,e){for(var c=0,t=e.length-1;c<t;c+=2)e[c]+=x,e[c+1]+=i;return e},_x=function(x,i){i===void 0&&(i=[]);for(var e=0,c=x.length-1;e<c;e+=2)i.push({x:x[e],y:x[e+1]});return i};const t0=Phaser.Geom.Polygon;var e0=function(x,i){return i===void 0&&(i=new t0),i.setTo(x),i};const i0=Phaser.Math.DegToRad;class s0{constructor(i){i===void 0&&(i=[]),this.pathData=i,this.closePath=!1,this.setIterations(32),this.lastPointX=void 0,this.lastPointY=void 0}setIterations(i){return this.iterations=i,this}startAt(i,e){return Qx(i,e,this.pathData),this.lastPointX=i,this.lastPointY=e,this}lineTo(i,e,c){return c===void 0&&(c=!1),c&&(i+=this.lastPointX,e+=this.lastPointY),li(i,e,this.pathData),this.lastPointX=i,this.lastPointY=e,this}verticalLineTo(i,e){return this.lineTo(i,this.lastPointY,e),this}horizontalLineTo(i,e){return this.lineTo(this.lastPointX,i,e),this}ellipticalArc(i,e,c,t,s,u,n){n===void 0&&(n=!1),ui(i,e,c,t,s,u,n,this.iterations,this.pathData);var h=this.pathData.length;return this.lastPointX=this.pathData[h-2],this.lastPointY=this.pathData[h-1],this}arc(i,e,c,t,s,u){return this.ellipticalArc(i,e,c,c,t,s,u),this}quadraticBezierTo(i,e,c,t){return Fh(i,e,c,t,this.iterations,this.pathData),this.lastPointX=c,this.lastPointY=t,this.lastCX=i,this.lastCY=e,this}smoothQuadraticBezierTo(i,e){var c=this.lastPointX*2-this.lastCX,t=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(c,t,i,e),this}cubicBezierCurveTo(i,e,c,t,s,u){return Fh(i,e,c,t,s,u,this.iterations,this.pathData),this.lastPointX=s,this.lastPointY=u,this.lastCX=c,this.lastCY=t,this}smoothCubicBezierCurveTo(i,e,c,t){var s=this.lastPointX*2-this.lastCX,u=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(s,u,i,e,c,t),this}close(){return this.closePath=!0,this}end(){return this.pathData.push(this.lastPointX,this.lastPointY),this}rotateAround(i,e,c){if(this.pathData.length===0)return this;c=i0(c),kx(i,e,c,this.pathData);var t=this.pathData.length;if(this.lastPointX=this.pathData[t-2],this.lastPointY=this.pathData[t-1],this.lastCX!==void 0){var s={x:this.lastCX,y:this.lastCY};PointRotateAround(s,i,e,c),this.lastCX=s.x,this.lastCY=s.y}return this}offset(i,e){return qx(i,e,this.pathData),this}toPoints(){return _x(this.pathData)}toPolygon(i){return e0(this.pathData,i)}draw(i,e,c){var t=this.toPoints();return e&&i.fillPoints(t,this.closePath,this.closePath),c&&i.strokePoints(t,this.closePath,this.closePath),this}}class n0 extends Fs{constructor(){super();this.builder=new s0(this.pathData)}get iterations(){return this.builder.iterations}set iterations(i){this.dirty=this.dirty||this.builder.iterations!==i,this.builder.setIterations(i)}setIterations(i){return this.iterations=i,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}startAt(i,e){return this.builder.startAt(i,e),this.dirty=!0,this}lineTo(i,e,c){return this.builder.lineTo(i,e,c),this.dirty=!0,this}verticalLineTo(i,e){return this.builder.verticalLineTo(i,e),this.dirty=!0,this}horizontalLineTo(i,e){return this.builder.horizontalLineTo(i,e),this.dirty=!0,this}ellipticalArc(i,e,c,t,s,u,n){return this.builder.ellipticalArc(i,e,c,t,s,u,n),this.dirty=!0,this}arc(i,e,c,t,s,u){return this.builder.arc(i,e,c,t,s,u),this.dirty=!0,this}quadraticBezierTo(i,e,c,t){return this.builder.quadraticBezierTo(i,e,c,t),this.dirty=!0,this}smoothQuadraticBezierTo(i,e){return this.builder.smoothQuadraticBezierTo(i,e),this.dirty=!0,this}cubicBezierCurveTo(i,e,c,t,s,u){return this.builder.cubicBezierCurveTo(i,e,c,t,s,u),this.dirty=!0,this}smoothCubicBezierCurveTo(i,e,c,t){return this.builder.smoothCubicBezierCurveTo(i,e,c,t),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(i,e,c){return this.builder.rotateAround(i,e,c),this.dirty=!0,this}offset(i,e){return this.builder.offset(i,e),this.dirty=!0,this}toPolygon(i){return this.builder.toPolygon(i)}}Phaser.Math.Distance.Between;Phaser.Math.Linear;const r0=Phaser.Renderer.WebGL.Utils;class a0 extends Ls{constructor(i,e,c,t){i===void 0&&(i=0),e===void 0&&(e=0),c===void 0&&(c=0),t===void 0&&(t=c);super();this.pathData=[],this.closePath=!0,this.setTopLeftPosition(i,e),this.setSize(c,t)}get x(){return this._x}set x(i){this.dirty=this.dirty||this._x!==i,this._x=i}get y(){return this._y}set y(i){this.dirty=this.dirty||this._y!==i,this._y=i}setTopLeftPosition(i,e){return this.x=i,this.y=e,this}get width(){return this._width}set width(i){this.dirty=this.dirty||this._width!==i,this._width=i}get height(){return this._height}set height(i){this.dirty=this.dirty||this._height!==i,this._height=i}setSize(i,e){return this.width=i,this.height=e,this}updateData(){this.pathData.length=0;var i=this.x,e=i+this.width,c=this.y,t=c+this.height;return this.pathData.push(i,c),this.pathData.push(e,c),this.pathData.push(e,t),this.pathData.push(i,t),this.pathData.push(i,c),this}webglRender(i,e,c,t,s){if(this.isFilled){var u=i.fillTint,n=r0.getTintAppendFloatAlpha(this.fillColor,this.fillAlpha*c);u.TL=n,u.TR=n,u.BL=n,u.BR=n,i.batchFillRect(-t+this.x,-s+this.y,this.width,this.height)}this.isStroked&&fs(i,this,c,t,s)}canvasRender(i,e,c){this.isFilled&&(Gi(i,this),i.fillRect(-e,-c,this.width,this.height)),this.isStroked&&(wi(i,this),i.beginPath(),i.rect(-e,-c,this.width,this.height),i.stroke())}}const o0=Phaser.Renderer.WebGL.Utils;class h0 extends Ls{constructor(i,e,c,t,s,u){i===void 0&&(i=0),e===void 0&&(e=0),c===void 0&&(c=0),t===void 0&&(t=0),s===void 0&&(s=0),u===void 0&&(u=0);super();this.pathData=[],this.closePath=!0,this.setP0(i,e),this.setP1(c,t),this.setP2(s,u)}get x0(){return this._x0}set x0(i){this.dirty=this.dirty||this._x0!==i,this._x0=i}get y0(){return this._y0}set y0(i){this.dirty=this.dirty||this._y0!==i,this._y0=i}setP0(i,e){return this.x0=i,this.y0=e,this}get x1(){return this._x1}set x1(i){this.dirty=this.dirty||this._x1!==i,this._x1=i}get y1(){return this._y1}set y1(i){this.dirty=this.dirty||this._y1!==i,this._y1=i}setP1(i,e){return this.x1=i,this.y1=e,this}get x2(){return this._x2}set x2(i){this.dirty=this.dirty||this._x2!==i,this._x2=i}get y2(){return this._y2}set y2(i){this.dirty=this.dirty||this._y2!==i,this._y2=i}setP2(i,e){return this.dirty=this.dirty||this.x2!==i||this.y2!==e,this.x2=i,this.y2=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),this}webglRender(i,e,c,t,s){if(this.isFilled){var u=o0.getTintAppendFloatAlpha(this.fillColor,this.fillAlpha*c),n=this.x0-t,h=this.y0-s,o=this.x1-t,r=this.y1-s,a=this.x2-t,d=this.y2-s,l=e.getX(n,h),f=e.getY(n,h),v=e.getX(o,r),g=e.getY(o,r),p=e.getX(a,d),m=e.getY(a,d);i.batchTri(l,f,v,g,p,m,u,u,u)}this.isStroked&&fs(i,this,c,t,s)}canvasRender(i,e,c){var t=this.x1-e,s=this.y1-c,u=this.x2-e,n=this.y2-c,h=this.x3-e,o=this.y3-c;i.beginPath(),i.moveTo(t,s),i.lineTo(u,n),i.lineTo(h,o),i.closePath(),this.isFilled&&(Gi(i,this),i.fill()),this.isStroked&&(wi(i,this),i.stroke())}}const Bt=Phaser.Utils.Objects.GetValue,l0=Phaser.Utils.Objects.IsPlainObject,Ih=Phaser.Math.Clamp,u0=Phaser.Math.Linear,Bh=Phaser.Math.Percent,f0=Phaser.Math.DegToRad(270),d0=Phaser.Math.RadToDeg;class Bs extends qn{constructor(i,e,c,t,s,u,n){l0(e)&&(n=e,e=Bt(n,"x",0),c=Bt(n,"y",0),t=Bt(n,"radius",1),s=Bt(n,"barColor",void 0),u=Bt(n,"value",0));var h=t*2;super(i,e,c,h,h);this.type="rexCircularProgress",this.eventEmitter=Bt(n,"eventEmitter",this),this.addShape(new _n().setName("track")).addShape(new Is().setName("bar")).addShape(new _n().setName("center")),this.setRadius(t),this.setTrackColor(Bt(n,"trackColor",void 0)),this.setBarColor(s),this.setCenterColor(Bt(n,"centerColor",void 0)),this.setThickness(Bt(n,"thickness",.2)),this.setStartAngle(Bt(n,"startAngle",f0)),this.setAnticlockwise(Bt(n,"anticlockwise",!1));var o=Bt(n,"valuechangeCallback",null);if(o!==null){var r=Bt(n,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",o,r)}this.setEaseValuePropName("value").setEaseValueDuration(Bt(n,"easeValue.duration",0)).setEaseValueFunction(Bt(n,"easeValue.ease","Linear")),this.setValue(u)}resize(i,e){return i=Math.floor(Math.min(i,e)),i===this.width?this:(super.resize(i,i),this.setRadius(i/2),this)}get value(){return this._value}set value(i){i=Ih(i,0,1);var e=this._value,c=e!=i;this.dirty=this.dirty||c,this._value=i,c&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(i,e,c){return i==null?this:(e!==void 0&&(i=Bh(i,e,c)),this.value=i,this)}addValue(i,e,c){return e!==void 0&&(i=Bh(i,e,c)),this.value+=i,this}getValue(i,e){var c=this.value;return i!==void 0&&(c=u0(i,e,c)),c}get radius(){return this._radius}set radius(i){this.dirty=this.dirty||this._radius!=i,this._radius=i;var e=i*2;this.resize(e,e)}setRadius(i){return this.radius=i,this}get trackColor(){return this._trackColor}set trackColor(i){this.dirty=this.dirty||this._trackColor!=i,this._trackColor=i}setTrackColor(i){return this.trackColor=i,this}get barColor(){return this._barColor}set barColor(i){this.dirty=this.dirty||this._barColor!=i,this._barColor=i}setBarColor(i){return this.barColor=i,this}get startAngle(){return this._startAngle}set startAngle(i){this.dirty=this.dirty||this._startAngle!=i,this._startAngle=i}setStartAngle(i){return this.startAngle=i,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(i){this.dirty=this.dirty||this._anticlockwise!=i,this._anticlockwise=i}setAnticlockwise(i){return i===void 0&&(i=!0),this.anticlockwise=i,this}get thickness(){return this._thickness}set thickness(i){i=Ih(i,0,1),this.dirty=this.dirty||this._thickness!=i,this._thickness=i}setThickness(i){return this.thickness=i,this}get centerColor(){return this._centerColor}set centerColor(i){this.dirty=this.dirty||this._centerColor!=i,this._centerColor=i}setCenterColor(i){return this.centerColor=i,this}updateShapes(){var i=this.radius,e=this.thickness*this.radius,c=this.radius-e/2,t=this.radius-e,s=this.getShape("track");this.trackColor&&e>0?s.setCenterPosition(i,i).setRadius(c).lineStyle(e,this.trackColor):s.reset();var u=this.getShape("bar");if(this.barColor&&c>0){var n,h,o;if(this.value===1)n=!1,h=0,o=360;else{n=this.anticlockwise,h=d0(this.startAngle);var r=360*(n?1-this.value:this.value);o=r+h}u.setCenterPosition(i,i).setRadius(c).setAngle(h,o,n).lineStyle(e,this.barColor)}else u.reset();var a=this.getShape("center");this.centerColor&&t>0?a.setCenterPosition(i,i).setRadius(t).fillStyle(this.centerColor):a.reset()}}Object.assign(Bs.prototype,bi);et.register("circularProgress",function(x,i,e,c,t,s){var u=new Bs(this.scene,x,i,e,c,t,s);return this.scene.add.existing(u),u});st(window,"RexPlugins.UI.CircularProgress",Bs);var Ds=function(x){return x.hasOwnProperty("rexSizer")||(x.rexSizer={}),x.rexSizer},v0=function(x){var i=Ds(x);return i.hasOwnProperty("prevState")||(i.prevState={}),i.prevState},Dh=function(x,i){i===void 0&&(tr===void 0&&(tr=new Phaser.Geom.Rectangle),i=tr);var e=x.game.config;return i.setTo(0,0,e.width,e.height),i},tr,c0=function(x){return x===void 0&&(x=Dh(this.scene)),this.left=Math.max(this.left,x.left),this.right=Math.min(this.right,x.right),this.top=Math.max(this.top,x.top),this.bottom=Math.min(this.bottom,x.bottom),this};const Xt=Phaser.Display.Align;var Gs={center:Xt.CENTER,left:Xt.LEFT_CENTER,right:Xt.RIGHT_CENTER,top:Xt.TOP_CENTER,bottom:Xt.BOTTOM_CENTER,"left-top":Xt.TOP_LEFT,"left-center":Xt.LEFT_CENTER,"left-bottom":Xt.BOTTOM_LEFT,"center-top":Xt.TOP_CENTER,"center-center":Xt.CENTER,"center-bottom":Xt.BOTTOM_CENTER,"right-top":Xt.TOP_RIGHT,"right-center":Xt.RIGHT_CENTER,"right-bottom":Xt.BOTTOM_RIGHT},er=new Phaser.GameObjects.Zone({sys:{queueDepthSort:De,events:{once:De}}},0,0,1,1);er.setOrigin(0);var Re={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},Ct=function(x){return x.displayWidth!==void 0?x.displayWidth:x.width},pt=function(x){return x.displayHeight!==void 0?x.displayHeight:x.height},ir=function(x){var i=pt(x);return x.y+i-i*x.originY},sr=function(x){var i=Ct(x);return x.x-i*x.originX+i*.5},nr=function(x,i){var e=pt(x);return x.y=i-e+e*x.originY,x},rr=function(x,i){var e=Ct(x),c=e*x.originX;return x.x=i+c-e*.5,x},p0=function(x,i,e,c){return e===void 0&&(e=0),c===void 0&&(c=0),rr(x,sr(i)+e),nr(x,ir(i)+c),x},ar=function(x){var i=Ct(x);return x.x-i*x.originX},or=function(x,i){var e=Ct(x);return x.x=i+e*x.originX,x},g0=function(x,i,e,c){return e===void 0&&(e=0),c===void 0&&(c=0),or(x,ar(i)-e),nr(x,ir(i)+c),x},hr=function(x){var i=Ct(x);return x.x+i-i*x.originX},lr=function(x,i){var e=Ct(x);return x.x=i-e+e*x.originX,x},x0=function(x,i,e,c){return e===void 0&&(e=0),c===void 0&&(c=0),lr(x,hr(i)+e),nr(x,ir(i)+c),x},ur=function(x,i){var e=pt(x),c=e*x.originY;return x.y=i+c-e*.5,x},m0=function(x,i,e){return rr(x,i),ur(x,e)},fr=function(x){var i=pt(x);return x.y-i*x.originY+i*.5},y0=function(x,i,e,c){return e===void 0&&(e=0),c===void 0&&(c=0),m0(x,sr(i)+e,fr(i)+c),x},T0=function(x,i,e,c){return e===void 0&&(e=0),c===void 0&&(c=0),or(x,ar(i)-e),ur(x,fr(i)+c),x},C0=function(x,i,e,c){return e===void 0&&(e=0),c===void 0&&(c=0),lr(x,hr(i)+e),ur(x,fr(i)+c),x},dr=function(x){var i=pt(x);return x.y-i*x.originY},vr=function(x,i){var e=pt(x);return x.y=i+e*x.originY,x},S0=function(x,i,e,c){return e===void 0&&(e=0),c===void 0&&(c=0),rr(x,sr(i)+e),vr(x,dr(i)-c),x},E0=function(x,i,e,c){return e===void 0&&(e=0),c===void 0&&(c=0),or(x,ar(i)-e),vr(x,dr(i)-c),x},P0=function(x,i,e,c){return e===void 0&&(e=0),c===void 0&&(c=0),lr(x,hr(i)+e),vr(x,dr(i)-c),x},ue=[];ue[Re.BOTTOM_CENTER]=p0;ue[Re.BOTTOM_LEFT]=g0;ue[Re.BOTTOM_RIGHT]=x0;ue[Re.CENTER]=y0;ue[Re.LEFT_CENTER]=T0;ue[Re.RIGHT_CENTER]=C0;ue[Re.TOP_CENTER]=S0;ue[Re.TOP_LEFT]=E0;ue[Re.TOP_RIGHT]=P0;var Gh=function(x,i,e,c,t){return ue[e](x,i,c,t)},ws=function(x,i,e,c,t,s){er.setPosition(i,e).setSize(c,t),Gh(x,er,s)};const Hi=Phaser.Utils.Objects.GetValue,M0=Phaser.GameObjects.Group;var R0=function(x,i){var e=x.scene,c,t,s,u;if(typeof i=="number")c=i;else{c=Hi(i,"color",16777215);var n=Hi(i,"name",!1);n&&(t=Hi(n,"createTextCallback",A0),s=Hi(n,"createTextCallbackScope",void 0),u=Hi(n,"align","left-top"),typeof u=="string"&&(u=Gs[u]))}if(t&&!x.children){x.children=new M0(e),x.once("destroy",function(f,v){f.children.destroy(!v),f.children=void 0});var h=x.clear.bind(x);x.clear=function(){h(),x.children.clear(!1,!0)}}for(var o=this.getAllShownChildren([this]),r,a,d=0,l=o.length;d<l;d++)r=o[d],!!r.getBounds&&(c&&x.lineStyle(1,c).strokeRectShape(r.getBounds($i)),r.name&&t&&(s?a=t.call(s,e):a=t(e),a&&(a.setText(r.name),x.children.add(a),ws(a,$i.x,$i.y,$i.width,$i.height,u))));return this},A0=function(x,i,e){return x.add.text(0,0,"")},$i=new Phaser.Geom.Rectangle;const Ns=Phaser.Utils.Objects.GetValue;var mi=function(x,i){return i===void 0&&(i={}),typeof x=="number"?(i.left=x,i.right=x,i.top=x,i.bottom=x):(i.left=Ns(x,"left",0),i.right=Ns(x,"right",0),i.top=Ns(x,"top",0),i.bottom=Ns(x,"bottom",0)),i};const O0=$t.prototype.add;var Ki=function(x){return O0.call(this,x),this.sizerEventsEnable&&(x.emit("sizer.add",x,this),this.emit("add",x,this)),this};const L0=$t.prototype.add;var F0={pin(x){return L0.call(this,x),this},addBackground(x,i,e){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof i=="string"&&(e=i,i=void 0),i===void 0&&(i=0),Ki.call(this,x),this.backgroundChildren.push(x);var c=this.getSizerConfig(x);return c.padding=mi(i),e!==void 0&&this.addChildrenMap(e,x),this},isBackground(x){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(x)!==-1}},wh=function(x,i){return this.childrenMap===void 0&&(this.childrenMap={}),this.childrenMap[x]=i,this},I0=function(x,i){if(typeof x=="string"&&(x=x.split(".")),x.length!==0){var e=x.shift(),c=null;if(e.charAt(0)==="#")e=e.substring(1),c=this.getByName(e,i);else if(e.indexOf("[")===-1)this.childrenMap&&(c=this.childrenMap[e]);else{var t=e.match(B0);if(t!=null&&this.childrenMap){var s=this.childrenMap[t[1]];s&&(c=s[t[2]])}}return x.length===0?c:c&&c.childrenMap?c.getElement(x):null}};const B0=/(\S+)\[(\d+)\]/i;var D0={getInnerPadding(x){return Es(this.space,x)},setInnerPadding(x,i){return Ps(this.space,x,i),this},getOutterPadding(x){return Es(this.getSizerConfig(this).padding,x)},setOuterPadding(x,i){return Ps(this.getSizerConfig(this).padding,x,i),this},getChildOutterPadding(x,i){return typeof x=="string"&&(x=this.getElement(x)),Es(this.getSizerConfig(x).padding,i)},setChildOuterPadding(x,i,e){return typeof x=="string"&&(x=this.getElement(x)),Ps(this.getSizerConfig(x).padding,i,e),this}},cr=function(x){var i=Math.max(this.childrenWidth,this.minWidth);return x===void 0&&(x=i),x},G0=function(x){var i,e;for(var c in this.sizerChildren)i=this.sizerChildren[c],i&&i.isRexSizer&&!i.ignoreLayout&&(e=this.getExpandedChildWidth(i,x),e=i.resolveWidth(e),i.resolveChildrenWidth(e))},pr=function(x){var i=Math.max(this.childrenHeight,this.minHeight);return x===void 0&&(x=i),x},w0=function(x){var i;return x.isRexSizer?i=Math.max(x.minWidth,x.childrenWidth):x.minWidth!==void 0?i=x.minWidth:i=Ct(x),i},N0=function(x){var i;return x.isRexSizer?i=Math.max(x.minHeight,x.childrenHeight):x.minHeight!==void 0?i=x.minHeight:i=pt(x),i},z0=function(x,i){return i},V0=function(x,i){return i},Y0=function(){return 0},U0=function(){return 0},X0=function(x){x===void 0&&(x=[]);for(var i=x.length,e=this.getChildrenSizers(x),c=x.length,t=i;t<c;t++)e[t].getAllChildrenSizers(x);return x},W0=function(x){return x===void 0&&(x=[]),x},b0={getShownChildren(x){x===void 0&&(x=[]);for(var i=this.children,e,c=0,t=i.length;c<t;c++)e=i[c],!(e.rexSizer&&e.rexSizer.hidden)&&x.push(e);return x},getAllShownChildren(x){x===void 0&&(x=[]);for(var i=this.children,e,c=0,t=i.length;c<t;c++)e=i[c],!(e.rexSizer&&e.rexSizer.hidden)&&(x.push(e),e.hasOwnProperty("isRexContainerLite")&&x.push(...e.getAllShownChildren()));return x}},Zi=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var x=this.getChildrenSizers(),i,e=0,c=x.length;e<c;e++)i=x[e],!i.ignoreLayout&&i.preLayout()},H0=function(){return this.runLayout(),this},$0=function(x,i,e){if(this.ignoreLayout)return this;var c=!x;return c&&this.preLayout(),i=this.resolveWidth(i),c&&(this.resolveChildrenWidth(i),this.runWidthWrap(i)),e=this.resolveHeight(e),this.resize(i,e),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},K0=function(){},Z0=function(x,i,e){return this._anchor&&this._anchor.updatePosition(),this},Nh=function(x){var i,e;for(var c in this.sizerChildren)i=this.sizerChildren[c],!(!i||i.isRexSizer&&i.ignoreLayout)&&(e=this.getExpandedChildWidth(i,x),e===void 0&&(e=this.resolveWidth(e)),i.runWidthWrap&&i.runWidthWrap(e));return this};const zh=Phaser.Geom.Rectangle;Phaser.Scale.Center;var Vh=function(x,i){i===void 0?i=new zh:i===!0&&(i=J0);var e=x.scale,c=e.baseSize,t=e.parentSize,s=e.canvasBounds,u=e.displayScale,n=s.x>=0?0:-(s.x*u.x),h=s.y>=0?0:-(s.y*u.y),o;t.width>=s.width?o=c.width:o=c.width-(s.width-t.width)*u.x;var r;return t.height>=s.height?r=c.height:r=c.height-(s.height-t.height)*u.y,i.setTo(n,h,o,r),i},J0=new zh;class gr extends Zt{constructor(i,e){super(i,{eventEmitter:!1});this.viewport=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(i){i===void 0&&(i={});var e,c;i.x!==void 0?(e=null,c=i.x):i.left!==void 0?(e=0,c=i.left):i.right!==void 0?(e=1,c=i.right):i.centerX!==void 0&&(e=.5,c=i.centerX);var t,s;i.y!==void 0?(t=null,s=i.y):i.top!==void 0?(t=0,s=i.top):i.bottom!==void 0?(t=1,s=i.bottom):i.centerY!==void 0&&(t=.5,s=i.centerY);var u,n;c!==void 0&&(c=c.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),u=parseFloat(c[0])/100,n=c[1]===""?0:parseFloat(c[1]));var h,o;s!==void 0&&(s=s.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),h=parseFloat(s[0])/100,o=s[1]===""?0:parseFloat(s[1]));var r=i.width,a,d;r!==void 0&&(r=r.split("%"),a=parseFloat(r[0])/100,d=r[1]===""?0:parseFloat(r[1]));var l=i.height,f,v;l!==void 0&&(l=l.split("%"),f=parseFloat(l[0])/100,v=l[1]===""?0:parseFloat(l[1])),this.setAlign(e,t),this.setPercentage(u,h),this.setOffset(n,o),this.setSizePercentage(a,f),this.setSizePadding(d,v);var g=i.onResizeCallback,p=i.onResizeCallbackScope;g!==void 0&&this.setResizeCallback(g,p);var m=i.onUpdateViewportCallback,y=i.onUpdateViewportCallbackScope;return m!==void 0&&this.setUpdateViewportCallback(m,y),this}boot(){this.scene.scale.on("resize",this.anchor,this),this.anchor()}shutdown(i){this.isShutdown||(this.scene.scale.off("resize",this.anchor,this),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(i))}setAlign(i,e){return this.alignX=i,this.alignY=e,this}setPercentage(i,e){return this.percentageX=i,this.percentageY=e,this}setOffset(i,e){return this.offsetX=i,this.offsetY=e,this}setSizePercentage(i,e){return this.percentageWidth=i,this.percentageHeight=e,this}setSizePadding(i,e){return this.paddingWidth=i,this.paddingHeight=e,this}setResizeCallback(i,e){return this.onResizeCallback=i,this.onResizeCallbackScope=e,this}setUpdateViewportCallback(i,e){return this.onUpdateViewportCallback=i,this.onUpdateViewportCallbackScope=e,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var i=this.onResizeCallback,e=this.onResizeCallbackScope,c=this.anchorWidth,t=this.anchorHeight;if(!(c===void 0&&t===void 0||!i)){var s=this.parent;c===void 0&&(c=s.width),t===void 0&&(t=s.height),e?i.call(e,c,t,s,this):i(c,t,s,this)}}updatePosition(){var i=this.parent;return this.alignX===null?i.x=this.anchorX:this.alignX!==void 0&&(i.x=this.anchorX+i.displayWidth*(i.originX-this.alignX)),this.alignY===null?i.y=this.anchorY:this.alignY!==void 0&&(i.y=this.anchorY+i.displayHeight*(i.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){this.viewport=Vh(this.scene,this.viewport?this.viewport:!0);var i=this.onUpdateViewportCallback,e=this.onUpdateViewportCallbackScope;i&&(e?i.call(e,this.viewport,this.parent,this):i(this.viewport,this.parent,this))}}var Q0=function(x){x===void 0&&(x={});var i=x.hasOwnProperty("width"),e=x.hasOwnProperty("height"),c=x.hasOwnProperty("onResizeCallback");return(i||e)&&!c&&(x.onResizeCallback=function(t,s,u){i&&u.setMinWidth(t),e&&u.setMinHeight(s),u.layout()}),this._anchor===void 0?this._anchor=new gr(this,x):this._anchor.resetFromJSON(x),this};const j0=Phaser.Utils.Objects.GetValue,yi=Phaser.Utils.Objects.GetAdvancedValue,Yh=Phaser.Math.Linear;class xr extends xi{constructor(i,e){super(i,e);this.scaleStart={},this.scaleEnd={},this.resetFromJSON(e),this.boot()}resetFromJSON(i){return super.resetFromJSON(i),this.setMode(j0(i,"mode",0)),this.setScaleRange(yi(i,"start",void 0),yi(i,"end",0)),this}setMode(i){return typeof i=="string"&&(i=k0[i]),this.mode=i,this}setScaleRange(i,e){return typeof i=="number"?(this.startX=i,this.startY=i):(this.startX=yi(i,"x",this.parent.scaleX),this.startY=yi(i,"y",this.parent.scaleY)),typeof e=="number"?(this.endX=e,this.endY=e):(this.endX=yi(e,"x",void 0),this.endY=yi(e,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var i=this.parent;return this.hasScaleX&&(i.scaleX=this.startX),this.hasScaleY&&(i.scaleY=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(i,e){var c=e.t;e.isOddIteration&&(c=1-c),c=this.easeFn(c),this.hasScaleX&&(i.scaleX=Yh(this.startX,this.endX,c)),this.hasScaleY&&(i.scaleY=Yh(this.startY,this.endY,c))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const k0={stop:0,destroy:1,yoyo:2};var Uh=function(x,i,e,c,t){var s;switch(e){case 0:case"x":s={x:0};break;case 1:case"y":s={y:0};break;default:s=0;break}var u={mode:0,start:s,end:1,duration:i,ease:c===void 0?"Cubic":c};return t===void 0?t=new xr(x,u):t.resetFromJSON(u),t.restart(),t},Xh=function(x,i,e,c,t,s){t instanceof xr&&(s=t,t=void 0),t===void 0&&(t=!0);var u={};switch(u.mode=t?1:0,e){case 0:case"x":u.end={x:0};break;case 1:case"y":u.end={y:0};break;default:u.end=0;break}return u.duration=i,u.ease=c===void 0?"Linear":c,s===void 0?s=new xr(x,u):s.resetFromJSON(u),s.restart(),s};const Wh=Phaser.Utils.Objects.IsPlainObject;var bh=function(x,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(x.emit(i.completeEventName,x),i.completeEventName=void 0)}),i.on("update",function(){var e=x.getParentSizer();e&&e.resetChildPositionState(x)})},q0={popUp(x,i,e){if(Wh(x)){var c=x;x=c.duration,i=c.orientation,e=c.ease}var t=this._scale===void 0;return this._scale=Uh(this,x,i,e,this._scale),t&&bh(this,this._scale),this._scale.completeEventName="popup.complete",this},popUpPromise(x,i,e){return this.popUp(x,i,e),It(this._scale)},scaleDownDestroy(x,i,e,c){if(Wh(x)){var t=x;x=t.duration,i=t.orientation,e=t.ease,c=t.destroy}var s=this._scale===void 0;return this._scale=Xh(this,x,i,e,c,this._scale),s&&bh(this,this._scale),this._scale.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(x,i,e,c){return this.scaleDownDestroy(x,i,e,c),It(this._scale)},scaleDown(x,i,e){return this.scaleDownDestroy(x,i,e,!1),this},scaleDownPromise(x,i,e){return this.scaleDown(x,i,e),It(this._scale)}};const _0=Phaser.Utils.Objects.GetValue,Hh=Phaser.Utils.Objects.GetAdvancedValue,tm=Phaser.Math.Linear;class mr extends xi{constructor(i,e){super(i,e);this.resetFromJSON(e),this.boot()}resetFromJSON(i){return super.resetFromJSON(i),this.setMode(_0(i,"mode",0)),this.setAlphaRange(Hh(i,"start",this.parent.alpha),Hh(i,"end",0)),this}setMode(i){return typeof i=="string"&&(i=em[i]),this.mode=i,this}setAlphaRange(i,e){return this.alphaStart=i,this.alphaEnd=e,this}start(){if(this.timer.isRunning)return this;var i=this.parent;return i.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(i,e){var c=e.t;e.isOddIteration&&(c=1-c),i.alpha=tm(this.alphaStart,this.alphaEnd,c)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const em={stop:0,destroy:1,yoyo:2},im=Phaser.Utils.Objects.IsPlainObject;var zs=function(x,i,e,c){var t,s;im(e)?(t=e.start,s=e.end):s=e,t===void 0&&(t=0),s===void 0&&(s=1);var u={mode:0,start:t,end:s,duration:i};return c===void 0?c=new mr(x,u):c.resetFromJSON(u),c.restart(),c},Vs=function(x,i,e,c){e instanceof mr&&(c=e,e=void 0),e===void 0&&(e=!0);var t={mode:e?1:0,end:0,duration:i};return c===void 0?c=new mr(x,t):c.resetFromJSON(t),c.restart(),c};const $h=Phaser.Utils.Objects.IsPlainObject;var Kh=function(x,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(x.emit(i.completeEventName,x),i.completeEventName=void 0)}),i.on("update",function(){var e=x.getParentSizer();e&&e.resetChildAlphaState(x)})},sm={fadeIn(x,i){if($h(x)){var e=x;x=e.duration}var c=this._fade===void 0;return this._fade=zs(this,x,i,this._fade),c&&Kh(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromoise(x,i){return this.fadeIn(x,i),It(this._fade)},fadeOutDestroy(x,i){if($h(x)){var e=x;x=e.duration,i=e.destroy}var c=this._fade===void 0;return this._fade=Vs(this,x,i,this._fade),c&&Kh(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(x,i){return this.fadeOutDestroy(x,i),It(this._fade)},fadeOut(x){return this.fadeOutDestroy(x,!1),this},fadeOutPromise(x){return this.fadeOut(x),It(this._fade)}};const nm=Phaser.Utils.Objects.GetValue,Ti=Phaser.Utils.Objects.GetAdvancedValue,Zh=Phaser.Math.Linear;class Ys extends xi{constructor(i,e){super(i,e);this.resetFromJSON(e),this.boot()}resetFromJSON(i){if(super.resetFromJSON(i),this.setMode(nm(i,"mode",0)),i&&(i.hasOwnProperty("x")||i.hasOwnProperty("y"))){var e=Ti(i,"x",void 0),c=Ti(i,"y",void 0);this.setTargetPosition(e,c)}else this.setTargetPosition(i);return this}setMode(i){return typeof i=="string"&&(i=rm[i]),this.mode=i,this}setTargetPosition(i,e){if(typeof i=="number"||typeof e=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=i,this.endY=e;else{var c=i;this.startX=Ti(c,"startX",void 0),this.startY=Ti(c,"startY",void 0),this.endX=Ti(c,"endX",void 0),this.endY=Ti(c,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var i=this.parent;return this.hasMoveX&&(i.x=this.startX),this.hasMoveY&&(i.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(i,e){var c=e.t;e.isOddIteration&&(c=1-c),c=this.easeFn(c),this.hasMoveX&&(i.x=Zh(this.startX,this.endX,c)),this.hasMoveY&&(i.y=Zh(this.startY,this.endY,c))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const rm={stop:0,destroy:1,yoyo:2};var Us=function(x,i){if(typeof x=="number")return x;var e=x[0],c=parseFloat(x.substr(2));switch(e){case"+":return i+c;case"-":return i-c;case"*":return i*c;case"/":return i/c}},Jh=function(x,i,e,c,t,s,u){s instanceof Ys&&(u=s,s=void 0),s===void 0&&(s=!1);var n={};return n.mode=s?1:0,e!==void 0&&(n.startX=x.x,n.endX=Us(e,x.x)),c!==void 0&&(n.startY=x.y,n.endY=Us(c,x.y)),n.duration=i,n.ease=t===void 0?"Linear":t,u===void 0?u=new Ys(x,n):u.resetFromJSON(n),u.restart(),u},Qh=function(x,i,e,c,t,s,u){s instanceof Ys&&(u=s,s=void 0),s===void 0&&(s=!1);var n={};return n.mode=s?1:0,e!==void 0&&(n.startX=Us(e,x.x),n.endX=x.x),c!==void 0&&(n.startY=Us(c,x.y),n.endY=x.y),n.duration=i,n.ease=t===void 0?"Linear":t,u===void 0?u=new Ys(x,n):u.resetFromJSON(n),u.restart(),u};const jh=Phaser.Utils.Objects.IsPlainObject,kh=Phaser.Math.Distance.Between;var qh=function(x,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(x.emit(i.completeEventName,x),i.completeEventName=void 0)}),i.on("update",function(){var e=x.getParentSizer();e&&e.resetChildPositionState(x)})},am={moveFrom(x,i,e,c,t){if(jh(x)){var s=x;i=s.x,e=s.y,s.hasOwnProperty("speed")?x=kh(i,e,this.x,this.y)*1e3/s.speed:x=s.duration,c=s.ease}var u=this._easeMove===void 0;return this._easeMove=Qh(this,x,i,e,c,t,this._easeMove),u&&qh(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(x,i,e,c,t){return this.moveFrom(x,i,e,c,t),It(this._easeMove)},moveFromDestroy(x,i,e,c){return this.moveFrom(x,i,e,c,!0),this},moveFromDestroyPromise(x,i,e,c){return this.moveFromDestroy(x,i,e,c),It(this._easeMove)},moveTo(x,i,e,c,t){if(jh(x)){var s=x;i=s.x,e=s.y,s.hasOwnProperty("speed")?x=kh(i,e,this.x,this.y)*1e3/s.speed:x=s.duration,c=s.ease}var u=this._easeMove===void 0;return this._easeMove=Jh(this,x,i,e,c,t,this._easeMove),u&&qh(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(x,i,e,c,t){return this.moveTo(x,i,e,c,t),It(this._easeMove)},moveToDestroy(x,i,e,c){return this.moveTo(x,i,e,c,!0),this},moveToDestroyPromise(x,i,e,c){return this.moveToDestroy(x,i,e,c,!0),It(this._easeMove)}},ze=function(x){_h(x,!1)},Ve=function(x){_h(x,!0)},yr=function(x){if(!x)return!1;var i=Ds(x);return!i.hidden},_h=function(x,i){if(!!x){var e=Ds(x);e.hidden=i,x.rexContainer.parent.setChildVisible(x,!i)}},om={show(x){return x===void 0&&(x=this),ze(x),this},hide(x){return x===void 0&&(x=this),Ve(x),this},isShow(x){return x===void 0&&(x=this),yr(x)}},Tr=function(x,i,e,c,t){return!(!x||!x.getBounds||c&&!c(x,i,e)||(Cr=x.getBounds(Cr),!Cr.contains(i,e))||t&&!t(x,i,e))},Cr=void 0,tl=function(x,i,e,c){if(i)return Tr(x,i.x,i.y,e,c);for(var t=x.scene.input.manager,s=t.pointersTotal,u=t.pointers,n=0;n<s;n++)if(i=u[n],Tr(x,i.x,i.y,e,c))return!0;return!1},hm=function(x,i){return i===void 0&&(i=this),tl(i,x)},Xs=function(x){return x&&typeof x=="function"},Sr=function(x,i,e,c,t){return Tr(x,i,e,lm(c),um(t))},el=function(x){var i=x.rexSizer&&x.rexSizer.hidden;return!i},lm=function(x){return x?function(i,e,c){return el(i)?(x(i,e,c),!0):!1}:el},um=function(x){return x},fm=function(x,i,e,c,t){if(Xs(e)||(t=e,e=void 0,c=void 0),t===void 0&&(this.sizerChildren?t=this.sizerChildren:t=this.children),kt(t)){for(var s,u=0,n=t.length;u<n;u++)if(s=t[u],Sr(s,x,i,e,c))return s}else{var s;for(var h in t)if(s=t[h],Sr(s,x,i,e,c))return s}return null},dm={getParentSizer(x){return this.getParent(x)},getTopmostSizer(x){return this.getTopmostParent(x)}},qe=function(x,i,e){!x||i===void 0&&e===void 0||(x.resize?(i===void 0&&(i=x.width),e===void 0&&(e=x.height),x.resize(i,e)):(i!==void 0&&(x.displayWidth=i),e!==void 0&&(x.displayHeight=e)))},vm=function(x,i){return i===void 0?i={}:i===!0&&(i=cm),i.x=x.x,i.y=x.y,i.scaleX=x.scaleX,i.scaleY=x.scaleY,i.width=x.width,i.height=x.height,i.displayWidth=x.displayWidth,i.displayHeight=x.displayHeight,i},cm={},Ji=function(x){this.sizerEventsEnable&&(vm(x,this.getChildPrevState(x)),this.layoutedChildren.push(x))},Qi=function(x,i,e,c,t,s,u,n){ws(x,i,e,c,t,s),u!==void 0&&(x.x+=u),n!==void 0&&(x.y+=n),this.resetChildPositionState(x),this.sizerEventsEnable&&x.emit("sizer.postlayout",x,this)};const pm=Phaser.Display.Align.CENTER;var gm=function(){if(this.backgroundChildren!==void 0)for(var x=this.backgroundChildren,i=this.left,e=this.top,c=this.width,t=this.height,s,u,n,h,o,r,a,d=0,l=x.length;d<l;d++)s=x[d],u=s.rexSizer,!u.hidden&&(n=u.padding,Ji.call(this,s),h=i+n.left,o=e+n.top,r=c-n.left-n.right,a=t-n.top-n.bottom,qe(s,r,a),Qi.call(this,s,h,o,r,a,pm))},xm=function(x,i){var e=typeof x;return e==="string"?x=this.getElement(x):(x===void 0||e!="object")&&(i=x,x=this),i===void 0&&(i=!0),x.input&&x.input.hasOwnProperty("draggable")?x.input.draggable=i:i&&(x.setInteractive(),x.scene.input.setDraggable(x),x.on("drag",function(c,t,s){var u=this.getTopmostSizer();u.x+=t-x.x,u.y+=s-x.y},this)),this};const ji=Phaser.Utils.Objects.GetValue;class Ci extends Zt{constructor(i,e){super(i,e);this._enable=void 0,i.setInteractive(ji(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(ji(i,"enable",!0)),this.setMode(ji(i,"mode",1)),this.setClickInterval(ji(i,"clickInterval",100)),this.setDragThreshold(ji(i,"threshold",void 0)),this}boot(){var i=this.parent;i.on("pointerdown",this.onPress,this),i.on("pointerup",this.onRelease,this),i.on("pointerout",this.onPointOut,this),i.on("pointermove",this.onMove,this)}shutdown(i){this.isShutdown||(this.pointer=null,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i){i||this.cancel(),this._enable=i;var e=i?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(i){return typeof i=="string"&&(i=mm[i]),this.mode=i,this}setClickInterval(i){return this.clickInterval=i,this}setDragThreshold(i){return this.dragThreshold=i,this}onPress(i,e,c,t){this.pointer===void 0&&(this.pointer=i,this.mode===0&&this.click(i.downTime,i,t))}onRelease(i,e,c,t){this.pointer===i&&(this.mode===1&&this.click(i.upTime,i,t),this.pointer=void 0)}onPointOut(i,e){this.pointer===i&&this.cancel()}onMove(i,e,c,t){this.pointer===i&&this.dragThreshold!==void 0&&i.getDistance()>=this.dragThreshold&&this.cancel()}click(i,e,c){if(!this.enable)return this;if(i===void 0)return this.emit("click",this,this.parent,e,c),this;this.pointer=void 0;var t=this.lastClickTime;return t!==void 0&&i-t<=this.clickInterval?this:(this.lastClickTime=i,this.emit("click",this,this.parent,e,c),this)}cancel(){return this.pointer=void 0,this}}const mm={press:0,pointerdown:0,release:1,pointerup:1};var ym={onClick(x,i,e){return x?(this._click===void 0&&(this._click=new Ci(this,e)),this._click.on("click",x,i),this):this},offClick(x,i){return this._click===void 0?this:(this._click.off("click",x,i),this)},enableClick(x){return this._click===void 0?this:(this._click.setEnable(x),this)},disableClick(){return this._click===void 0?this:(this._click.setEnable(!1),this)}},Tm=function(){for(var x=this.getAllChildren([this]),i=0,e=x.length;i<e;i++){var c=x[i];c.emit.apply(c,arguments)}return this},il={getSizerConfig:Ds,getChildPrevState:v0,pushIntoBounds:c0,drawBounds:R0,resolveWidth:cr,resolveChildrenWidth:G0,resolveHeight:pr,getChildWidth:w0,getChildHeight:N0,getExpandedChildWidth:z0,getExpandedChildHeight:V0,getChildrenWidth:Y0,getChildrenHeight:U0,addChildrenMap:wh,addElement:wh,getElement:I0,getAllChildrenSizers:X0,getChildrenSizers:W0,preLayout:Zi,layout:H0,runLayout:$0,layoutChildren:K0,runWidthWrap:Nh,layoutBackgrounds:gm,postLayout:Z0,setAnchor:Q0,isInTouching:hm,pointToChild:fm,setDraggable:xm,broadcastEvent:Tm};Object.assign(il,D0,F0,dm,q0,sm,am,ym,om,b0);const ki=Phaser.Utils.Objects.GetValue;class _e extends $t{constructor(i,e,c,t,s,u){super(i,e,c,2,2);this.isRexSizer=!0,this.setMinSize(t,s),this.setName(ki(u,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.layoutedChildren=void 0;var n=ki(u,"anchor",void 0);n&&this.setAnchor(n),this.setInnerPadding(ki(u,"space",0)),this.setDraggable(ki(u,"draggable",!1)),this.setSizerEventsEnable(ki(u,"sizerEvents",!1)),this.setDirty(!0)}destroy(i){if(!!this.scene){if(i)for(var e=this.getAllChildrenSizers([this]),c=0,t=e.length;c<t;c++)e[c].sizerEventsEnable=!1;super.destroy(i),this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(i,e){return this.setMinWidth(i).setMinHeight(e),this}setMinWidth(i){return i==null&&(i=0),this.minWidth=i,this}setMinHeight(i){return i==null&&(i=0),this.minHeight=i,this}setDirty(i){return i===void 0&&(i=!0),this.dirty=i,this}setSizerEventsEnable(i){return i===void 0&&(i=!0),this.sizerEventsEnable=i,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-Ct(this)*this.originX}set left(i){this.x+=i-this.left}alignLeft(i){return this.left=i,this}get right(){return this.left+Ct(this)}set right(i){this.x+=i-this.right}alignRight(i){return this.right=i,this}get centerX(){return this.left+Ct(this)/2}set centerX(i){this.x+=i-this.centerX}alignCenterX(i){return this.centerX=i,this}get top(){return this.y-pt(this)*this.originY}set top(i){this.y+=i-this.top}alignTop(i){return this.top=i,this}get bottom(){return this.top+pt(this)}set bottom(i){this.y+=i-this.bottom}alignBottom(i){return this.bottom=i,this}get centerY(){return this.top+pt(this)/2}set centerY(i){this.y+=i-this.centerY}alignCenterY(i){return this.centerY=i,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var i=this.minWidth-this.space.left-this.space.right;return Math.max(i,0)}get minInnerHeight(){var i=this.minHeight-this.space.top-this.space.bottom;return Math.max(i,0)}}Object.assign(_e.prototype,il);var Cm=function(){if(this.rexSizer.hidden)return 0;var x=0,i=this.sizerChildren,e,c,t;for(var s in i)e=i[s],c=e.rexSizer.padding,t=this.getChildWidth(e)+c.left+c.right,x=Math.max(t,x);return x+this.space.left+this.space.right},Sm=function(){if(this.rexSizer.hidden)return 0;var x=0,i=this.sizerChildren,e,c,t;for(var s in i)e=i[s],t=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.minHeight!==void 0?e.minHeight:pt(e),c=e.rexSizer.padding,t+=c.top+c.bottom,x=Math.max(t,x);return x+this.space.top+this.space.bottom},Em=function(x,i){i===void 0&&(i=this.width);var e,c=x.rexSizer;if(c.expandWidth){var t=i-this.space.left-this.space.right,s=c.padding;e=t-s.left-s.right}return e},Pm=function(x,i){i===void 0&&(i=this.height);var e,c=x.rexSizer;if(c.expandHeight){var t=i-this.space.top-this.space.bottom,s=c.padding;e=t-s.top-s.bottom}return e},Mm=function(x){x===void 0&&(x=[]);var i=this.sizerChildren,e;for(var c in i)e=i[c],e.isRexSizer&&x.push(e);return x},Er=function(x,i){x.width<x.childrenWidth&&console.warn(`Layout width error: Parent=${i.constructor.name}, Child=${x.constructor.name}`),x.height<x.childrenHeight&&console.warn(`Layout height error: Parent=${i.constructor.name}, Child=${x.constructor.name}`)},Rm=function(){var x,i,e,c=this.innerLeft,t=this.innerTop,s=this.innerWidth,u=this.innerHeight,n,h,o,r,a,d,l=this.sizerChildren;for(var f in l)x=l[f],!x.rexSizer.hidden&&(i=x.rexSizer,e=i.padding,Ji.call(this,x),x.isRexSizer?(x.runLayout(this,this.getExpandedChildWidth(x),this.getExpandedChildHeight(x)),Er(x,this)):(a=void 0,d=void 0,i.expandWidth&&(a=s-e.left-e.right),i.expandHeight&&(d=u-e.top-e.bottom),qe(x,a,d)),n=c+e.left,o=s-e.left-e.right,h=t+e.top,r=u-e.top-e.bottom,Qi.call(this,x,n,h,o,r,i.align,i.alignOffsetX,i.alignOffsetY))};const sl=Phaser.Utils.Objects.IsPlainObject,fe=Phaser.Utils.Objects.GetValue,nl=Phaser.Display.Align.CENTER,Am=Phaser.Utils.String.UUID;var Om=function(x,i,e,c,t,s,u,n,h){if(Ki.call(this,x),sl(i)){var r=i;i=fe(r,"key",void 0),e=fe(r,"align",nl),n=fe(r,"offsetX",0),h=fe(r,"offsetY",0),c=fe(r,"padding",0),t=fe(r,"expand",!0),x.isRexSizer||(s=fe(r,"minWidth",x._minWidth),u=fe(r,"minHeight",x._minHeighted))}var o=i!==void 0;o||(i=Am()),typeof e=="string"&&(e=Gs[e]),e===void 0&&(e=nl),n===void 0&&(n=0),h===void 0&&(h=0),c===void 0&&(c=0),t===void 0&&(t=!0),x.isRexSizer||(s===void 0&&(s=x._minWidth),u===void 0&&(u=x._minHeight));var r=this.getSizerConfig(x);return r.align=e,r.alignOffsetX=n,r.alignOffsetY=h,r.padding=mi(c),sl(t)?(r.expandWidth=fe(t,"width",!1),r.expandHeight=fe(t,"height",!1)):(r.expandWidth=t,r.expandHeight=t),x.isRexSizer||(r.expandWidth?x.minWidth=s===void 0?Ct(x):s:x.minWidth=void 0,r.expandHeight?x.minHeight=u===void 0?pt(x):u:x.minHeight=void 0),this.sizerChildren.hasOwnProperty(i)&&this.sizerChildren[i].destroy(),this.sizerChildren[i]=x,o&&this.addChildrenMap(i,x),this},Lm={add:Om};const Fm=Phaser.Utils.Array.Remove,Im=$t.prototype.remove;var Ws=function(x,i){return this.isBackground(x)&&Fm(this.backgroundChildren,x),Im.call(this,x,i),!i&&this.sizerEventsEnable&&(x.emit("sizer.remove",x,this),this.emit("remove",x,this)),this};const Bm=$t.prototype.clear;var bs=function(x){this.backgroundChildren&&(this.backgroundChildren.length=0);var i=!x&&this.sizerEventsEnable,e;if(i&&(e=this.getChildren([])),Bm.call(this,x),i)for(var c,t=0,s=e.length;t<s;t++)c=e[t],c.emit("sizer.remove",c,this),this.emit("remove",c,this);return this},Dm={remove(x,i){var e;if(typeof x=="string"){if(e=x,x=this.sizerChildren[e],!x)return this}else{if(this.getParentSizer(x)!==this)return this;e=this.childToKey(x)}return e&&(delete this.sizerChildren[e],this.childrenMap.hasOwnProperty(e)&&delete this.childrenMap[e]),Ws.call(this,x,i),this},removeAll(x){for(var i in this.sizerChildren)this.remove(i,x);return this},clear(x){for(var i in this.sizerChildren)delete this.sizerChildren[i],this.childrenMap.hasOwnProperty(i)&&delete this.childrenMap[i];return bs.call(this,x),this}},rl={getChildrenWidth:Cm,getChildrenHeight:Sm,getExpandedChildWidth:Em,getExpandedChildHeight:Pm,getChildrenSizers:Mm,layoutChildren:Rm};Object.assign(rl,Lm,Dm);var Hs=function(x,i){if(Array.isArray(x))return x.indexOf(i);for(var e in x)if(x[e]===i)return e;return null};const al=Phaser.Utils.Objects.IsPlainObject,Si=Phaser.Utils.Objects.GetValue;class ti extends _e{constructor(i,e,c,t,s,u){al(e)?(u=e,e=Si(u,"x",0),c=Si(u,"y",0),t=Si(u,"width",void 0),s=Si(u,"height",void 0)):al(t)&&(u=t,t=Si(u,"width",void 0),s=Si(u,"height",void 0));super(i,e,c,t,s,u);this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(i){if(typeof i=="string"){var e=i;if(this.sizerChildren.hasOwnPropery(e))return e}else return Hs(this.sizerChildren,i);return null}}Object.assign(ti.prototype,rl);var Gm=Phaser.Math.Distance.Between,$s=function(x,i,e){var c=x.width/2;return Gm(c,c,i,e)<=c};const wm=Phaser.Math.Angle.Between,Nm=Phaser.Math.Angle.Normalize;var ol=function(x,i,e){if(!!this.enable&&!!x.isDown){var c=this.sizerChildren.knob;if(!!$s(c,i,e)){var t=c.width/2,s=c.startAngle,u=wm(t,t,i,e),n=c.anticlockwise?s-u:u-s,h=Nm(n)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-h)<.1?this.value=h:this.easeValueTo(h)}}},zm=function(){var x=this.sizerChildren.knob;x.setInteractive().on("pointerdown",ol,this).on("pointermove",ol,this)};const hl=Phaser.Math.Angle.Between,Vm=Phaser.Math.Angle.Wrap;var Ym=function(x,i,e){if(!(!this.enable||this.panPointer)){var c=this.sizerChildren.knob;!$s(c,i,e)||ll.call(this,x)}},Um=function(x,i,e){if(!!this.enable&&!!x.isDown){var c=this.sizerChildren.knob;switch(this.panState){case Pr:$s(c,i,e)&&ll.call(this,x);break;case fl:$s(c,i,e)?Wm.call(this):ul.call(this);break}}},Xm=function(x,i,e){!this.enable||this.panPointer!==x||ul.call(this)},ll=function(x){this.panPointer=x,this.panState=fl},ul=function(){this.panPointer=void 0,this.panState=Pr},Wm=function(){var x=this.panPointer.prevPosition,i=this.panPointer.position,e=this.sizerChildren.knob,c=hl(e.x,e.y,x.x,x.y),t=hl(e.x,e.y,i.x,i.y),s=e.anticlockwise?c-t:t-c,u=Vm(s)/(Math.PI*2);this.stopEaseValue(),this.value+=u};const Pr=0,fl=1;var bm=function(){var x=this.sizerChildren.knob;x.setInteractive().on("pointerdown",Ym,this).on("pointermove",Um,this).on("pointerup",Xm,this),this.panPointer=void 0,this.panState=Pr},Hm=function(x,i){return this.textFormatCallback=x,this.textFormatCallbackScope=i,this},dl=function(x){x===void 0&&(x=this.value);var i;return this.textFormatCallbackScope?i=this.textFormatCallback(x):i=this.textFormatCallback.call(this.textFormatCallbackScope,x),i},$m=function(){var x=this.sizerChildren.text;return x&&(x.setText(dl.call(this)),x.layout&&x.layout()),this},Km={setTextFormatCallback:Hm,getFormatText:dl,updateText:$m};const Ot=Phaser.Utils.Objects.GetValue,Zm=Phaser.Math.Linear,vl=Phaser.Math.Percent,Jm=Phaser.Math.Snap.To;class Mr extends ti{constructor(i,e){e===void 0&&(e={});super(i,e);this.type="rexKnob",this.eventEmitter=Ot(e,"eventEmitter",this);var c=Ot(e,"background",void 0),t=Ot(e,"text",void 0);c&&this.addBackground(c),t&&(e.textColor=void 0,e.textStrokeColor=void 0,this.setTextFormatCallback(Ot(e,"textFormatCallback",void 0),Ot(e,"textFormatCallbackScope",void 0)));var s=new Bs(i,e);s.setDepth(Ot(e,"knobDepth",0)),s._value=-1,i.add.existing(s),this.add(s,"knob"),t&&this.add(t,"text","center",0,!1),this.addChildrenMap("background",c),this.addChildrenMap("knob",s),this.addChildrenMap("text",t);var u=Ot(e,"valuechangeCallback",null);if(u!==null){var n=Ot(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",u,n)}this.setEnable(Ot(e,"enable",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(Ot(e,"easeValue.duration",0)).setEaseValueFunction(Ot(e,"easeValue.ease","Linear")),this.setGap(Ot(e,"gap",void 0)),this.setValue(Ot(e,"value",0),Ot(e,"min",void 0),Ot(e,"max",void 0));var h=Ot(e,"input",0);switch(typeof h=="string"&&(h=Qm[h]),h){case 0:bm.call(this);break;case 1:zm.call(this);break}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setGap(i){return this.gap=i,this}get value(){return this.sizerChildren.knob.value}set value(i){this.gap!==void 0&&(i=Jm(i,this.gap));var e=this.value;this.sizerChildren.knob.value=i;var c=this.value;e!==c&&(this.updateText(),this.eventEmitter.emit("valuechange",c,e,this.eventEmitter))}setValue(i,e,c){return i==null?this:(e!==void 0&&(i=vl(i,e,c)),this.value=i,this)}addValue(i,e,c){return e!==void 0&&(i=vl(i,e,c)),this.value+=i,this}getValue(i,e){var c=this.value;return i!==void 0&&(c=Zm(i,e,c)),c}}const Qm={pan:0,drag:0,click:1,none:-1};Object.assign(Mr.prototype,Km,bi);et.register("knob",function(x){var i=new Mr(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Knob",Mr);const jm={arc:Is,circle:_n,curve:Kx,ellipse:Zx,line:Jx,lines:n0,rectangle:a0,triangle:h0},cl=Phaser.Utils.Objects.GetValue,km=Phaser.Utils.Objects.IsPlainObject,qm=function(){for(var x=this.getShapes(),i=0,e=x.length;i<e;i++)x[i].lineStyle().fillStyle()};var _m={createShape(x,i){var e=jm[x],c=new e;return i&&c.setName(i),c},buildShapes(x){var i=cl(x,"create",void 0);if(km(i)){var e=i;for(var c in e){var t=e[c];switch(typeof t){case"number":for(var s=0;s<t;s++)this.addShape(this.createShape(c));break;case"string":this.addShape(this.createShape(c,t));break;default:for(var u=t,s=0,n=u.length;s<n;s++)this.addShape(this.createShape(c,u[s]));break}}}else if(Array.isArray(i))for(var e=i,s=0,n=e.length;s<n;s++){var h=e[s];this.addShape(this.createShape(h.type,h.name))}else typeof i=="function"&&i.call(this);this.setUpdateShapesCallback(cl(x,"update"))},setUpdateShapesCallback(x){return x===void 0&&(x=qm),this.dirty=this.dirty||this.updateCallback!==x,this.updateCallback=x,this},updateShapes(){this.updateCallback.call(this)}};const qi=Phaser.Utils.Objects.GetValue,ty=Phaser.Utils.Objects.IsPlainObject;class Ks extends qn{constructor(i,e,c,t,s,u){ty(e)&&(u=e,e=qi(u,"x",0),c=qi(u,"y",0),t=qi(u,"width",2),s=qi(u,"height",2));super(i,e,c,t,s);this.type=qi(u,"type","rexCustomShapes"),this.buildShapes(u)}}Object.assign(Ks.prototype,_m);et.register("customShapes",function(x,i,e,c,t){var s=new Ks(this.scene,x,i,e,c,t);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.CustomShapes",Ks);const de=Phaser.Utils.Objects.GetValue,ey=Phaser.Utils.Objects.IsPlainObject,iy=Phaser.Math.Clamp,sy=Phaser.Math.Linear,pl=Phaser.Math.Percent;class Rr extends Ks{constructor(i,e,c,t,s,u){ey(e)&&(u=e,e=de(u,"x",0),c=de(u,"y",0),t=de(u,"width",2),s=de(u,"height",2)),u===void 0&&(u={}),u.type||(u.type="rexCustomProgress");super(i,e,c,t,s,u);this.eventEmitter=de(u,"eventEmitter",this);var n=de(u,"valuechangeCallback",null);if(n!==null){var h=de(u,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",n,h)}this.setEaseValuePropName("value").setEaseValueDuration(de(u,"easeValue.duration",0)).setEaseValueFunction(de(u,"easeValue.ease","Linear")),this.setValue(de(u,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get value(){return this._value}set value(i){i=iy(i,0,1);var e=this._value,c=e!=i;this.dirty=this.dirty||c,this._value=i,c&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(i,e,c){return i==null?this:(e!==void 0&&(i=pl(i,e,c)),this.value=i,this)}addValue(i,e,c){return e!==void 0&&(i=pl(i,e,c)),this.value+=i,this}getValue(i,e){var c=this.value;return i!==void 0&&(c=sy(i,e,c)),c}}Object.assign(Rr.prototype,bi);et.register("customProgress",function(x,i,e,c,t){var s=new Rr(this.scene,x,i,e,c,t);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.CustomProgress",Rr);var ny={setTransitionStartCallback(x,i){return this.onStartCallback=x,this.onStartCallbackScope=i,this},setTransitionProgressCallback(x,i){return this.onProgressCallback=x,this.onProgressCallbackScope=i,this},setTransitionCompleteCallback(x,i){return this.onCompleteCallback=x,this.onCompleteCallbackScope=i,this}};const ry=Phaser.Utils.Objects.IsPlainObject,te=Phaser.Utils.Objects.GetValue;var ay={out:0,in:1},oy={setTransitionDirection(x){return typeof x=="string"&&(x=ay[x]),this.dir=x,this},setDuration(x){return this.duration=x,this},setEaseFunction(x){return this.easeFunction=x,this},setNextTexture(x,i){return this.nextImage.setTexture(x,i),this},transit(x,i){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),ry(x)){var e=x;x=te(e,"key",void 0),i=te(e,"frame",void 0),this.setDuration(te(e,"duration",this.duration)).setEaseFunction(te(e,"ease",this.easeFunction)).setTransitionDirection(te(e,"dir",this.dir));var c=te(e,"mask",void 0);c&&this.setMaskGameObject(c),this.setMaskEnable(c===!0);var t=te(e,"onStart",void 0),s=te(e,"onProgress",void 0),u=te(e,"onComplete",void 0);(t!==void 0||s!==void 0||u!==void 0)&&this.setTransitionStartCallback(t,te(e,"onStartScope",void 0)).setTransitionProgressCallback(s,te(e,"onProgressScope",void 0)).setTransitionCompleteCallback(u,te(e,"onCompleteScope",void 0))}return this.setNextTexture(x,i),this.start(),this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new Mh(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}},gl=function(x,i,e,c,t){switch(this.clear().fillStyle(16777215),this.shape){case 1:var s=Math.min(x,i)/2;this.fillCircle(-x*(c-.5),-i*(t-.5),s+e);break;default:this.fillRect(-(x*c)-e,-(i*t)-e,x+2*e,i+2*e);break}};const hy=Phaser.GameObjects.Graphics;class Zs extends hy{constructor(i,e,c){e===void 0&&(e=0),typeof e=="string"&&(e=ly[e]),c===void 0&&(c=0);super(i.scene);this.parent=i,this.shape=e,this.padding=c,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(i,e){var c=this.parent;return i===void 0&&(i=c.x),e===void 0&&(e=c.y),super.setPosition(i,e),this}resize(i,e,c){var t=this.parent;return i===void 0&&(i=t.width),e===void 0&&(e=t.height),c===void 0&&(c=this.padding),this.widthSave===i&&this.heightSave===e&&this.paddingSave===c?this:(this.widthSave=i,this.heightSave=e,this.paddingSave=c,this.originXSave=t.originX,this.originYSave=t.originY,gl.call(this,i,e,c,t.originX,t.originY),this)}setOrigin(i,e){e===void 0&&(e=i);var c=this.parent;return i===void 0&&(i=c.originX),e===void 0&&(e=c.originY),this.originXSave===i&&this.originYSave===e?this:(this.originXSave=i,this.originYSave=e,gl.call(this,this.widthSave,this.heightSave,this.paddingSave,i,e),this)}}const ly={rectangle:0,circle:1};var uy={setMaskGameObject(x){if(!x)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(x===!0&&this.maskGameObject instanceof Zs)return this;if(this.maskGameObject===x)return this;this.removeMaskGameObject()}return x===!0&&(x=new Zs(this)),this.maskGameObject=x,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(x,i,e){return i===void 0&&(i=!0),this.childrenMask||this.setMaskGameObject(!0),i?(x.setMask(this.childrenMask),e&&this.childrenMask.setInvertAlpha()):x.clearMask(),this},setCurrentImageMaskEnable(x,i){return this.setImageMaskEnable(this.currentImage,x,i),this},setNextImageMaskEnable(x,i){return this.setImageMaskEnable(this.nextImage,x,i),this},setCellImagesMaskEnable(x,i){for(var e=this.getCellImages(),c=0,t=e.length;c<t;c++)this.setImageMaskEnable(e[c],x,i);return this},setMaskEnable(x,i){return this.setImageMaskEnable(this.backImage,x,i),this.setImageMaskEnable(this.frontImage,x,i),this.setCellImagesMaskEnable(x,i),this}},fy=function(x,i){i===void 0&&(i=",");var e;return x==="__BASE"?e=function(c,t){return`${c}${i}${t}`}:e=function(c,t){return`${x}_${c}${i}${t}`},e},dy=function(x,i,e,c,t,s){e==null&&(e="__BASE"),Xs(s)||(s=fy(e,s));for(var u=x.textures.get(i),n=u.frames[e],h=n.width/c,o=n.height/t,r=0,a=0,d,l=0;l<t;l++){r=0;for(var f=0;f<c;f++)d=s(f,l),u.add(d,0,r+n.cutX,a+n.cutY,h,o),r+=h;a+=o}return{getFrameNameCallback:s,cellWidth:h,cellHeight:o,columns:c,rows:t}};const Ye=Phaser.Utils.Objects.GetValue,vy=Phaser.GameObjects.Image,cy=Phaser.Utils.Objects.IsPlainObject,py=Phaser.Math.RotateAround;var gy=function(x,i,e,c){cy(i)&&(c=i,i=Ye(c,"columns",1),e=Ye(c,"rows",1));for(var t=Ye(c,"ImageClass",vy),s=Ye(c,"originX",.5),u=Ye(c,"originY",.5),n=Ye(c,"add",!0),h=Ye(c,"align",n),o=Ye(c,"objectPool",void 0),r=x.scene,a=x.texture.key,d=x.frame.name,l=dy(r,a,d,i,e),f=l.getFrameNameCallback,v=x.scaleX,g=x.scaleY,p=x.rotation,m=x.getTopLeft(),y=m.x,T=m.y,C=[],S=l.cellWidth*v,E=l.cellHeight*g,P=0;P<e;P++)for(var M=0;M<i;M++){var A,R=f(M,P);o&&o.length>0?A=o.pop().setTexture(a,R):A=new t(r,0,0,a,R),n&&r.add.existing(A);var O=y+S*M,F=T+E*P,I=O+s*S,G=F+u*E;h&&(A.setOrigin(s,u).setPosition(I,G).setScale(v,g).setRotation(p),py(A,y,T,p)),C.push(A)}return C},xy={gridCutImage(x,i,e,c){c===void 0&&(c={}),c.objectPool=this.imagesPool;for(var t=gy(x,i,e,c),s,u=0,n=t.length;u<n;u++)s=t[u],s.setVisible(!0),this.add(s);return this.cellImages=t,this.setChildLocalVisible(x,!1),t},gridCutCurrentImage(x,i,e){return this.gridCutImage(this.currentImage,x,i,e)},gridCutNextImage(x,i,e){return this.gridCutImage(this.nextImage,x,i,e)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var x=this.cellImages[0].texture,i=this.cellImages,e,c,t=0,s=i.length;t<s;t++)e=i[t],this.setChildLocalAlpha(e,1).setChildLocalScale(e,1).setChildLocalVisible(e,!1),e.clearMask(),c=e.frame.name,e.setTexture(),x.remove(c);return this.imagesPool.push(...i),i.length=0,this}},xl={};Object.assign(xl,ny,oy,uy,xy);var my=function(x,i,e,c){},yy=function(x,i,e,c){x.setChildLocalAlpha(i,1-c).setChildLocalAlpha(e,c)},Ty=function(x,i,e,c){x.setChildLocalAlpha(i,1)};const ml=Phaser.Utils.Objects.IsPlainObject,Pt=Phaser.Utils.Objects.GetValue,Cy=Phaser.Math.Clamp;class Ar extends $t{constructor(i,e,c,t,s,u){ml(e)?(u=e,e=Pt(u,"x",0),c=Pt(u,"y",0),t=Pt(u,"key",void 0),s=Pt(u,"frame",void 0)):ml(s)&&(u=s,s=void 0);var n=Pt(u,"back",void 0),h=Pt(u,"front",void 0);n||(n=i.add.image(e,c,t,s)),h||(h=i.add.image(e,c,t,s));var o=Pt(u,"width",h.width),r=Pt(u,"height",h.height);super(i,e,c,o,r);n.setVisible(!1),this.addMultiple([n,h]),this.type="rexTransitionImage",this.backImage=n,this.frontImage=h,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var a=Pt(u,"onStart",void 0),d=Pt(u,"onProgress",void 0),l=Pt(u,"onComplete",void 0),f=Pt(u,"dir",0);a===void 0&&d===void 0&&l===void 0&&(a=my,d=yy,l=Ty,f=0),this.setTransitionStartCallback(a,Pt(u,"onStartScope",void 0)).setTransitionProgressCallback(d,Pt(u,"onProgressScope",void 0)).setTransitionCompleteCallback(l,Pt(u,"onCompleteScope",void 0)).setTransitionDirection(f).setDuration(Pt(u,"duration",1e3)).setEaseFunction(Pt(u,"ease","Linear"));var v=Pt(u,"mask",void 0);v&&this.setMaskGameObject(v),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(i){!this.scene||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(i),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get t(){return this._t}set t(i){if(i=Cy(i,0,1),this._t!==i){this._t=i;var e=this.currentImage,c=this.nextImage;if(i===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),Or(this.onStartCallback,this.onStartCallbackScope,this,e,c,i)),Or(this.onProgressCallback,this.onProgressCallbackScope,this,e,c,i),i===1){Or(this.onCompleteCallback,this.onCompleteCallbackScope,this,e,c,i);var t=c.texture.key,s=c.frame.name;this.frontImage.setTexture(t,s),this.backImage.setTexture(t,s),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}i===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(i){return this.t=i,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(i,e){return super.setOrigin(i,e),this.backImage.setOrigin(i,e),this.frontImage.setOrigin(i,e),this.maskGameObject&&this.maskGameObject.setOrigin(i,e),this}setTexture(i,e){return this.frontImage.setTexture(i,e),this.backImage.setTexture(i,e).setVisible(!1),this}}var Or=function(x,i,e,c,t,s){!x||(i?x.call(i,e,c,t,s):x(e,c,t,s))};Object.assign(Ar.prototype,xl);et.register("transitionImage",function(x,i,e,c,t){var s=new Ar(this.scene,x,i,e,c,t);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.TransitionImage",Ar);const Sy=Phaser.GameObjects.Rectangle;class Lr extends Sy{constructor(i,e,c){super(i,0,0,2,2,e,1);this.setAlpha(c),this.setScrollFactor(0),this.boot()}boot(){var i=this.scene;i.events.on("prerender",this.resize,this)}destroy(i){!this.scene||(this.scene.events.off("prerender",this.resize,this),super.destroy(i))}get tint(){return this.fillColor}set tint(i){this.setFillStyle(i,this.fillAlpha)}resize(){var i=this.scene,e=i.scale.gameSize,c=i.cameras.main,t=e.width,s=e.height,u=1/c.zoom,n=t/2,h=s/2,o=t*u,r=s*u;(this.x!==n||this.y!==h)&&this.setPosition(n,h),(this.width!==o||this.height!==r)&&this.setSize(o,r).setOrigin(.5)}}et.register("fullWindowRectangle",function(x,i){var e=new Lr(this.scene,x,i);return this.scene.add.existing(e),e});st(window,"RexPlugins.UI.FullWindowRectangle",Lr);const yl=Phaser.Utils.Objects.GetValue;class Fr extends Zt{constructor(i,e){super(i,{eventEmitter:!1});this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.setHitAreaMode(yl(i,"hitAreaMode",0)),this.setEnable(yl(i,"enable",!0)),this}boot(){this.parent.on("pointerdown",function(i,e,c,t){t.stopPropagation()}).on("pointerup",function(i,e,c,t){t.stopPropagation()}).on("pointermove",function(i,e,c,t){t.stopPropagation()}).on("pointerover",function(i,e,c,t){t.stopPropagation()}).on("pointerout",function(i,e){e.stopPropagation()})}setHitAreaMode(i){typeof i=="string"&&(i=Ey[i]);var e=this.parent;return e.input&&e.removeInteractive(),i===0?e.setInteractive():e.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(i){return i===void 0&&(i=!0),i?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}}var Ey={default:0,fullWindow:1};const Tl=Phaser.Utils.Objects.GetValue;class Ir extends Lr{constructor(i,e){var c=Tl(e,"color",0),t=Tl(e,"alpha",.8);super(i,c,t);this.touchEventStop=new Fr(this,{hitAreaMode:1})}}et.register("cover",function(x){var i=new Ir(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Cover",Ir);var Py=function(x){if(!window.Chart){var i=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js');`;return console.error(i),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,My(this,x)),this},My=function(x,i){i===void 0&&(i={}),i.options===void 0&&(i.options={});var e=i.options;e.responsive=!1,e.maintainAspectRatio=!1,e.hasOwnProperty("devicePixelRatio")||(e.devicePixelRatio=1);var c=!1;e.animation===void 0?e.animation={}:e.animation===!1&&(c=!0,e.animation={});var t=e.animation;c&&(t.duration=0);var s=t.onProgress;t.onProgress=function(n){s&&s(n),x.needRedraw()};var u=t.onComplete;return t.onComplete=function(n){u&&u(n),x.needRedraw()},i},Ry=function(x){if(this.chart!==void 0)if(typeof x=="string"){for(var i=this.chart.data.datasets,e,c=0,t=i.length;c<t;c++)if(e=i[c],e.label===x)return e}else return this.chart.data.datasets[x]},Ay=function(x,i){var e=this.getChartDataset(x);if(e!==void 0){if(typeof i=="string"){var c=this.chart.data.labels;if(i=c.indexOf(i),i===-1)return}return e.data[i]}},Oy=function(x,i,e){if(this.chart===void 0)return this;var c=this.getChartDataset(x);if(typeof i=="string"){var t=this.chart.data.labels;if(i=t.indexOf(i),i===-1)return this}return c.data[i]=e,this},Ly=function(){if(this.chart===void 0)return this;this.chart.update()};class Br extends Ie{constructor(i,e,c,t,s,u){super(i,e,c,t,s);this.type="rexChart",this.chart=void 0,u!==void 0&&this.setChart(u)}destroy(i){!this.scene||(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(i))}resize(i,e){if(i===this.width&&e===this.height)return this;if(super.resize(i,e),this.chart){var c=this.chart;c.height=this.canvas.height,c.width=this.canvas.width,c.aspectRatio=c.height?c.width/c.height:null,c.update()}return this}}var Fy={setChart:Py,getChartDataset:Ry,getChartData:Ay,setChartData:Oy,updateChart:Ly};Object.assign(Br.prototype,Fy);et.register("chart",function(x,i,e,c,t){var s=new Br(this.scene,x,i,e,c,t);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.Chart",Br);var Iy=function(x){if(this.rexSizer.hidden)return 0;x===void 0&&(x=!0);var i=0,e=this.sizerChildren,c,t,s;if(this.orientation===0)for(var u=0,n=e.length;u<n;u++)c=e[u],!c.rexSizer.hidden&&(c.rexSizer.proportion===0||x&&c.rexSizer.proportion>0?s=this.getChildWidth(c):s=0,t=c.rexSizer.padding,s+=t.left+t.right,u>0&&(s+=this.space.item),i+=s);else for(var u=0,n=e.length;u<n;u++)c=e[u],!!c.hasOwnProperty("rexSizer")&&(c.rexSizer.hidden||(t=c.rexSizer.padding,s=this.getChildWidth(c)+t.left+t.right,i=Math.max(s,i)));return i+this.space.left+this.space.right},By=function(x){if(this.rexSizer.hidden)return 0;x===void 0&&(x=!0);var i=0,e=this.sizerChildren,c,t,s;if(this.orientation===0)for(var u=0,n=e.length;u<n;u++)c=e[u],!c.rexSizer.hidden&&(t=c.rexSizer.padding,s=this.getChildHeight(c)+t.top+t.bottom,i=Math.max(s,i));else for(var u=0,n=e.length;u<n;u++)c=e[u],!!c.hasOwnProperty("rexSizer")&&(c.rexSizer.hidden||(t=c.rexSizer.padding,c.rexSizer.proportion===0||x&&c.rexSizer.proportion>0?s=this.getChildHeight(c):s=0,s+=t.top+t.bottom,u>0&&(s+=this.space.item),i+=s));return i+this.space.top+this.space.bottom},Dy=function(x,i){i===void 0&&(i=this.width);var e,c=x.rexSizer,t=c.padding;if(this.orientation===0)c.proportion>0&&this.proportionLength>0&&(e=c.proportion*this.proportionLength);else if(c.expand){var s=i-this.space.left-this.space.right;e=s-t.left-t.right}return e},Gy=function(x,i){i===void 0&&(i=this.height);var e,c=x.rexSizer,t=c.padding;if(this.orientation===0){if(c.expand){var s=i-this.space.top-this.space.bottom;e=s-t.top-t.bottom}}else c.proportion>0&&this.proportionLength>0&&(e=c.proportion*this.proportionLength);return e},wy=function(x){x===void 0&&(x=[]);for(var i=this.sizerChildren,e,c=0,t=i.length;c<t;c++)e=i[c],e.isRexSizer&&x.push(e);return x},Ny=function(){return this._childrenProportion=void 0,this.proportionLength=void 0,Zi.call(this),this},zy=function(){for(var x=this.sizerChildren,i,e,c,t=this.innerLeft,s=this.innerTop,u=this.innerWidth,n=this.innerHeight,h=t,o=s,r,a,d,l,f,v,g=0,p=x.length;g<p;g++)i=x[g],!i.rexSizer.hidden&&(e=i.rexSizer,c=e.padding,Ji.call(this,i),i.isRexSpace?(f=0,v=0):(f=this.getExpandedChildWidth(i),v=this.getExpandedChildHeight(i)),i.isRexSizer?(i.runLayout(this,f,v),Er(i,this)):qe(i,f,v),f===void 0&&(f=Ct(i)),v===void 0&&(v=pt(i)),this.orientation===0?(r=h+c.left,e.proportion===0||this.proportionLength===0?d=f:d=e.proportion*this.proportionLength,a=o+c.top,l=n-c.top-c.bottom):(r=h+c.left,d=u-c.left-c.right,a=o+c.top,e.proportion===0||this.proportionLength===0?l=v:l=e.proportion*this.proportionLength),Qi.call(this,i,r,a,d,l,e.align),this.orientation===0?h+=d+c.left+c.right+this.space.item:o+=l+c.top+c.bottom+this.space.item)},Vy=function(x){var x=cr.call(this,x);if(this.proportionLength===void 0&&this.orientation===0){var i=x-this.childrenWidth;i>0?(i=x-this.getChildrenWidth(!1),this.proportionLength=i/this.childrenProportion):this.proportionLength=0}return x},Yy=function(x,i){var i=pr.call(this,x,i);if(this.proportionLength===void 0&&this.orientation===1){var e=i-this.childrenHeight;e>0?(e=i-this.getChildrenHeight(!1),this.proportionLength=e/this.childrenProportion):this.proportionLength=0}return i};const Uy=Phaser.GameObjects.Zone;class Dr extends Uy{constructor(i){super(i,0,0,1,1);this.isRexSpace=!0}}const Xy=Phaser.Utils.Objects.IsPlainObject,Ue=Phaser.Utils.Objects.GetValue,Cl=Phaser.Display.Align.CENTER,Wy={min:0,full:-1};var Gr=function(x,i,e,c,t,s,u,n){Ki.call(this,x);var h=typeof i;if(i===null)return this;if(h!=="number"){if(h==="string")i=Wy[i];else if(Xy(i)){var o=i;i=Ue(o,"proportion",0),e=Ue(o,"align",Cl),c=Ue(o,"padding",0),t=Ue(o,"expand",!1),s=Ue(o,"key",void 0),u=Ue(o,"index",void 0),x.isRexSizer||(this.orientation===0?n=Ue(o,"minWidth",void 0):n=Ue(o,"minHeight",void 0))}}typeof e=="string"&&(e=Gs[e]),i===void 0&&(i=0),e===void 0&&(e=Cl),c===void 0&&(c=0),t===void 0&&(t=!1),!x.isRexSizer&&n===void 0&&(this.orientation===0?n=x._minWidth:n=x._minHeight);var o=this.getSizerConfig(x);return o.proportion=i,o.align=e,o.padding=mi(c),o.expand=t,u===void 0||u>=this.sizerChildren.length?this.sizerChildren.push(x):this.sizerChildren.splice(u,0,x),!x.isRexSizer&&i>0&&(this.orientation===0?(x.minWidth=n===void 0?Ct(x):n,x.minHeight=void 0):(x.minWidth=void 0,x.minHeight=n===void 0?pt(x):n)),s!==void 0&&this.addChildrenMap(s,x),this},by={add:Gr,addSpace(x){return this.insertSpace(void 0,x),this},insertSpace(x,i){return i===void 0&&(i=1),Gr.call(this,new Dr(this.scene),{proportion:i,minWidth:0,minHeight:0,index:x}),this},insert(x,i,e,c,t,s,u){return Gr.call(this,i,e,c,t,s,u,x),this}};const Hy=Phaser.Utils.Array.Remove;var $y={remove(x,i){return this.getParentSizer(x)!==this?this:(Hy(this.sizerChildren,x),Ws.call(this,x,i),this)},removeAll(x){for(var i=this.sizerChildren.length-1;i>=0;i--)this.remove(this.sizerChildren[i],x);return this},clear(x){return this.sizerChildren.length=0,bs.call(this,x),this}},Sl={getChildrenWidth:Iy,getChildrenHeight:By,getExpandedChildWidth:Dy,getExpandedChildHeight:Gy,getChildrenSizers:wy,preLayout:Ny,layoutChildren:zy,resolveWidth:Vy,resolveHeight:Yy};Object.assign(Sl,by,$y);var Ky=function(){for(var x=0,i=this.sizerChildren,e,c,t=0,s=i.length;t<s;t++)e=i[t],!e.rexSizer.hidden&&(c=e.rexSizer.proportion,c>0&&(x+=c));return x},Zy={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},wr=function(x){return typeof x=="string"&&(x=Zy[x]),x};const Nr=Phaser.Utils.Objects.IsPlainObject,ve=Phaser.Utils.Objects.GetValue;class Dt extends _e{constructor(i,e,c,t,s,u,n){Nr(e)?(n=e,e=ve(n,"x",0),c=ve(n,"y",0),t=ve(n,"width",void 0),s=ve(n,"height",void 0),u=ve(n,"orientation",0)):Nr(t)?(n=t,t=ve(n,"width",void 0),s=ve(n,"height",void 0),u=ve(n,"orientation",0)):Nr(u)&&(n=u,u=ve(n,"orientation",0)),u===void 0&&(u=0);super(i,e,c,t,s,n);this.type="rexSizer",this.sizerChildren=[],this.setOrientation(u),this.setItemSpacing(ve(n,"space.item",0)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(i){return this.orientation=wr(i),this}setItemSpacing(i){return this.space.item=i,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=Ky.call(this)),this._childrenProportion}}Object.assign(Dt.prototype,Sl);et.register("sizer",function(x,i,e,c,t,s){var u=new Dt(this.scene,x,i,e,c,t,s);return this.scene.add.existing(u),u});st(window,"RexPlugins.UI.Sizer",Dt);var El=function(){return Array.prototype.reduce.call(arguments,Jy,0)},Jy=function(x,i){return x+i},Qy=function(){if(this.rexSizer.hidden)return 0;for(var x=0,i,e=this.sizerChildren,c,t,s,u,n=0;n<this.columnCount;n++){if(u=this.columnProportions[n],i=0,u===0){for(var h=0;h<this.rowCount;h++)c=e[h*this.columnCount+n],!!c&&(c.rexSizer.hidden||(t=c.rexSizer.padding,s=this.getChildWidth(c)+t.left+t.right,i=Math.max(i,s)));x+=i}this.columnWidth[n]=i}return x+El(this.space.left,...this.space.column,this.space.right)},jy=function(){if(this.rexSizer.hidden)return 0;for(var x=0,i,e=this.sizerChildren,c,t,s,u,n=0;n<this.rowCount;n++){if(u=this.rowProportions[n],i=0,u===0){for(var h=0;h<this.columnCount;h++)c=e[n*this.columnCount+h],!!c&&(c.rexSizer.hidden||(s=c.isRexSizer?Math.max(c.minHeight,c.childrenHeight):c.hasOwnProperty("minHeight")?c.minHeight:pt(c),t=c.rexSizer.padding,s+=t.top+t.bottom,i=Math.max(i,s)));x+=i}this.rowHeight[n]=i}return x+El(this.space.top,...this.space.row,this.space.bottom)},ky=function(x,i){var e,c=x.rexSizer;if(c.expand){var t=c.padding;e=i-t.left-t.right}return e},qy=function(x,i){var e,c=x.rexSizer;if(c.expand){var t=c.padding;e=i-t.top-t.bottom}return e},_y=function(x){x===void 0&&(x=[]);for(var i=this.sizerChildren,e,c=0,t=i.length;c<t;c++)e=i[c],e&&e.isRexSizer&&x.push(e);return x},tT=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,Zi.call(this),this},eT=function(){for(var x,i,e,c=this.innerLeft,t=this.innerTop,s=c,u=t,n,h,o,r,a,d,l=this.space.column,f=this.space.row,v,g,p=0;p<this.rowCount;p++){g=this.getRowHeight(p),s=c;for(var m=0;m<this.columnCount;m++){if(v=this.getColumnWidth(m),x=this.getChildAt(m,p),!x||x.rexSizer.hidden){s+=v+l[m];continue}Ji.call(this,x),a=this.getExpandedChildWidth(x,v),d=this.getExpandedChildHeight(x,g),x.isRexSizer?(x.runLayout(this,a,d),Er(x,this)):qe(x,a,d),i=x.rexSizer,e=i.padding,n=s+e.left,o=v-e.left-e.right,h=u+e.top,r=g-e.top-e.bottom,Qi.call(this,x,n,h,o,r,i.align),s+=v+l[m]}u+=g+f[p]}},iT=function(x){var x=cr.call(this,x);if(this.proportionWidthLength===void 0){var i=this.totalColumnProportions;if(i>0){var e=x-this.childrenWidth;e>=0&&(this.proportionWidthLength=e/i)}else this.proportionWidthLength=0}return x},sT=function(x,i){var i=pr.call(this,x,i);if(this.proportionHeightLength===void 0){var e=this.totalRowProportions;if(e>0){var c=i-this.childrenHeight;c>=0&&(this.proportionHeightLength=c/e)}else this.proportionHeightLength=0}return i},nT=function(x){var i,e,c;for(var t in this.sizerChildren)i=this.sizerChildren[t],!!i&&(c=this.getColumnWidth(parseInt(t)%this.columnCount),i.isRexSizer&&(e=this.getExpandedChildWidth(i,c),e=i.resolveWidth(e),i.resolveChildrenWidth(e)))},rT=function(x){var i,e,c;for(var t in this.sizerChildren)i=this.sizerChildren[t],!!i&&(c=this.getColumnWidth(parseInt(t)%this.columnCount),e=this.getExpandedChildWidth(i,c),e===void 0&&(e=this.resolveWidth(e)),i.runWidthWrap&&i.runWidthWrap(e));return this};const aT=Phaser.Utils.Objects.IsPlainObject,Ei=Phaser.Utils.Objects.GetValue,Pl=Phaser.Display.Align.CENTER;var oT=function(x,i,e,c,t){if(typeof x=="number"||typeof i=="number")if(x===void 0){for(var s,u=0;u<c;u++)if(s=i*c+u,!e[s])return s}else if(i===void 0){for(var s,u=0;u<t;u++)if(s=u*c+x,!e[s])return s}else{var s=i*c+x;if(!e[s])return s}else if(i===!0){for(var s,u=0;u<c;u++)for(var n=0;n<t;n++)if(s=n*c+u,!e[s])return s}else for(var u=0,h=e.length;u<h;u++)if(!e[u])return u;return null},hT=function(x,i,e,c,t,s,u){if(Ki.call(this,x),aT(i)){var h=i;i=Ei(h,"column",void 0),e=Ei(h,"row",void 0),c=Ei(h,"align",Pl),t=Ei(h,"padding",0),s=Ei(h,"expand",!1),u=Ei(h,"key",void 0)}var n=oT(i,e,this.sizerChildren,this.columnCount,this.rowCount);if(n===null)return this;typeof c=="string"&&(c=Gs[c]),c===void 0&&(c=Pl),t===void 0&&(t=0),s===void 0&&(s=!0);var h=this.getSizerConfig(x);return h.align=c,h.padding=mi(t),h.expand=s,this.sizerChildren[n]=x,u!==void 0&&this.addChildrenMap(u,x),this},lT={add:hT},Pi=function(x,i,e,c){e===void 0&&(e=0),c===void 0&&(c=x.length-1);for(var t=e;t<=c;t++)x[t]=i;return x},uT={remove(x,i){if(this.getParentSizer(x)!==this)return this;var e=this.sizerChildren.indexOf(x);return e!==-1&&(this.sizerChildren[e]=null),Ws.call(this,x,i),this},removeAt(x,i,e){var c=this.getChildAt(x,i);return c&&this.remove(c,e),this},removeAll(x){for(var i=this.sizerChildren.length-1;i>=0;i--){var e=this.sizerChildren[i];!e||this.remove(e,x)}return this},clear(x){return Pi(this.sizerChildren,null),bs.call(this,x),this}};const Ml=Phaser.Utils.Objects.GetValue;var fT=function(x,i,e,c,t){if(e===void 0&&(e=0),c===void 0&&(c=0),this.columnCount=x,this.rowCount=i,this.gridCount=x*i,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=x*i,Pi(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=x,typeof e=="number")Pi(this.columnProportions,e);else for(var s=0;s<x;s++)this.columnProportions[s]=e[s]||0;if(this.rowProportions=[],this.rowProportions.length=i,typeof c=="number")Pi(this.rowProportions,c);else for(var s=0;s<i;s++)this.rowProportions[s]=c[s]||0;this.columnWidth=[],this.columnWidth.length=x,this.rowHeight=[],this.rowHeight.length=i,this.space.column=[],this.space.column.length=x-1;var u=Ml(t,"column",0);if(typeof u=="number")Pi(this.space.column,u);else for(var s=0,n=this.space.column.length;s<n;s++)this.space.column[s]=u[s]||0;this.space.row=[],this.space.row.length=i-1;var h=Ml(t,"row",0);if(typeof h=="number")Pi(this.space.row,h);else for(var s=0,n=this.space.row.length;s<n;s++)this.space.row[s]=h[s]||0;return this},Rl={getChildrenWidth:Qy,getChildrenHeight:jy,getExpandedChildWidth:ky,getExpandedChildHeight:qy,getChildrenSizers:_y,preLayout:tT,layoutChildren:eT,resolveWidth:iT,resolveHeight:sT,resolveChildrenWidth:nT,runWidthWrap:rT,resetGrid:fT};Object.assign(Rl,lT,uT);var dT=function(){for(var x=0,i,e=0;e<this.columnCount;e++)i=this.columnProportions[e],i>0&&(x+=i);return x},vT=function(){for(var x=0,i,e=0;e<this.rowCount;e++)i=this.rowProportions[e],i>0&&(x+=i);return x};const Js=Phaser.Utils.Objects.IsPlainObject,yt=Phaser.Utils.Objects.GetValue;class Xe extends _e{constructor(i,e,c,t,s,u,n,h,o,r){Js(e)?(r=e,e=yt(r,"x",0),c=yt(r,"y",0),t=yt(r,"width",void 0),s=yt(r,"height",void 0),u=yt(r,"column",0),n=yt(r,"row",0),h=yt(r,"columnProportions",0),o=yt(r,"rowProportions",0)):Js(t)?(r=t,t=yt(r,"width",void 0),s=yt(r,"height",void 0),u=yt(r,"column",0),n=yt(r,"row",0),h=yt(r,"columnProportions",0),o=yt(r,"rowProportions",0)):Js(u)?(r=u,u=yt(r,"column",0),n=yt(r,"row",0),h=yt(r,"columnProportions",0),o=yt(r,"rowProportions",0)):Js(h)&&(r=h,h=yt(r,"columnProportions",0),o=yt(r,"rowProportions",0));super(i,e,c,t,s,r);this.type="rexGridSizer",this.resetGrid(u,n,h,o,yt(r,"space",void 0)),this.addChildrenMap("items",this.sizerChildren);var a=yt(r,"createCellContainerCallback");if(a)for(var c=0,d=this.rowCount;c<d;c++)for(var e=0,l=this.columnCount;e<l;e++){var f={column:e,row:c},v=a(i,e,c,f);v&&this.add(v,f)}}destroy(i){!this.scene||(super.destroy(i),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setColumnProportion(i,e){return i>=this.columnProportions.length?this:(this.columnProportions[i]=e,this)}setRowProportion(i,e){return i>=this.rowProportions.length?this:(this.rowProportions[i]=e,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=dT.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=vT.call(this)),this._totalRowProportions}getChildAt(i,e){return this.sizerChildren[e*this.columnCount+i]}childToGridIndex(i,e){if(!i)return null;var c=this.sizerChildren.indexOf(i);return c===-1?null:(e===void 0&&(e={}),e.x=c%this.columnCount,e.y=Math.floor(c/this.columnCount),e)}getColumnWidth(i){var e=this.columnProportions[i],c=e===0?this.columnWidth[i]:e*this.proportionWidthLength;return c}getRowHeight(i){var e=this.rowProportions[i],c=e===0?this.rowHeight[i]:e*this.proportionHeightLength;return c}}Object.assign(Xe.prototype,Rl);et.register("gridSizer",function(x,i,e,c,t,s,u,n,h){var o=new Xe(this.scene,x,i,e,c,t,s,u,n,h);return this.scene.add.existing(o),o});st(window,"RexPlugins.UI.GridSizer",Xe);var cT=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},pT=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},gT=function(x){x===void 0&&(x=[]);for(var i=this.sizerChildren,e,c=0,t=i.length;c<t;c++)e=i[c],e!==`
`&&e.isRexSizer&&x.push(e);return x},xT=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,Zi.call(this),this},mT=function(){for(var x=this.innerWidth,i=this.justifyPercentage,e,c,t,s=0,u=this.innerLeft,n=this.innerTop,h=u,o=n,r,a,d,l,f=this.widthWrapResult.lines,v,g,p,m=0,y=f.length;m<y;m++){switch(v=f[m],g=v.children,this.rtl&&g.reverse(),p=x-v.width,this.align){case 0:break;case 1:h+=p;break;case 2:h+=p/2;break;case 3:s=zr(x,p,i,g.length);break;case 4:s=zr(x,p,i,g.length),s===0&&(h+=p);break;case 5:s=zr(x,p,i,g.length),s===0&&(h+=p/2);break}for(var T=0,C=g.length;T<C;T++)e=g[T],!e.rexSizer.hidden&&(c=e.rexSizer,t=c.padding,Ji.call(this,e),r=h+t.left,T>0&&(r+=this.space.item),a=o+t.top,d=Ct(e),l=pt(e),h=r+d+t.right+s,Qi.call(this,e,r,a,d,l,c.align));h=u,o+=v.height+this.space.line}},zr=function(x,i,e,c){return i/x<=e?i/(c-1):0},yT=function(x,i){i===void 0?i={lines:[],width:0,height:0}:(i.lines.length=0,i.width=0,i.height=0);for(var e=this.sizerChildren,c,t,s,u=0,n,h=i.lines,o,r=0,a=e.length;r<a;r++){if(c=e[r],c===`
`)c=void 0,t=0,o=!0;else{if(c.rexSizer.hidden)continue;c.isRexSizer&&c.layout(),t=TT(c),o=u<t}o&&(n&&(n.width=x-(u+this.space.item),i.width=Math.max(i.width,n.width),i.height+=n.height+this.space.line),n={children:[],height:0},h.push(n),u=x),u-=t+this.space.item,c&&(n.children.push(c),s=CT(c),n.height=Math.max(n.height,s))}return n&&(n.width=x-(u+this.space.item),i.width=Math.max(i.width,n.width),i.height+=n.height),i},TT=function(x){var i=x.rexSizer.padding;return Ct(x)+i.left+i.right},CT=function(x){var i=x.rexSizer.padding;return pt(x)+i.top+i.bottom},ST=function(x){var i=x-this.space.left-this.space.right;this.widthWrapResult=yT.call(this,i,this.widthWrapResult),Nh.call(this,x)};const ET=Phaser.Utils.Objects.IsPlainObject,Vr=Phaser.Utils.Objects.GetValue,PT=Phaser.Display.Align.CENTER;var Yr=function(x,i,e,c){if(x===`
`)return this.addNewLine(),this;if(Ki.call(this,x),ET(i)){var t=i;i=Vr(t,"padding",0),e=Vr(t,"key",void 0),c=Vr(t,"index",void 0)}i===void 0&&(i=0);var t=this.getSizerConfig(x);return t.align=PT,t.padding=mi(i),c===void 0||c>=this.sizerChildren.length?this.sizerChildren.push(x):this.sizerChildren.splice(c,0,x),e!==void 0&&this.addChildrenMap(e,x),this},MT={add(x,i,e){if(kt(x))for(var c=x,t=0,s=c.length;t<s;t++)Yr.call(this,c[t],i);else Yr.call(this,x,i,e);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(x,i,e,c){return Yr.call(this,i,e,c,x),this}};const RT=Phaser.Utils.Array.Remove;var AT={remove(x,i){return this.getParentSizer(x)!==this?this:(RT(this.sizerChildren,x),Ws.call(this,x,i),this)},removeAll(x){for(var i=this.sizerChildren.length-1;i>=0;i--)this.remove(this.sizerChildren[i],x);return this},clear(x){return this.sizerChildren.length=0,bs.call(this,x),this}},Al={getChildrenWidth:cT,getChildrenHeight:pT,getChildrenSizers:gT,preLayout:xT,layoutChildren:mT,runWidthWrap:ST};Object.assign(Al,MT,AT);var OT=function(x){x===void 0&&(x=this.sizerChildren);for(var i=0,e,c,t=0,s=x.length;t<s;t++)e=x[t],e!==`
`&&(c=this.getChildWidth(e),i=Math.max(c,i));return i},LT=function(x){x===void 0&&(x=this.sizerChildren);for(var i=0,e,c,t=0,s=x.length;t<s;t++)e=x[t],e!==`
`&&(c=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.hasOwnProperty("minHeight")?e.minHeight:pt(e),i=Math.max(c,i));return i};const Ol=Phaser.Utils.Objects.IsPlainObject,ee=Phaser.Utils.Objects.GetValue;class ei extends _e{constructor(i,e,c,t,s,u){Ol(e)?(u=e,e=ee(u,"x",0),c=ee(u,"y",0),t=ee(u,"width",void 0),s=ee(u,"height",void 0)):Ol(t)&&(u=t,t=ee(u,"width",void 0),s=ee(u,"height",void 0));super(i,e,c,t,s,u);this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(ee(u,"orientation",0)),this.setItemSpacing(ee(u,"space.item",0)),this.setLineSpacing(ee(u,"space.line",0)),this.setAlign(ee(u,"align",0)),this.setJustifyPercentage(ee(u,"justifyPercentage",.25)),this.setRTL(ee(u,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(i){return this.orientation=wr(i),this}setItemSpacing(i){return this.space.item=i,this}setLineSpacing(i){return this.space.line=i,this}setAlign(i){return typeof i=="string"&&(i=FT[i]),this.align=i,this}setJustifyPercentage(i){return this.justifyPercentage=i,this}setRTL(i){return i===void 0&&(i=!0),this.rtl=i,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=OT.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=LT.call(this)),this._maxChildHeight}}const FT={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(ei.prototype,Al);et.register("fixWidthSizer",function(x,i,e,c,t){var s=new ei(this.scene,x,i,e,c,t);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.FixWidthSizer",ei);et.register("overlapSizer",function(x,i,e,c,t){var s=new ti(this.scene,x,i,e,c,t);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.OverlapSizer",ti);et.register("space",function(){var x=new Dr(this.scene);return x});st(window,"RexPlugins.UI.Space",Dr);var _i=function(x,i,e,c){var t=new Zs(i,e,c);if(x&&!x.isRexSizer){var s=t.createGeometryMask();x.setMask(s),this.once("destroy",function(){x.setMask(),s.destroy()})}return this.pin(t),t};const re=Phaser.Utils.Objects.GetValue;class Qs extends Dt{constructor(i,e){super(i,e);this.type="rexLabel";var c=re(e,"background",void 0),t=re(e,"icon",void 0),s=re(e,"iconMask",void 0),u=re(e,"text",void 0),n=re(e,"action",void 0),h=re(e,"actionMask",void 0),o=re(e,"align",void 0),r=re(e,"space.icon",0),a=re(e,"space.text",0);if(c&&this.addBackground(c),(o==="right"||o==="bottom"||o==="center")&&this.addSpace(),t){var d;this.orientation===0?(u||n)&&(d={right:r}):(u||n)&&(d={bottom:r}),this.add(t,0,"center",d),s&&(s=_i.call(this,t,t,1))}if(u){var l=re(e,"expandTextWidth",!1),f=re(e,"expandTextHeight",!1),v,d,g;this.orientation===0?(v=l?1:0,n&&(d={right:a}),g=f):(v=f?1:0,n&&(d={bottom:a}),g=l),this.add(u,v,"center",d,g)}n&&(this.add(n),h&&(h=_i.call(this,n,n,1))),o==="center"&&this.addSpace(),this.addChildrenMap("background",c),this.addChildrenMap("icon",t),this.addChildrenMap("iconMask",s),this.addChildrenMap("text",u),this.addChildrenMap("action",n),this.addChildrenMap("actionMask",h)}get text(){var i=this.childrenMap.text;if(i===void 0)return"";var e;return i.text?e=i.text:e=i.getData("text"),e}set text(i){var e=this.childrenMap.text;e!==void 0&&(e.setText?e.setText(i):e.setData("text",i))}setText(i){return this.text=i,this}appendText(i){return this.text+=i,this}runLayout(i,e,c){if(this.ignoreLayout)return this;super.runLayout(i,e,c);var t=this.childrenMap.iconMask;t&&(t.setPosition(),this.resetChildPositionState(t));var s=this.childrenMap.actionMask;return s&&(s.setPosition(),this.resetChildPositionState(s)),this}resize(i,e){super.resize(i,e);var c=this.childrenMap.iconMask;c&&c.resize();var t=this.childrenMap.actionMask;return t&&t.resize(),this}}et.register("label",function(x){var i=new Qs(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Label",Qs);var Ur=function(x,i){x._buttonBehavior=new Ci(x,i),x._buttonBehavior.on("click",function(e,c,t,s){Mi.call(this,"button.click",c,t,s)},this).on("enable",function(e,c){Mi.call(this,"button.enable",c)},this).on("disable",function(e,c){Mi.call(this,"button.disable",c)},this),x.on("pointerover",function(e,c,t,s){Mi.call(this,"button.over",x,e,s)},this).on("pointerout",function(e,c){Mi.call(this,"button.out",x,e,c)},this)},Mi=function(x,i,e,c){var t;if(typeof i=="number"){if(t=i,i=this.buttons[t],!i)return}else if(t=this.buttons.indexOf(i),t===-1)return;this.eventEmitter!==this&&this.emit(x,i,t,e,c),this.groupName!==void 0?this.eventEmitter.emit(x,i,this.groupName,t,e,c):this.eventEmitter.emit(x,i,t,e,c)};const js=Dt.prototype.add,Ll=Dt.prototype.addSpace;var Xr=function(x){var i=!x.isRexSpace,e=!i||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(i){var c=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");c&&Ll.call(this),js.call(this,x,{proportion:e,expand:!0});var t=!this.buttonsExpand&&this.buttonsAlign==="center";t&&Ll.call(this),this.hasTailSpace=t}else js.call(this,x,{proportion:e,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var s=this.sizerChildren.length-1;js.call(this,x,{index:s,proportion:e,expand:!0})}else js.call(this,x,{proportion:e,expand:!0});return i&&(this.buttons.push(x),Ur.call(this,x,this.clickConfig)),this},IT={addButton(x){if(kt(x))for(var i=x,e=0,c=i.length;e<c;e++)Xr.call(this,i[e]);else Xr.call(this,x);return this},addButtons(x){for(var i=0,e=x.length;i<e;i++)Xr.call(this,x[i]);return this}};const BT=Phaser.Utils.Array.Remove,DT=Dt.prototype.remove,GT=Dt.prototype.clear;var Wr=function(x,i){return this.getParentSizer(x)!==this?this:(BT(this.buttons,x),DT.call(this,x,i),this)},wT={remove(x,i){if(kt(x))for(var e=x,c=0,t=e.length;c<t;c++)Wr.call(this,e[c],i);else Wr.call(this,x,i);return this},clear(x){return this.buttons.length=0,GT.call(this,x),this},removeButton(x,i){var x=this.getButton(x);return x?(this.remove(x,i),this):this},clearButtons(x){for(var i=this.buttons.length-1;i>=0;i--)Wr.call(this,this.buttons[i],x);return this}},NT=function(x,i){if(x)if(kt(x)){for(var e,c=0,t=x.length;c<t;c++)if(e=Fl(x[c],i),e)return e}else{var e;for(var s in x)if(e=Fl(x[s],i),e)return e}else return null},Fl=function(x,i){return x?x.hasOwnProperty("name")?x.name===i?x:null:GetElementByName(x,i):null},br={getButton(x){var i,e=typeof x;switch(e){case"number":i=this.buttons[x];break;case"string":i=NT(this.buttons,x);break;default:i=x,this.buttons.indexOf(i)===-1&&(i=void 0);break}return i},setButtonEnable(x,i){if(x===void 0||typeof x=="boolean"){i=x;for(var e=0,c=this.buttons.length;e<c;e++)this.buttons[e]._buttonBehavior.setEnable(i)}else this.getButton(x)._buttonBehavior.setEnable(i);return this},toggleButtonEnable(x){if(x===void 0||typeof x=="boolean")for(var i=0,e=this.buttons.length;i<e;i++)this.buttons[i]._buttonBehavior.toggleEnable();else this.getButton(x)._buttonBehavior.toggleEnable();return this},getButtonEnable(x){return x===void 0&&(x=0),this.getButton(x)._buttonBehavior.enable},emitButtonClick(x){return Mi.call(this,"button.click",x),this},showButton(x){return ze(this.getButton(x)),this},hideButton(x){return Ve(this.getButton(x)),this},isButtonShown(x){return yr(this.getButton(x)),this},forEachButtton(x,i){for(var e=0,c=this.buttons.length;e<c;e++)i?x.call(i,this.buttons[e],e,this.buttons):x(this.buttons[e],e,this.buttons);return this}};const Hr=Phaser.Utils.Objects.GetValue;var Il=function(x,i){i===void 0&&(i=!1);var e=Hr(x,"dataManager",void 0),c=Hr(x,"setValueCallback",void 0),t=Hr(x,"setValueCallbackScope",void 0);e===void 0&&(this.setDataEnabled(),e=this.data),this.buttons.forEach(function(s){var u=s.name;c&&e.events.on(`changedata-${u}`,function(n,h,o){t?c.call(t,s,h,o):c(s,h,o)},this),e.set(u,void 0),e.set(u,i)}),this._dataManager=e},zT=function(x){Il.call(this,x),this._value=void 0,Object.defineProperty(this,"value",{get:function(){return this._value}.bind(this),set:function(i){if(i!==this._value){this._value=i;var e=this._dataManager;this.buttons.forEach(function(c){var t=c.name,s=e.get(t);t===i?s||e.set(t,!0):s&&e.set(t,!1)})}}.bind(this),enumerable:!0,configurable:!0}),this.on("button.click",function(i){this.value=i.name},this)},VT=function(x){Il.call(this,x),this.on("button.click",function(i){var e=this._dataManager,c=i.name,t=e.get(c);e.set(c,!t)},this)};const YT=Phaser.Utils.Objects.GetValue,Bl={radio:zT,checkboxes:VT};var $r=function(x){var i=YT(x,"type",void 0);i&&Bl.hasOwnProperty(i)&&Bl[i].call(this,x)};const ii=Phaser.Utils.Objects.GetValue;class ie extends Dt{constructor(i,e){e===void 0&&(e={});var c=e.space;typeof c=="number"&&(e.space={item:c});super(i,e);this.type="rexButtons",this.eventEmitter=ii(e,"eventEmitter",this),this.groupName=ii(e,"groupName",void 0),this.buttons=[];var t=ii(e,"background",void 0),s=ii(e,"buttons",void 0);this.buttonsExpand=ii(e,"expand",!1),this.buttonsAlign=ii(e,"align",void 0),this.clickConfig=ii(e,"click",void 0),t&&this.addBackground(t),s&&this.addButtons(s),$r.call(this,e),this.addChildrenMap("background",t),this.addChildrenMap("buttons",this.buttons)}}Object.assign(ie.prototype,IT,wT,br);et.register("buttons",function(x){var i=new ie(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Buttons",ie);const UT=Xe.prototype.add;var XT={addButton(x,i,e){return UT.call(this,x,i,e,void 0,0,this.buttonsExpand),this.buttons.push(x),Ur.call(this,x,this.clickConfig),this},addButtons(x,i){for(var e=0,c=x;e<c;e++)this.addButton(x[e],void 0,i);return this}};const WT=Phaser.Utils.Array.Remove,bT=Xe.prototype.remove,HT=Xe.prototype.clear;var Kr=function(x,i){var x=this.getButton(x);return x?(WT(this.buttons,x),bT.call(this,x,i),this):this},$T={remove(x,i){if(kt(x))for(var e=x,c=0,t=e.length;c<t;c++)Kr.call(this,e[c],i);else Kr.call(this,x,i);return this},clear(x){return this.buttons.length=0,HT.call(this,x),this},removeButton(x,i){return this.remove(x,i),this},clearButtons(x){for(var i=this.buttons.length-1;i>=0;i--)Kr.call(this,this.buttons[i],x);return this}};const ce=Phaser.Utils.Objects.GetValue;class Zr extends Xe{constructor(i,e){e===void 0&&(e={});var c=ce(e,"row",0),t=ce(e,"col",0),s=ce(e,"createCellContainerCallback"),u=ce(e,"buttons",void 0),n=ce(e,"expand",!0),h=n?1:0;if(s&&(e.createCellContainerCallback=void 0),u!==void 0){c=Math.max(c,u.length);for(var o=0,r=u.length;o<r;o++)t=Math.max(t,u[o].length)}e.row=c,e.column=t,e.columnProportions=h,e.rowProportions=h;super(i,e);this.type="rexGridButtons",this.eventEmitter=ce(e,"eventEmitter",this),this.groupName=ce(e,"groupName",void 0),this.buttons=[];var a=ce(e,"background",void 0);if(this.buttonsExpand=n,ce(e,"space",void 0),this.clickConfig=ce(e,"click",void 0),a&&this.addBackground(a),u)for(var d,l,f=0,v=u.length;f<v;f++){d=u[f];for(var g=0,p=d.length;g<p;g++)l=d[g],l&&this.addButton(l,g,f)}else if(s)for(var m=0;m<c;m++)for(var y=0;y<t;y++){var l=s(i,y,m);l&&this.addButton(l,y,m)}$r.call(this,e),this.addChildrenMap("background",a),this.addChildrenMap("buttons",this.buttons)}}Object.assign(Zr.prototype,XT,$T,br);et.register("gridButtons",function(x){var i=new Zr(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.GridButtons",Zr);const Dl=ei.prototype.add;var ks=function(x){return Dl.call(this,x),this.buttons.push(x),Ur.call(this,x,this.clickConfig),this},KT={addButton(x){if(kt(x))for(var i=x,e=0,c=i.length;e<c;e++)ks.call(this,i[e]);else ks.call(this,x);return this},addButtons(x){if(kt(x[0]))for(var i=x,e,c=0,t=i.length-1;c<=t;c++){e=i[c];for(var s=0,u=e.length;s<u;s++)ks.call(this,e[s]);c>t&&Dl.addNewLine(this)}else for(var s=0,u=x.length;s<u;s++)ks.call(this,x[s]);return this}};const ZT=Phaser.Utils.Array.Remove,JT=ei.prototype.remove,QT=ei.prototype.clear;var Jr=function(x,i){var x=this.getButton(x);return x?(ZT(this.buttons,x),JT.call(this,x,i),this):this},jT={remove(x,i){if(kt(x))for(var e=x,c=0,t=e.length;c<t;c++)Jr.call(this,e[c],i);else Jr.call(this,x,i);return this},clear(x){return this.buttons.length=0,QT.call(this,x),this},removeButton(x,i){return this.remove(x,i),this},clearButtons(x){for(var i=this.buttons.length-1;i>=0;i--)Jr.call(this,this.buttons[i],x);return this}};const Ri=Phaser.Utils.Objects.GetValue;class Qr extends ei{constructor(i,e){e===void 0&&(e={});var c=e.space;typeof c=="number"&&(e.space={item:c,line:c});super(i,e);this.type="rexFixWidthButtons",this.eventEmitter=Ri(e,"eventEmitter",this),this.groupName=Ri(e,"groupName",void 0),this.buttons=[];var t=Ri(e,"background",void 0),s=Ri(e,"buttons",void 0);this.buttonsAlign=Ri(e,"align",void 0),this.clickConfig=Ri(e,"click",void 0),t&&this.addBackground(t),s&&this.addButtons(s),$r.call(this,e),this.addChildrenMap("background",t),this.addChildrenMap("buttons",this.buttons)}}Object.assign(Qr.prototype,KT,jT,br);et.register("fixWidthButtons",function(x){var i=new Qr(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.FixWidthButtons",Qr);var kT={getChoice(x){return this.childrenMap.choicesSizer.getButton(x)},getAction(x){return this.childrenMap.actionsSizer.getButton(x)},getToolbar(x){return this.childrenMap.toolbarSizer.getButton(x)},getLeftToolbar(x){return this.childrenMap.leftToolbarSizer.getButton(x)},setChoiceEnable(x,i){return this.childrenMap.choicesSizer.setButtonEnable(x,i),this},setActionEnable(x,i){return this.childrenMap.actionsSizer.setButtonEnable(x,i),this},setToolbarEnable(x,i){return this.childrenMap.toolbarSizer.setButtonEnable(x,i),this},setLeftToolbarEnable(x,i){return this.childrenMap.leftToolbarSizer.setButtonEnable(x,i),this},toggleChoiceEnable(x){return this.childrenMap.choicesSizer.toggleButtonEnable(x),this},toggleActionEnable(x){return this.childrenMap.actionsSizer.toggleButtonEnable(x),this},toggleToolbarEnable(x){return this.childrenMap.toolbarSizer.toggleButtonEnable(x),this},toggleLeftToolbarEnable(x){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(x),this},getChoiceEnable(x){return this.childrenMap.choicesSizer.getButtonEnable(x)},getActionEnable(x){return this.childrenMap.actionsSizer.getButtonEnable(x)},getToolbarEnable(x){return this.childrenMap.toolbarSizer.getButtonEnable(x)},getLeftToolbarEnable(x){return this.childrenMap.leftToolbarSizer.getButtonEnable(x)},emitChoiceClick(x){return this.childrenMap.choicesSizer.emitButtonClick(x),this},emitActionClick(x){return this.childrenMap.actionsSizer.emitButtonClick(x),this},emitToolbarClick(x){return this.childrenMap.toolbarSizer.emitButtonClick(x),this},emitLeftToolbarClick(x){return this.childrenMap.leftToolbarSizer.emitButtonClick(x),this},showChoice(x){return this.childrenMap.choicesSizer.showButton(x),this},showAction(x){return this.childrenMap.actionsSizer.showButton(x),this},showToolbar(x){return this.childrenMap.toolbarSizer.showButton(x),this},showLeftToolbar(x){return this.childrenMap.leftToolbarSizer.showButton(x),this},hideChoice(x){return this.childrenMap.choicesSizer.hideButton(x),this},hideAction(x){return this.childrenMap.actionsSizer.hideButton(x),this},hideToolbar(x){return this.childrenMap.toolbarSizer.hideButton(x),this},hideLeftToolbar(x){return this.childrenMap.leftToolbarSizer.hideButton(x),this},addChoice(x){return this.childrenMap.choicesSizer.addButton(x),this},addAction(x){return this.childrenMap.actionsSizer.addButton(x),this},addToolbar(x){return this.childrenMap.toolbarSizer.addButton(x),this},addLeftToolbar(x){return this.childrenMap.leftToolbarSizer.addButton(x),this},removeChoice(x,i){return this.childrenMap.choicesSizer.removeButton(x,i),this},removeAction(x,i){return this.childrenMap.actionsSizer.removeButton(x,i),this},removeToolbar(x,i){return this.childrenMap.toolbarSizer.removeButton(x,i),this},removeLeftToolbar(x,i){return this.childrenMap.leftToolbarSizer.removeButton(x,i),this},clearChoices(x){return this.childrenMap.choicesSizer.clearButtons(x),this},clearActions(x){return this.childrenMap.actionsSizer.clearButtons(x),this},clearToolbar(x){return this.childrenMap.toolbarSizer.clearButtons(x),this},clearLeftToolbar(x){return this.childrenMap.leftToolbarSizer.clearButtons(x),this},forEachChoice(x,i){return this.childrenMap.choicesSizer.forEachButtton(x,i),this},forEachAction(x,i){return this.childrenMap.actionsSizer.forEachButtton(x,i),this},forEachToolbar(x,i){return this.childrenMap.toolbarSizer.forEachButtton(x,i),this},forEachLeftToolbar(x,i){return this.childrenMap.leftToolbarSizer.forEachButtton(x,i),this}};const nt=Phaser.Utils.Objects.GetValue;class jr extends Dt{constructor(i,e){e===void 0&&(e={}),e.orientation=1;super(i,e);this.type="rexDialog",this.eventEmitter=nt(e,"eventEmitter",this);var c=nt(e,"background",void 0),t=nt(e,"title",void 0),s=nt(e,"toolbar",void 0),u=nt(e,"toolbarBackground",void 0),n=nt(e,"leftToolbar",void 0),h=nt(e,"leftToolbarBackground",void 0),o=nt(e,"content",void 0),r=nt(e,"description",void 0),a,d=nt(e,"choices",void 0),l=nt(e,"choicesBackground",void 0),f,v=nt(e,"actions",void 0),g=nt(e,"actionsBackground",void 0),p=nt(e,"click",void 0);c&&this.addBackground(c);var m;s&&(m=new ie(i,{groupName:"toolbar",background:u,buttons:s,orientation:0,space:{item:nt(e,"space.toolbarItem",0)},click:p,eventEmitter:this.eventEmitter}));var y;if(n&&(y=new ie(i,{groupName:"leftToolbar",background:h,buttons:n,orientation:0,space:{item:nt(e,"space.leftToolbarItem",0)},click:p,eventEmitter:this.eventEmitter})),t&&!s&&!n){var T=nt(e,"align.title","center"),C=nt(e,"space.title",0),S;(o||r||d||v)&&(S={bottom:C});var E=nt(e,"expand.title",!0);this.add(t,{align:T,padding:S,expand:E})}if(s&&!t&&!n){var C=nt(e,"space.title",0),S;(o||r||d||v)&&(S={bottom:C});var E=nt(e,"expand.toolbar",!0);this.add(m,{align:"right",padding:S,expand:E})}if(n&&!t&&!s){var C=nt(e,"space.title",0),S;(o||r||d||v)&&(S={bottom:C});var E=nt(e,"expand.leftToolbar",!0);this.add(y,{align:"left",padding:S,expand:E})}if(t&&(s||n)){var P=new Dt(i,{orientation:0});y&&P.add(y,{align:"right",expand:!1});var T=nt(e,"align.title","left"),E=nt(e,"expand.title",!0);!E&&(T==="right"||T==="center")&&P.addSpace();var S={left:nt(e,"space.titleLeft",0),right:nt(e,"space.titleRight",0)},M=E?1:0;P.add(t,{proportion:M,align:"center",padding:S,expand:E}),!E&&(T==="left"||T==="center")&&P.addSpace(),m&&P.add(m,{align:"right",expand:!1});var C=nt(e,"space.title",0),S;(o||r||d||v)&&(S={bottom:C}),this.add(P,{align:"center",padding:S,expand:!0})}if(o){var T=nt(e,"align.content","center"),A=nt(e,"space.content",0),S={left:nt(e,"space.contentLeft",0),right:nt(e,"space.contentRight",0),bottom:r||d||v?A:0},E=nt(e,"expand.content",!0);this.add(o,{align:T,padding:S,expand:E})}if(r){var T=nt(e,"align.description","center"),R=nt(e,"space.description",0),S={left:nt(e,"space.descriptionLeft",0),right:nt(e,"space.descriptionRight",0),bottom:d||v?R:0},E=nt(e,"expand.description",!0);this.add(r,{align:T,padding:S,expand:E})}if(d){var T=nt(e,"align.choices","center");a=new ie(i,{groupName:"choices",background:l,buttons:d,orientation:1,space:{item:nt(e,"space.choice",0)},click:p,eventEmitter:this.eventEmitter,type:nt(e,"choicesType",void 0),setValueCallback:nt(e,"choicesSetValueCallback",void 0),setValueCallbackScope:nt(e,"choicesSetValueCallbackScope",void 0)});var O=nt(e,"space.choices",0),S={left:nt(e,"space.choicesLeft",0),right:nt(e,"space.choicesRight",0),bottom:v?O:0},E=nt(e,"expand.choices",!0);this.add(a,{align:T,padding:S,expand:E})}if(v){f=new ie(i,{groupName:"actions",background:g,buttons:v,orientation:0,space:{item:nt(e,"space.action",0)},expand:nt(e,"expand.actions",!1),align:nt(e,"align.actions","center"),click:p,eventEmitter:this.eventEmitter});var S={left:nt(e,"space.actionsLeft",0),right:nt(e,"space.actionsRight",0)};this.add(f,{align:"center",padding:S,expand:!0})}this.addChildrenMap("background",c),this.addChildrenMap("title",t),this.addChildrenMap("toolbar",s),this.addChildrenMap("leftToolbar",n),this.addChildrenMap("content",o),this.addChildrenMap("description",r),this.addChildrenMap("choices",d),this.addChildrenMap("actions",v),this.addChildrenMap("choicesSizer",a),this.addChildrenMap("actionsSizer",f),this.addChildrenMap("toolbarSizer",m),this.addChildrenMap("leftToolbarSizer",y)}}Object.assign(jr.prototype,kT);et.register("dialog",function(x){var i=new jr(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Dialog",jr);var qT={getButtonsSizer(x){return this.childrenMap[`${x}ButtonsSizer`]},getButton(x,i){var e=this.getButtonsSizer(x);return e?e.getButton(i):void 0},setButtonEnable(x,i,e){return this.getButtonsSizer(x).setButtonEnable(i,e),this},setLeftButtonEnable(x,i){return this.childrenMap.leftButtonsSizer.setButtonEnable(x,i),this},setRightButtonEnable(x,i){return this.childrenMap.rightButtonsSizer.setButtonEnable(x,i),this},setTopButtonEnable(x,i){return this.childrenMap.topButtonsSizer.setButtonEnable(x,i),this},setBottomButtonEnable(x,i){return this.childrenMap.bottomButtonsSizer.setButtonEnable(x,i),this},toggleButtonEnable(x,i){return this.getButtonsSizer(x).toggleButtonEnable(i),this},toggleLeftButtonEnable(x){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(x),this},toggleRightButtonEnable(x){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(x),this},toggleTopButtonEnable(x){return this.childrenMap.topButtonsSizer.toggleButtonEnable(x),this},toggleBottomButtonEnable(x){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(x),this},getButtonEnable(x,i){return this.getButtonsSizer(x).getButtonEnable(i)},getLeftButtonEnable(x){return this.childrenMap.leftButtonsSizer.getButtonEnable(x)},getRightButtonEnable(x){return this.childrenMap.rightButtonsSizer.getButtonEnable(x)},getTopButtonEnable(x){return this.childrenMap.topButtonsSizer.getButtonEnable(x)},getBottomButtonEnable(x){return this.childrenMap.bottomButtonsSizer.getButtonEnable(x)},emitButtonClick(x,i){var e=this.getButtonsSizer(x);return e?(e.emitButtonClick(i),this):this},emitLeftButtonClick(x){return this.childrenMap.leftButtonsSizer.emitButtonClick(x),this},emitRightButtonClick(x){return this.childrenMap.rightButtonsSizer.emitButtonClick(x),this},emitTopButtonClick(x){return this.childrenMap.topButtonsSizer.emitButtonClick(x),this},emitBottomButtonClick(x){return this.childrenMap.bottomButtonsSizer.emitButtonClick(x),this},getLeftButton(x){return this.childrenMap.leftButtonsSizer.getButton(x)},getRightButton(x){return this.childrenMap.rightButtonsSizer.getButton(x)},getTopButton(x){return this.childrenMap.topButtonsSizer.getButton(x)},getBottomButton(x){return this.childrenMap.bottomButtonsSizer.getButton(x)},showButton(x,i){return ze(this.getButton(x,i)),this},showLeftButton(x){return ze(this.getLeftButton(x)),this},showRightButton(x){return ze(this.getRightButton(x)),this},showTopButton(x){return ze(this.getTopButton(x)),this},showBottomButton(x){return ze(this.getBottomButton(x)),this},hideButton(x,i){return Ve(this.getButton(x,i)),this},hideLeftButton(x){return Ve(this.getLeftButton(x)),this},hideRightButton(x){return Ve(this.getRightButton(x)),this},hideTopButton(x){return Ve(this.getTopButton(x)),this},hideBottomButton(x){return Ve(this.getBottomButton(x)),this},addButton(x,i){return this.getButtonsSizer(x).addButton(i),this},addLeftButton(x){return this.addButton("left",x),this},addRightButton(x){return this.addButton("right",x),this},addTopButton(x){return this.addButton("top",x),this},removeButton(x,i,e){return this.getButtonsSizer(x).removeButton(i,e),this},removeLeftButton(x,i){return this.removeButton("left",x,i),this},removeRightButton(x,i){return this.removeButton("right",x,i),this},removeTopButton(x,i){return this.removeButton("top",x,i),this},removeBottomButton(x,i){return this.removeButton("bottom",x,i),this},clearButtons(x,i){return this.getButtonsSizer(x).clearButtons(i),this},clearLeftButtons(x){return this.clearButtons("left",x),this},clearRightButtons(x){return this.clearButtons("right",x),this},clearTopButtons(x){return this.clearButtons("top",x),this},clearBottomButtonss(x){return this.clearButtons("bottom",x),this},forEachButton(x,i,e){return this.getButtonsSizer(x).forEachButtton(i,e),this},forEachLeftButton(x,i){return this.childrenMap.leftButtonsSizer.forEachButtton(x,i),this},forEachRightButton(x,i){return this.childrenMap.rightButtonsSizer.forEachButtton(x,i),this},forEachTopButton(x,i){return this.childrenMap.topButtonsSizer.forEachButtton(x,i),this},forEachBottomButton(x,i){return this.childrenMap.bottomButtonsSizer.forEachButtton(x,i),this}};const xt=Phaser.Utils.Objects.GetValue;class kr extends Xe{constructor(i,e){e===void 0&&(e={}),e.column=3,e.row=3;super(i,e);this.type="rexTabs",this.eventEmitter=xt(e,"eventEmitter",this);var c=xt(e,"background",void 0),t=xt(e,"panel",void 0),s=xt(e,"leftButtons",void 0),u=xt(e,"leftButtonsBackground",void 0),n,h=xt(e,"rightButtons",void 0),o=xt(e,"rightButtonsBackground",void 0),r,a=xt(e,"topButtons",void 0),d=xt(e,"topButtonsBackground",void 0),l,f=xt(e,"bottomButtons",void 0),v=xt(e,"bottomButtonsBackground",void 0),g,p=xt(e,"click",void 0);if(c&&this.addBackground(c),t&&this.add(t,1,1,"center",0,!0),s){var m=xt(e,"space.leftButtonsOffset",0),y=xt(e,"space.leftButton",0);n=new ie(i,{groupName:"left",background:u,buttons:s,orientation:1,space:{item:y},align:xt(e,"align.leftButtons",void 0),click:p,eventEmitter:this.eventEmitter});var T={top:m};this.add(n,0,1,"top",T,!1)}if(h){var C=xt(e,"space.rightButtonsOffset",0),S=xt(e,"space.rightButton",0);r=new ie(i,{groupName:"right",background:o,buttons:h,orientation:1,space:{item:S},align:xt(e,"align.rightButtons",void 0),click:p,eventEmitter:this.eventEmitter});var T={top:C};this.add(r,2,1,"top",T,!1)}if(a){var E=xt(e,"space.topButtonsOffset",0),P=xt(e,"space.topButton",0);l=new ie(i,{groupName:"top",background:d,buttons:a,orientation:0,space:{item:P},align:xt(e,"align.topButtons",void 0),click:p,eventEmitter:this.eventEmitter});var T={left:E};this.add(l,1,0,"left",T,!1)}if(f){var M=xt(e,"space.bottomButtonsOffset",0),A=xt(e,"space.bottomButton",0);g=new ie(i,{groupName:"bottom",background:v,buttons:f,orientation:0,space:{item:A},align:xt(e,"align.bottomButtons",void 0),click:p,eventEmitter:this.eventEmitter});var T={left:M};this.add(g,1,2,"left",T,!1)}this.addChildrenMap("background",c),this.addChildrenMap("panel",t),this.addChildrenMap("leftButtons",s),this.addChildrenMap("rightButtons",h),this.addChildrenMap("topButtons",a),this.addChildrenMap("bottomButtons",f),this.addChildrenMap("leftButtonsSizer",n),this.addChildrenMap("rightButtonsSizer",r),this.addChildrenMap("topButtonsSizer",l),this.addChildrenMap("bottomButtonsSizer",g)}}Object.assign(kr.prototype,qT);et.register("tabs",function(x){var i=new kr(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Tabs",kr);const Gl=Phaser.Math.Percent;var wl=function(x,i,e){var c,t,s;return x.y===i.y?(c=Math.min(x.x,i.x),t=Math.max(x.x,i.x),s=Gl(e.x,c,t)):x.x===i.x&&(c=Math.min(x.y,i.y),t=Math.max(x.y,i.y),s=Gl(e.y,c,t)),s},_T=function(x,i,e){!this.enable||(qr.x=i,qr.y=e,this.value=wl(this.getStartPoint(),this.getEndPoint(),qr))},qr={},Nl=function(x,i,e){if(!!this.enable&&!!x.isDown){_r.x=x.worldX,_r.y=x.worldY;var c=wl(this.getStartPoint(),this.getEndPoint(),_r);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-c)<.1?this.value=c:this.easeValueTo(c)}},_r={},zl=function(x,i){i===void 0&&(i=t1);var e=this.childrenMap.thumb,c=e.x,t=e.y;return ws(e,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,x),i.x=e.x,i.y=e.y,e.x=c,e.y=t,i},t1={};const e1=Phaser.Display.Align.LEFT_CENTER,i1=Phaser.Display.Align.TOP_CENTER;var s1=function(x){if(x===void 0&&(x=n1),this.childrenMap.thumb){var i=this.orientation===0?e1:i1;zl.call(this,i,x)}else this.orientation===0?(x.x=this.innerLeft+1,x.y=this.centerY):(x.x=this.centerX,x.y=this.innerTop+1);return x},n1={};const r1=Phaser.Display.Align.RIGHT_CENTER,a1=Phaser.Display.Align.BOTTOM_CENTER;var o1=function(x){if(x===void 0&&(x=h1),this.childrenMap.thumb){var i=this.orientation===0?r1:a1;zl.call(this,i,x)}else this.orientation===0?(x.x=this.innerRight-1,x.y=this.centerY):(x.x=this.centerX,x.y=this.innerBottom-1);return x},h1={};const Vl=Phaser.Math.Linear;var l1=function(x,i,e,c){return c===void 0&&(c=u1),c.x=Vl(i.x,e.x,x),c.y=Vl(i.y,e.y,x),c},u1={},f1=function(x){var i=this.childrenMap.thumb;return i===void 0?this:(x===void 0&&(x=this.value),l1(x,this.getStartPoint(),this.getEndPoint(),i),this.resetChildPositionState(i),this)};const d1=Phaser.Display.Align.LEFT_CENTER,v1=Phaser.Display.Align.TOP_CENTER;var c1=function(x){var i=this.childrenMap.indicator;if(i===void 0)return this;x===void 0&&(x=this.value);var e,c,t=this.childrenMap.thumb;if(t)if(this.orientation===0){var s=Ct(t),u=t.x-s*t.originX+s;e=u-this.left}else{var n=pt(t),h=t.y-n*t.originY+n;c=h-this.top}else this.orientation===0?e=this.width*x:c=this.height*x;qe(i,e,c);var o=this.orientation===0?d1:v1;Gh(i,this,o),this.resetChildPositionState(i)};const Gt=Phaser.Utils.Objects.GetValue,p1=Phaser.Math.Clamp,g1=Phaser.Math.Linear,Yl=Phaser.Math.Percent,x1=Phaser.Math.Snap.To;class ts extends Dt{constructor(i,e){super(i,e);this.type="rexSlider",this.eventEmitter=Gt(e,"eventEmitter",this);var c=Gt(e,"background",void 0),t=Gt(e,"track",void 0),s=Gt(e,"indicator",void 0),u=Gt(e,"thumb",void 0);c&&this.addBackground(c),t&&this.add(t,{proportion:1,expand:!0,minWidth:0,minHeight:0}),s&&this.pin(s),u&&this.pin(u);var n=Gt(e,"input",0);switch(typeof n=="string"&&(n=m1[n]),n){case 0:u&&(u.setInteractive(),this.scene.input.setDraggable(u),u.on("drag",_T,this));break;case 1:this.setInteractive().on("pointerdown",Nl,this).on("pointermove",Nl,this);break}this.addChildrenMap("background",c),this.addChildrenMap("track",t),this.addChildrenMap("indicator",s),this.addChildrenMap("thumb",u);var h=Gt(e,"valuechangeCallback",null);if(h!==null){var o=Gt(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",h,o)}this.setEnable(Gt(e,"enable",void 0)),this.setGap(Gt(e,"gap",void 0)),this.setValue(Gt(e,"value",0),Gt(e,"min",void 0),Gt(e,"max",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(Gt(e,"easeValue.duration",0)).setEaseValueFunction(Gt(e,"easeValue.ease","Linear"))}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setGap(i){return this.gap=i,this}get value(){return this._value}set value(i){this.gap!==void 0&&(i=x1(i,this.gap));var e=this._value;this._value=p1(i,0,1),e!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter))}setValue(i,e,c){return i==null?this:(e!==void 0&&(i=Yl(i,e,c)),this.value=i,this)}addValue(i,e,c){return e!==void 0&&(i=Yl(i,e,c)),this.value+=i,this}getValue(i,e){var c=this.value;return i!==void 0&&(c=g1(i,e,c)),c}runLayout(i,e,c){return this.ignoreLayout?this:(super.runLayout(i,e,c),this.updateThumb(),this.updateIndicator(),this)}}const m1={pan:0,drag:0,click:1,none:-1};var y1={getStartPoint:s1,getEndPoint:o1,updateThumb:f1,updateIndicator:c1};Object.assign(ts.prototype,y1,bi);et.register("slider",function(x){var i=new ts(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Slider",ts);var Ul={v:0,vertical:0,h:1,horizontal:1};const T1=Phaser.Utils.Objects.GetValue;var qs=function(x,i){var e=T1(x,"scrollMode",0);return typeof e=="string"&&(e=Ul[e]),e};class Ae{constructor(i){var e=Rt(i,"states",void 0);e&&this.addStates(e);var c=Rt(i,"extend",void 0);if(c)for(var t in c)(!this.hasOwnProperty(t)||this[t]===void 0)&&(this[t]=c[t]);var s=Rt(i,"eventEmitter",void 0),u=Rt(i,"EventEmitterClass",void 0);this.setEventEmitter(s,u),this._stateLock=!1,this.resetFromJSON(i)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(i){this.setEnable(Rt(i,"enable",!0)),this.start(Rt(i,"start",void 0));var e=Rt(i,"init",void 0);return e&&e.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(i){if(!(!this.enable||this._stateLock)&&this._state!==i){if(this._prevState=this._state,this._state=i,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var e="exit_"+this._prevState,c=this[e];c&&c.call(this),this.emit(e,this)}if(this._stateLock=!1,this._state!=null){var t="enter_"+this._state,s=this[t];s&&s.call(this),this.emit(t,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(i){return this._start=i,this._prevState=void 0,this._state=i,this}goto(i){return i!=null&&(this.state=i),this}next(){var i,e=this["next_"+this.state];return e&&(typeof e=="string"?i=e:i=e.call(this)),this.goto(i),this}addState(i,e){var c=Rt(e,"next",void 0);c&&(this["next_"+i]=c);var t=Rt(e,"exit",void 0);t&&(this["exit_"+i]=t);var s=Rt(e,"enter",void 0);return s&&(this["enter_"+i]=s),this}addStates(i){for(var e in i)this.addState(e,i[e]);return this}update(i,e,c){c===void 0&&(c="update");var t=this[c+"_"+this.state];t&&t.call(this,i,e)}preupdate(i,e){this.update(i,e,"preupdate")}postupdate(i,e){this.update(i,e,"postupdate")}}Object.assign(Ae.prototype,ci);class C1 extends Ae{constructor(i,e){super(e);this.parent=i,this.init()}init(){this.start("IDLE")}next_IDLE(){var i,e=this.parent,c=e.dragState;return c.isDown&&(i=e.dragThreshold===0?"DRAG":"DRAGBEGIN"),i}update_IDLE(i,e){this.next()}next_DRAGBEGIN(){var i,e=this.parent,c=e.dragState;return c.isDown?i=c.pointer.getDistance()>=e.dragThreshold?"DRAG":"DRAGBEGIN":i="IDLE",i}update_DRAGBEGIN(i,e){this.next()}next_DRAG(){var i,e=this.parent,c=e.dragState;return c.isUp&&(e.outOfBounds?i="BACK":e.slidingEnable?i="SLIDE":i="IDLE"),i}update_DRAG(i,e){var c=this.parent,t=c.dragState;t.justMoved&&c.dragging(),this.next()}next_SLIDE(){var i,e=this.parent,c=e.dragState;return c.isDown?i="DRAG":e.isSliding||(i="IDLE"),i}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(i,e){this.parent.sliding(i,e),this.next()}next_BACK(){var i,e=this.parent,c=e.dragState;return c.isDown?i="DRAG":e.isPullBack||(i="IDLE"),i}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(i,e){this.parent.pullBack(i,e),this.next()}}const ta=Phaser.Utils.Objects.GetValue,S1=Phaser.Math.Distance.Between;class E1 extends Zt{constructor(i,e){super(i,e);this._enable=void 0,i.setInteractive(ta(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(ta(i,"enable",!0)),this.holdThreshold=ta(i,"holdThreshold",50),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.events.on("preupdate",this.preupdate,this)}shutdown(i){this.isShutdown||(this.scene.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){this._enable!==i&&(i||(this.isInTouched=!1,this.pointer=void 0),this._enable=i)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var i=this.scene.sys.game,e=i.loop.delta;return e}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var i=S1(this.preX,this.preY,this.x,this.y),e=i/(this.dt*.001);return e}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(i,e,c){!this.enable||!i.isDown||this.pointer!==void 0||(this.pointer=i,this.localX=e,this.localY=c)}onPointOut(i){!this.enable||this.pointer!==i||(this.pointer=void 0)}onPointerMove(i,e,c){!this.enable||!i.isDown||this.pointer!==i||(this.localX=e,this.localY=c)}preupdate(i,e){if(!!this.enable){var c=this.pointer;this.justMoved=!1,c&&!this.isInTouched?(this.x=c.x,this.y=c.y,this.preX=c.x,this.preY=c.y,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",c,this.localX,this.localY)):c&&this.isInTouched?this.x===c.x&&this.y===c.y?this.holdStartTime===void 0?this.holdStartTime=i:i-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=c.x,this.y=c.y,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",c,this.localX,this.localY)):!c&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",c))}}}const ea=Phaser.Utils.Objects.GetValue;class P1{constructor(i){this.resetFromJSON(i)}resetFromJSON(i){return this.setValue(ea(i,"value",0)),this.setSpeed(ea(i,"speed",0)),this.setAcceleration(ea(i,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(i){return this.value=i,this}setSpeed(i){return this.speed=i,this}setAcceleration(i){return this.acceleration=i,this}updateSpeed(i){return this.acceleration!==0&&(this.speed+=this.acceleration*i,this.speed<0&&(this.speed=0)),this}getDeltaValue(i){return this.updateSpeed(i),this.speed<=0?0:this.speed*i}update(i){return this.updateSpeed(i),this.speed>0&&(this.value+=this.getDeltaValue(i)),this}get isMoving(){return this.speed>0}}class M1{constructor(){this.value,this.dir,this.movement=new P1}init(i,e,c,t,s){return this.value=i,this.end=s,s!==void 0?this.dir=i<s:this.dir=e,this.movement.setSpeed(c).setAcceleration(-t),this}stop(){this.movement.reset()}update(i){var e=this.movement.getDeltaValue(i);return this.dir||(e=-e),this.end===void 0?this.value+=e:e===0?this.value=this.end:(this.value+=e,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const Mt=Phaser.Utils.Objects.GetValue,R1=Phaser.Math.Clamp;class A1 extends Zt{constructor(i,e){super(i,e);var c=Mt(e,"enable",!0);this._state=new C1(this,{enable:c,eventEmitter:!1});var t={inputConfig:Mt(e,"inputConfig",void 0),enable:c,eventEmitter:!1};this.dragState=new E1(i,t),this._enable=void 0,this._value=void 0,this._slowDown=new M1;var s=Mt(e,"valuechangeCallback",null);if(s!==null){var u=Mt(e,"valuechangeCallbackScope",void 0);this.on("valuechange",s,u)}if(s=Mt(e,"overmaxCallback",null),s!==null){var u=Mt(e,"overmaxCallbackScope",void 0);this.on("overmax",s,u)}if(s=Mt(e,"overminCallback",null),s!==null){var u=Mt(e,"overminCallbackScope",void 0);this.on("overmin",s,u)}this.resetFromJSON(e),this.boot()}resetFromJSON(i){this.setOrientationMode(Mt(i,"orientation",0)),this.setDragThreshold(Mt(i,"threshold",10)),this.setSlidingDeceleration(Mt(i,"slidingDeceleration",5e3)),this.setBackDeceleration(Mt(i,"backDeceleration",2e3));var e=Mt(i,"bounds",void 0);return e?this.setBounds(e):this.setBounds(Mt(i,"max",0),Mt(i,"min",0)),this.setValue(Mt(i,"value",this.maxValue||0)),this.setEnable(Mt(i,"enable",!0)),this}boot(){this.scene.events.on("update",this._state.update,this._state)}shutdown(i){this.isShutdown||(this.scene.events.off("update",this._state.update,this._state),this._state.destroy(i),this.dragState.destroy(i),this._state=void 0,this.dragState=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return this._enable=i,this._state.setEnable(i),this.dragState.setEnable(i),this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(i){return typeof i=="string"&&(i=O1[i]),this.orientationMode=i,this}setDragThreshold(i){return this.dragThreshold=i,this}setSlidingDeceleration(i){return this.slidingDeceleration=i,this}setBackDeceleration(i){return this.backDeceleration=i,this}setBounds(i,e){if(Array.isArray(i)){var c=i;i=c[0],e=c[1]}return i<e?(this.minValue=i,this.maxValue=e):(this.minValue=e,this.maxValue=i),this}get value(){return this._value}set value(i){if(i!==this._value){var e=this._value,c=this.overMax(i),t=this.overMin(i);c&&this.emit("overmax",i,e),t&&this.emit("overmin",i,e),this.backEnable||(c&&(i=this.maxValue),t&&(i=this.minValue)),this._value=i,this.emit("valuechange",i,e)}}setValue(i,e){return e===void 0&&(e=!1),e&&(i=R1(i,this.minValue,this.maxValue)),this.value=i,this}addValue(i,e){return this.setValue(this.value+i,e),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(i){return this.maxValue!=null&&i>this.maxValue}overMin(i){return this.minValue!=null&&i<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){return this.orientationMode===0?this.dragState.dy:this.orientationMode===1?this.dragState.dx:0}get dragSpeed(){return this.orientationMode===0?this.dragState.speedY:this.orientationMode===1?this.dragState.speedX:0}dragging(){this.value+=this.dragDelta}onSliding(){var i=this.value,e=this.dragSpeed;if(e===0){this._slowDown.stop(),this._state.next();return}var c=this.slidingDeceleration;this._slowDown.init(i,e>0,Math.abs(e),c)}sliding(i,e){e*=.001;var c=this._slowDown.update(e).value;this.overMax(c)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(c)?(this.value=this.minValue,this._slowDown.stop()):this.value=c}onPullBack(){var i=this.value,e=this.outOfMinBound?this.minValue:this.maxValue,c=Math.abs(e-i),t=this.backDeceleration,s=Math.sqrt(2*t*c);this._slowDown.init(i,void 0,s,t,e)}pullBack(i,e){e*=.001,this.value=this._slowDown.update(e).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}}const O1={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},_s=Phaser.Utils.Objects.GetValue;class L1 extends Zt{constructor(i,e){super(i,e);if(this.parent!==this.scene?this.focusMode=_s(e,"focus",!1):this.focusMode=!1,this.setSpeed(_s(e,"speed",.1)),this.setEnable(_s(e,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var i=this.parent;i.setInteractive(_s(e,"inputConfig",void 0)).on("wheel",function(t,s,u,n,h){!this.enable||this.scroll(u)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(i,e,c,t,s,u){!this.enable||this.scroll(t)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setSpeed(i){return this.speed=i,this}scroll(i){i*=this.speed,this.emit("scroll",i,this.parent,this)}}const Lt=Phaser.Utils.Objects.GetValue;var F1=function(x){var i=this.scene,e=qs(x),c=new Dt(i,{orientation:e}),t=Lt(x,"child.gameObject",void 0),s=Lt(x,"slider",void 0),u,n=Lt(s,"position",0);typeof n=="string"&&(n=I1[n]);var h=n===0,o=Lt(x,"scroller",!0),r,a=Lt(x,"mouseWheelScroller",!1),d;if(t){var l=Lt(x,"space.child",0),f={};if(this.childMargin={},typeof l!="number"){var v=l;e===0?(f.left=Lt(v,"left",0),f.right=Lt(v,"right",0),this.childMargin.top=Lt(v,"top",0),this.childMargin.bottom=Lt(v,"bottom",0)):(f.top=Lt(v,"top",0),f.bottom=Lt(v,"bottom",0),this.childMargin.top=Lt(v,"left",0),this.childMargin.bottom=Lt(v,"right",0))}else s&&(e===0?f=h?{right:l}:{left:l}:f=h?{bottom:l}:{top:l}),this.childMargin.top=0,this.childMargin.bottom=0;s&&(s===!0&&(s={}),s.orientation=c.orientation===0?1:0,u=new ts(i,s)),o&&(o===!0&&(o={}),o.orientation=e,r=new A1(t,o)),a&&(d=new L1(t,a)),u&&!h&&c.add(u,{proportion:0,align:"center",expand:!0});var g=Lt(x,"child.proportion",1),p=Lt(x,"child.expand",!0);c.add(t,{proportion:g,align:"center",padding:f,expand:p}),u&&h&&c.add(u,{proportion:0,align:"center",expand:!0})}return u&&u.on("valuechange",function(m){this.t=m,this.emit("scroll",this)},this),r&&r.on("valuechange",function(m){this.childOY=m,this.emit("scroll",this)},this),d&&d.on("scroll",function(m){this.addChildOY(-m,!0)},this),this.addChildrenMap("child",t),this.addChildrenMap("slider",u),this.addChildrenMap("scroller",r),this.addChildrenMap("mouseWheelScroller",d),c},I1={right:0,left:1,bottom:0,top:1},B1=function(){var x=this.topChildOY,i=this.bottomChildOY,e=this.childrenMap.scroller,c=this.childrenMap.slider;return e&&e.setBounds(i,x),c&&c.setEnable(i!==x),this.updateController(),this},D1=function(){var x=this.childrenMap.scroller,i=this.childrenMap.slider;x&&x.setValue(this.childOY),i&&i.setValue(this.t)};const pe=Phaser.Utils.Objects.GetValue,Xl=Phaser.Math.Clamp;class tn extends Dt{constructor(i,e){e===void 0&&(e={});var c=qs(e);e.orientation=c===0?1:0;super(i,e);this.type=pe(e,"type","rexScrollable");var t=pe(e,"background",void 0),s=F1.call(this,e),u=pe(e,"header",void 0),n=pe(e,"footer",void 0);if(t&&this.addBackground(t),u){var h=pe(e,"align.header","center"),o=pe(e,"space.header",0),r;c===0?r={bottom:o}:r={right:o};var a=pe(e,"expand.header",!0);this.add(u,0,h,r,a)}if(s&&this.add(s,1,"center",0,!0),n){var h=pe(e,"align.footer","center"),d=pe(e,"space.footer",0),r;c===0?r={top:d}:r={left:d};var a=pe(e,"expand.footer",!0);this.add(n,0,h,r,a)}this.addChildrenMap("background",t),this.addChildrenMap("header",u),this.addChildrenMap("footer",n)}runLayout(i,e,c){return this.ignoreLayout?this:(super.runLayout(i,e,c),this.resizeController(),this)}set t(i){var e=this.childMargin;if(e.top!==0||e.bottom!==0){var c=this.childrenMap.child,t=c.topChildOY-c.bottomChildOY,s=t+e.top+e.bottom,u=s*i-e.top;i=u/t}this.childrenMap.child.t=i,this.updateController()}get t(){var i=this.childrenMap.child.t,e=this.childMargin;if(e.top!==0||e.bottom!==0){var c=this.childrenMap.child,t=c.topChildOY-c.bottomChildOY,s=t+e.top+e.bottom,u=t*i+e.top;i=u/s}return i}set childOY(i){this.childrenMap.child.childOY=i,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get isOverflow(){var i=this.childrenMap.child;return i.topChildOY!==i.bottomChildOY}setChildOY(i,e){return e===void 0&&(e=!1),e&&(i=Xl(i,this.bottomChildOY,this.topChildOY)),this.childOY=i,this}addChildOY(i,e){return this.setChildOY(this.childOY+i,e),this}setT(i,e){return e===void 0&&(e=!1),e&&(i=Xl(i,0,1)),this.t=i,this}addT(i,e){return this.setT(this.t+i,e),this}scrollToTop(){return this.t=0,this}scrollToBottom(){return this.t=1,this}get sliderEnable(){var i=this.childrenMap.slider;return i?i.enable:!1}set sliderEnable(i){var e=this.childrenMap.slider;!e||e.setEnable(i)}setSliderEnable(i){return i===void 0&&(i=!0),this.sliderEnable=i,this}get scrollerEnable(){var i=this.childrenMap.scroller;return i?i.enable:!1}set scrollerEnable(i){var e=this.childrenMap.scroller;!e||e.setEnable(i)}setScrollerEnable(i){return i===void 0&&(i=!0),this.scrollerEnable=i,this}get mouseWheelScrollerEnable(){var i=this.childrenMap.mouseWheelScroller;return i?i.enable:!1}set mouseWheelScrollerEnable(i){var e=this.childrenMap.mouseWheelScrollerEnable;!e||e.setEnable(i)}setMouseWheelScrollerEnable(i){return i===void 0&&(i=!0),this.mouseWheelScrollerEnable=i,this}}var G1={resizeController:B1,updateController:D1};Object.assign(tn.prototype,G1);class Wl{constructor(i,e){this.container=null,this._deltaHeight=0,this.setParent(i)}setParent(i){this.parent=i,this.parentContainer=i.getParentContainer()}destroy(i){i===void 0&&(i=!1),i||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(i){return i?(this.container&&this.container.destroy(),this.container=i,this.parentContainer.add(i),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var i=this.container;return this.container=null,this.parentContainer.remove(i),i}else return null}setXY(i,e){return this.container&&this.parentContainer.setChildLocalPosition(this.container,i,e),this}get deltaHeight(){return this._deltaHeight}set deltaHeight(i){i==null&&(i=0);var e=this.parent;this._deltaHeight===0&&i!==0?e.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&i===0&&e.nonZeroDeltaHeightCount--;var c=this._deltaHeight!==i;if(this._deltaHeight=i,c){var t=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(t,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(i){this.deltaHeight=i}setDeltaHeight(i){return this.deltaHeight=i,this}setDeltaWidth(i){return this.deltaHeight=i,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(i){this.scrollMode!==1&&this.setDeltaHeight(i-this.parent.defaultCellHeight)}setHeight(i){return this.height=i,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(i){this.scrollMode!==0&&this.setDeltaHeight(i-this.parent.defaultCellHeight)}setWidth(i){return this.width=i,this}get scene(){return this.parentContainer.scene}}Object.assign(Wl.prototype,Vo);const en=Phaser.Utils.Objects.GetValue,w1=Phaser.Utils.Array.SpliceOne;class N1{constructor(i,e){this.parent=i,this.cells=[],this.cellPool=new Be,this.resetFromJSON(e)}resetFromJSON(i){return this.colCount=void 0,this._nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight(),this.setDefaultCellHeight(en(i,"cellHeight",30)),this.setDefaultCellWidth(en(i,"cellWidth",30)),this.initCells(en(i,"cellsCount",0)),this.setColumnCount(en(i,"columns",1)),this}destroy(i){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get nonZeroDeltaHeightCount(){return this._nonZeroDeltaHeightCount}set nonZeroDeltaHeightCount(i){this._nonZeroDeltaHeightCount!==i&&(this._nonZeroDeltaHeightCount=i,this.resetTotalRowsHeight())}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(i){return this.defaultCellHeight=i,this}setDefaultCellWidth(i){return this.defaultCellWidth=i,this}initCells(i){var e=this.cells;e.length=i;for(var c=0;c<i;c++)e[c]=null;return this}insertNewCells(i,e){var c=this.cells;if(i===c.length){var t=i+e;c.legth=t;for(var s=i;s<t;s++)c[s]=null}else{var u=[];u.length=e;for(var s=0;s<e;s++)u[s]=null;this.cells.splice(i,0,...u)}return this.resetTotalRowsHeight(),this}removeCells(i,e){for(var c=i+e,t=i;t<c;t++)this.freeCell(t);return c===this.cells.length?this.cells.length=i:(e===1?w1(this.cells,i):this.cells.splice(i,e),this.buildCellIndex(i)),this.resetTotalRowsHeight(),this}setColumnCount(i){return this.colCount=i,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(i){return i>=0&&i<this.cells.length}heightToRowIndex(i,e){if(this.defaultCellHeightMode){var n=i/this.defaultCellHeight;return e?n=Math.ceil(n):n=Math.floor(n),n}for(var c=this.rowCount,t=i,s,u,n=0;;)if(u=this.getRowHeight(n),t-=u,s=n>=0&&n<c,t>0&&s)n+=1;else{if(t===0)return n;if(e){var h=n;n+=1,s=n>=0&&n<c,s||(n=h)}return n}}widthToColIndex(i,e){var c=i/this.defaultCellWidth;return e?c=Math.ceil(c):c=Math.floor(c),c}colRowToCellIndex(i,e){return i>=this.colCount?null:e*this.colCount+i}rowIndexToHeight(i,e){if(this.defaultCellHeightMode)return(e-i+1)*this.defaultCellHeight;for(var c,t=0,s=i;s<=e;s++)c=this.getRowHeight(s),t+=c;return t}colIndexToWidth(i,e){return(e-i+1)*this.defaultCellWidth}getRowHeight(i){var e=this.colCount;if(e<=1)return this.getCellHeight(this.colRowToCellIndex(0,i));for(var c=0,t,s=0;s<e;s++)t=this.getCellHeight(this.colRowToCellIndex(s,i)),c<t&&(c=t);return c}getColWidth(i){return this.defaultCellWidth}getCellHeight(i){if(!this.isValidCellIdx(i))return 0;var e;if(this.defaultCellHeightMode)e=this.defaultCellHeight;else{var c=this.getCell(i,!1),t=c?c.deltaHeight:0;e=this.defaultCellHeight+t}return e}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(i){return i%this.colCount}cellIndxeToRowIndex(i){return Math.floor(i/this.colCount)}getCell(i,e){if(!this.isValidCellIdx(i))return null;if(e===void 0&&(e=!0),this.cells[i]===null&&e){var c=this.newCell(i);this.cells[i]=c}return this.cells[i]}newCell(i){var e=this.cellPool.pop();return e===null?e=new Wl(this):e.setParent(this),e.index=i,e}buildCellIndex(i){i===void 0&&(i=0);for(var e=this.cells,c,t=i,s=e.length;t<s;t++)c=e[t],c&&(c.index=t);return this}getParentContainer(){return this.parent}freeCell(i){return typeof i=="number"&&(i=this.cells[i]),i?(i.destroy(),this.cellPool.push(i),this):this}}var ia=function(x){return x.hasOwnProperty("geometryMask")?x.geometryMask:x.bitmapMask},z1=function(x){var i=this.table,e=this.topTableOY,c=this.bottomTableOY,t=x>this.topTableOY,s=x<this.bottomTableOY;if(this.clampTableOXY){var u=i.rowCount,n=i.heightToRowIndex(this.instHeight,!0);u<n?x=0:t?x=e:s&&(x=c)}return this._tableOY!==x&&(this._tableOY=x),t&&(this.execeedTopState||this.emit("execeedtop",this,x,e)),this.execeedTopState=t,s&&(this.execeedBottomState||this.emit("execeedbottom",this,x,c)),this.execeedBottomState=s,this},V1=function(x){var i=this.table,e=this.leftTableOX,c=this.rightTableOX,t=x>this.leftTableOX,s=x<this.rightTableOX;if(this.clampTableOXY){var u=i.colCount,n=i.widthToColIndex(this.instWidth,!0);u<n?x=0:t?x=e:s&&(x=c)}return this._tableOX!==x&&(this._tableOX=x),t&&(this.execeedLeftState||this.emit("execeedleft",this,x,e)),this.execeedLeftState=t,s&&(this.execeedRightState||this.emit("execeedright",this,x,c)),this.execeedRightState=s,this};const Y1=Phaser.Geom.Intersects.RectangleToRectangle,U1=Phaser.Geom.Rectangle.Overlaps;var bl=function(x,i,e){if(!!i){e===void 0&&(e=x.getAllChildren());for(var c=x.getBounds(),t=ia(i),s,u,n,h=0,o=e.length;h<o;h++)if(s=e[h],!s.hasOwnProperty("isRexContainerLite")&&s!==t&&!!X1(s))if(s.getBounds)switch(u=s.getBounds(u),n=W1(c,u),n){case 4:b1(x,s);break;case 0:Y1(c,u)||U1(c,u)?sa(x,s,i):H1(x,s);break;default:sa(x,s,i);break}else sa(x,s,i)}},X1=function(x){for(;;){var i=x.rexContainer;if(i)if(i.visible){var e=i.parent;if(e){x=e;continue}else return!0}else return!1;else return x.visible}},W1=function(x,i){var e=0,c=i.top,t=i.bottom,s=i.left,u=i.right;return e+=x.contains(s,c)?1:0,e+=x.contains(s,t)?1:0,e+=x.contains(u,c)?1:0,e+=x.contains(u,t)?1:0,e},b1=function(x,i,e){x.setChildMaskVisible(i,!0),i.clearMask&&i.clearMask()},sa=function(x,i,e){x.setChildMaskVisible(i,!0),i.setMask&&i.setMask(e)},H1=function(x,i,e){x.setChildMaskVisible(i,!1),i.clearMask&&i.clearMask()},$1=function(){if(this.cellsMask)if(this.maskCellsFlag){if(this.alpha===0||!this.visible)return this}else return this;else return this;for(var x=[],i=this.visibleCells.entries,e,c=0,t=i.length;c<t;c++)e=i[c].getContainer(),e&&(e.hasOwnProperty("isRexContainerLite")?e.getAllChildren(x):x.push(e));return bl(this,this.cellsMask,x),this.maskUpdateMode===0&&(this.maskCellsFlag=!1),this},Hl=function(x){if(this.emit("cellinvisible",x),this.cellContainersPool){var i=x.popContainer();i&&this.cellContainersPool.killAndHide(i)}x.destroyContainer()},$l=function(){var x=this.preVisibleCells,i=this.visibleCells;x.iterate(function(e){i.contains(e)||Hl.call(this,e)},this)},Kl=function(x){var i=null,e=x.getContainer();if(e?(i=e,x.popContainer()):this.cellContainersPool&&(i=this.cellContainersPool.getFirstDead(),i!==null&&i.setActive(!0).setVisible(!0)),this.emit("cellvisible",x,i,this),this.cellContainersPool){var e=x.getContainer();e?i===null?this.cellContainersPool.add(e):i!==e&&(this.cellContainersPool.add(e),this.cellContainersPool.killAndHide(i)):i!==null&&this.cellContainersPool.killAndHide(i)}},K1=function(){if(this.cellsCount!==0){var x=this.table,i=x.heightToRowIndex(-this.tableOY);i<=0&&(i=0);var e=i,c=x.widthToColIndex(-this.tableOX);c<=0&&(c=0);for(var t=c,s=x.colRowToCellIndex(t,e),u=this.bottomBound,n=this.rightBound,h=x.cellsCount-1,o=x.colCount-1,r=Z1.call(this,t),a=r,d=J1.call(this,e);d<u&&s<=h;){if(this.table.isValidCellIdx(s)){var l=x.getCell(s,!0);this.visibleCells.set(l),this.preVisibleCells.contains(l)||Kl.call(this,l),this.scrollMode===0?l.setXY(a,d):l.setXY(d,a)}a<n&&t<o?(a+=x.getColWidth(t),t+=1):(a=r,d+=x.getRowHeight(e),t=c,e+=1),s=x.colRowToCellIndex(t,e)}}},Z1=function(x){var i=this.scrollMode===0?this.topLeftX:this.topLeftY,e=this.tableOX+this.table.colIndexToWidth(0,x-1)+i;return e},J1=function(x){var i=this.scrollMode===0?this.topLeftY:this.topLeftX,e=this.tableOY+this.table.rowIndexToHeight(0,x-1)+i;return e},Q1=function(x){return x===void 0&&(x=!1),x&&(Zl.call(this),$l.call(this)),Zl.call(this),K1.call(this),$l.call(this),this.maskCellsFlag=!0,this},Zl=function(){var x=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=x,this.visibleCells.clear()},j1=function(x){var i=this.table.getCell(x,!1);return i&&this.visibleCells.contains(i)},Jl=function(x,i){i-=this.y+this.topLeftY,x-=this.x+this.topLeftX;var e=this.tableOY-(this.scrollMode===0?i:x),c=this.tableOX-(this.scrollMode===0?x:i),t=this.table,s=t.heightToRowIndex(-e),u=t.widthToColIndex(-c),n=t.colRowToCellIndex(u,s);return n===null||!this.isCellVisible(n)?null:n},k1=function(x,i){var e=Jl.call(this,x,i);if(e!==null)return this.getCellContainer(e)},q1=function(x,i){return this.visibleCells.each(x,i),this},_1=function(x,i){return this.visibleCells.iterate(x,i),this},tC=function(x,i){return this.table.cells.slice().forEach(x,i),this},eC=function(x,i){return this.table.cells.forEach(x,i),this},iC=function(x){var i=this.cellsCount;return i===x?this:(i>x?this.removeCells(x,i-x):this.insertNewCells(i,x-i),this)};const sC=Phaser.Math.Clamp;var nC=function(x,i){return typeof x=="object"&&(x=x.index),i===void 0&&(i=1),i<=0?this:(x=sC(x,0,this.cellsCount),this.table.insertNewCells(x,i),this)},rC=function(x,i){if(typeof x=="object"&&(x=x.index),i===void 0&&(i=1),x<0&&(i+=x,x=0),i<=0)return this;if(x>this.cellsCount)return this;for(var e,c=x,t=x+i;c<t;c++)e=this.getCell(c,!1),e&&(this.visibleCells.contains(e)&&(Hl.call(this,e),this.visibleCells.delete(e)),this.preVisibleCells.delete(e));return this.table.removeCells(x,i),this},aC=function(x){return this.table.colCount===x?this:(this.table.setColumnCount(x),this)},oC=function(x,i){return this.setCellsCount(x*i),this.table.setColumnCount(x),this},hC=function(x){var i=this.table.getCell(x,!1);return!i||!i.container?this:(Kl.call(this,i),this)},lC={setTableOY:z1,setTableOX:V1,maskCells:$1,updateTable:Q1,isCellVisible:j1,pointToCellIndex:Jl,pointToCellContainer:k1,eachVisibleCell:q1,iterateVisibleCell:_1,eachCell:tC,iterateCell:eC,setCellsCount:iC,insertNewCells:nC,removeCells:rC,setColumnCount:aC,setGridSize:oC,updateVisibleCell:hC};const uC=Phaser.GameObjects.Group;Phaser.GameObjects.Components;const Ql=Phaser.Structs.Set,wt=Phaser.Utils.Objects.GetValue;class jl extends $t{constructor(i,e,c,t,s,u){u===void 0&&(u={});super(i,e,c,t,s);this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new Ql,this.preVisibleCells=new Ql,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var n=wt(u,"reuseCellContainer",!1);n&&(this.cellContainersPool=new uC(i));var h=wt(u,"cellVisibleCallback",null);if(h!==null){var o=wt(u,"cellVisibleCallbackScope",void 0);this.on("cellvisible",h,o)}if(h=wt(u,"cellInvisibleCallback",null),h!==null){var o=wt(u,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",h,o)}if(this.setCellsMask(wt(u,"mask",!0)),this.setScrollMode(wt(u,"scrollMode",0)),this.setClampMode(wt(u,"clamplTableOXY",!0)),this.scrollMode===0){var r=wt(u,"cellWidth",void 0);if(this.expandCellSize=r===void 0,r===void 0){var a=wt(u,"columns",1);u.cellWidth=this.width/a}}else{var r=wt(u,"cellHeight",void 0),d=wt(u,"cellWidth",void 0);this.expandCellSize=r===void 0,u.cellWidth=r,u.cellHeight=d}this.table=new N1(this,u),this.updateTable()}destroy(i){!this.scene||(this.cellsMask&&(this.scene.game.events.off("poststep",this.maskCells,this),this.cellsMask.destroy(),this.cellsMask=void 0),this.table.destroy(i),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(i))}setScrollMode(i){return typeof i=="string"&&(i=fC[i.toLowerCase()]),this.scrollMode=i,this}setClampMode(i){return i===void 0&&(i=!0),this.clampTableOXY=i,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(i){this.setTableOY(i).updateTable()}set tableOX(i){this.setTableOX(i).updateTable()}setTableOXY(i,e){return this.setTableOY(e).setTableOX(i),this}addTableOY(i){return this.setTableOY(this.tableOY+i),this}addTableOX(i){return this.setTableOX(this.tableOX+i),this}addTableOXY(i,e){return this.addTableOY(e).addTableOX(i),this}setTableOYByPercentage(i){return this.setTableOY(-this.tableVisibleHeight*i),this}getTableOYPercentage(){var i=this.tableVisibleHeight;return i===0?0:this.tableOY/-i}set t(i){this.setTableOYByPercentage(i).updateTable()}get t(){return this.getTableOYPercentage()}getCell(i){return this.table.getCell(i,!0)}getCellContainer(i){var e=this.table.getCell(i,!1),c;return e&&(c=e.getContainer()),c}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(i,e){var c;return typeof i=="number"?c=this.table.getCell(i,!0):c=i,c.height=e,this}setCellWidth(i,e){var c;return typeof i=="number"?c=this.table.getCell(i,!0):c=i,c.width=e,this}setCellsMask(i){var e,c,t;if(i===!0?(e=!0,c=0,t=0):i===!1?e=!1:(e=wt(i,"mask",!0),c=wt(i,"padding",0),t=wt(i,"updateMode",0)),this.maskCellsFlag=!0,this.maskUpdateMode=t,e){var s=new Zs(this,0,c);this.cellsMask=s.createGeometryMask(),this.add(s),typeof t=="string"&&(t=dC[t]),this.scene.game.events.on("poststep",this.maskCells,this)}return this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var i,e=this.tableHeight,c=this.instHeight;return e>c?i=e-c:i=0,i}get tableVisibleWidth(){var i,e=this.tableWidth,c=this.instWidth;return e>c?i=e-c:i=0,i}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(i,e){return this.width===i&&this.height===e?this:(super.resize(i,e),this.cellsMask&&qe(ia(this.cellsMask),i,e),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this)}}Object.assign(jl.prototype,lC);const fC={v:0,vertical:0,h:1,horizontal:1},dC={update:0,everyTick:1};var vC=function(x){Object.defineProperty(x,"childOY",{configurable:!0,get:function(){return x.tableOY},set:function(i){x.tableOY=i}}),Object.defineProperty(x,"topChildOY",{get:function(){return x.topTableOY}}),Object.defineProperty(x,"bottomChildOY",{get:function(){return x.bottomTableOY}})},cC=function(x){x.on("cellvisible",function(i,e,c){var t=this.createCellContainerCallback,s=this.createCellContainerCallbackScope;i.item=this.items[i.index];var e;s?e=t.call(s,i,e,c):e=t(i,e,c),e&&(e.setOrigin&&e.setOrigin(0),e.isRexSizer&&e.layout()),i.item=void 0,i.setContainer(e)},this)},ge=function(x,i,e,c,t,s,u){var n;if(t===void 0?n=c:n=e.pointToCellIndex(c,t),n!=null){var h=e.getCellContainer(n);h&&x.emit(i,h,n,s,u)}},pC=function(x,i){x.on("pointerdown",function(e,c,t,s){ge(this.eventEmitter,"cell.down",x,e.x,e.y,e,s)},this).on("pointerup",function(e,c,t,s){ge(this.eventEmitter,"cell.up",x,e.x,e.y,e,s)},this)},gC=function(x,i){x.on("pointermove",kl,this).on("pointerover",kl,this).on("pointerout",xC,this)},kl=function(x,i,e,c){var t=this.childrenMap.child,s=t.pointToCellIndex(x.x,x.y);if(s!==t.input.lastOverCellIndex){var u=t.input.lastOverCellIndex;t.input.lastOverCellIndex=s,ge(this.eventEmitter,"cell.out",t,u,void 0,x,c),ge(this.eventEmitter,"cell.over",t,s,void 0,x,c)}},xC=function(x,i){var e=this.childrenMap.child,c=e.input.lastOverCellIndex;e.input.lastOverCellIndex=void 0,ge(this.eventEmitter,"cell.out",e,c,void 0,x,i)};const mC=Phaser.Utils.Objects.GetValue;var yC=function(x,i){var e=mC(i,"button",void 0);e!==!1&&(e===void 0&&(e={}),e.threshold=10,x._click=new Ci(x,e),x._click.on("click",function(c,t,s,u){ge(this.eventEmitter,"cell.click",t,s.x,s.y,s,u)},this))};const na=Phaser.Utils.Objects.GetValue;class sn extends Wn{constructor(i,e){var c=fh(i);c===i&&(i=void 0);super(c,e);this.gameObject=i,i&&i.setInteractive(na(e,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.setEnable(na(i,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(na(i,"bounds",void 0)):this.setDetectBounds(),this.tracerState=ra,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.events.once("shutdown",this.destroy,this)}shutdown(i){!this.scene||(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||this.dragCancel(),this._enable=i,this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setDetectBounds(i){return this.bounds=i,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(i,e){if(!!this.enable&&this.pointer===void 0){var c=this.bounds?this.bounds.contains(i.x,i.y):!0;!c||this.pointer!==i&&(this.pointer=i,this.lastPointer=i,this.movedState=!1,this.tracerState=ql,this.gameObject===void 0&&(this.isTouchingAnyObject=e.length>0),this.onDragStart())}}onPointerUp(i){if(!!this.enable){var e=this.bounds?this.bounds.contains(i.x,i.y):!0;!e||this.pointer===i&&(this.pointer=void 0,this.movedState=!1,this.tracerState=ra,this.onDragEnd())}}onPointerMove(i){if(!!this.enable&&i.isDown){var e=this.bounds?this.bounds.contains(i.x,i.y):!0,c=this.pointer===i;!c&&e||(c&&!e?this.onPointerUp(i):(this.movedState||(this.movedState=i.x!==i.downX||i.y!==i.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===ql&&this.onDragEnd(),this.pointer=void 0,this.tracerState=ra,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(i,e){}postUpdate(i,e){}startTicking(){super.startTicking(),this.scene.events.on("preupdate",this.preUpdate,this),this.scene.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.events.off("preupdate",this.preUpdate,this),this.scene.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(i){return this.recongizedState=i,this}get state(){return this.recongizedState.state}set state(i){this.recongizedState.state=i}cancel(){return this.state=TC,this}}const ra=0,ql=1,TC="IDLE",si=Phaser.Utils.Objects.GetValue,CC=Phaser.Math.Distance.Between;class nn extends sn{constructor(i,e){super(i,e);var c=this,t={states:{IDLE:{enter:function(){c.stop(),c.tapsCount=0,c.x=0,c.y=0,c.worldX=0,c.worldY=0},exit:function(){var s=c.lastPointer;c.x=s.x,c.y=s.y,c.worldX=s.worldX,c.worldY=s.worldY}},BEGIN:{enter:function(){c.start(),c.tapsCount=0,c.emit("tappingstart",c,c.gameObject,c.lastPointer)}},RECOGNIZED:{enter:function(){c.start(),c.emit("tap",c,c.gameObject,c.lastPointer),c.emit(`${c.tapsCount}tap`,c,c.gameObject,c.lastPointer)}}},init:function(){this.state=ni},eventEmitter:!1};this.setRecongizedStateObject(new Ae(t))}resetFromJSON(i){super.resetFromJSON(i),this.setHoldTime(si(i,"time",250)),this.setTapInterval(si(i,"tapInterval",200)),this.setDragThreshold(si(i,"threshold",9)),this.setTapOffset(si(i,"tapOffset",10));var e=si(i,"taps",void 0);return e!==void 0?this.setTaps(e):(this.setMaxTaps(si(i,"maxTaps",void 0)),this.setMinTaps(si(i,"minTaps",void 0))),this}onDragStart(){switch(this.state){case ni:this.state=Ai;break;case Ai:var i=this.lastPointer,e=CC(i.upX,i.upY,i.x,i.y);e>this.tapOffset&&(this.state=Oi,this.state=Ai);break;case Oi:this.state=Ai;break}}onDragEnd(){this.state===Ai&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=Oi))}onDrag(){this.state!==ni&&this.pointer.getDistance()>this.dragThreshold&&(this.state=ni)}preUpdate(i,e){if(!(!this.isRunning||!this.enable)&&this.state===Ai){var c=this.lastPointer;if(c.isDown){var t=i-c.downTime;t>this.holdTime&&(this.state=ni)}else{var s=i-c.upTime;s>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=Oi:this.state=ni)}}}postUpdate(i,e){!this.isRunning||!this.enable||this.state===Oi&&(this.state=ni)}get isTapped(){return this.state===Oi}setHoldTime(i){return this.holdTime=i,this}setTapInterval(i){return this.tapInterval=i,this}setDragThreshold(i){return this.dragThreshold=i,this}setTapOffset(i){return this.tapOffset=i,this}setMaxTaps(i){return this.maxTaps=i,this}setMinTaps(i){return this.minTaps=i,this}setTaps(i,e){return e===void 0&&(e=i),this.setMinTaps(i).setMaxTaps(e),this}}const ni="IDLE",Ai="BEGIN",Oi="RECOGNIZED",_l=Phaser.Utils.Objects.GetValue;class rn extends sn{constructor(i,e){super(i,e);var c=this,t={states:{IDLE:{enter:function(){c.x=0,c.y=0,c.worldX=0,c.worldY=0},exit:function(){var s=c.lastPointer;c.x=s.x,c.y=s.y,c.worldX=s.worldX,c.worldY=s.worldY}},BEGIN:{enter:function(){c.start()},exit:function(){c.stop()}},RECOGNIZED:{enter:function(){c.emit("pressstart",c,c.gameObject,c.lastPointer)},exit:function(){c.emit("pressend",c,c.gameObject,c.lastPointer)}}},init:function(){this.state=an},eventEmitter:!1};this.setRecongizedStateObject(new Ae(t))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(_l(i,"threshold",9)),this.setHoldTime(_l(i,"time",251)),this}onDragStart(){this.state=tu,this.holdTime===0&&(this.state=aa)}onDragEnd(){this.state=an}onDrag(){this.state!==an&&this.pointer.getDistance()>this.dragThreshold&&(this.state=an)}preUpdate(i,e){if(!(!this.isRunning||!this.enable)&&this.state===tu){var c=i-this.pointer.downTime;c>=this.holdTime&&(this.state=aa)}}get isPressed(){return this.state===aa}setHoldTime(i){return this.holdTime=i,this}setDragThreshold(i){return this.dragThreshold=i,this}}const an="IDLE",tu="BEGIN",aa="RECOGNIZED",SC=Phaser.Utils.Objects.GetValue;class eu extends sn{constructor(i,e){super(i,e);var c=this,t={states:{IDLE:{},BEGIN:{enter:function(){var s=c.pointer;c.startX=s.x,c.startY=s.y,c.startWorldX=s.worldX,c.startWorldY=s.worldY}},RECOGNIZED:{enter:function(){c.emit("panstart",c,c.gameObject,c.lastPointer)},exit:function(){var s=c.lastPointer;c.endX=s.x,c.endY=s.y,c.endWorldX=s.worldX,c.endWorldY=s.worldY,c.emit("panend",c,c.gameObject,c.lastPointer)}}},init:function(){this.state=iu},eventEmitter:!1};this.setRecongizedStateObject(new Ae(t))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(SC(i,"threshold",10)),this}onDragStart(){this.state=su,this.dragThreshold===0&&(this.state=on)}onDragEnd(){this.state=iu}onDrag(){switch(this.state){case su:this.pointer.getDistance()>=this.dragThreshold&&(this.state=on);break;case on:var i=this.pointer.position,e=this.pointer.prevPosition;this.dx=i.x-e.x,this.dy=i.y-e.y;var c=this.pointer;this.x=c.x,this.y=c.y,this.worldX=c.worldX,this.worldY=c.worldY,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanned(){return this.state===on}setDragThreshold(i){return this.dragThreshold=i,this}}const iu="IDLE",su="BEGIN",on="RECOGNIZED",EC=Phaser.Math.Distance.Between,PC=Phaser.Math.Angle.Between;var MC={getDt:function(){var x=this.scene.sys.game,i=x.loop.delta;return i},getVelocity:function(){var x=this.pointer.position,i=this.pointer.prevPosition,e=EC(i.x,i.y,x.x,x.y),c=e/(this.getDt()*.001);return c},getVelocityX:function(){var x=this.pointer.position,i=this.pointer.prevPosition,e=Math.abs(x.x-i.x),c=e/(this.getDt()*.001);return c},getVelocityY:function(){var x=this.pointer.position,i=this.pointer.prevPosition,e=Math.abs(x.y-i.y),c=e/(this.getDt()*.001);return c},getVelocityAngle:function(){var x=this.pointer.position,i=this.pointer.prevPosition,e=PC(i.x,i.y,x.x,x.y);return e}},RC={"up&down":0,"left&right":1,"4dir":2,"8dir":3},AC=function(x,i,e){switch(e===void 0?e={}:e===!0&&(e=OC),e.left=!1,e.right=!1,e.up=!1,e.down=!1,x=(x+360)%360,i){case 0:x<180?e.down=!0:e.up=!0;break;case 1:x>90&&x<=270?e.left=!0:e.right=!0;break;case 2:x>45&&x<=135?e.down=!0:x>135&&x<=225?e.left=!0:x>225&&x<=315?e.up=!0:e.right=!0;break;case 3:x>22.5&&x<=67.5?(e.down=!0,e.right=!0):x>67.5&&x<=112.5?e.down=!0:x>112.5&&x<=157.5?(e.down=!0,e.left=!0):x>157.5&&x<=202.5?e.left=!0:x>202.5&&x<=247.5?(e.left=!0,e.up=!0):x>247.5&&x<=292.5?e.up=!0:(x>292.5&&x<=337.5&&(e.up=!0),e.right=!0);break}return e},OC={};const oa=Phaser.Utils.Objects.GetValue,LC=Phaser.Math.RadToDeg;class es extends sn{constructor(i,e){super(i,e);var c=this,t={states:{IDLE:{enter:function(){c.x=0,c.y=0,c.worldX=0,c.worldY=0},exit:function(){var s=c.lastPointer;c.x=s.x,c.y=s.y,c.worldX=s.worldX,c.worldY=s.worldY}},BEGIN:{enter:function(){c.validDrag=!1}},RECOGNIZED:{enter:function(){c.start(),c.updateDirectionStates(),c.emit("swipe",c,c.gameObject,c.lastPointer)},exit:function(){c.stop(),c.clearDirectionStates()}}},init:function(){this.state=ha},eventEmitter:!1};this.setRecongizedStateObject(new Ae(t)),this.clearDirectionStates()}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(oa(i,"threshold",10)),this.setVelocityThreshold(oa(i,"velocityThreshold",1e3)),this.setDirectionMode(oa(i,"dir","8dir")),this}onDragStart(){this.state=nu}onDragEnd(){this.state=ha}onDrag(){this.state===nu&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=la))}postUpdate(i,e){!this.isRunning||!this.enable||this.state===la&&(this.state=ha)}get isSwiped(){return this.state===la}get dragVelocity(){var i;switch(this.dirMode){case 0:i=this.getVelocityY();break;case 1:i=this.getVelocityX();break;default:i=this.getVelocity();break}return i}setDragThreshold(i){return this.dragThreshold=i,this}setVelocityThreshold(i){return this.velocityThreshold=i,this}setDirectionMode(i){return typeof i=="string"&&(i=RC[i]),this.dirMode=i,this}updateDirectionStates(){var i=LC(this.getVelocityAngle());return AC(i,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(es.prototype,MC);const ha="IDLE",nu="BEGIN",la="RECOGNIZED",ua=Phaser.Utils.Objects.GetValue,FC=Phaser.Utils.Array.SpliceOne,IC=Phaser.Math.Distance.Between,BC=Phaser.Math.Angle.Between;class fa{constructor(i,e){var c=i.input.manager.pointersTotal-1;c<2&&i.input.addPointer(2-c),this.scene=i,this.setEventEmitter(ua(e,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.setEnable(ua(i,"enable",!0)),this.bounds=ua(i,"bounds",void 0),this.tracerState=hn,this.pointers.length=0,fi(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.events.once("shutdown",this.destroy,this)}shutdown(){!this.scene||(this.destroyEventEmitter(),this.pointers.length=0,fi(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||this.dragCancel(),this._enable=i,this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(i){if(!!this.enable&&this.pointers.length!==2){var e=this.bounds?this.bounds.contains(i.x,i.y):!0;if(!!e){var c=this.pointers.indexOf(i);if(c===-1)switch(this.movedState[i.id]=!1,this.pointers.push(i),this.tracerState){case hn:this.tracerState=ss,this.onDrag1Start();break;case ss:this.tracerState=xe,this.onDrag2Start();break}}}}onPointerUp(i){if(!!this.enable){var e=this.bounds?this.bounds.contains(i.x,i.y):!0;if(!!e){var c=this.pointers.indexOf(i);if(c!==-1)switch(delete this.movedState[i.id],FC(this.pointers,c),this.tracerState){case ss:this.tracerState=hn,this.onDrag1End();break;case xe:this.tracerState=ss,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(i){if(!!this.enable&&i.isDown){var e=this.bounds?this.bounds.contains(i.x,i.y):!0,c=this.pointers.indexOf(i)!==-1;if(!(!c&&e)){if(c&&!e)this.onPointerUp(i);else if(this.movedState[i.id]||(this.movedState[i.id]=i.x!==i.downX||i.y!==i.downY),this.movedState[i.id])switch(this.tracerState){case ss:this.onDrag1();break;case xe:this.onDrag2();break}}}}dragCancel(){return this.tracerState===xe&&this.onDrag2End(),this.pointers.length=0,fi(this.movedState),this.tracerState=hn,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==xe)return 0;var i=this.pointers[0],e=this.pointers[1];return IC(i.x,i.y,e.x,e.y)}get angleBetween(){if(this.tracerState!==xe)return 0;var i=this.pointers[0],e=this.pointers[1];return BC(i.x,i.y,e.x,e.y)}get drag1Vector(){var i=this.pointers[0];if(i&&this.movedState[i.id]){var e=i.position,c=i.prevPosition;is.x=e.x-c.x,is.y=e.y-c.y}else is.x=0,is.y=0;return is}get centerX(){if(this.tracerState!==xe)return 0;var i=this.pointers[0].position,e=this.pointers[1].position;return(i.x+e.x)/2}get centerY(){if(this.tracerState!==xe)return 0;var i=this.pointers[0].position,e=this.pointers[1].position;return(i.y+e.y)/2}get prevCenterX(){if(this.tracerState!==xe)return 0;var i=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(i.x+e.x)/2}get prevCenterY(){if(this.tracerState!==xe)return 0;var i=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(i.y+e.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(i){return this.recongizedState=i,this}get state(){return this.recongizedState.state}set state(i){this.recongizedState.state=i}cancel(){return this.state=DC,this}}Object.assign(fa.prototype,ci);var is={};const hn=0,ss=1,xe=2,DC="IDLE",GC=Phaser.Utils.Objects.GetValue;class ru extends fa{constructor(i,e){super(i,e);var c=this,t={states:{IDLE:{enter:function(){c.prevDistance=void 0,c.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){c.emit("pinchstart",c)},exit:function(){c.emit("pinchend",c)}}},init:function(){this.state=au},eventEmitter:!1};this.setRecongizedStateObject(new Ae(t))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(GC(i,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=ou,this.dragThreshold===0&&(this.state=ln)}onDrag2End(){this.state=au}onDrag2(){switch(this.state){case ou:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var i=this.distanceBetween;this.scaleFactor=i/this.prevDistance,this.prevDistance=i,this.state=ln}break;case ln:var i=this.distanceBetween;this.scaleFactor=i/this.prevDistance,this.emit("pinch",this),this.prevDistance=i;break}}get isPinched(){return this.state===ln}setDragThreshold(i){return this.dragThreshold=i,this}}const au="IDLE",ou="BEGIN",ln="RECOGNIZED",wC=Phaser.Math.RotateAround;var hu=function(x,i,e,c){return wC(x,i,e,c),x.rotation+=c,x},NC=function(x,i){if(!this.isRotation)return this;i===void 0&&(i=this.pointers[0].camera);var e=this.movementCenterX,c=this.movementCenterY;i.getWorldPoint(this.centerX,this.centerY,da);var t=da.x,s=da.y,u=this.rotation;if(Array.isArray(x))for(var n=x,h=0,o=n.length;h<o;h++)x=n[h],x.x+=e,x.y+=c,hu(x,t,s,u);else x.x+=e,x.y+=c,hu(x,t,s,u);return this},da={};const zC=Phaser.Utils.Objects.GetValue,va=Phaser.Math.Angle.WrapDegrees,lu=Phaser.Math.Angle.ShortestBetween,ca=Phaser.Math.RadToDeg,VC=Phaser.Math.DegToRad;class pa extends fa{constructor(i,e){super(i,e);var c=this,t={states:{IDLE:{enter:function(){c.prevAngle=void 0,c.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){c.emit("rotatestart",c)},exit:function(){c.emit("rotateend",c)}}},init:function(){this.state=uu},eventEmitter:!1};this.setRecongizedStateObject(new Ae(t))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(zC(i,"threshold",0)),this}onDrag2Start(){this.prevAngle=va(ca(this.angleBetween)),this.state=fu,this.dragThreshold===0&&(this.state=un)}onDrag2End(){this.state=uu}onDrag2(){switch(this.state){case fu:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var i=va(ca(this.angleBetween));this.angle=lu(this.prevAngle,i),this.prevAngle=i,this.state=un}break;case un:var i=va(ca(this.angleBetween));this.angle=lu(this.prevAngle,i),this.prevAngle=i,this.emit("rotate",this);break}}get isRotated(){return this.state===un}get rotation(){return VC(this.angle)}setDragThreshold(i){return this.dragThreshold=i,this}}var YC={spinObject:NC};Object.assign(pa.prototype,YC);const uu="IDLE",fu="BEGIN",un="RECOGNIZED",UC=Phaser.Utils.Objects.GetValue;var XC=function(x,i){var e=UC(i,"tap",void 0);e!==!1&&(x._tap=new nn(x,e),x._tap.on("tap",function(c,t,s){var u=`cell.${c.tapsCount}tap`;ge(this.eventEmitter,u,c.gameObject,c.x,c.y,s)},this))};const WC=Phaser.Utils.Objects.GetValue;var bC=function(x,i){var e=WC(i,"press",void 0);e!==!1&&(x._press=new rn(x,e),x._press.on("pressstart",function(c,t,s){ge(this.eventEmitter,"cell.pressstart",x,c.x,c.y,s)},this).on("pressend",function(c,t,s){ge(this.eventEmitter,"cell.pressend",x,c.x,c.y,s)},this))};const HC=Phaser.Utils.Objects.GetValue;var $C=function(x,i){var e=HC(i,"swipe",void 0);e!==!1&&(e===void 0&&(e={}),e.dir="4dir",x._swipe=new es(x,e),x._swipe.on("swipe",function(c,t,s){var u=c.left?"left":c.right?"right":c.up?"up":"down";ge(this.eventEmitter,`cell.swipe${u}`,x,c.x,c.y,s)},this))},KC=function(x,i){x.setInteractive(),pC.call(this,x,i),gC.call(this,x,i),yC.call(this,x,i),XC.call(this,x,i),bC.call(this,x,i),$C.call(this,x,i)},ZC=function(x){x===void 0?this.items.length=0:this.items=x;var i=this.childrenMap.child;return i.setCellsCount(this.items.length),i.updateTable(!0),this.resizeController(),this};const me=Phaser.Utils.Objects.GetValue;class ga extends tn{constructor(i,e){e===void 0&&(e={});var c=qs(e),t=me(e,"table",void 0);t===void 0&&(t={}),t.scrollMode=c,t.clamplTableOXY=me(e,"clamplChildOY",!1);var s=me(t,"width",void 0),u=me(t,"height",void 0),n=new jl(i,0,0,s,u,t);i.add.existing(n);var h,o;c===0?(h=s===void 0?1:0,o=u===void 0):(h=u===void 0?1:0,o=s===void 0),vC(n),e.type="rexGridTable",e.child={gameObject:n,proportion:h,expand:o};var r=me(e,"space",void 0);r&&(r.child=r.table);super(i,e);this.addChildrenMap("table",n),this.eventEmitter=me(e,"eventEmitter",this);var a=me(e,"createCellContainerCallback",De),d=me(e,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(a,d),cC.call(this,n),this.resizeControllerFlag=!1;var l=c===0?"cellheightchange":"cellwidthchange";n.on(l,function(){this.resizeControllerFlag=!0},this),me(t,"interactive",!0)&&KC.call(this,n,t),this.setItems(me(e,"items",[])),i.game.events.on("poststep",this.onPostStep,this)}destroy(i){!this.scene||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(i))}setCreateCellContainerCallback(i,e){return this.createCellContainerCallback=i,this.createCellContainerCallbackScope=e,this}refresh(){return this.setItems(this.items),this}getCell(i){var e=this.childrenMap.child;return e.getCell(i)}getCellContainer(i){var e=this.childrenMap.child;return e.getCellContainer(i)}updateVisibleCell(i){var e=this.childrenMap.child;return e.updateVisibleCell(i)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}}var JC={setItems:ZC};Object.assign(ga.prototype,JC);et.register("gridTable",function(x){var i=new ga(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.GridTable",ga);var QC=function(x,i){this.collapseSubMenu();var e;this.root.toggleOrientation?e=this.orientation===0?1:0:e=this.orientation;var c=new this.constructor(this.scene,{items:i,orientation:e,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:x});return this.pin(c),this.childrenMap.subMenu=c,this.root.emit("expand",c,x,this),this},xa=function(x,i){return x.sameOrientation?x.orientation=i.orientation:x.orientation=i.orientation===0?1:0,x},jC=function(){return this.root.emit("collapse",this,this.parentButton,this.root),this.scaleDownDestroy(xa(this.root.easeOut,this)),this.collapseSubMenu(),this},kC=function(){if(this.childrenMap.subMenu===void 0)return this;var x=this.childrenMap.subMenu;return this.childrenMap.subMenu=void 0,this.remove(x),x.collapse(),this},qC={expandSubMenu:QC,collapse:jC,collapseSubMenu:kC},_C=function(x,i,e,c){var t;return e&&(i.scene=x,c?t=e.call(c,i):t=e(i),i.scene=void 0),t},tS=function(x,i,e,c){var t,s=[],u;if(i&&e)for(var n=0,h=i.length;n<h;n++)t=i[n],t.scene=x,c?u=e.call(c,t,n,i):u=e(t,n,i),t.scene=void 0,s.push(u);return s},eS=function(x){x.on(x.root.expandEventName,function(i,e){if(!this._isPassedEvent){var c=this.items[e].children;c&&this.expandSubMenu(i,c)}},x).on("button.click",function(i,e,c,t){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",i,e,c,t),this.root._isPassedEvent=!1)},x).on("button.over",function(i,e,c,t){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",i,e,c,t),this.root._isPassedEvent=!1)},x).on("button.out",function(i,e,c,t){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",i,e,c,t),this.root._isPassedEvent=!1)},x)};const ye=Phaser.Utils.Objects.GetValue;class ma extends ie{constructor(i,e){e===void 0&&(e={}),e.hasOwnProperty("orientation")||(e.orientation=1);var c=e._rootMenu,t=e._parentMenu,s=e._parentButton,u=ye(e,"items",void 0),n=ye(e,"createBackgroundCallback",void 0),h=ye(e,"createBackgroundCallbackScope",void 0);e.background=_C(i,u,n,h);var o=ye(e,"createButtonCallback",void 0),r=ye(e,"createButtonCallbackScope",void 0);e.buttons=tS(i,u,o,r);super(i,e);this.type="rexMenu",this.items=u,this.root=c===void 0?this:c,this.parentMenu=t,this.parentButton=s;var a=this.root===this;if(a){var d=e.bounds;d===void 0&&(d=Dh(i)),this.bounds=d,this.subMenuSide=[this.y<d.centerY?Ta:dn,this.x<d.centerX?ya:fn];var l=ye(e,"subMenuSide",void 0);l!==void 0&&(typeof l=="string"&&(l=iS[l]),this.subMenuSide[this.orientation]=l),this.toggleOrientation=ye(e,"toggleOrientation",!1),this.expandEventName=ye(e,"expandEvent","button.click"),this.easeIn=du(this,ye(e,"easeIn",0)),this.easeOut=du(this,ye(e,"easeOut",0)),this.createBackgroundCallback=n,this.createBackgroundCallbackScope=h,this.createButtonCallback=o,this.createButtonCallbackScope=r,this._isPassedEvent=!1}var f=0,v=0;if(!this.root.easeIn.sameOrientation){var g=xa(this.root.easeIn,this).orientation,p=t?t.orientation:this.orientation,l=this.root.subMenuSide[p];g===0&&l===fn&&(f=1),g===1&&l===dn&&(v=1)}if(this.setOrigin(f,v).layout(),!a){var l=this.root.subMenuSide[t.orientation];switch(l){case fn:this.alignTop(s.top).alignRight(s.left);break;case ya:this.alignTop(s.top).alignLeft(s.right);break;case dn:this.alignLeft(s.left).alignBottom(s.top);break;case Ta:this.alignLeft(s.left).alignTop(s.bottom);break}}this.pushIntoBounds(this.root.bounds),eS(this),this.popUp(xa(this.root.easeIn,this)),this.once("popup.complete",function(){this!==this.root&&this.root.emit("popup.complete",this)},this)}isInTouching(i){return super.isInTouching(i)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(i):!1}}var du=function(x,i){return typeof i=="number"&&(i={duration:i}),i.hasOwnProperty("orientation")&&i.orientation!==void 0?i.sameOrientation=wr(i.orientation)===x.orientation:i.sameOrientation=!0,i};const fn=2,ya=0,dn=3,Ta=1,iS={up:dn,down:Ta,left:fn,right:ya};Object.assign(ma.prototype,qC);et.register("menu",function(x){var i=new ma(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Menu",ma);const sS=Phaser.GameObjects.Text;var Ca=function(x){return x instanceof sS};const nS=Phaser.GameObjects.BitmapText;var vu=function(x){return x instanceof nS};const Jt=0,se=1,ne=2;var ns=function(x){var i;return vu(x)?i=ne:Ca(x)?i=Jt:i=se,i},Sa=function(x,i,e){var c=ns(x);switch(c){case Jt:e=x.getWrappedText(i);break;case se:e=x.getPenManager(i,e);break;case ne:e=x.setText(i).getTextBounds().wrappedText.split(`
`);break}return e},rS=function(x,i){x===void 0&&(x=this.startLineIndex),i===void 0&&(i=x+this.pageLinesCount);var e;switch(this.textObjectType){case Jt:case ne:e=this.lines.slice(x,i).join(`
`);break;case se:var c=this.lines.getLineStartIndex(x),t=this.lines.getLineEndIndex(i-1);e=this.lines.getSliceTagText(c,t,!0);break}return e},Ea=function(x){return Array.isArray(x)?x=x.join(`
`):typeof x=="number"&&(x=x.toString()),x},aS={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(x){var i=this.totalLinesCount;this.sections.push(Ea(x));var x=this.sections.join(`
`);this.lines=Sa(this.parent,x,this.lines);for(var e=this.totalLinesCount-i,c=Math.ceil(e/this.pageLinesCount),t=0;t<c;t++)this.pageStartIndexes.push(i+t*this.pageLinesCount);return this},setText(x,i){i===void 0&&(i=!0),i&&this.resetPageIdx(),this.clearText();for(var e=Ea(x).split(this.pageBreak),c=0,t=e.length;c<t;c++)this.appendPage(e[c]);return this},appendText(x){var i=this.content+Ea(x);return this.setText(i,!1),this}};const oS=Phaser.Math.Clamp;var hS={getPage(x){return x===void 0&&(x=this.pageIndex),this.setPageIndex(x).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(x){return x=oS(x,0,this.pageCount-1),this.pageIndex=x,this.startLineIndex=this.pageStartIndexes[x],this.endLineIndex=this.pageStartIndexes[x+1],this}},Pa=function(x,i){var e=ns(x);switch(e){case Jt:var c=x.style,t=c.wordWrapWidth,s=c.wordWrapCallback;c.wordWrapWidth=0,c.wordWrapCallback=void 0,x.setText(i),c.wordWrapWidth=t,c.wordWrapCallback=s;break;case se:var c=x.style,u=c.wrapMode;c.wrapMode=0,x.setText(i),c.wrapMode=u;break;case ne:var n=x._maxWidth;x._maxWidth=0,x.setText(i),x._maxWidth=n;break}},lS={showPage(x){return this.displayText(this.getPage(x)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(x){Pa(this.parent,x)}},cu={getLines:rS};Object.assign(cu,aS,hS,lS);const rs=Phaser.Utils.Objects.GetValue,uS=Phaser.Math.Clamp;class pu extends Zt{constructor(i,e){super(i,{eventEmitter:!1});this.textObjectType=ns(this.parent),this.pageStartIndexes=[],this.lines=Sa(this.parent,""),this.sections=[],this.resetFromJSON(e)}resetFromJSON(i){return this.setMaxLines(rs(i,"maxLines",void 0)),this.setPageBreak(rs(i,"pageBreak",`\f
`)),this.setText(rs(i,"text","")),this.setStartLineIndex(rs(i,"start",0)),this.setPageIndex(rs(i,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(i){if(!this.isShutdown){switch(this.textObjectType){case Jt:this.lines.length=0;break;case se:this.lines.destroy();break;case ne:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(i)}}setMaxLines(i){return this.maxLines=i,this}setPageBreak(i){return this.pageBreak=i,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(i){i=uS(i,0,this.totalLinesCount-1),this._startLineIndex=i}setStartLineIndex(i){return this.startLineIndex=i,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var i;switch(this.textObjectType){case Jt:case se:var e=this.parent.style.maxLines;e>0?i=e:i=this.totalLinesCount;break;case ne:i=this.totalLinesCount;break}return i}get content(){return this.sections.join(this.pageBreak)}}Object.assign(pu.prototype,cu);var fS=function(x,i){var e=ns(x);switch(e){case Jt:x.style.syncFont(x.canvas,x.context),i=x.runWordWrap(i);break;case se:i=x.getText(i,void 0,void 0,!0);break;case ne:i=x.setText(i).getTextBounds().wrappedText;break}return i};const Li=Phaser.Utils.Objects.GetFastValue,Ma=Phaser.Utils.Objects.GetValue;class dS extends Zt{constructor(i,e){super(i,e);this.timer=null,this.resetFromJSON(e)}resetFromJSON(i){this.setTextWrapEnable(Ma(i,"wrap",!1)),this.setTypeMode(Ma(i,"typeMode",0)),this.setTypeSpeed(Ma(i,"speed",333)),this.setTextCallback=Li(i,"setTextCallback",null),this.setTextCallbackScope=Li(i,"setTextCallbackScope",null),this.setTypingContent(Li(i,"text","")),this.typingIdx=Li(i,"typingIdx",0),this.insertIdx=Li(i,"insertIdx",null);var e=Li(i,"elapsed",null);return e!==null&&this.start(void 0,void 0,this.typingIdx,e),this}shutdown(i){this.isShutdown||(this.freeTimer(),super.shutdown(i))}setTypeMode(i){return typeof i=="string"&&(i=vS[i]),this.typeMode=i,this}setTypeSpeed(i){return this.speed=i,this}setTextWrapEnable(i){return i===void 0&&(i=!0),this.textWrapEnable=i,this}set text(i){var e=gu(i);this.textWrapEnable&&(e=fS(this.parent,e)),this._text=e}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(i,e,c,t){return i!==void 0&&this.setTypingContent(i),e!==void 0&&(this.speed=e),c===void 0&&(c=0),this.typingIdx=c+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(t)),this}appendText(i){var e=this.text.concat(gu(i));return this.isTyping?this.setTypingContent(e):this.start(e,void 0,this.textLen),this}stop(i){var e=this.getTimer();return e&&this.freeTimer(),i&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var i=this.getTimer();return i&&(i.paused=!0),this}resume(){var i=this.getTimer();return i&&(i.paused=!1),this}setTypingContent(i){return this.text=i,this.textLen=this.getTextLength(this.text),this}onTyping(){var i=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(i),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(i,e,c,t){var s;if(t===0){var u=0,n=e;this.insertIdx=n,s=this.getSubString(i,u,n)}else if(t===1){var n=c,u=n-e;this.insertIdx=0,s=this.getSubString(i,u,n)}else if(t===2){var h=c/2,u=Math.floor(h-e/2),n=u+e;this.insertIdx=e%2?e:0,s=this.getSubString(i,u,n)}else if(t===3){var o=Math.floor(e/2),r;if(o>0){var n=c,u=n-o;r=this.getSubString(i,u,n)}else r="";var a=e-o,d;if(a>0){var u=0,n=u+a;this.insertIdx=n,d=this.getSubString(i,u,n)}else d="",this.insertIdx=0;s=d+r}return s}startTimer(i){this.timer&&this.freeTimer();var e;return i===void 0?e=0:e=i,this.timer=this.scene.time.addEvent({delay:0,startAt:e,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(i){this.setTextCallback&&(this.setTextCallbackScope?i=this.setTextCallback.call(this.setTextCallbackScope,i,this.isLastChar,this.insertIdx):i=this.setTextCallback(i,this.isLastChar,this.insertIdx)),this.textWrapEnable?Pa(this.parent,i):this.parent.setText(i)}getTextLength(i){var e=this.parent,c;return e.getPlainText?c=e.getPlainText(i).length:c=i.length,c}getSubString(i,e,c){var t=this.parent,s;return t.getSubString?s=t.getSubString(i,e,c):s=i.slice(e,c),s}}var gu=function(x){return Array.isArray(x)?x=x.join(`
`):typeof x=="number"&&(x=x.toString()),x};const vS={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},xu=Phaser.Utils.Objects.GetValue;class mu extends Qs{constructor(i,e){e===void 0&&(e={text:cS(i)});super(i,e);this.type="rexTextBox";var c=this.childrenMap.text;this.page=new pu(c,xu(e,"page",void 0)),this.typing=new dS(c,xu(e,"type",void 0)),this.typing.on("complete",this.onPageEnd,this).on("type",this.onType,this),this.textWidth=c.width,this.textHeight=c.height}start(i,e){return this.page.setText(i),e!==void 0&&this.setTypeSpeed(e),this.typeNextPage(),this}typeNextPage(){if(this.isLastPage)this.emit("complete");else{var i=this.page.getNextPage();this.typing.start(i)}return this}pause(){return this.typing.pause(),this}resume(){return this.typing.resume(),this}stop(i){return this.typing.stop(i),this}setTypeSpeed(i){return this.typing.setTypeSpeed(i),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}onType(){var i=this.childrenMap.text;(this.textWidth!==i.width||this.textHeight!==i.height)&&(this.textWidth=i.width,this.textHeight=i.height,this.getTopmostSizer().layout()),this.emit("type")}onPageEnd(){this.emit("pageend"),this.isLastPage&&this.emit("complete")}}var cS=function(x){return x.add.text(0,0,"",{wordWrap:{width:200},maxLines:5})};et.register("textBox",function(x){var i=new mu(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.TextBox",mu);const Qt=Phaser.Utils.Objects.GetValue;class yu extends Dt{constructor(i,e){super(i,e);this.type="rexNumberBar";var c=Qt(e,"background",void 0),t=Qt(e,"icon",void 0),s=Qt(e,"iconMask",void 0),u=Qt(e,"slider",void 0),n=Qt(e,"text",void 0),h=Qt(e,"space.icon",0),o=Qt(e,"space.slider",0);if(c&&this.addBackground(c),t){var r;this.orientation===0?(u||n)&&(r={right:h}):(u||n)&&(r={bottom:h}),this.add(t,0,"center",r),s&&(s=_i.call(this,t,t,1))}var a;if(u){u.orientation=this.orientation,u.eventEmitter=this,u.value=null,u.hasOwnProperty("input")||(u.input=-1),a=new ts(i,u);var r;this.orientation===0?n&&(r={right:o}):n&&(r={bottom:o});var d;if(this.orientation===0){var l=Qt(u,"width",void 0);d=l===void 0?1:0}else{var f=Qt(u,"height",void 0);d=f===void 0?1:0}this.add(a,d,"center",r)}n&&this.add(n),this.addChildrenMap("background",c),this.addChildrenMap("icon",t),this.addChildrenMap("iconMask",s),this.addChildrenMap("slider",a),this.addChildrenMap("text",n);var v=Qt(e,"valuechangeCallback",null);if(v!==null){var g=Qt(e,"valuechangeCallbackScope",void 0);this.on("valuechange",v,g)}this.setEnable(Qt(e,"enable",void 0)),this.setValue(Qt(e,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(i){this.childrenMap.slider&&this.childrenMap.slider.setEnable(i)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(i){!this.childrenMap.slider||(this.childrenMap.slider.value=i)}setValue(i,e,c){return this.childrenMap.slider&&this.childrenMap.slider.setValue(i,e,c),this}addValue(i,e,c){return this.childrenMap.slider&&this.childrenMap.slider.addValue(i,e,c),this}getValue(i,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(i,e):0}easeValueTo(i,e,c){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(i,e,c),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(i){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(i),this}setEaseValueFunction(i){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(i),this}get text(){var i=this.childrenMap.text;if(i===void 0)return"";var e;return i.text?e=i.text:e=i.getData("text"),e}set text(i){var e=this.childrenMap.text;e!==void 0&&(e.setText?e.setText(i):e.setData("text",i))}setText(i){return this.text=i,this}}et.register("numberBar",function(x){var i=new yu(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.NumberBar",yu);const Ra=Phaser.Utils.Objects.GetValue,Tu={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class Cu extends ti{constructor(i,e){super(i,e);this.type="rexBadge";var c=Ra(e,"background",void 0);c&&this.addBackground(c),this.addChildrenMap("background",c);var t=Ra(e,"main",void 0);t&&this.add(t,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",t);for(var s in Tu){var u=Ra(e,s,void 0);u&&(this.add(u,{key:s,align:Tu[s],expand:!1}),this.addChildrenMap(s,u))}}}et.register("badgeLabel",function(x){var i=new Cu(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.BadgeLabel",Cu);var pS=function(x,i,e,c,t,s,u){return x.setVisible(!1),this.add(x,i,e,c,t,s,u),this},gS=function(x){return x===void 0?null:this.sizerChildren.hasOwnProperty(x)?this.sizerChildren[x]:null};const Su=$t.prototype.setChildVisible;var xS=function(x){this._previousKey=this._currentKey;var i=this.previousPage;i&&(this.swapMode===0?(Su.call(this,i,!1),this.emit("pageinvisible",i,this._previousKey,this)):i.destroy()),x&&!this.sizerChildren.hasOwnProperty(x)&&this.emit("createpage",x,this),this._currentKey=x;var e=this.currentPage;return e&&(Su.call(this,e,!0),this.emit("pagevisible",e,this._currentKey,this)),this},mS={addPage:pS,getPage:gS,swapPage:xS};const yS=Phaser.Utils.Objects.GetValue;class Aa extends ti{constructor(i,e){super(i,e);this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(yS(e,"swapMode",0))}setSwapMode(i){return typeof i=="string"&&(i=TS[i]),this.swapMode=i,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(i){this.swapPage(i)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(Aa.prototype,mS);const TS={invisible:0,destroy:1};et.register("pages",function(x){var i=new Aa(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Pages",Aa);var CS=function(x){return x!==void 0&&(this.text=x),this.lines=Sa(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},Eu=function(x){return(x-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},Pu=function(x){return x*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},SS=function(x){var i=x+this.visibleLinesCount,e;switch(this.textObjectType){case Jt:e=this.lines.slice(x,i).join(`
`);break;case se:var c=this.lines.getLineStartIndex(x),t=this.lines.getLineEndIndex(i-1);e=this.lines.getSliceTagText(c,t,!0);break;case ne:e=this.lines.slice(x,i).join(`
`);break}return e},Mu=function(){var x=this.textObject.rexSizer;this.textObject.y+=x.offsetY-x.preOffsetY,x.preOffsetY=x.offsetY,this.resetChildPositionState(this.textObject)},ES=function(){var x=Math.max(Math.floor(Eu.call(this,-this.textOY)),0),i=Pu.call(this,x)+this.textOY,e=SS.call(this,x);return Pa(this.textObject,e),this.textObject.rexSizer.offsetY=i,Mu.call(this),this},PS=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,Zi.call(this),this},MS=function(x,i,e){if(e+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===i&&this.textObjectHeight===e)){switch(this.textObjectWidth=i,this.textObjectHeight=e,this.textObjectType){case Jt:case se:x.setFixedSize(i,e);var c=x.style,t=Math.max(i,0);this.textObjectType===Jt?c.wordWrapWidth=t:(c.wrapMode===0&&(c.wrapMode=1),c.wrapWidth=t);break;case ne:x.setMaxWidth(i);break}this.setText()}},RS=function(){var x,i,e,c=this.left,t=this.top,s,u,n,h;x=this.textObject,x.rexSizer.hidden||(i=x.rexSizer,e=i.padding,s=c+e.left,u=t+e.top,n=this.width-e.left-e.right,h=this.height-e.top-e.bottom,MS.call(this,x,n,h),ws(x,s,u,n,h,i.align),i.preOffsetY=0,Mu.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))},AS={setText:CS,updateTextObject:ES,preLayout:PS,layoutChildren:RS};const Ru=Phaser.Utils.Objects.IsPlainObject,ae=Phaser.Utils.Objects.GetValue,OS=Phaser.Display.Align.TOP_LEFT;class Au extends _e{constructor(i,e,c,t,s,u){Ru(e)?(u=e,e=ae(u,"x",0),c=ae(u,"y",0),t=ae(u,"width",void 0),s=ae(u,"height",void 0)):Ru(t)&&(u=t,t=ae(u,"width",void 0),s=ae(u,"height",void 0));super(i,e,c,t,s,u);this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this.lines=void 0,this.text=ae(u,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(ae(u,"clamplTextOY",!0));var n=ae(u,"background",void 0),h=ae(u,"text",void 0);h===void 0&&(h=LS(i));var o=ae(u,"textMask",!0);n&&this.addBackground(n),this.add(h),this.sizerChildren=[h];var r=this.getSizerConfig(h);r.align=OS,r.padding=mi(0),r.expand=!0,this.textObject=h,this.textObjectType=ns(h),r.preOffsetY=0,r.offsetY=0,o&&(this.textMask=_i.call(this,this.textObject,this)),this.addChildrenMap("background",n),this.addChildrenMap("text",h)}destroy(i){if(!!this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case Jt:this.lines.length=0;break;case se:this.lines.destroy();break;case ne:this.lines.length=0;break}this.lines=void 0}super.destroy(i)}}setClampMode(i){return i===void 0&&(i=!0),this.clampTextOY=i,this}get textLineHeight(){if(this._textLineHeight===void 0){var i;switch(this.textObjectType){case Jt:case se:var e=this.textObject.style;i=e.metrics.fontSize+e.strokeThickness;break;case ne:var c=this.textObject.fontSize/this.textObject.fontData.size;i=this.textObject.fontData.lineHeight*c;break}this._textLineHeight=i}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var i;switch(this.textObjectType){case Jt:case se:i=this.textObject.lineSpacing;break;case ne:i=0;break}this._textLineSpacing=i}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(Eu.call(this,this.textObjectHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=Pu.call(this,this.linesCount)),this._textHeight}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var i,e=this.textHeight,c=this.textObjectHeight-this.textLineHeight-this.textLineSpacing;e>c?i=e-c:i=0,this._textVisibleHeight=i}return this._textVisibleHeight}textOYExceedTop(i){return i===void 0&&(i=this.textOY),i>this.topTextOY}textOYExeceedBottom(i){return i===void 0&&(i=this.textOY),i<this.bottomTextOY}get textOY(){return this._textOY}set textOY(i){var e=this.topTextOY,c=this.bottomTextOY,t=this.textOYExceedTop(i),s=this.textOYExeceedBottom(i);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?i=0:t?i=e:s&&(i=c)),this._textOY!==i&&(this._textOY=i,this.updateTextObject()),t&&(this.execeedTopState||this.emit("execeedtop",this,i,e)),this.execeedTopState=t,s&&(this.execeedBottomState||this.emit("execeedbottom",this,i,c)),this.execeedBottomState=s}setTextOY(i){return this.textOY=i,this}set t(i){this.textOY=-this.textVisibleHeight*i}get t(){var i=this.textVisibleHeight;return i===0?0:this.textOY/-i}setTextOYByPercentage(i){return this.t=i,this}}var LS=function(x){return x.add.text(0,0,"")};Object.assign(Au.prototype,AS);var FS=function(x){Object.defineProperty(x,"childOY",{configurable:!0,get:function(){return x.textOY},set:function(i){x.textOY=i}}),Object.defineProperty(x,"topChildOY",{get:function(){return x.topTextOY}}),Object.defineProperty(x,"bottomChildOY",{get:function(){return x.bottomTextOY}})},IS=function(x){var i=this.childrenMap.child;return i.setText(x),this.resizeController(),this},BS=function(x){return this.setText(this.text+x),this};const ri=Phaser.Utils.Objects.GetValue;class Oa extends tn{constructor(i,e){e===void 0&&(e={});var c=ri(e,"text",void 0),t=ri(e,"textWidth",void 0),s=ri(e,"textHeight",void 0),u=ri(e,"textMask",!0),n=ri(e,"content",""),h=new Au(i,{width:t,height:s,text:c,textMask:u,content:n,clamplTextOY:ri(e,"clamplChildOY",!1)});i.add.existing(h);var o=t===void 0?1:0,r=s===void 0;FS(h),e.scrollMode=0,e.type="rexTextArea",e.child={gameObject:h,proportion:o,expand:r};var a=ri(e,"space",void 0);a&&(a.child=a.text);super(i,e);this.addChildrenMap("text",c)}get text(){return this.childrenMap.child.text}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}var DS={setText:IS,appendText:BS};Object.assign(Oa.prototype,DS);et.register("textArea",function(x){var i=new Oa(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.TextArea",Oa);var GS=function(){if(this.rexSizer.hidden)return 0;var x,i=this.child,e=i.rexSizer;return e.hidden?x=0:this.scrollMode===0?x=this.getChildWidth(i):x=0,x},wS=function(){if(this.rexSizer.hidden)return 0;var x,i=this.child,e=i.rexSizer;return e.hidden||this.scrollMode===0?x=0:x=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.hasOwnProperty("minHeight")?i.minHeight:pt(i),x},NS=function(x){return x===void 0&&(x=[]),this.child&&this.child.isRexSizer&&x.push(this.child),x},zS=function(){var x=this.left,i=this.top;this.scrollMode===0?i+=this.childOY:x+=this.childOY,this.child.setPosition(x,i),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},VS=function(){var x=this.child,i,e;x.rexSizer.hidden||(this.scrollMode===0?i=this.width:e=this.height,x.isRexSizer?x.runLayout(this,i,e):qe(x,i,e),this.layoutChildrenMask(),this.resetChildPosition(),this.maskChildren())};const YS={update:0,everyTick:1};var US={setMaskUpdateMode(x){return typeof x=="string"&&(x=YS[x]),this.maskUpdateMode=x,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(x){var i=_i.call(this,null,this,0,x);return this.childrenMask=i.createGeometryMask(),this},setMaskChildrenFlag(x){return x===void 0&&(x=!0),this.maskChildrenFlag=x,this},maskChildren(){if(this.childrenMask)if(this.maskChildrenFlag){if(this.alpha===0||!this.visible)return this}else return this;else return this;return bl(this,this.childrenMask,this.getAllChildren()),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this},layoutChildrenMask(){if(this.childrenMask===void 0)return this;var x=ia(this.childrenMask);return x.setPosition().resize(),this.resetChildPositionState(x),this}},Ou={getChildrenWidth:GS,getChildrenHeight:wS,getChildrenSizers:NS,resetChildPosition:zS,layoutChildren:VS};Object.assign(Ou,US);const Lu=Phaser.Utils.Objects.IsPlainObject,Wt=Phaser.Utils.Objects.GetValue,XS=Phaser.Display.Align.TOP_LEFT;class Fu extends _e{constructor(i,e,c,t,s,u){Lu(e)?(u=e,e=Wt(u,"x",0),c=Wt(u,"y",0),t=Wt(u,"width",void 0),s=Wt(u,"height",void 0)):Lu(t)&&(u=t,t=Wt(u,"width",void 0),s=Wt(u,"height",void 0));super(i,e,c,t,s,u);this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(Wt(u,"scrollMode",!0)),this.setClampMode(Wt(u,"clamplChildOY",!0));var n=Wt(u,"child",void 0),h=Wt(u,"expand",!0),o=Wt(u,"mask",void 0);n.setOrigin&&n.setOrigin(0),this.add(n),this.sizerChildren=[n];var r=this.getSizerConfig(n);r.align=XS,r.expand=h,this.child=n;var a,d,l;o===!0?(a=!0,d=0,l=0):o===!1?a=!1:(a=Wt(o,"mask",!0),d=Wt(o,"padding",0),l=Wt(u,"updateMode",0)),a&&(this.setMaskUpdateMode(l),this.enableChildrenMask(d),this.startMaskUpdate())}destroy(i){!this.scene||(this.childrenMask&&this.stopMaskUpdate(),this.child=void 0,this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),super.destroy(i))}setScrollMode(i){return typeof i=="string"&&(i=Ul[i.toLowerCase()]),this.scrollMode=i,this}setClampMode(i){return i===void 0&&(i=!0),this.clampChildOY=i,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?pt(this.child):Ct(this.child)}get childWidth(){return this.scrollMode===0?Ct(this.child):pt(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get visibleHeight(){var i,e=this.childHeight,c=this.instHeight;return e>c?i=e-c:i=0,i}childOYExceedTop(i){return i===void 0&&(i=this.childOY),i>this.topChildOY}childOYExeceedBottom(i){return i===void 0&&(i=this.childOY),i<this.bottomChildOY}get childOY(){return this._childOY}set childOY(i){var e=this.topChildOY,c=this.bottomChildOY,t=this.childOYExceedTop(i),s=this.childOYExeceedBottom(i);this.clampChildOY&&(this.instHeight>this.childHeight?i=0:t?i=e:s&&(i=c)),this._childOY!==i&&(this._childOY=i,this.resetChildPosition()),t&&(this.execeedTopState||this.emit("execeedtop",this,i,e)),this.execeedTopState=t,s&&(this.execeedBottomState||this.emit("execeedbottom",this,i,c)),this.execeedBottomState=s}setChildOY(i){return this.childOY=i,this}set t(i){this.childOY=-this.visibleHeight*i}get t(){var i=this.visibleHeight;return i===0?0:this.childOY/-i}setChildOYByPercentage(i){return this.t=i,this}}Object.assign(Fu.prototype,Ou);const as=Phaser.Utils.Objects.GetValue;class Iu extends tn{constructor(i,e){e===void 0&&(e={});var c=qs(e),t=as(e,"panel",void 0);t===void 0&&(t={}),t.scrollMode=c,t.clamplChildOY=as(e,"clamplChildOY",!1);var s=new Fu(i,t);i.add.existing(s);var u=as(t,"width",void 0),n=as(t,"height",void 0),h,o;c===0?(h=u===void 0?1:0,o=n===void 0):(h=n===void 0?1:0,o=u===void 0),e.type="rexScrollablePanel",e.child={gameObject:s,proportion:h,expand:o};var r=as(e,"space",void 0);r&&(r.child=r.panel);super(i,e);this.addChildrenMap("panel",this.childrenMap.child.child)}}et.register("scrollablePanel",function(x){var i=new Iu(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.ScrollablePanel",Iu);var vn={popUp:function(x,i){x.popUp(i)},scaleDown:function(x,i){x.scaleDown(i)},fadeIn:function(x,i){x.fadeIn(i)},fadeOut:function(x,i){x.fadeOut(i)}},Bu=function(x,i,e,c){e===void 0&&(e=0),c===void 0&&(c=i.length),x.length=c-e;for(var t=0,s=x.length;t<s;t++)x[t]=i[t+e];return x};const cn=Phaser.Utils.Objects.GetValue;var La=function(x,i,e){var c=cn(e,"reverse",!1),t;if(kt(x[0]))if(c)for(var u=x.length,s=u-1;s>=0;s--)t=La(x[s],i,e);else for(var s=0,u=x.length;s<u;s++)t=La(x[s],i,e);else t=WS(x,i,e);return t},WS=function(x,i,e){var c=cn(e,"argsConvert",void 0),t=cn(e,"argsConvertScope",void 0),s=x[0];if(We=Bu(We,x,1),c){c===!0&&(c=Zo,t=void 0);for(var u=0,n=We.length;u<n;u++)t?We[u]=c.call(t,We[u],x):We[u]=c(We[u],x)}var h;typeof s=="string"?(h=i[s],h==null&&(h=cn(i,s,null))):h=s;var o=h.apply(i,We);return o},We=[];const oe=Phaser.Utils.Objects.GetValue;class bS extends Zt{constructor(i,e){super(i,e);var c=oe(e,"clockClass",dh);this.clock=new c(i),this.clock.on("update",this.update,this),this.resetFromJSON(e)}resetFromJSON(i){return this.clock.resetFromJSON(oe(i,"clock",void 0)),this.state=oe(i,"state",0),this.commands=oe(i,"commands",[]),this.scope=oe(i,"scope",void 0),this.setTimeUnit(oe(i,"timeUnit",0)),this.setDtMode(oe(i,"dtMode",0)),this.index=oe(i,"index",0),this.nextTime=oe(i,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(i){this.isShutdown||(this.clock.shutdown(i),this.commands=void 0,super.shutdown(i))}load(i,e,c){this.stop();var t=oe(c,"timeUnit",void 0);t!==void 0&&this.setTimeUnit(t);var s=oe(c,"dtMode",void 0);return s!==void 0&&this.setDtMode(s),i=i.filter(function(u){var n=u[0];return!isNaN(n)}).map(function(u){var n=u[0];return typeof n=="string"&&(u[0]=parseFloat(u[0])),u}),this.dtMode===0&&i.sort(function(u,n){var h=u[0],o=n[0];return h>o?1:h<o?-1:0}),this.commands=i,this.scope=e,this}start(i){return i===void 0&&(i=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(i),this.update(i),this}pause(){return this.clock.pause(),this}resume(){return this.clock.resume(),this}stop(){return this.clock.stop(),this.state=0,this}seek(i){return this.clock.seek(i),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(i){this.clock.timeScale=i}setTimeScale(i){return this.timeScale=i,this}get now(){return this.clock.now}update(i){if(this.nextTime>i)return this;for(var e=this.commands.length-1;;){var c=this.commands[this.index],t=c[1];if(kt(t)||(t=Bu(HS,c,1)),La(t,this.scope),this.emit("runcommand",t,this.scope),this.index===e)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>i)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(i){var e=this.commands[this.index][0];return this.timeUnit===1&&(e=e*1e3),this.dtMode===1&&(e+=i),e}setDtMode(i){return typeof i=="string"&&(i=KS[i]),this.dtMode=i,this}setTimeUnit(i){return typeof i=="string"&&(i=$S[i]),this.timeUnit=i,this}}var HS=[];const $S={ms:0,s:1,sec:1},KS={abs:0,absolute:0,inc:1,increment:1},os=Phaser.Utils.Objects.GetValue;class Du extends Qs{constructor(i,e){e===void 0&&(e={text:createDefaultTextObject(i)});super(i,e);this.type="rexToast",this.setTransitInTime(os(e,"duration.in",200)),this.setDisplayTime(os(e,"duration.hold",1200)),this.setTransitOutTime(os(e,"duration.out",200)),this.setTransitInCallback(os(e,"transitIn",be.popUp)),this.setTransitOutCallback(os(e,"transitOut",be.scaleDown)),this.player=new bS(this,{dtMode:1}),this.messages=[],this.setVisible(!1)}destroy(i){!this.scene||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(i))}setDisplayTime(i){return this.displayTime=i,this}setTransitOutTime(i){return this.transitOutTime=i,this}setTransitInTime(i){return this.transitInTime=i,this}setTransitInCallback(i){switch(typeof i=="string"&&(i=be[i]),i){case be.popUp:i=vn.popUp;break;case be.fadeIn:i=vn.fadeIn;break}return this.transitInCallback=i,this}setTransitOutCallback(i){switch(typeof i=="string"&&(i=be[i]),i){case be.scaleDown:i=vn.scaleDown;break;case be.fadeOut:i=vn.fadeOut;break}return this.transitOutCallback=i,this}showMessage(i){if(i===void 0){if(this.messages.length===0)return this;i=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(i),this;this.setScale(1,1).setVisible(!0),typeof i=="string"?this.setText(i):i(this),this.layout();var e=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[De]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[De]]];return this.player.load(e,this).once("complete",function(){this.showMessage()},this).start(),this}}const be={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};et.register("toast",function(x){var i=new Du(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Toast",Du);var ZS=function(){return function(x,i,e,c){i!=="panel"&&e.setChildVisible(x,!0)}},JS=function(){return function(x,i,e,c){i!=="panel"&&e.setChildVisible(x,!1)}},QS={show:ZS,hide:JS},jS=function(x,i){return i===void 0&&(i=1),function(e,c,t,s){c!=="panel"&&t.fadeChild(e,s?0:x,i)}},kS=function(x,i){return i===void 0&&(i=0),function(e,c,t,s){c!=="panel"&&t.fadeChild(e,s?0:x,i)}},qS={show:jS,hide:kS},Gu=function(x,i){return function(e,c,t,s){c!=="panel"&&t.moveChild(e,s?0:x,i)}},_S={show:Gu,hide:Gu},wu=function(x,i){return function(e,c,t,s){c==="panel"&&t.moveChild(e,s?0:x,i)}},tE={show:wu,hide:wu};const Fa={visible:QS,fade:qS,move:_S,"move-panel":tE};var eE=function(x){var i,e;[i,...e]=typeof x=="string"?[x]:x;var c,t;return Fa.hasOwnProperty(i)?(c=Fa[i].show.apply(null,e),t=Fa[i].hide.apply(null,e)):(c=De,t=De),{show:c,hide:t}},iE={showChild(x,i){var e=this.sizerChildren[x];return e&&(this.emit("showchild",e,x,this,i),this.resetChildState(e)),this},hideChild(x,i){var e=this.sizerChildren[x];return e&&(this.emit("hidechild",e,x,this,i),this.resetChildState(e)),this},swapChild(x,i){return this.currentChildKey===x||(this.currentChildKey==="panel"||x==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=x,this.hideChild(this.previousChildKey,i),this.showChild(this.currentChildKey,i)):(this.swapChild("panel",i),this.swapChild(x,i))),this},showPanel(x){return this.swapChild("panel",x),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var x=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(x),this},toggleRightSide(){var x=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(x),this},toggleTopSide(){var x=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(x),this},toggleBottomSide(){var x=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(x),this}};const sE=$t.prototype.setChildVisible;var nE={setChildVisible(x,i){var e;if(typeof x=="string"){var e=x;x=this.sizerChildren[e]}else e=Hs(this.sizerChildren,x);return i===void 0&&(i=this.currentChildKey===e),sE.call(this,x,i),this}},rE={fadeChild(x,i,e){var c;return typeof x=="string"?(c=x,x=this.sizerChildren[c]):c=Hs(this.sizerChildren,x),i===void 0&&(i=500),e===void 0&&(e=this.currentChildKey===c?1:0),x.fadeIn(i,{start:x.alpha,end:e}),this},fadeChildPromise(x,i,e){return typeof x=="string"&&(x=this.sizerChildren[key]),this.fadeChild(x,i,e),x._fade?It(x._fade):Promise.resolve()}},aE={moveChild(x,i,e,c){var t;typeof x=="string"?(t=x,x=this.sizerChildren[t]):t=Hs(this.sizerChildren,x),i===void 0&&(i=500);var s=this.currentChildKey===t;if(c===void 0)switch(t){case"leftSide":case"rightSide":c=Ct(x);break;case"topSide":case"bottomSide":c=pt(x);break;default:if(s)switch(this.previousChildKey){case"leftSide":case"rightSide":c=Ct(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":c=pt(this.sizerChildren[this.previousChildKey]);break;default:c=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":c=Ct(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":c=pt(this.sizerChildren[this.currentChildKey]);break;default:c=0;break}break}var u,n,h,o;if(s)switch(t){case"panel":switch(this.previousChildKey){case"leftSide":u=!0;break;case"rightSide":n=!0;break;case"topSide":h=!0;break;case"bottomSide":o=!0;break}break;case"leftSide":n=!0;break;case"rightSide":u=!0;break;case"topSide":o=!0;break;case"bottomSide":h=!0;break}else switch(t){case"panel":switch(this.currentChildKey){case"leftSide":n=!0;break;case"rightSide":u=!0;break;case"topSide":o=!0;break;case"bottomSide":h=!0;break}break;case"leftSide":u=!0;break;case"rightSide":n=!0;break;case"topSide":h=!0;break;case"bottomSide":o=!0;break}return u?x.moveTo(i,`-=${c}`,void 0,e):n?x.moveTo(i,`+=${c}`,void 0,e):h?x.moveTo(i,void 0,`-=${c}`,e):o?x.moveTo(i,void 0,`+=${c}`,e):x.moveTo(0),this},moveChildPromise(x,i,e,c){return typeof x=="string"&&(x=this.sizerChildren[key]),this.moveChild(x,i,e,c),x._easeMove?It(x._easeMove):Promise.resolve()}},Nu={};Object.assign(Nu,nE,rE,aE);const bt=Phaser.Utils.Objects.GetValue;class Ia extends ti{constructor(i,e){super(i,e);this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var c=bt(e,"showChildCallback",void 0);if(c)if(Xs(c)){var t=bt(e,"showChildCallbackScope",void 0);this.on("showchild",c,t);var s=bt(e,"hideChildCallback",void 0),u=bt(e,"hideChildCallbackScope",void 0);this.on("hidechild",s,u)}else{var n=eE(c);this.on("showchild",n.show),this.on("hidechild",n.hide)}var h=bt(e,"background",void 0),o=bt(e,"panel",void 0),r=bt(e,"leftSide",void 0),a=bt(e,"rightSide",void 0),d=bt(e,"topSide",void 0),l=bt(e,"bottomSide",void 0);if(h&&this.addBackground(h),o&&this.add(o,"panel","center",0,!0),r){var f=bt(e,"expand.left",!0);this.add(r,"leftSide","left-top",0,{height:f})}if(a){var f=bt(e,"expand.right",!0);this.add(a,"rightSide","right-top",0,{height:f})}if(d){var f=bt(e,"expand.top",!0);this.add(d,"topSide","left-top",0,{width:f})}if(l){var f=bt(e,"expand.bottom",!0);this.add(l,"bottomSide","left-bottom",0,{width:f})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(Ia.prototype,iE,Nu);et.register("sides",function(x){var i=new Ia(this.scene,x);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Sides",Ia);const oE=Phaser.GameObjects.GameObject;var hs=function(x){return x instanceof oE};et.register("click",function(x,i){return hs(x)||(i=x,x=this.scene),new Ci(x,i)});st(window,"RexPlugins.UI.Click",Ci);et.register("tap",function(x,i){return hs(x)||(i=x,x=this.scene),new nn(x,i)});st(window,"RexPlugins.UI.Tap",nn);et.register("press",function(x,i){return hs(x)||(i=x,x=this.scene),new rn(x,i)});st(window,"RexPlugins.UI.Press",rn);et.register("swipe",function(x,i){return hs(x)||(i=x,x=this.scene),new es(x,i)});st(window,"RexPlugins.UI.Swipe",es);et.register("pan",function(x,i){return hs(x)||(i=x,x=this.scene),new eu(x,i)});st(window,"RexPlugins.UI.Pan",eu);et.register("pinch",function(x){return new ru(this.scene,x)});st(window,"RexPlugins.UI.Pinch",ru);et.register("rotate",function(x){return new pa(this.scene,x)});st(window,"RexPlugins.UI.Rotate",pa);const hE=Phaser.Utils.Objects.IsPlainObject,zu=Phaser.Utils.Objects.GetValue;var Vu=function(x,i,e){var c;if(x===void 0)x=e.texture.key,i=e.frame.name;else if(hE(x)){var t=x;x=zu(t,"key",e.texture.key),i=zu(t,"frame",e.frame.name)}else typeof x=="string"||(c=x);return c===void 0&&(c=function(s){s.setTexture(x,i)}),c};const ls=Phaser.Utils.Objects.GetValue,lE=Phaser.Utils.Objects.GetAdvancedValue,uE=Phaser.Math.Linear;class Yu extends xi{constructor(i,e){super(i,e);this.resetFromJSON(e),this.boot()}resetFromJSON(i){return super.resetFromJSON(i),this.setDuration(lE(i,"duration",500)),this.setEase(ls(i,"ease","Sine")),this.setOrientation(ls(i,"orientation",0)),this.setFrontFace(ls(i,"front",void 0)),this.setBackFace(ls(i,"back",void 0)),this.setFace(ls(i,"face",0)),this}setOrientation(i){return typeof i=="string"&&(i=fE[i]),this.orientation=i,this}get face(){return this._face}set face(i){typeof i=="string"&&(i=dE[i]),this._face=i,i===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):i===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(i){return this.face=i,this}toggleFace(){var i=this.face===0?1:0;return this.setFace(i),this}setFrontFace(i,e){return this.frontFaceCallback=Vu(i,e,this.parent),this}setBackFace(i,e){return this.backFaceCallback=Vu(i,e,this.parent),this}start(){return this.timer.isRunning?this:(this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this)}flip(i){return this.isRunning?this:(i!==void 0&&this.setDuration(i),this.start(),this)}updateGameObject(i,e){e.justRestart&&this.toggleFace();var c=e.t;e.isOddIteration&&(c=1-c),c=this.easeFn(c);var t=uE(1,0,c);this.orientation===0?i.scaleX=t:i.scaleY=t}}const fE={x:0,horizontal:0,y:1,vertical:1},dE={front:0,back:1};et.register("flip",function(x,i){return new Yu(x,i)});st(window,"RexPlugins.UI.Flip",Yu);et.register("touchEventStop",function(x,i){return new Fr(x,i)});st(window,"RexPlugins.UI.TouchEventStop",Fr);const Uu=Phaser.Math.Vector3,vE=Phaser.Math.Matrix4;var Xu=new Uu,Wu=new Uu,bu=new vE,cE=function(x,i,e,c,t,s,u){i===void 0&&(i=0),e===void 0&&(e=0),c===void 0&&(c=0),t===void 0&&(t=0),s===void 0&&(s=0),u===void 0&&(u=0),Xu.set(i,e,c),Wu.set(t,s,u),bu.fromRotationXYTranslation(Wu,Xu,!0);for(var n=0,h=x.vertices.length;n<h;n++)x.vertices[n].transformMat4(bu)};const pE=Phaser.GameObjects.Mesh,gE=Phaser.Utils.Objects.IsPlainObject,ai=Phaser.Utils.Objects.GetValue,xE=Phaser.Geom.Mesh.GenerateGridVerts,Ba=Phaser.Math.RadToDeg,pn=Phaser.Math.DegToRad,Hu=45,mE=1+1/Math.sin(pn(Hu));class yE extends pE{constructor(i,e,c,t,s,u){gE(e)&&(u=e,e=ai(u,"x",0),c=ai(u,"y",0),t=ai(u,"key",null),s=ai(u,"frame",null));super(i,e,c,t,s);this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(mE),this.hideCCW=ai(u,"hideCCW",!0);var n=ai(u,"gridWidth",32),h=ai(u,"girdHeight",n);this.resetVerts(n,h)}resetPerspective(){return this.setPerspective(this.width,this.height,Hu),this}resetVerts(i,e){if(i!==void 0&&(this.girdWidth=i),e!==void 0&&(this.girdHeight=e),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var c=this.frame.cutWidth,t=this.frame.cutHeight;return xE({mesh:this,texture:this.texture.key,frame:this.frame.name,width:c/this.height,height:t/this.height,widthSegments:Math.ceil(c/this.girdWidth),heightSegments:Math.ceil(t/this.girdHeight),flipY:this.frame.source.isRenderTexture}),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(i){this.modelRotation.x=i}get angleX(){return Ba(this.rotationX)}set angleX(i){this.rotationX=pn(i)}get rotationY(){return this.modelRotation.y}set rotationY(i){this.modelRotation.y=i}get angleY(){return Ba(this.rotationY)}set angleY(i){this.rotationY=pn(i)}get rotationZ(){return this.modelRotation.z}set rotationZ(i){this.modelRotation.z=i}get angleZ(){return Ba(this.rotationZ)}set angleZ(i){this.rotationZ=pn(i)}transformVerts(i,e,c,t,s,u){return cE(this,i,e,c,t,s,u),this}forceUpdate(){return this.dirtyCache[10]=1,this}}const TE=Phaser.GameObjects.RenderTexture,CE=Phaser.Utils.Objects.IsPlainObject,gn=Phaser.Utils.Objects.GetValue;class SE extends yE{constructor(i,e,c,t,s,u){CE(e)&&(u=e,e=gn(u,"x",0),c=gn(u,"y",0),t=gn(u,"width",32),s=gn(u,"height",32));var n=new TE(i,e,c,t,s).setOrigin(.5);super(i,e,c,n.texture.key,null,u);this.type="rexPerspectiveRenderTexture",this.rt=n}destroy(i){super.destroy(i),this.rt.destroy(i),this.rt=null}}Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Utils.Objects.IsPlainObject;const EE=Phaser.Math.DegToRad;EE(180);Phaser.Utils.Objects.GetValue;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Angle.ShortestBetween;Phaser.Math.Wrap;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Linear;Phaser.Math.Wrap;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;const $u=Phaser.Geom.Rectangle,PE=Phaser.Geom.Rectangle.Union;var ME=function(x,i){i===void 0?i=new $u:i===!0&&(Da===void 0&&(Da=new $u),i=Da);for(var e,c=!0,t=0,s=x.length;t<s;t++)e=x[t],!!e.getBounds&&(oi=e.getBounds(oi),c?(i.setTo(oi.x,oi.y,oi.width,oi.height),c=!1):PE(oi,i,i));return i},oi,Da,Fi=Phaser.Utils.Objects.GetValue,RE=function(x){var i=x.gameObjects,e=x.renderTexture;if(i.length===0)return e&&e.setSize(1,1).clear(),e;var c=Fi(x,"x",void 0),t=Fi(x,"y",void 0),s=Fi(x,"width",void 0),u=Fi(x,"height",void 0),n=Fi(x,"originX",0),h=Fi(x,"originY",0),o,r;if(s===void 0||u===void 0||c===void 0||t===void 0){var a=ME(i,!0),d=c!==void 0&&t!==void 0;d?(s=Math.max(c-a.left,a.right-c)*2,u=Math.max(t-a.top,a.bottom-t)*2,n=.5,h=.5):(c=a.x,t=a.y,s=a.width,u=a.height,n=0,h=0),o=a.x,r=a.y}else o=c+(0-n)*s,r=t+(0-h)*u;if(e)e.setPosition(c,t),(e.width!==s||e.height!==u)&&e.setSize(s,u);else{var l=i[0].scene;e=l.add.renderTexture(c,t,s,u)}return e.setOrigin(n,h),e.camera.setScroll(o,r),i=ms(di(i)),e.draw(i),e};const AE=$t.prototype.add,OE=Phaser.Utils.Objects.GetValue;class Ku extends SE{constructor(i,e){var c=i.scene;super(c,i.x,i.y,1,1,e);c.add.existing(this),this.setVisible(!1),AE.call(i,this),this.visibleSibling=[],this.perspectiveState=!1,this.useParentBounds=OE(e,"useParentBounds",!1),this.boot()}boot(){this.rexContainer.parent.once("destroy",this.onParentDestroy,this)}destroy(i){!this.scene||(this.exit(),this.rexContainer.parent.off("destroy",this.onParentDestroy,this),super.destroy(i))}onParentDestroy(i,e){this.destroy(e)}enter(){this.exit();var i=this.rexContainer.parent;return RE({gameObjects:i.getAllVisibleChildren(),renderTexture:this.rt,x:this.x,y:this.y,width:this.useParentBounds?i.displayWidth:void 0,height:this.useParentBounds?i.displayHeighth:void 0,originX:this.useParentBounds?i.originX:void 0,originY:this.useParentBounds?i.originY:void 0}),this.syncSize(),i.setChildVisible(this,!0),i.children.forEach(function(e){e!==this&&(i.setChildVisible(e,!1),this.visibleSibling.push(e))},this),this.perspectiveState=!0,this}exit(){var i=this.rexContainer.parent;return this.visibleSibling.forEach(function(e){i.setChildVisible(e,!0)},this),this.visibleSibling.length=0,i.setChildVisible(this,!1),this.perspectiveState=!1,this}}et.register("perspective",function(x,i){return new Ku(x,i)});st(window,"RexPlugins.UI.Perspective",Ku);et.register("anchor",function(x,i){return new gr(x,i)});st(window,"RexPlugins.UI.Anchor",gr);var LE=function(x,i){if(this.scene.scale.autoRound&&(x=Math.floor(x),i=Math.floor(i)),this.width===x&&this.height===i)return this;var e=this.node.style;return e.width=`${x}px`,e.height=`${i}px`,this.updateSize(),this};const FE=Phaser.Utils.Objects.GetValue;var Zu=function(x,i,e){e===void 0&&(e={});var c,t;for(var s in x)c=x[s],t=FE(i,s,c[1]),t!==void 0&&(e[c[0]]=t);return e},IE=function(x,i,e){for(let c in e)i[e[c]]=function(t){x.emit(c,x,t)}},BE=function(x){x.addEventListener("touchstart",Ii,!1),x.addEventListener("touchmove",Ii,!1),x.addEventListener("touchend",Ii,!1),x.addEventListener("mousedown",Ii,!1),x.addEventListener("mouseup",Ii,!1),x.addEventListener("mousemove",Ii,!1)},Ii=function(x){x.stopPropagation()};const DE=Phaser.GameObjects.DOMElement,Ju=Phaser.Utils.Objects.IsPlainObject,Oe=Phaser.Utils.Objects.GetValue;class Qu extends DE{constructor(i,e,c,t,s,u){Ju(e)?(u=e,e=Oe(u,"x",0),c=Oe(u,"y",0),t=Oe(u,"width",0),s=Oe(u,"height",0)):Ju(t)&&(u=t,t=Oe(u,"width",0),s=Oe(u,"height",0)),u===void 0&&(u={});var n,h=Oe(u,"type","text");h==="textarea"?(n=document.createElement("textarea"),n.style.resize="none"):(n=document.createElement("input"),n.type=h),Zu(ju,u,n);var o=Oe(u,"style",void 0);o=Zu(ku,u,o);var r=n.style;for(var a in u)a in ju||a in ku||a in r&&(o[a]=u[a]);o["box-sizing"]="border-box";super(i,e,c,n,o);this.type="rexInputText",this.resize(t,s),IE(this,n,wE),BE(n),Oe(u,"selectAll",!1)&&this.selectAll()}get text(){return this.node.value}set text(i){this.node.value=i}setText(i){return this.text=i,this}get maxLength(){return this.node.maxLength}set maxLength(i){this.node.maxLength=i}setMaxLength(i){return this.maxLength=i,this}get minLength(){return this.node.minLength}set minLength(i){this.node.minLength=i}setMinLength(i){return this.minLength=i,this}get placeholder(){return this.node.placeholder}set placeholder(i){this.node.placeholder=i}setPlaceholder(i){return this.placeholder=i,this}selectText(){return this.node.select(),this}get tooltip(){return this.node.title}set tooltip(i){this.node.title=i}setTooltip(i){return this.tooltip=i,this}setTextChangedCallback(i){return this.onTextChanged=i,this}get readOnly(){return this.node.readOnly}set readOnly(i){this.node.readOnly=i}setReadOnly(i){return i===void 0&&(i=!0),this.readOnly=i,this}get spellCheck(){return this.node.spellcheck}set spellCheck(i){this.node.spellcheck=i}setSpellCheck(i){return this.spellCheck=i,this}get fontColor(){return this.node.style.color}set fontColor(i){this.node.style.color=i}setFontColor(i){return this.fontColor=i,this}setStyle(i,e){return this.node.style[i]=e,this}getStyle(i){return this.node.style[i]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(i){return i===void 0&&(i=!0),this.node.disabled=!i,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}selectAll(){return this.node.select(),this}}var GE={resize:LE};Object.assign(Qu.prototype,GE);const ju={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},ku={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},wE={textchange:"oninput",click:"onclick",dblclick:"ondblclick",focus:"onfocus",blur:"onblur"},Le=Phaser.Utils.Objects.GetValue;var NE=function(x,i){i===void 0&&(i={});var e=x.scene,c=x.style,t=Le(i,"backgroundColor",c.backgroundColor);t===null&&(t="transparent"),i.text=Le(i,"text",x.text),i.fontFamily=Le(i,"fontFamily",c.fontFamily),i.fontSize=Le(i,"fontSize",c.fontSize),i.color=Le(i,"color",c.color),i.backgroundColor=t,i.direction=Le(i,"rtl",c.rtl)?"rtl":"ltr",i.align=Le(i,"align",zE(c)),i.direction==="rtl"&&Ca(x)&&(i.align="right");var s=new Qu(e,x.x,x.y,Le(i,"width",x.width),Le(i,"height",x.height),i);return s.setOrigin(x.originX,x.originY),e.add.existing(s),s},zE=function(x){return x.hasOwnProperty("align")?x.align:x.hasOwnProperty("halign")?x.halign:"left"};const xn=Phaser.Utils.Objects.GetValue;var Bi=void 0;class VE extends Zt{constructor(i){super(i,{eventEmitter:!1});this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0}shutdown(i){this.isShutdown||(this.close(),Bi===this&&(Bi=void 0),super.shutdown(i))}open(i,e){Bi!==void 0&&Bi.close(),Bi=this,Xs(i)&&(e=i,i=void 0),e===void 0&&(e=xn(i,"onClose",void 0));var c=xn(i,"onOpen",void 0),t=xn(i,"onTextChanged",void 0);return this.inputText=NE(this.parent,i).on("textchange",function(s){var u=s.text;t?t(this.parent,u):this.parent.text=u},this).setFocus(),this.parent.setVisible(!1),this.onClose=e,xn(i,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,function(){this.scene.input.once("pointerdown",this.close,this),c&&c(this.parent)},[],this),this}close(){return Bi=void 0,this.inputText?(this.parent.setVisible(!0),this.inputText.destroy(),this.inputText=void 0,this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this):this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}var YE=function(x,i,e){return x._edit||(x._edit=new VE(x)),x._edit.open(i,e),x._edit},UE=function(x){var i=function(e){var c=x.padding,t=e-c.left-c.right,s=x.style;return Ca(x)?(s.wordWrapWidth=t,s.maxLines=0):(s.wrapMode===0&&(s.wrapMode=1),s.wrapWidth=t,s.maxLines=0),x.setFixedSize(e,0),x};return i},XE=function(x){var i=function(e){return x.setFixedSize(e,0).runWordWrap(),x};return i},WE=function(x){var i=function(e){return x.setMaxWidth(e),x};return i},bE=function(x){return x instanceof Ui},HE=function(x,i){return i===void 0&&(i=0),x._minWidth=i,x.runWidthWrap=bE(x)?XE(x):vu(x)?WE(x):UE(x),x},qu=function(x,i,e){for(var c,t=0,s=x.length;t<s;t++)if(c=x[t],!!Sr(c,i,e))return c.pointToChild(i,e);return null},He=function(x,i,e,c,t,s){var u;t===void 0?u=c:u=qu(e,c,t),!!u&&x.emit(i,u,s)};const $E=Phaser.Utils.Objects.GetValue;var KE=function(x){var i=$E(x,"click",void 0);i!==!1&&(i===void 0&&(i={}),i.hasOwnProperty("threshold")||(i.threshold=10),this._click=new Ci(this,i),this._click.on("click",function(e,c,t){He(this.eventEmitter,`${this.input.eventNamePrefix}click`,this.input.targetSizers,t.x,t.y,t)},this))};const ZE=Phaser.Utils.Objects.GetValue;var JE=function(x){var i=ZE(x,"over",void 0);i!==!1&&this.on("pointermove",_u,this).on("pointerover",_u,this).on("pointerout",QE,this)},_u=function(x){var i=qu(this.input.targetSizers,x.x,x.y),e=this.input.lastOverChild;i&&e&&i===e||(this.input.lastOverChild=i,He(this.eventEmitter,`${this.input.eventNamePrefix}out`,this.input.targetSizers,e,void 0,x),He(this.eventEmitter,`${this.input.eventNamePrefix}over`,this.input.targetSizers,i,void 0,x))},QE=function(x){var i=this.input.lastOverChild;this.input.lastOverChild=null,He(this.eventEmitter,`${this.input.eventNamePrefix}out`,this.input.targetSizers,i,void 0,x)};const jE=Phaser.Utils.Objects.GetValue;var kE=function(x){var i=jE(x,"tap",void 0);i!==!1&&(this._tap=new nn(this,i),this._tap.on("tap",function(e,c,t){He(this.eventEmitter,`${this.input.eventNamePrefix}${e.tapsCount}tap`,this.input.targetSizers,e.x,e.y,t)},this))};const qE=Phaser.Utils.Objects.GetValue;var _E=function(x){var i=qE(x,"press",void 0);i!==!1&&(this._press=new rn(this,i),this._press.on("pressstart",function(e,c,t){He(this.eventEmitter,`${this.input.eventNamePrefix}pressstart`,this.input.targetSizers,e.x,e.y,t)},this).on("pressend",function(e,c,t){He(this.eventEmitter,`${this.input.eventNamePrefix}pressend`,this.input.targetSizers,e.x,e.y,t)},this))};const tP=Phaser.Utils.Objects.GetValue;var eP=function(x){var i=tP(x,"swipe",void 0);i!==!1&&(i===void 0&&(i={}),i.dir="4dir",this._swipe=new es(this,i),this._swipe.on("swipe",function(e,c,t){var s=e.left?"left":e.right?"right":e.up?"up":"down";He(this.eventEmitter,`${this.input.eventNamePrefix}swipe${s}`,this.input.targetSizers,e.x,e.y,t)},this))};const Ga=Phaser.Utils.Objects.GetValue;var iP=function(x,i){return x.setInteractive(),x.eventEmitter=Ga(i,"eventEmitter",x),x.input.targetSizers=Ga(i,"targets",[x]),x.input.eventNamePrefix=Ga(i,"inputEventPrefix","child."),KE.call(x,i),JE.call(x,i),kE.call(x,i),_E.call(x,i),eP.call(x,i),x},sP=function(x,i){var e=x.scene,c=new Ir(e,i);return e.add.existing(c),x.isRexContainerLite?x.moveDepthBelow(c):e.children.moveBelow(c,x),c},mn={popUp:function(x,i){Uh(x,i)},scaleDown:function(x,i){Xh(x,i,void 0,void 0,!1)},fadeIn:function(x,i){zs(x,i)},fadeOut:function(x,i){Vs(x,i,!1)}};class nP extends Ae{constructor(i,e){super(e);this.parent=i,this.init()}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var i=this.parent;i.transitionIn(),i.delayCall(i.transitInTime,this.next,this)}exit_TRANS_OPNE(){var i=this.parent;i.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var i=this.parent,e=i.displayTime;e>=0&&i.delayCall(e,i.requestClose,i),i.onOpen()}exit_OPEN(){var i=this.parent;i.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var i=this.parent;i.transitionOut(),i.delayCall(i.transitOutTime,this.next,this)}exit_TRANS_CLOSE(){var i=this.parent;i.removeDelayCall()}next_CLOSE(){}enter_CLOSE(){var i=this.parent;i.onClose()}exit_CLOSE(){}}const Fe=Phaser.Utils.Objects.GetValue,rP=Phaser.Time.TimerEvent;class aP extends Zt{constructor(i,e){super(i,e);var c=Fe(e,"cover");this.cover=c!==!1?sP(i,c):void 0;var t=Fe(e,"manualClose",!0);if(t)this.setDisplayTime(-1);else{this.setDisplayTime(Fe(e,"duration.hold",2e3));var s=Fe(e,"anyTouchClose",!0);s&&this.anyTouchClose()}this.setTransitInTime(Fe(e,"duration.in",200)),this.setTransitOutTime(Fe(e,"duration.out",200)),this.setTransitInCallback(Fe(e,"transitIn",$e.popUp)),this.setTransitOutCallback(Fe(e,"transitOut",$e.scaleDown)),this.destroyParent=Fe(e,"destroy",!0),this.timer=new rP,this._state=new nP(this,{eventEmitter:!1}),this.closeEventData=void 0,this._state.next()}get state(){return this._state.state}shutdown(i){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.requestClose,this),this.cover&&!i&&(this.cover.destroy(),this.cover=void 0),this.transitInCallback=void 0,this.transitOutCallback=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(i))}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.requestClose,this):this.scene.input.once("pointerup",this.requestClose,this),this}transitionIn(){var i=this.transitInTime;this.transitInCallback&&this.transitInCallback(this.parent,i);var e=this.cover;return e&&zs(e,i,e.alpha),this}transitionOut(){var i=this.transitOutTime;this.transitOutCallback&&this.transitOutCallback(this.parent,i);var e=this.cover;return e&&Vs(e,i,!1),this}onOpen(){this.emit("open",this.parent,this)}onClose(){this.emit("close",this.closeEventData),this.destroyParent?this.parent.destroy():this.destroy()}delayCall(i,e,c,t){return this.timer=this.scene.time.delayedCall(i,e,t,c),this}removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}setTransitInTime(i){return this.transitInTime=i,this}setDisplayTime(i){return this.displayTime=i,this}setTransitOutTime(i){return this.transitOutTime=i,this}setTransitInCallback(i){switch(typeof i=="string"&&(i=$e[i]),i){case $e.popUp:i=mn.popUp;break;case $e.fadeIn:i=mn.fadeIn;break}return this.transitInCallback=i,this}setTransitOutCallback(i){switch(typeof i=="string"&&(i=$e[i]),i){case $e.scaleDown:i=mn.scaleDown;break;case $e.fadeOut:i=mn.fadeOut;break}return this.transitOutCallback=i,this}requestClose(i){return this._state.state==="OPEN"&&(this.closeEventData=arguments.length>0?i:this.parent,this._state.next()),this}}const $e={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var tf=function(x,i){var e=new aP(x,i);return e.on("open",function(){x.emit("modal.open",e)}),e.on("close",function(c){x.emit("modal.close",c,e)}),x.on("modal.requestClose",e.requestClose,e),e.on("close",function(){x.off("modal.requestClose",e.requestClose,e)}),e},oP=function(x,i){var e=tf(x,i);return new Promise(function(c,t){e.once("close",function(s){c(s)})})};class hP extends Phaser.Plugins.ScenePlugin{constructor(i,e){super(i,e);this.add=new et(i)}start(){var i=this.scene.events;i.on("destroy",this.destroy,this)}isInTouching(i,e,c,t){return i.visible?tl(i,e,c,t):!1}get viewport(){return Vh(this.scene,!0)}}var lP={getParentSizer:Qe,getTopmostSizer:Fo,hide:Ve,show:ze,isShown:yr,edit:YE,wrapExpandText:HE,waitEvent:nh,waitComplete:It,setChildrenInteractive:iP,fadeIn:zs,fadeOutDestroy:Vs,easeMoveTo:Jh,easeMoveFrom:Qh,modal:tf,modalPromise:oP};Object.assign(hP.prototype,lP);export{uP as P,hP as U};
